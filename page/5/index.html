<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="John Doe">
    
    
    
    
    
    
    <title>Hexo</title>
    <!-- inject:style -->
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <!-- endinject -->
    <style>
        .cube-loading {
            top: 0;
            position: fixed;
            width: 100%;
            height: 100%;
            background: url('/images/lg/loading.gif') no-repeat center center;
            background-color: rgba(0,0,0,.7);
        }

        .cube-loading.out {
            display: none;
        }

        .cube-loading:before {
            display: block;
            content: 'Loading';
            position: relative;
            width: 100%;
            top: 50%;
            right: -50%;
            color: #fff;
        }

        @media(max-width: 768px) {
            .cube-loading:before {
                font-size: 1.2em;
                transform: translate(-24px,20px);
                -webkit-transform: translate(-24px,20px);
                -o-transform: translate(-24px,20px);
                -ms-transform: translate(-24px,20px);
            }
        }

        @media(min-width: 768px) {
            .cube-loading:before {

            }
        }
    </style>
    
<meta name="generator" content="Hexo 6.2.0"></head>
<body>
<div class="cube-body">
    <nav id="cube-top-memu" class="cube-menu">
    <ul class="cube-menu-collapse">
        
        <li>
            <i class="cube-icon cube-icon-home" aria-hidden="true"></i>
            <a href="/">é¦–é¡µ</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-archive" aria-hidden="true"></i>
            <a href="/archives">å½’æ¡£</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-categories" aria-hidden="true"></i>
            <a href="/categories">åˆ†ç±»</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-tags" aria-hidden="true"></i>
            <a href="/tags">æ ‡ç­¾</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-about" aria-hidden="true"></i>
            <a href="/about-me">å…³äºæˆ‘</a>
        </li>
        
    </ul>
</nav>
<nav class="cube-side-menu" id="cube-side-menu">
    <ul class="cube-menu-list">
        
        <li>
            <a class="lrc-control">Open Lyrics</a>
        </li>
        
        <li>
            <a class="scroll-to-top">Top</a>
        </li>
    </ul>
</nav>
    <header class="cube-header" id="cube-header">
    <img src=" https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2 " alt="å¤´éƒ¨èƒŒæ™¯å›¾ç‰‡">
    
    <div class="cube-type">
        <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
        <span class="cube-typed-cursor">|</span>
    </div>
    
</header>

    <style>
        nav.cube-menu:before {
            content: '';
            visibility: hidden;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 44px;
        
            filter: blur(5px);
            -webkit-filter: blur(5px);
        
            z-index: -1;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-repeat: no-repeat;
            background-position: center -356px;
            background-size: cover;
            background-color: transparent;
        }

        header.cube-background.cube-header-background {
            visibility: hidden;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-position: center -400px;
        }
    </style>
    <header class="cube-background cube-header-background">
        
        <div class="cube-type">
            <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
            <span class="cube-typed-cursor">|</span>
        </div>
        
    </header>
    <div class="load-header-background"></div>
    <script>
        (function (window) {

            window.headerModule = {}
            window.headerModule.image = {
                width: '2000',
                height: '1414'
            }

        })(window)
    </script>
    
    <div class="cube-content">
        <div class="cube-left">
            
<div class="cube-excerpt" id="cube-excerpt-webpacké«˜çº§">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/11/28/webpack/webpack%E9%AB%98%E7%BA%A7/">webpacké«˜çº§</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-11-28
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h1 id="webpacké«˜çº§ç¯‡"><a href="#webpacké«˜çº§ç¯‡" class="headerlink" title="webpacké«˜çº§ç¯‡"></a>webpacké«˜çº§ç¯‡</h1><p>å®Œå–„é…ç½®ä»¥åŠå¸¸ç”¨å¹¶å¼ºå¤§çš„å·¥å…·</p>
<h2 id="ä¸€-å¦‚ä½•æé«˜å¼€å‘æ•ˆç‡ä¸å®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ"><a href="#ä¸€-å¦‚ä½•æé«˜å¼€å‘æ•ˆç‡ä¸å®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ" class="headerlink" title="ä¸€.å¦‚ä½•æé«˜å¼€å‘æ•ˆç‡ä¸å®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ"></a>ä¸€.å¦‚ä½•æé«˜å¼€å‘æ•ˆç‡ä¸å®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ</h2><p><strong>source-map</strong><br>debug  å°†æ‰“åŒ…å¥½çš„bundle.jsé‡Œçš„æŠ¥é”™å†…å®¹å’Œæˆ‘ä»¬æºä»£ç index.jsæ–‡ä»¶è¿›è¡Œå…³è”<br>webpackå·²ç»å†…ç½®äº†source-mapçš„åŠŸèƒ½   åªè¦æˆ‘ä»¬ç®€å•çš„é…ç½®ä¸€ä¸‹å°±å¯ä»¥å¼€å¯å®ƒäº†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devtool:&quot;inline-source-map&quot;  //é€šè¿‡devtoolå»å¤åˆ¶ä¸€ä¸ªå€¼å°±å¯ä»¥å¼€å¯ source-map</span><br></pre></td></tr></table></figure>
<p>ä¸ƒç§source-mapï¼š<br><img src="http://hghqz.vip/webpack/source-map.jpg" alt="source-map" title="source-map"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">npm install webpack webpack-cli webpack-dev-server html-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<p>evalæ¨¡å¼ï¼šæ¯ä¸ªmoduleä¼šå°è£…åˆ°evalé‡ŒåŒ…è£¹èµ·æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ä¼šåœ¨æœ«å°¾è¿½åŠ æ³¨é‡Š &#x2F;&#x2F;@sourceURL<br>é»˜è®¤æƒ…å†µä¸‹ æ²¡æœ‰é…ç½®source-map  webpackä¼šå¸®åŠ©æˆ‘ä»¬åœ¨å¼€å‘ç¯å¢ƒä¸‹é¢å»è®¾ç½®ä¸€ä¸ªsource-mapé»˜è®¤å€¼ï¼Œevalã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šæ‰èƒ½ç²¾å‡†çš„é”å®šæˆ‘ä»¬ä»£ç çš„è¡Œæ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">devtool:false      // å…³é—­source-map   æµè§ˆå™¨é”å®šçš„æ˜¯åœ¨æ‰“åŒ…åbundle.jsæ–‡ä»¶ä¸­çš„ä½ç½®</span><br><span class="line">devtool:&#x27;eval&#x27;</span><br><span class="line">devtool:&#x27;source-map&#x27;    //å®ƒå¯ä»¥ç”Ÿæˆä¸€ä¸ªSourceMapæˆ‘æ–‡ä»¶å…¶ä»–çš„åŠŸèƒ½ä¼šä¿æŒevalçš„åŠŸèƒ½</span><br><span class="line">devtool:&#x27;hidden-source-map&#x27;  //å’Œsource-mapä¸€æ ·ï¼Œä½†ä¸ä¼šåœ¨bundleæœ«å°¾è¿½åŠ æ³¨é‡Š      é‚£ä¹ˆå°±ä¸èƒ½æœ‰é”å®šä»£ç è¡Œæ•°äº†   ä½†æ˜¯å®ƒä¼šç”Ÿæˆä¸€ä¸ª.mapæ–‡ä»¶  è¿ç€ä¸å…³è”äº†</span><br><span class="line">devtool:&#x27;inline-source-map&#x27;   //ç”Ÿæˆä¸€ä¸ªDataUrlå½¢å¼çš„SourceMapæ–‡ä»¶  æ²¡æœ‰mapæ–‡ä»¶äº†  æŒ‡å‘data64æ ¼å¼</span><br><span class="line">devtool:&#x27;eval-source-map&#x27;   // æ¯ä¸ªmoduleä¼šé€šè¿‡eval()æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ªDataUrlå½¢å¼çš„SourceMap</span><br><span class="line">devtool:&#x27;cheap-source-map&#x27;   // å®ƒä¼šç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯çš„SourceMapsæ–‡ä»¶ï¼Œä¸åŒ…å«loaderçš„sourcemap    åªä¿ç•™ä»£ç çš„è¡Œæ•°ä¸å»è®°å½•ä»£ç çš„åˆ—æ•°    å¯ä»¥å‡å°‘ç”Ÿæˆçš„mapæ–‡ä»¶çš„å¤§å°</span><br><span class="line">devtool:&#x27;cheap-module-source-map&#x27; //ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯çš„SourceMapsæ–‡ä»¶ï¼ŒåŒæ—¶loaderçš„sourcemapä¹Ÿè¢«ç®€åŒ–ä¸ºåªåŒ…å«å¯¹åº”è¡Œçš„ä¿¡æ¯ã€‚       **æ¨èä½¿ç”¨**</span><br></pre></td></tr></table></figure>

<p><strong>devServer</strong><br>åœ¨å¼€å‘ç¯å¢ƒä¸‹æˆ‘ä»¬å¾€å¾€è¦å¯åŠ¨ä¸€ä¸ªwebæœåŠ¡ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç”¨æˆ·ä»æµè§ˆå™¨ä¸­è®¿é—®æˆ‘ä»¬çš„webæœåŠ¡ï¼Œè¯»å–æˆ‘ä»¬çš„æ‰“åŒ…äº§ç‰©ï¼Œä»¥è§‚æµ‹æˆ‘ä»¬çš„ä»£ç åœ¨å®¢æˆ·ç«¯çš„è¡¨ç°ã€‚webpackå†…ç½®äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•çš„é…ç½®å°±å¯ä»¥å¼€å¯å®ƒäº†ã€‚<br>npm install webpack-dev-server -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">//ä¸ºäº†åœ¨æµè§ˆå™¨çœ‹åˆ°æ•ˆæœé…ç½®æ’ä»¶</span><br><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">devServer:&#123;</span><br><span class="line">	static: path.resolve(__dirname,&#x27;./dist&#x27;)  // æŒ‡å‘æˆ‘ä»¬å½“å‰æœåŠ¡çš„ç‰©ç†è·¯å¾„</span><br><span class="line">	compress:true  // å¯ä»¥è®¾ç½®æˆ‘ä»¬æ˜¯ä¸æ˜¯åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œä»£ç å‹ç¼© ä½¿ä»–åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯ä»¥å‡å°‘ä¼ è¾“çš„è¿™ä¸ªæ•°æ®çš„å¤§å°æµè§ˆå™¨è¯·æ±‚å¤´   Content-Encoding:gzip  ä¿è¯æˆ‘ä»¬ä»æœåŠ¡å™¨åˆ°æµè§ˆå™¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­è¿™ä¸ªæ–‡ä»¶æ˜¯å‹ç¼©çš„ã€‚ä»è€Œæé«˜æˆ‘ä»¬çš„ä¼ è¾“æ•ˆç‡ã€‚</span><br><span class="line">	port :3000  //  é…ç½®ç«¯å£å·</span><br><span class="line">	// æ·»åŠ å“åº”å¤´ åœ¨æœ‰äº›åœºæ™¯éœ€æ±‚ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡httpä¼ è¾“ç»™æˆ‘ä»¬æµè§ˆå™¨ï¼Œä¸ºæ‰€æœ‰å“åº”æ·»åŠ headersï¼Œæ¥å¯¹èµ„æºçš„è¯·æ±‚å’Œå“åº”æ‰“å…¥æ ‡å¿—ï¼Œä»¥ä¾¿åšä¸€äº›å®‰å…¨è§„èŒƒï¼Œæˆ–è€…æ–¹ä¾¿å‘ç”Ÿå¼‚å¸¸ååšè¯·æ±‚çš„é“¾è·¯è¿½è¸ª</span><br><span class="line">	headers:&#123;</span><br><span class="line">		&#x27;X-Access-token&#x27;:&#x27;å•Šå¸ˆå‚…æ’’å¤§é™„ä»¶æ˜¯è¾£çš„å›å¤&#x27;</span><br><span class="line">	&#125;</span><br><span class="line">	//å¼€å¯ä»£ç†ï¼Œåœ¨æˆ‘ä»¬æ‰“åŒ…å‡ºæ¥çš„js bundleé‡Œæœ‰æ—¶ä¼šå«æœ‰ä¸€äº›å¯¹ç‰¹å®šæ¥å£çš„ç½‘ç»œè¯·æ±‚(ajax/fetch),æ¯”å¦‚ï¼šæˆ‘ä»¬çš„å®¢æˆ·ç«¯åœ°å€å®åœ¨http://localhost:3000ä¸‹ï¼ŒåŠ å…¥æˆ‘ä»¬çš„æ¥å£æ¥è‡ªhttp://localhost:4001/,é‚£ä¹ˆæ¯«æ— ç–‘é—®ï¼Œæ­¤æ—¶çš„æ§åˆ¶å°ä¼šæŠ¥é”™æ¥æç¤ºä½ è·¨åŸŸã€‚  è§£å†³ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨devServerè‡ªå¸¦çš„proxyåŠŸèƒ½ã€‚</span><br><span class="line">	const http = require(&#x27;http&#x27;)</span><br><span class="line">	cosnt app = http.createServer((request,response)=&gt;&#123;</span><br><span class="line">		if (request.url===&#x27;/api/hello&#x27;)&#123;</span><br><span class="line">			response.end(&#x27;hello mode&#x27;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;) åˆ›å»ºæœåŠ¡</span><br><span class="line">	app.listen(9000ï¼Œ&#x27;æœåŠ¡å™¨çš„åå­—åŸŸålocalhostå¯ä»¥çœç•¥&#x27;,()=&gt;&#123;</span><br><span class="line">		console.log(&#x27;æé†’ç”¨æˆ·  9000ç«¯å£å¼€æ”¾&#x27;)</span><br><span class="line">	&#125;)  //ç›‘å¬app</span><br><span class="line">	node server.jså¯åŠ¨æœåŠ¡</span><br><span class="line">	fetch(&#x27;/api/hello&#x27;) //è¿”å›ä¸€ä¸ªpromise</span><br><span class="line">	.then(response=&gt;response.text) // å°†è¿”å›å†…å®¹å˜æˆä¸€ä¸ªæ–‡æœ¬</span><br><span class="line">	.then(reuslt=&gt;&#123;</span><br><span class="line">		console.log(&#x27;result&#x27;)</span><br><span class="line">	&#125;)</span><br><span class="line">	peoxyè§£å†³è·¨åŸŸ</span><br><span class="line">	proxy:&#123;  //proxyå¯¹è±¡ é‡Œè¾¹å¯ä»¥å†™å¾ˆå¤šçš„æ‰€è°“çš„è®¿é—®çš„è·¯å¾„ï¼ˆæš—å·ï¼‰</span><br><span class="line">		&#x27;/api&#x27;:&#x27;http://localhost:9000&#x27;  //å½“ç”¨æˆ·è¯·æ±‚èµ„æºä¸º/apiæ—¶  æŠŠå®ƒæŒ‡å‘åˆ°ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ä¸Šå»</span><br><span class="line">	&#125;</span><br><span class="line">	//  httpsé…ç½®  æˆ‘ä»¬åœ¨æœ¬åœ°è®¿é—®æ—¶å°†httpå˜ä¸ºhttps</span><br><span class="line">	https:true   //ç”±äºé»˜è®¤é…ç½®ä½¿ç”¨çš„æ—¶è‡ªç­¾åè¯ä¹¦  æ‰€ä»¥æœ‰å¾—æµè§ˆå™¨ä¼šå‘Šè¯‰ä½ æ—¶ä¸å®‰å…¨çš„ï¼Œä½†æˆ‘ä»¬ä¾ç„¶å¯ä»¥ç»§ç»­è®¿é—®å®ƒã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æä¾›è‡ªå·±çš„è¯ä¹¦</span><br><span class="line">	https:&#123;</span><br><span class="line">		cacert:&quot;./server.pem&quot;,</span><br><span class="line">		pfx:&quot;./server.pfx&quot;,</span><br><span class="line">		key:&quot;./server.key&quot;,</span><br><span class="line">		cert:&#x27;./server.crt&#x27;,</span><br><span class="line">		passphrase:&quot;webpack-dev-server&quot;,</span><br><span class="line">		requestCert:true</span><br><span class="line">	&#125;</span><br><span class="line">	// http2 è‡ªå¸¦httpsçš„è‡ªç­¾åè¯ä¹¦  ä»ç„¶å¯ä»¥é€šè¿‡httpsæ¥è®¿é—®æˆ‘ä»¬çš„é¡¹ç›®</span><br><span class="line">	http2:true</span><br><span class="line">	// historyApiFallback  å¦‚æœæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸ªSPAï¼ˆå•é¡µé¢åº”ç”¨ï¼‰ï¼Œä½†è·¯ç”±åˆ°/someæ—¶ï¼ˆå¯ä»¥ç›´æ¥åœ¨åœ°å€æ é‡Œè¾“å…¥ï¼‰ï¼Œä¼šå‘ç°æ­¤æ—¶åˆ·æ–°é¡µé¢åï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ã€‚  åŸå› ï¼šæµè§ˆå™¨æŠŠè¿™ä¸ªè·¯ç”±å½“ä½œäº†é™æ€èµ„æºåœ°å€å»è¯·æ±‚ï¼Œç„¶åæˆ‘ä»¬å¹¶æ²¡æœ‰æ‰“åŒ…å‡º/someè¿™æ ·çš„èµ„æºï¼Œæ‰€ä»¥è¿™ä¸ªè®¿é—®æ—¶404ã€‚  è§£å†³ï¼šå¯ä»¥é€šè¿‡é…ç½®æ¥æä¾›é¡µé¢ä»£æ›¿ä»»ä½•404çš„é™æ€èµ„æºã€‚</span><br><span class="line">	historyApiFallback:true</span><br><span class="line">	// æ­¤æ—¶é‡å¯æœåŠ¡åˆ·æ–°åå‘ç°è¯·æ±‚å˜æˆäº†index.htmlã€‚å½“ç„¶ï¼Œåœ¨å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„è®¿é—®è·¯å¾„å®šåˆ¶æ›¿ä»£çš„é¡µé¢ï¼Œ  å¯ä»¥ä½¿ç”¨rewritesè¿™ä¸ªé…ç½®é¡¹</span><br><span class="line">	historyApiFallback:&#123;</span><br><span class="line">		rewrites:[</span><br><span class="line">			&#123;form:/^\/$/,to:&#x27;asd.html&#x27;&#125;,  //æ­£åˆ™è·å–è·¯å¾„</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">	//å¼€å‘æœåŠ¡å™¨ä¸»æœº   å¦‚æœä½ åœ¨å¼€å‘ç¯å¢ƒä¸­èµ·äº†ä¸€ä¸ªdevserveræœåŠ¡ï¼Œå¹¶æœŸæœ›ä½ çš„åŒäº‹èƒ½è®¿é—®å®ƒï¼Œ</span><br><span class="line">	devServer:&#123;</span><br><span class="line">		host:0.0.0.0</span><br><span class="line">	&#125;//è¿™æ˜¯å¦‚æœä½ çš„åŒäº‹å’Œä½ å¤„äºä¸€ä¸ªå±€åŸŸç½‘çš„è¯ï¼Œå°±å¯ä»¥é€šè¿‡å±€åŸŸç½‘ipæ¥è®¿é—®ä½ çš„æœåŠ¡äº†</span><br><span class="line">&#125;</span><br><span class="line">plugins:[</span><br><span class="line">	new HtmlWebpackPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><strong>æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½</strong><br>æ¨¡å—çƒ­æ›¿æ¢ï¼š(HMR - hot module replacement)åŠŸèƒ½ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢ æ·»åŠ æˆ–åˆ é™¤ æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">devServer:&#123;</span><br><span class="line">	hot:true</span><br><span class="line">&#125;</span><br><span class="line">if (module.hot)&#123;</span><br><span class="line">	module.hot.accept(&#x27;./input.js&#x27;,()=&gt;&#123;</span><br><span class="line">		console.log(123)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line">//csså¹¶ä¸éœ€è¦åšè¿™ä¸ªå¼€å…³  æ˜¯å› ä¸ºcss-loaderå·²ç»å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™ä¸ªå·¥ä½œäº†</span><br></pre></td></tr></table></figure>
<p>çƒ­åŠ è½½ï¼ˆæ–‡ä»¶æ›´æ–°æ—¶ï¼Œè‡ªåŠ¨åˆ·æ–°æˆ‘ä»¬çš„æœåŠ¡å’Œé¡µé¢ï¼‰æ–°ç‰ˆçš„webpack-dev-serveré»˜è®¤å¼€å¯çƒ­åŠ è½½çš„åŠŸèƒ½ï¼Œå®ƒå¯¹åº”çš„å‚æ•°æ˜¯devServer.liveReload ,é»˜è®¤ä¸ºtrueã€‚  å¦‚æœæƒ³è¦å…³æ‰å®ƒ,liveReloadè¿™æ˜¯ä¸ºfalseåŒæ—¶ä¹Ÿè¦å…³æ‰hot</p>
<p><strong>Eslint</strong><br>eslintæ˜¯ç”¨æ¥æ‰«ææˆ‘ä»¬æ‰€å†™çš„ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒçš„å·¥å…·ï¼Œå¾€å¾€æˆ‘ä»¬çš„é¡¹ç›®æ˜¯å¤šäººåä½œå¼€å‘çš„ï¼Œæˆ‘ä»¬æœŸæœ›åŒä¸€çš„ä»£ç è§„èŒƒï¼Œè¿™æ—¶å€™å¯ä»¥è®©eslintæ¥å¯¹æˆ‘ä»¬è¿›è¡Œçº¦æŸã€‚ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œeslinté…ç½®è·Ÿwebpackæ— å…³ï¼Œä½†åœ¨å·¥ç¨‹åŒ–ç¯å¢ƒä¸­ï¼Œå®ƒå¾€å¾€æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚<br>npx exlint â€“init<br>ä¼šç»™æˆ‘ä»¬ä¸‰ä¸ªé€‰é¡¹ï¼ˆè¯´æ˜æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ç”¨é‚£ç§æ–¹å¼ï¼‰ï¼š1.ä»…ä»…æ£€æŸ¥è¯­æ³•é”™è¯¯ï¼Œ2.ä¸ä½†å¯ä»¥æ£€æŸ¥è¯­æ³•è€Œä¸”è¿˜å¯ä»¥å‘ç°é—®é¢˜ï¼Œ3.æ—¢å¯ä»¥æ£€æŸ¥è¯­æ³•ï¼Œå‘ç°é—®é¢˜ï¼Œè¿˜å¯ä»¥è§„èŒƒæˆ‘ä»¬ä»£ç çš„æ ¼å¼ã€‚<br>ä¹‹åæ˜¯é—®æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ°åº•ä½¿ç”¨é‚£ç§æ¨¡å—åŒ–çš„å¼€å‘æ–¹å¼ï¼š   es6  commonJS  ä»€ä¹ˆéƒ½ä¸ç”¨<br>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯é‚£ç§æ¡†æ¶ï¼šReact  Vue.js  æ²¡æœ‰ä½¿ç”¨   ç¬¬ä¸‰ç¯‡è®²è§£webpackå¦‚ä½•ä¸react  vueè¿›è¡Œåˆä½œ<br>é¡¹ç›®ä¸­æ˜¯å¦ä½¿ç”¨ts<br>ä»£ç æ˜¯è¿è¡Œåœ¨å“ªé‡Œçš„   browseræµè§ˆå™¨  è¿˜æ˜¯nodeåç«¯<br>åœ¨é¡¹ç›®ä¸­åˆ°åº•å¦‚ä½•å»é…ç½®ä»£ç è§„èŒƒ   1.é€‰æ‹©ä¸€äº›æµè¡Œçš„ä»£ç æ ¼å¼ï¼ˆä½¿ç”¨ç¬¬ä¸€ä¸ªï¼‰ï¼Œ 2.å®ç°ä¸€é—®ä¸€ç­”çš„æ–¹å¼æ¥é…ç½®ï¼Œ3.å¯¼å…¥ä¸€ä¸ªæˆ‘ä»¬è‡ªæœ‰çš„æ–‡ä»¶<br>é…ç½®æ–‡ä»¶æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹  javascript  yaml   json<br>ç”Ÿæˆ.eslintrc.jsonæ–‡ä»¶<br><img src="http://hghqz.vip/webpack/exlint%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9.jpg" alt="exlinté…ç½®é€‰é¡¹" title="exlinté…ç½®é€‰é¡¹"><br>envï¼šè„šæœ¬çš„è¿è¡Œç¯å¢ƒ<br>extends  ï¼šæ£€æŸ¥ä»£ç æ ¼å¼çš„æ–‡ä»¶<br>parserOptions ï¼š æŒ‡å®šecmaVersionçš„ç‰ˆæœ¬  sourceTypeï¼šmodule<br>rulesï¼šå¯ç”¨è§„åˆ™ä»¥åŠå„è‡ªçš„é”™è¯¯çº§<br>globalsï¼šå¯ä»¥åœ¨æ‰§è¡Œè„šæœ¬çš„æœŸé—´è®¿é—®ä¸€äº›é¢å¤–çš„å…¨å±€å˜é‡ï¼Œè¿™äº›å…¨å±€å˜é‡æ˜¯ä¸åœ¨ç¯å¢ƒä¸­å®šä¹‰çš„å˜é‡ã€‚<br>npx eslint æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶<br>ä½¿ç”¨vscode çš„eslintæ’ä»¶  å°±ä¼šå‘Šè¯‰æˆ‘ä»¬å“ªé‡Œä¸ç¬¦åˆè§„èŒƒ å‡ºç°äº†é—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;rules&quot;:&#123;</span><br><span class="line">		&quot;no-console&quot;:0, //å…³é—­no-consoleæç¤º</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“åˆwebpackæ¥å®ç°eslint<br>æˆ‘ä»¬æœŸæœ›eslintèƒ½å¤Ÿå®æ—¶æç¤ºæŠ¥é”™è€Œä¸å¿…ç­‰å¾…æ‰§è¡Œå‘½ä»¤ï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥é€šè¿‡ç»™è‡ªå·±çš„IDEï¼ˆä»£ç ç¼–è¾‘å™¨ï¼‰å®‰è£…å¯¹åº”çš„eslintæ’ä»¶æ¥å®ç°ï¼Œç„¶è€Œï¼Œä¸æ˜¯æ¯ä¸ªIDEéƒ½æœ‰æ’ä»¶ï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨æ’ä»¶ï¼Œåˆæƒ³å®ç°å®æ—¶æç¤ºæŠ¥é”™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»“åˆwebpackçš„æ‰“åŒ…ç¼–è¯‘åŠŸèƒ½æ¥å®ç°ã€‚<br>åœ¨æ‰“åŒ…jsæ–‡ä»¶ä¹‹å‰ï¼Œé€šè¿‡eslint-loaderä»¥åŠbabel-loaderæ¥è¿›è¡Œå¤„ç†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">devServer:&#123;</span><br><span class="line">	client:&#123;</span><br><span class="line">		overlay:false,   // æµè§ˆå™¨ä¸åœ¨æœ‰è¦†ç›–å±‚eslinté”™è¯¯æç¤º</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">module:&#123;</span><br><span class="line">	rules:[</span><br><span class="line">		&#123;</span><br><span class="line">			test:/\.js$/,</span><br><span class="line">			use:[&#x27;babel-loader&#x27;,&#x27;eslint-loader&#x27;]</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>git-hooksä¸husky</strong><br>ä¸ºäº†ä¿è¯å›¢é˜Ÿé‡Œçš„å¼€å‘äººå‘˜æäº¤çš„ä»£ç ç¬¦åˆè§„èŒƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘è€…ä¸Šä¼ ä»£ç çš„æ—¶å€™è¿›è¡Œæ ¡éªŒã€‚æˆ‘ä»¬å¸¸ç”¨huskyæ¥ååŠ©è¿›è¡Œä»£ç æäº¤æ—¶çš„eslintæ ¡éªŒã€‚åœ¨ä½¿ç”¨huskyå‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç ”ç©¶ä¸€ä¸‹git-hooks.<br>huskyæ—¶åŸºäºgit-hooks gitçš„é’©å­æ¥å®ç°çš„</p>
<p>git â€“version<br>git init<br>ls -la<br>.gitignore  åœ¨gitæäº¤æ—¶æœ‰ä¸€äº›æ–‡ä»¶ä¸éœ€è¦æäº¤<br>**&#x2F;node_modules<br>git status  æŸ¥çœ‹å½“å‰gitçš„çŠ¶æ€   å¯ä»¥çœ‹åˆ°æ–‡ä»¶éƒ½æ²¡æœ‰è¿›è¡Œæœ¬åœ°çš„ä»“åº“çš„æ·»åŠ çš„            å¯ä»¥æŸ¥çœ‹åˆ°ä¿®æ”¹äº†é‚£äº›æ–‡ä»¶<br>git add . æ·»åŠ åˆ°ç¼“å­˜åŒº   git commit -m â€˜initâ€™  æ‰€æœ‰ä»£ç æ·»åŠ åˆ°äº†æœ¬åœ°ä»“åº“   å¹¶æ²¡æœ‰å…³è”è¿œç«¯çš„ä»“åº“<br>cd .git  ls -la   cd hooks  ls -la<br>.sampleçš„æ‰©å±•åæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶éƒ½æ˜¯gitçš„hooks    hookå°±æ˜¯æˆ‘ä»¬åœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™éœ€è¦æå‰æˆ–è€…ä¹‹åå»æ‰§è¡Œçš„ä¸€äº›å‘½ä»¤è¿™äº›å‘½ä»¤æ—¶è‡ªåŠ¨æ‰§è¡Œçš„   åªè¦é…ç½®å¥½   gitä¼šå¸®åŠ©æˆ‘ä»¬è¿è¡Œã€‚<br>éœ€æ±‚ï¼šåœ¨æ¯æ¬¡gitæäº¤çš„æ—¶å€™æ¥æ£€æŸ¥ä»£ç çš„é—®é¢˜ã€‚   å¯ä»¥è¿è¡Œeslint  é’©å­å¯ä»¥é‡‡ç”¨pre-commit-sample<br>cat pre-commit-sample   æµè§ˆæ–‡ä»¶   å¦‚æœæƒ³è¦æŒ‡å®šå®ƒæˆ–è€…æ—¶è®©ä»–ç”Ÿæ•ˆæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ–‡ä»¶å  .sampleæ˜¯ä¸èƒ½èµ·ä½œç”¨çš„æˆ‘ä»¬æƒ³è¦èµ·ä½œç”¨å¿…é¡»é‡æ–°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶pre-commit<br>touch  pre-commit   è¿™ä¸ªæ–‡ä»¶æˆ‘ä»¬å°±å¯ä»¥äº‹å…ˆå†™ä¸€å†™shellè„šæœ¬  å½“commitå®è¡Œçš„æ—¶å€™è¿™äº›è„šæœ¬å°±ä¼šè¢«æå‰è¿è¡Œ<br>vim pre&#x3D;commit       &#x2F;&#x2F;ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶   iè¿›è¡Œè¾“å…¥  echo pre-commit   escé€€å‡º  :wq<br>ä¿®æ”¹æ–‡ä»¶çš„è¯»å†™æƒé™  chmod +x .&#x2F;pre-commit   &#x2F;&#x2F;æ·»åŠ å†™æƒé™<br>è„šæœ¬  ï¼š  d+dåˆ é™¤å½“å‰è¡Œ  iï¼ˆinsertï¼‰æ’å…¥   npx eslint .&#x2F;src<br>åœ¨å›¢é˜Ÿå¼€å‘æ—¶ä¸å¯¹ä»£ç åšä»»ä½•å¤„ç†    åªæœ‰åœ¨æˆ‘ä»¬ä»£ç æäº¤åˆ°gitä»“åº“æ—¶åœ¨è¿›è¡Œæ ¡éªŒ<br>é—®é¢˜ï¼šå¦‚æœæŠŠgitçš„é…ç½®æ”¾åœ¨.gitæ–‡ä»¶å¤¹é‡Œé‚£ä¸ªæ–‡ä»¶å¤¹æ¯ä¸ªäººçš„é…ç½®éƒ½æ˜¯ä¸ä¸€æ ·çš„   ä¹Ÿæ²¡æœ‰åŠæ³•æŠŠé…ç½®æ”¾åˆ°gitä»“åº“é‡Œ   é‚£æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªé…ç½®æ”¾ç½®åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹<br>æ–‡ä»¶ä»¥.å¼€å¤´è¡¨ç¤ºè¿™ä¸ªæ–‡ä»¶æ˜¯éšè—çš„<br>.mygithooks  .pre-commit   å¸Œæœ›æˆ‘ä»¬åœ¨gitæäº¤çš„æ—¶å€™è¯»å–çš„ä¸æ˜¯æˆ‘ä»¬åœ¨gité»˜è®¤çš„hooksé‡Œé¢é…ç½®çš„pre-commit è€Œæ˜¯è¯»å–æˆ‘ä»¬é¡¹ç›®ä¸­çš„pre-commit   é€šè¿‡gité…ç½®å®ç°   git config core.hooksPash .mygithooks  ä¼šè‡ªåŠ¨è¯»å–æ–‡ä»¶å¤¹ä¸­çº¦å®šå¥½çš„pre-commitè¿™ä¸ªæ–‡ä»¶å<br>vim .git&#x2F;config   &#x2F;&#x2F;æŸ¥çœ‹æˆ‘ä»¬åˆšæ‰é€šè¿‡å‘½ä»¤è¡Œæ·»åŠ çš„å‘½ä»¤<br>chmod +x .mygithooks&#x2F;pre-commit   ls -laæŸ¥çœ‹æ–‡ä»¶æƒé™<br>ç°åœ¨éƒ½æ˜¯é€šè¿‡æ‰‹å·¥å»å®Œæˆçš„    æˆ‘ä»¬å¯ä»¥é€šè¿‡ç°æˆçš„å·¥å…·(husky)æ¥å®Œæˆ<br>vim .git&#x2F;config   åˆ é™¤åˆšæ‰çš„é…ç½®<br>npm install husky -D<br>npx husky install &#x2F;&#x2F;æ‰§è¡Œ  è®©æˆ‘ä»¬çš„å‘½ä»¤è¡Œhookç”Ÿæ•ˆ   ä¼šåœ¨å½“å¤©ç›®å½•ä¸‹é¢åˆ›å»º.huskyæ–‡ä»¶å¤¹<br>è‡ªå·±é…ç½®ä¸€ä¸ªè„šæœ¬ â€œprepareâ€ : husky install  å®ƒä¼šå®ç°åˆ°æˆ‘ä»¬çš„ä¸€äº›å‘½ä»¤æ‰§è¡Œä¹‹å‰å»å®‰è£…æˆ‘ä»¬çš„husky<br>npx husky add .husky&#x2F;per-commit åœ¨.huskyä¸‹åˆ›å»ºpre-commitæ–‡ä»¶   npx eslint .&#x2F;src<br>æ·»åŠ æƒé™</p>
<h2 id="äºŒ-æ¨¡å—ä¸ä¾èµ–"><a href="#äºŒ-æ¨¡å—ä¸ä¾èµ–" class="headerlink" title="äºŒ.æ¨¡å—ä¸ä¾èµ–"></a>äºŒ.æ¨¡å—ä¸ä¾èµ–</h2><p>åœ¨æ¨¡å—åŒ–çš„ç¼–ç¨‹ä¸­  å¼€å‘è€…ä¼šå°†ç¨‹åºåˆ†è§£ä¸ºåŠŸèƒ½ç¦»æ•£çš„ä¸€äº›æ–‡ä»¶   æˆ‘ä»¬æŠŠè¿™äº›æ–‡ä»¶ç§°ä¹‹ä¸ºæ¨¡å—  æ¯ä¸ªæ¨¡å—éƒ½å¾ˆè½»é‡  è¿™ä½¿å¾—æˆ‘ä»¬é¡¹ç›®çš„éªŒè¯  è°ƒè¯•ä»¥åŠæµ‹è¯•ä¼šå˜å¾—è½»è€Œæ˜“ä¸¾ã€‚  è¿™äº›ç²¾å¿ƒç¼–å†™å¾—æ¨¡å—æä¾›äº†å¯é çš„æŠ½è±¡å’Œå°è£…ç•Œé™ã€‚ä½¿å¾—æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„æ¯ä¸ªæ¨¡å—éƒ½å…·å¤‡äº†è°ƒç†æ¸…æ™°çš„è®¾è®¡å’Œæ˜ç¡®çš„ç›®çš„ã€‚<br>nodejsä»ä¸€å¼€å§‹å°±æ”¯æŒæ¨¡å—åŒ–çš„ç¼–ç¨‹  ä½†æ˜¯æµè§ˆå™¨ç«¯çš„æ¨¡å—åŒ–è¿˜åœ¨ç¼“æ…¢çš„æ”¯æŒä¸­ã€‚å¤§å¤šæ•°æµè§ˆå™¨æ”¯æŒesmæ¨¡å—åŒ–ã€‚<br>èƒ½åœ¨webpackå·¥ç¨‹åŒ–çš„ç¯å¢ƒé‡ŒæˆåŠŸå¯¼å…¥çš„æ¨¡å—éƒ½åº”è¯¥è§†åšä¸ºwebpackæ¨¡å—ã€‚ä¸nodejsé¡¹ç›®webpackæ¨¡å—èƒ½ä»¥å„ç§æ–¹å¼æ¥è¡¨è¾¾å®ƒçš„åˆ©å®³å…³ç³»ã€‚<br>es6 import from          nodejs  module  require              AMD   define  require<br>css,scss,less,assetsè¿™äº›æ–‡ä»¶é‡Œçš„@importè¯­å¥     å’Œæ ·å¼é‡Œçš„urlèµ„æº  è¿™äº›éƒ½æ˜¯webpackåº”ç”¨çš„æ¨¡å—<br>webpackæ¨¡å—è§£æç®€æ˜“åŸç†ï¼šwebpackå°†js,css,less,scss,img,htmlç­‰æ–‡ä»¶  é€šè¿‡loader+module(å†…ç½®æ¨¡å—)  çš„æ–¹æ³•è§£ææˆæ¨¡å—åŒ–çš„æ–‡ä»¶ã€‚<br>è¿™ä¸ªæ‰“åŒ…ç¼–è¯‘çš„è§£æè¿‡ç¨‹æ˜¯æ€ä¹ˆå®Œæˆçš„ï¼šwebpackæ‰§è¡Œä¼šè¿”å›ä¸€ä¸ªæè¿°webpackæ‰“åŒ…ç¼–è¯‘çš„æ•´ä¸ªæµç¨‹çš„ä¸€ä¸ªå¯¹è±¡æˆ‘ä»¬å°†è¿™ä¸ªå¯¹è±¡ç§°ä¹‹ä¸ºcompiler,compilerå¯¹è±¡æè¿°çš„æ˜¯æ•´ä¸ªwebpackæ‰“åŒ…çš„æµç¨‹ï¼Œå®ƒå†…ç½®æ‰“åŒ…çŠ¶æ€ï¼Œéšç€æ‰“åŒ…è¿‡ç¨‹çš„è¿›è¡Œ  çŠ¶æ€ä¹Ÿå®æ–½çš„å‘ç”Ÿå˜åŒ–ã€‚åŒæ—¶ä¼šè§¦å‘ç›¸åº”çŠ¶æ€çš„webpackç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒç±»æ¯”æˆä¸€ä¸ªpromiseå¯¹è±¡ï¼Œè¿™ä¸ªçŠ¶æ€ä»æ‰“åŒ…å‰ï¼Œæ‰“åŒ…ä¸­åˆ°æ‰“åŒ…å®Œæˆæˆ–è€…æ‰“åŒ…å¤±è´¥éƒ½æ˜¯é€šè¿‡è¿™ä¸ªè¿‡ç¨‹å®Œæˆçš„ï¼Œæ¯ä¸€ä¸ªwebpackæ‰“åŒ…éƒ½æ˜¯åˆ›å»ºä¸€ä¸ªcompilerå¯¹è±¡ï¼Œå®ƒä¼šèµ°å®Œæ•´ä¸ªå£°æ˜å‘¨æœŸçš„è¿‡ç¨‹ã€‚è€Œwebpackä¸­æ‰€æœ‰çš„æ¨¡å—è§£æéƒ½æ˜¯compilerå¯¹è±¡å†…ç½®æ¨¡å—çš„è§£æå™¨å»åšçš„ï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡çš„å±æ€§resolversè§£æå™¨ä¸»é¢˜ä¸»é¢˜åŠŸèƒ½å°±æ˜¯è§£ææ¨¡å—å®ƒæ˜¯åŸºäºenhanced-resolveè¿™ä¸ªåŒ…æ¥å®ç°çš„ï¼Œåœ¨webpackä¸­æ— è®ºä½¿ç”¨æ€æ ·çš„æ¨¡å—å¼•ç”¨è¯­å¥æœ¬è´¨å…¶å®éƒ½æ˜¯è°ƒç”¨è¿™ä¸ªåŒ…çš„apiæ¥è¿›è¡Œæ¨¡å—çš„æ„å»ºè§£æçš„</p>
<p><strong>æ¨¡å—è§£æ(resolve)</strong><br>webpackæ˜¯é€šè¿‡Resolveså®ç°äº†æ¨¡å—ä¹‹é—´çš„ä¾èµ–å’Œå¼•ç”¨ã€‚åœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œwebpackä½¿ç”¨enhanced-resolveæ¥è§£ææ–‡ä»¶è·¯å¾„ï¼ˆwebpack_resolverçš„ä»£ç å®ç°å¾ˆæœ‰æ€æƒ³ï¼ŒwebpackåŸºäºæ¬¡è¿›è¡Œtreeshakingã€‚ï¼‰<br>webpackå¯ä»¥è§£æä¸‰ç§æ–‡ä»¶è·¯å¾„ï¼š1.ç»å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äºé¡¹ç›®çš„æ ¹ç›®å½•&#x2F;ï¼‰    2.ç›¸å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äºå½“å‰æ–‡ä»¶.&#x2F;ï¼‰    3.æ¨¡å—è·¯å¾„ï¼ˆå…¨å±€çš„node_modulesæ–‡ä»¶ï¼‰(ä¸ç”¨&#x2F;  æˆ–  .&#x2F;å®ƒä¼šè‡ªåŠ¨åˆ°node_modulesä¸­æ‰¾æ¨¡å—)<br>å¯ä»¥ç»™æŸä¸ªè·¯å¾„æˆ–æŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„ç›®å½•å»èµ·ä¸ªåˆ«å</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">resolve:&#123;</span><br><span class="line">	alias:&#123;</span><br><span class="line">		&#x27;@&#x27;: path.resulve(__dirname,&#x27;./src&#x27;)   // @æŒ‡å‘srcç›®å½•</span><br><span class="line">	&#125;,</span><br><span class="line">	extensions: [&#x27;.json&#x27;,&#x27;js&#x27;,&#x27;.vue&#x27;]   //ä¼˜å…ˆè¯·æ±‚ .jsonçš„åç¼€ã€‚(ä¸é…ç½®è¯¥é€‰é¡¹é»˜è®¤è¯·æ±‚.js)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¤–éƒ¨æ‰©å±•(Externals)</strong><br>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šä¸ºäº†å‡å°bundleçš„ä½“ç§¯ï¼Œä»è€ŒæŠŠä¸€äº›ä¸å˜çš„ç¬¬ä¸‰æ–¹åº“ç”¨cdnçš„å½¢å¼å¼•å…¥è¿›æ¥ï¼Œæ¯”å¦‚jqueryï¼šindex.htmlã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">externalsType:&#x27;script&#x27;,</span><br><span class="line">externals:&#123;   //ä»–æ˜¯ä¸€ä¸ªå¯¹è±¡   å¯ä»¥å»å®šä¹‰æˆ‘ä»¬çš„å¤–éƒ¨ä¸€äº›ç¬¬ä¸‰æ–¹åŒ…</span><br><span class="line">	jquery:&#x27;jQuery($)&#x27;      //key çš„åå­—ä¸€å®šè¦å’Œ  å…¶ä»–åœ°æ–¹å¼•ç”¨çš„æŠ¥åä¸€æ ·ï¼Œå€¼æ˜¯æˆ‘ä»¬åœ¨windowå¯¹è±¡ä¸Šé¢å»æš´éœ²çš„ä¸€ä¸ªå¯¹è±¡        // æ— æ³•æ­£å¸¸è¿è¡Œ  jqueryæ²¡æœ‰å®šä¹‰    éœ€è¦åœ¨index.htmlæ”¶åˆ°å¯¼å…¥scriptæ ‡ç­¾</span><br><span class="line">	jquery:[</span><br><span class="line">		&#x27;cdnåœ°å€&#x27;,   //jquery  scriptæ ‡ç­¾  å°†æ¥è¦æ”¾åˆ°çš„é¡µé¢çš„è¿æ¥</span><br><span class="line">		&#x27;jQuery($)&#x27;   //è¡¨ç¤º  è¿™ä¸ªscriptåœ¨æµè§ˆå™¨ä¸Šé¢æš´éœ²çš„ä¸€ä¸ªå¯¹è±¡</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¾èµ–å›¾(dependency graph)</strong><br>æ¯å½“ä¸€ä¸ªæ–‡ä»¶ä¾èµ–å¦ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œwebpackä¼šç›´æ¥å°†æ–‡ä»¶è§†ä¸ºå­˜åœ¨ä¾èµ–å…³ç³»ã€‚è¿™ä½¿å¾—webpackå¯ä»¥è·å–éä»£ç èµ„æºï¼Œå¦‚imageæˆ–webå­—ä½“ç­‰ï¼Œå¹¶ä¼šæŠŠä»–ä»¬ä½œä¸º ä¾èµ– æä¾›ç»™åº”ç”¨ç¨‹åºï¼Œå½“webpackå¼€å§‹å·¥ä½œæ—¶ï¼Œå®ƒä¼šæ ¹æ®æˆ‘ä»¬å†™å¥½çš„é…ç½®ï¼Œä» å…¥å£ï¼ˆentryï¼‰å¼€å§‹ï¼Œwebpackä¼šé€’å½’çš„æ„å»ºä¸€ä¸ª ä¾èµ–å…³ç³»å›¾ï¼Œè¿™ä¸ªä¾èµ–å…³ç³»å›¾åŒ…å«ç€åº”ç”¨ç¨‹åºä¸­æ‰€éœ€çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…ä¸ºbundle(ä¹Ÿå°±æ˜¯outputé…ç½®é¡¹)<br>å•çº¯å°†å¯èƒ½å¾ˆæŠ½è±¡ï¼Œæˆ‘ä»¬æ›´æœŸæœ›èƒ½å¤Ÿå¯è§†åŒ–æ‰“åŒ…äº§ç‰©çš„ä¾èµ–å›¾ï¼Œ  bundleåˆ†æå·¥å…·ï¼š<br>å®˜ç½‘åˆ†æå·¥å…·   ç¬¬ä¸‰æ–¹å·¥å…·ï¼šwebpack-chart   webpack-visualizer    webpack-bundle-analyzer    webpack bundle  optimize helper       bundle-stats<br><img src="http://hghqz.vip/webpack/bundle%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7.jpg" alt="bundleåˆ†æå·¥å…·" title="bundleåˆ†æå·¥å…·"><br>npm install webpack-bundle-analyzer -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const &#123; BundleAnalyzerPlugin &#125; = require(&#x27;webpack-bundle-analyzer&#x27;)</span><br><span class="line">plugins:&#123;</span><br><span class="line">	new BundleAnalyzerPlugin()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰-æ‰©å±•åŠŸèƒ½"><a href="#ä¸‰-æ‰©å±•åŠŸèƒ½" class="headerlink" title="ä¸‰.æ‰©å±•åŠŸèƒ½"></a>ä¸‰.æ‰©å±•åŠŸèƒ½</h2><p>PostCSSå’Œcssæ¨¡å—ï¼ŒWeb Works,Typescript<br><img src="http://hghqz.vip/webpack/PostCSs%E4%B8%8Ecss%E6%A8%A1%E5%9D%97.jpg" alt="PostCSSä¸cssæ¨¡å—" title="PostCSSä¸cssæ¨¡å—"></p>
<p>postcss : 1.å¯ä»¥ç»™æ ·å¼æ·»åŠ å‰ç¼€å…¼å®¹æµè§ˆå™¨   2.å¯ä»¥åœ¨æ ·å¼é‡Œä¹¦å†™ä¸€äº›å…³äºåµŒå¥—çš„åŠŸèƒ½  å®ƒå¯ä»¥ç¼–è¯‘æˆæµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„æ ·å¼ã€‚<br>cssæ¨¡å—ï¼šè§£å†³é¡µé¢classå¼•ç”¨æ¬¡æ•°å¤šï¼Œæˆ–å¼•ç”¨åˆ«äººçš„æ ·å¼ åé‡å¤ï¼Œå¯ä»¥ä½¿ç”¨cssæ¨¡å—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-loader -D</span><br><span class="line">npm install autoprefixer -D   //å¸®åŠ©æˆ‘ä»¬å»åŠ è½½ä¸€äº›æ ·å¼çš„å‰ç¼€</span><br><span class="line">webpack.config.js</span><br><span class="line">module:&#123;</span><br><span class="line">	rules:[</span><br><span class="line">		&#123;</span><br><span class="line">			test:/\.css$/,</span><br><span class="line">			use:[</span><br><span class="line">				&#x27;style-loader&#x27;,</span><br><span class="line">				&#x27;css-loader&#x27;,</span><br><span class="line">				&#x27;postcss-loader&#x27;</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br><span class="line">postcss.config.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">	plugins:[</span><br><span class="line">		require(&#x27;autoprefixer&#x27;),</span><br><span class="line">		require(&#x27;postcss-nested&#x27;)   //åµŒå¥—</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br><span class="line">package.json</span><br><span class="line">&quot;browerlist&quot;:[</span><br><span class="line">	&quot;&gt;1%&quot;,   //åº”ç”¨åœ¨å…¨çƒæµè§ˆå™¨å¤§äº1%çš„æµè§ˆå™¨ä¸Š</span><br><span class="line">	&quot;last 2 versions&quot;  //æ¯ä¸ªæµè§ˆå™¨çš„æœ€æ–°çš„ä¸¤ä¸ªç‰ˆæœ¬</span><br><span class="line">]</span><br><span class="line">// cssæ¨¡å—å®ç°</span><br><span class="line">rules:[</span><br><span class="line">	&#123;</span><br><span class="line">		test:/\.css$/,</span><br><span class="line">		use:[</span><br><span class="line">			&#x27;tyle-loader&#x27;,</span><br><span class="line">			&#123;</span><br><span class="line">				loader:&#x27;css-loader&#x27;,</span><br><span class="line">				options:&#123;</span><br><span class="line">					modules:true        //å¼€å¯cssæ¨¡å—</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			&#x27;postcss-loader&#x27;,</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">//è·å–hashå­—ç¬¦ä¸²  å°†cssæ–‡ä»¶å½“æˆä¸€ä¸ªæ¨¡å—</span><br><span class="line">import style from &#x27;./asasd.css&#x27;</span><br><span class="line">console.log(style)</span><br><span class="line">æ ·å¼ä¸ºï¼šstyle.classå</span><br><span class="line">é…ç½®éƒ¨åˆ†å¼€å¯cssæ¨¡å—  css moduleæ¨¡å¼  ï¼Œå…¨å±€æ ·å¼.globalä¸å¼€å¯cssæ¨¡å— ä¸åŒæ¨¡å¼ã€‚</span><br><span class="line"></span><br><span class="line">// css module</span><br><span class="line">&#123;</span><br><span class="line"> test: new RegExp(`^(?!.*\\.global).*\\.css`),</span><br><span class="line"> use: [</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;style-loader&#x27;</span><br><span class="line"> &#125;ï¼Œ</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;css-loader&#x27;,</span><br><span class="line">   options: &#123;</span><br><span class="line">    modules: true,</span><br><span class="line">    localIdentName: &#x27;[hash:base64:6]&#x27;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;postcss-loader&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">],</span><br><span class="line"> exclude:[path.resolve(__dirname, &#x27;..&#x27;, &#x27;node_modules&#x27;)]</span><br><span class="line">&#125;</span><br><span class="line">// æ™®é€šæ¨¡å¼</span><br><span class="line">&#123;</span><br><span class="line"> test: new RegExp(`^(.*\\.global).*\\.css`),</span><br><span class="line"> use: [</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;style-loader&#x27;</span><br><span class="line"> &#125;ï¼Œ</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;css-loader&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;postcss-loader&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">],</span><br><span class="line"> exclude:[path.resolve(__dirname, &#x27;..&#x27;, &#x27;node_modules&#x27;)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Web Works</strong><br>æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡Œå¤§é‡çš„è¿ç®—ï¼Œä½†åˆä¸æƒ³è®©å®ƒé˜»å¡æˆ‘ä»¬çš„jsä¸»çº¿ç¨‹ã€‚ä½ å¯èƒ½<br>ç¬¬ä¸€æ—¶é—´è€ƒè™‘åˆ°çš„æ˜¯å¼‚æ­¥ã€‚<br>ä½†äº‹å®ä¸Šï¼Œè¿ç®—é‡è¿‡å¤§(æ‰§è¡Œæ—¶é—´è¿‡é•¿)çš„å¼‚æ­¥ä¹Ÿä¼šé˜»å¡jsäº‹ä»¶å¾ªç¯ï¼Œç”šè‡³ä¼šå¯¼è‡´æµè§ˆ<br>å™¨å‡æ­»çŠ¶æ€ã€‚<br>è¿™æ—¶å€™ï¼ŒHTML5çš„æ–°ç‰¹æ€§ WebWorkerå°±æ´¾ä¸Šäº†ç”¨åœºã€‚<br>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬ç®€å•çš„äº†è§£ä¸‹è¿™ä¸ªç‰¹æ€§ã€‚<br>html5ä¹‹å‰ï¼Œæ‰“å¼€ä¸€ä¸ªå¸¸è§„çš„ç½‘é¡µï¼Œæµè§ˆå™¨ä¼šå¯ç”¨å‡ ä¸ªçº¿ç¨‹ï¼Ÿ<br>ä¸€èˆ¬è€Œè¨€ï¼Œè‡³å°‘å­˜åœ¨ä¸‰ä¸ªçº¿ç¨‹(å…¬ç”¨çº¿ç¨‹ä¸è®¡å…¥åœ¨å†…):<br>åˆ†åˆ«æ˜¯jså¼•æ“çº¿ç¨‹(å¤„ç†js)ã€GUIæ¸²æŸ“çº¿ç¨‹(æ¸²æŸ“é¡µé¢)ã€æµè§ˆå™¨äº‹ä»¶è§¦å‘çº¿ç¨‹(æ§åˆ¶äº¤<br>äº’)ã€‚<br>å½“ä¸€æ®µJSè„šæœ¬é•¿æ—¶é—´å ç”¨ç€å¤„ç†æœº,å°±ä¼šæŒ‚èµ·æµè§ˆå™¨çš„GUIæ›´æ–°ï¼Œè€Œåé¢çš„äº‹ä»¶å“åº”ä¹Ÿ<br>è¢«æ’åœ¨é˜Ÿåˆ—ä¸­å¾—ä¸åˆ°å¤„ç†ï¼Œä»è€Œé€ æˆäº†æµè§ˆå™¨è¢«é”å®šè¿›å…¥å‡æ­»çŠ¶æ€ã€‚<br>ç°åœ¨å¦‚æœé‡åˆ°äº†è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åšçš„ä¸ä»…ä»…æ˜¯ä¼˜åŒ–ä»£ç â€”â€”â€”â€”html5æä¾›äº†è§£<br>å†³æ–¹æ¡ˆï¼Œwebworkerã€‚<br>webWorkersæä¾›äº†jsçš„åå°å¤„ç†çº¿ç¨‹çš„APIï¼Œå®ƒå…è®¸å°†å¤æ‚è€—æ—¶çš„å•çº¯jsé€»è¾‘å¤„ç†æ”¾<br>åœ¨æµè§ˆå™¨åå°çº¿ç¨‹ä¸­è¿›è¡Œå¤„ç†ï¼Œè®©jsçº¿ç¨‹ä¸é˜»å¡UIçº¿ç¨‹çš„æ¸²æŸ“ã€‚<br>å¤šä¸ªçº¿ç¨‹é—´ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ç›¸åŒçš„æ–¹æ³•è¿›è¡Œæ•°æ®ä¼ é€’ã€‚<br>å®ƒçš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦å•ç‹¬å†™ä¸€ä¸ªjsè„šæœ¬ï¼Œç„¶åä½¿ç”¨new Workeræ¥åˆ›å»ºä¸€ä¸ªWorkçº¿ç¨‹å®<br>ä¾‹ã€‚<br>è¿™æ„å‘³ç€å¹¶ä¸æ˜¯å°†è¿™ä¸ªè„šæœ¬å½“åšä¸€ä¸ªæ¨¡å—å¼•å…¥è¿›æ¥ï¼Œè€Œæ˜¯å•ç‹¬å¼€ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ª<br>è„šæœ¬ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   loader: &#x27;css-loader&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;postcss-loader&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">],</span><br><span class="line"> exclude:[path.resolve(__dirname, &#x27;..&#x27;, &#x27;node_modules&#x27;)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;new Worker(scriptURL: string | URL, options?: WorkerOptions)<br>new Worker(â€œsomeWorker.jsâ€);</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå¸¸è§„æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„webpackå·¥ç¨‹åŒ–ç¯å¢ƒåªä¼šæ‰“åŒ…å‡ºä¸€ä¸ªbundle.jsï¼Œé‚£<br>æˆ‘ä»¬çš„workerè„šæœ¬æ€ä¹ˆåŠï¼Ÿ<br>ä¹Ÿè®¸ä½ ä¼šæƒ³åˆ°è®¾ç½®å¤šå…¥å£(Entry)å¤šå‡ºå£(ouotput)çš„æ–¹å¼ã€‚<br>äº‹å®ä¸Šä¸éœ€è¦é‚£ä¹ˆéº»çƒ¦ï¼Œwebpack4çš„æ—¶å€™å°±æä¾›äº†worker-loaderä¸“é—¨é…ç½®<br>webWorkerã€‚<br>ä»¤äººå¼€å¿ƒçš„æ˜¯ï¼Œwebpack5ä¹‹åå°±ä¸éœ€è¦ç”¨loaderå•¦ï¼Œå› ä¸ºwebpack5å†…ç½®äº†è¿™ä¸ªåŠŸ<br>èƒ½ã€‚<br>æˆ‘ä»¬æ¥è¯•éªŒä¸€ä¸‹ï¼š<br>ç¬¬ä¸€æ­¥<br>åˆ›å»ºä¸€ä¸ªworkè„šæœ¬ work.js,æˆ‘ä»¬ç”šè‡³ä¸éœ€è¦å†™ä»»ä½•å†…å®¹ï¼Œæˆ‘ä»¬çš„é‡ç‚¹ä¸æ˜¯<br>webWorkerçš„ä½¿ç”¨ï¼Œè€Œæ˜¯åœ¨webpackç¯å¢ƒä¸­ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ã€‚<br>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å†™ç‚¹ä»€ä¹ˆï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">self.onmessage = (&#123; data: &#123; question &#125; &#125;) =&gt; &#123;</span><br><span class="line"> self.postMessage(&#123;</span><br><span class="line">  answer: 42,</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ index.js ä¸­ä½¿ç”¨å®ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// ä¸‹é¢çš„ä»£ç å±äºä¸šåŠ¡é€»è¾‘</span><br><span class="line">const worker = new Worker(new URL(&#x27;./work.js&#x27;, import.meta.url));</span><br><span class="line">worker.postMessage(&#123;</span><br><span class="line"> question:</span><br><span class="line">  &#x27;hiï¼Œé‚£è¾¹çš„workderçº¿ç¨‹ï¼Œè¯·å‘Šè¯‰æˆ‘ä»Šå¤©çš„å¹¸è¿æ•°å­—æ˜¯å¤šå°‘ï¼Ÿ&#x27;,</span><br><span class="line">&#125;);</span><br><span class="line">worker.onmessage = (&#123; data: &#123; answer &#125; &#125;) =&gt; &#123;</span><br><span class="line"> console.log(answer);</span><br><span class="line">&#125;;</span><br><span class="line">åƒ</span><br></pre></td></tr></table></figure>
<p>(import.meta.urlè¿™ä¸ªå‚æ•°èƒ½å¤Ÿé”å®šæˆ‘ä»¬å½“å‰çš„è¿™ä¸ªæ¨¡å—â€”â€”æ³¨æ„ï¼Œå®ƒä¸èƒ½åœ¨<br>commonjsä¸­ä½¿ç”¨ã€‚)<br>è¿™æ—¶å€™æˆ‘ä»¬æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œä¼šå‘ç°,distç›®å½•ä¸‹é™¤äº†bundle.jsä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ª<br>xxx.bundle.js!<br>è¿™è¯´æ˜æˆ‘ä»¬çš„webpack5è‡ªåŠ¨çš„å°†è¢«new Workä½¿ç”¨çš„è„šæœ¬å•ç‹¬æ‰“å‡ºäº†ä¸€ä¸ªbundleã€‚<br>æˆ‘ä»¬åŠ ä¸Šåˆšæ‰çš„é—®ç­”ä»£ç ï¼Œæ‰§è¡Œnpm run devï¼Œå‘ç°å®ƒæ˜¯èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚<br>å¹¶ä¸”åœ¨networké‡Œä¹Ÿå¯ä»¥å‘ç°å¤šäº†ä¸€ä¸ªsrc_worker_js.bundle.jsã€‚<br>æ€»ç»“ï¼š<br>webpack5ä»¥æ¥å†…ç½®äº†å¾ˆå¤šåŠŸèƒ½ï¼Œè®©æˆ‘ä»¬ä¸éœ€è¦è¿‡å¤šçš„é…ç½®ï¼Œæ¯”å¦‚ä¹‹å‰è®²è¿‡çš„hotæ¨¡<br>å¼ï¼Œå’Œç°åœ¨çš„web workderã€‚</p>
<p><strong>Typescript</strong></p>
<p>åœ¨å‰ç«¯ç”Ÿæ€é‡Œï¼ŒTSæ‰®æ¼”ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²ã€‚<br>æˆ‘ä»¬ç›´å…¥æ­£é¢˜ï¼Œè®²ä¸‹å¦‚ä½•åœ¨webpackå·¥ç¨‹åŒ–ç¯å¢ƒä¸­é›†æˆTSã€‚<br>é¦–å…ˆï¼Œå½“ç„¶æ˜¯å®‰è£…æˆ‘ä»¬çš„tså’Œå¯¹åº”çš„loaderã€‚<br>npm install â€“save-dev typescript ts-loader</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªtsçš„é…ç½®æ–‡ä»¶â€”â€”â€”â€”tsconfig.jsonï¼Œæˆ‘ä»¬<br>å¯ä»¥ç”¨tsè‡ªå¸¦çš„å·¥å…·æ¥è‡ªåŠ¨åŒ–ç”Ÿæˆå®ƒã€‚<br>npx tsc â€“init<br>æˆ‘ä»¬å‘ç°ç”Ÿæˆäº†ä¸€ä¸ªtsconfig.jsonï¼Œé‡Œé¢æ³¨é‡Šæ‰äº†ç»å¤§å¤šæ•°é…ç½®ã€‚<br>ç°åœ¨ï¼Œæ ¹æ®æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ¥æ‰“å¼€å¯¹åº”çš„é…ç½®ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> &quot;compilerOptions&quot;: &#123;</span><br><span class="line">  &quot;outDir&quot;: &quot;./dist/&quot;,</span><br><span class="line">  &quot;noImplicitAny&quot;: true,</span><br><span class="line">  &quot;sourceMap&quot;: true,</span><br><span class="line">  &quot;module&quot;: &quot;es6&quot;,</span><br><span class="line">  &quot;target&quot;: &quot;es5&quot;,</span><br><span class="line">  &quot;jsx&quot;: &quot;react&quot;,</span><br><span class="line">  &quot;allowJs&quot;: true,</span><br><span class="line">  &quot;moduleResolution&quot;: &quot;node&quot; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> const path = require(&#x27;path&#x27;);</span><br><span class="line"> module.exports = &#123;</span><br><span class="line"> entry: &#x27;./src/index.ts&#x27;,</span><br><span class="line"> devtool: &#x27;inline-source-map&#x27;,</span><br><span class="line">åƒ</span><br></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ–°å¢ä¸€ä¸ªsrc&#x2F;index.tsï¼Œå†…ç½®ä¸€äº›å†…å®¹ã€‚<br>ç„¶åæˆ‘ä»¬åˆ«å¿˜äº†æ›´æ”¹æˆ‘ä»¬çš„entryåŠé…ç½®å¯¹åº”çš„loderã€‚<br>å½“ç„¶ï¼Œè¿˜æœ‰resolve.extensionsï¼Œå°†.tsæ”¾åœ¨.jsä¹‹å‰ï¼Œè¿™æ ·å®ƒä¼šå…ˆæ‰¾.tsã€‚<br>æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†sourceMapï¼Œä¸€å®šè®°å¾—å’Œä¸Šé¢çš„tsé…ç½®ä¸€æ ·ï¼Œè®¾ç½®<br>sourcemapä¸ºtrueã€‚<br>ä¹Ÿåˆ«å¿˜è®°åœ¨æˆ‘ä»¬çš„webpack.config.jsé‡Œï¼Œæ·»åŠ sourcemap,å°±åƒæˆ‘ä»¬ä¹‹å‰è¯¾ç¨‹é‡Œè®²çš„<br>é‚£æ ·ã€‚<br>æ›´æ”¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line"> module.exports = &#123;</span><br><span class="line"> entry: &#x27;./src/index.ts&#x27;,</span><br><span class="line"> devtool: &#x27;inline-source-map&#x27;,</span><br><span class="line"></span><br><span class="line">  module: &#123;</span><br><span class="line">   rules: [</span><br><span class="line">   &#123;</span><br><span class="line">     test: /\.(ts|tsx)$/,</span><br><span class="line">     use: &#x27;ts-loader&#x27;,</span><br><span class="line">     exclude: /node_modules/,</span><br><span class="line">   &#125;,</span><br><span class="line">  ],</span><br><span class="line"> &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">   extensions: [ &#x27;.tsx&#x27;, &#x27;.ts&#x27;, &#x27;.js&#x27; ],</span><br><span class="line"> &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">   filename: &#x27;bundle.js&#x27;,</span><br><span class="line">   path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°å®Œå…¨æ²¡æœ‰é—®é¢˜å‘¢ï¼<br>ä½¿ç”¨ç¬¬ä¸‰æ–¹ç±»åº“<br>åœ¨ä» npm ä¸Šå®‰è£…ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¸€å®šè¦è®°å¾—åŒæ—¶å®‰è£…è¿™ä¸ªåº“çš„ç±»å‹å£°æ˜æ–‡ä»¶(typing<br>definition)ã€‚<br>æˆ‘ä»¬å¯ä»¥ä» TypeSearchä¸­æ‰¾åˆ°å¹¶å®‰è£…è¿™äº›ç¬¬ä¸‰æ–¹åº“çš„ç±»å‹å£°æ˜æ–‡ä»¶(<a target="_blank" rel="noopener" href="https://www.ty/">https://www.ty</a><br>pescriptlang.org&#x2F;dt&#x2F;search?search&#x3D;) ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæƒ³å®‰è£… lodash ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š<br>npm install â€“save-dev @types&#x2F;lodash</p>
<p>eslint &amp; ts<br>æ³¨æ„ï¼Œå¦‚æœè¦ä½¿ç”¨eslintï¼Œä½¿ç”¨åˆå§‹åŒ–å‘½ä»¤çš„æ—¶å€™ï¼Œè®°å¾—é€‰æ‹©â€œä½¿ç”¨äº†typesctiptâ€ã€‚<br>å¦‚æœå·²ç»é…ç½®äº†eslintï¼Œä½†æ²¡æœ‰é…ç½®tsç›¸å…³çš„é…ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å¯¹åº”çš„<br>plugin<br>æ³¨æ„å¦‚æœéœ€è¦ç”¨åˆ°reactçš„è¯ï¼Œè®°å¾—ä¹Ÿè¦å®‰è£…</p>
<p>yarn add -D  @typescript-eslint&#x2F;eslint-plugin@latest</p>
<p>vueæˆ–è€…å…¶ä»–å¸¸ç”¨æ¡†æ¶åŒæ ·å¦‚æ­¤ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä¸“é—¨çš„pluginã€‚<br>ç„¶åæˆ‘ä»¬é˜Ÿ.esilntrcè¿›è¡Œæ›´æ”¹~</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;env&quot;: &#123;</span><br><span class="line">    &quot;browser&quot;: true,</span><br><span class="line">    &quot;es2021&quot;: true</span><br><span class="line"> &#125;,</span><br><span class="line">  &quot;extends&quot;: [</span><br><span class="line">    &quot;eslint:recommended&quot;, // å¦‚æœéœ€è¦reactçš„è¯</span><br><span class="line">    &quot;plugin:react/recommended&quot;,</span><br><span class="line">    &quot;plugin:@typescript-eslint/recommended&quot;</span><br><span class="line"> ],</span><br><span class="line">  &quot;parser&quot;: &quot;@typescript-eslint/parser&quot;,</span><br><span class="line">  &quot;parserOptions&quot;: &#123;</span><br><span class="line">    &quot;ecmaFeatures&quot;: &#123;</span><br><span class="line">      &quot;jsx&quot;: true</span><br><span class="line">   &#125;, // å¦‚æœéœ€è¦reactçš„è¯</span><br><span class="line">    &quot;ecmaVersion&quot;: 13,</span><br><span class="line">    &quot;sourceType&quot;: &quot;module&quot;</span><br><span class="line"> &#125;,</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    &quot;react&quot;,</span><br><span class="line">    &quot;@typescript-eslint&quot;</span><br><span class="line"> ],</span><br><span class="line">  &quot;rules&quot;: &#123;</span><br><span class="line">   // ...ä¸€äº›è‡ªå®šä¹‰çš„rules</span><br><span class="line">    &quot;no-console&quot;: &quot;error&quot;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œnpm run eslintè¯•ä¸€ä¸‹ï¼</p>
<h2 id="å››-å¤šé¡µé¢åº”ç”¨"><a href="#å››-å¤šé¡µé¢åº”ç”¨" class="headerlink" title="å››.å¤šé¡µé¢åº”ç”¨"></a>å››.å¤šé¡µé¢åº”ç”¨</h2><p><strong>entryé…ç½®</strong><br>åœ¨å®é™…é¡¹ç›®çš„å¼€å‘ä¸­ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿä¸ä¼šå°†æ‰€æœ‰çš„åŠŸèƒ½éƒ½æ”¾åœ¨ä¸€ä¸ªç½‘é¡µä¸Šï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´ç½‘é¡µçš„æ€§èƒ½ä¸ä½³ï¼Œå®é™…å¯ä»¥æŒ‰ç…§åŠŸèƒ½æ¨¡å—åˆ’åˆ†å¤šä¸ªå•é¡µåº”ç”¨æ¯ä¸ªå•é¡µåº”ç”¨åˆç”Ÿå¤„ä¸€ä¸ªhtmlæ–‡ä»¶å¹¶ä¸”éšç€ä¸šåŠ¡çš„å‘å±•æ›´å¤šçš„å•é¡µåº”ç”¨å¯ä»¥è¢«é€æ¸çš„åŠ å…¥åˆ°è¿™ä¸ªé¡¹ç›®é‡Œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">entry: [&#x27;./src/file_1.js&#x27;, &#x27;./src/file_2.js&#x27;ï¼Œ&#x27;node_modulesé‡Œçš„æ¨¡å— lodash&#x27;],</span><br><span class="line">entry:&#123;</span><br><span class="line">	main:[&#x27;./src/file_1.js&#x27;, &#x27;./src/file_2.js&#x27;],    //è¿™é‡Œä½¿ç”¨lodash  è¿˜ä¼šæ‰“åŒ…åœ¨è¿™é‡Œæ‰“åŒ…ä¸€é</span><br><span class="line">	lodash:&#x27;lodash&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">entry:&#123;</span><br><span class="line">	main:&#123;</span><br><span class="line">	import :[&#x27;./src/file_1.js&#x27;, &#x27;./src/file_2.js&#x27;],  //è¿™ä¸¤ä¸ªæ–‡ä»¶å¯èƒ½ä¾èµ–äºlodashï¼Œè€Œlodashå•ç‹¬æ‰“åŒ…äº†ï¼Œæ‰€ä»¥dependOnè¿™ä¸ªä¾èµ–å¯ä»¥æŠŠå…¬å…±çš„lodashç»™æŠ½ç¦»å‡ºæ¥            lodash  å°±ä¸ä¼šåœ¨æ‰“åŒ…ä¸€éäº†</span><br><span class="line">	dependOn:&#x27;lodash&#x27;,           // åšä¾èµ–  è¿™é‡Œçš„lodash  æ˜¯ä¸‹é¢çš„å¯¹åº”å  å¯ä»¥éšæ„èµ·</span><br><span class="line">	&#125;,    //è¿™é‡Œä½¿ç”¨lodash  è¿˜ä¼šæ‰“åŒ…åœ¨è¿™é‡Œæ‰“åŒ…ä¸€é</span><br><span class="line">	lodash:&#x27;lodash&#x27;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹è±¡è¯­æ³•ä¼šæ¯”è¾ƒç¹çã€‚ç„¶è€Œï¼Œè¿™æ˜¯åº”ç”¨ç¨‹åºä¸­å®šä¹‰å…¥å£çš„æœ€å¯æ‰©å±•çš„æ–¹å¼ã€‚<br>æè¿°å…¥å£çš„å¯¹è±¡ï¼š<br>ç”¨äºæè¿°å…¥å£çš„å¯¹è±¡ã€‚ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å±æ€§ï¼š<br>dependOn : å½“å‰å…¥å£æ‰€ä¾èµ–çš„å…¥å£ã€‚å®ƒä»¬å¿…é¡»åœ¨è¯¥å…¥å£è¢«åŠ è½½å‰è¢«åŠ è½½ã€‚<br>filename : æŒ‡å®šè¦è¾“å‡ºçš„æ–‡ä»¶åç§°ã€‚<br>import : å¯åŠ¨æ—¶éœ€åŠ è½½çš„æ¨¡å—ã€‚<br>library : æŒ‡å®š library é€‰é¡¹ï¼Œä¸ºå½“å‰ entry æ„å»ºä¸€ä¸ª libraryã€‚<br>runtime : è¿è¡Œæ—¶ chunk çš„åå­—ã€‚å¦‚æœè®¾ç½®äº†ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿è¡Œæ—¶<br>chunkã€‚åœ¨ webpack 5.43.0 ä¹‹åå¯å°†å…¶è®¾ä¸º false ä»¥é¿å…ä¸€ä¸ªæ–°çš„è¿è¡Œæ—¶<br>chunkã€‚<br>publicPath : å½“è¯¥å…¥å£çš„è¾“å‡ºæ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­è¢«å¼•ç”¨æ—¶ï¼Œä¸ºå®ƒä»¬æŒ‡å®šä¸€ä¸ªå…¬å…±<br>URL åœ°å€ã€‚è¯·æŸ¥çœ‹ output.publicPathã€‚<br>webpack.config.js<br>runtime å’Œ dependOn ä¸åº”åœ¨åŒä¸€ä¸ªå…¥å£ä¸ŠåŒæ—¶ä½¿ç”¨ï¼Œæ‰€ä»¥å¦‚ä¸‹é…ç½®æ— æ•ˆï¼Œå¹¶ä¸”ä¼š<br>æŠ›å‡ºé”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  a2: &#x27;dependingfile.js&#x27;,</span><br><span class="line">  b2: &#123;</span><br><span class="line">   dependOn: &#x27;a2&#x27;,</span><br><span class="line">   import: &#x27;./src/app.js&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  a2: &#x27;./a&#x27;,</span><br><span class="line">  b2: &#123;</span><br><span class="line">   runtime: &#x27;x2&#x27;,</span><br><span class="line">   dependOn: &#x27;a2&#x27;,</span><br><span class="line">   import: &#x27;./b&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿ runtime ä¸èƒ½æŒ‡å‘å·²å­˜åœ¨çš„å…¥å£åç§°ï¼Œä¾‹å¦‚ä¸‹é¢é…ç½®ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  a1: &#x27;./a&#x27;,</span><br><span class="line">  b1: &#123;</span><br><span class="line">   runtime: &#x27;a1&#x27;,</span><br><span class="line">   import: &#x27;./b&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å¦å¤– dependOn ä¸èƒ½æ˜¯å¾ªç¯å¼•ç”¨çš„ï¼Œä¸‹é¢çš„ä¾‹å­ä¹Ÿä¼šå‡ºç°é”™è¯¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  a3: &#123;</span><br><span class="line">   import: &#x27;./a&#x27;,</span><br><span class="line">   dependOn: &#x27;b3&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">  b3: &#123;</span><br><span class="line">   import: &#x27;./b&#x27;,</span><br><span class="line">   dependOn: &#x27;a3&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>é…ç½®index.htmlæ¨¡æ¿</strong><br>è¦ç”Ÿæˆå¤šä¸ªHTMLæ–‡ä»¶ï¼Œè¯·åœ¨æ’ä»¶æ•°ç»„ä¸­å¤šæ¬¡å£°æ˜æ’ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line"> 	main:&#123;</span><br><span class="line">		import :[],</span><br><span class="line">		dependOn:&#x27;lodash2&#x27;,</span><br><span class="line">		filename:&#x27;chanel1.[name].js&#x27;</span><br><span class="line">	&#125;,</span><br><span class="line">	lodash2:&#123;</span><br><span class="line">		import :&#x27;lodash&#x27;,</span><br><span class="line">		filename:&#x27;common/[name].js&#x27;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(), // Generates default index.html</span><br><span class="line">  new HtmlWebpackPlugin(&#123;  // Also generate a test.html</span><br><span class="line">   title:   &#x27;ejs&#x27;,     //åœ¨é¡µé¢å¯ä»¥ä½¿ç”¨ejsæ¨¡æ¿è¯­æ³•è·å–æ•°æ®</span><br><span class="line">   filename: &#x27;chanel1/test.html&#x27;,                      //æ‰§è¡Œæ‰“åŒ…åçš„é¡µé¢æ–‡ä»¶     è¾“å‡ºçš„æ–‡ä»¶å</span><br><span class="line">   template: &#x27;src/assets/test.html&#x27;       //æŒ‡å®šæ¨¡æ¿çš„è·¯å¾„</span><br><span class="line">   inject:&#x27;body/head&#x27;,                       // å®šä¹‰å½“å‰æ‰€ç”Ÿæˆçš„scriptæ ‡ç­¾çš„ä½ç½®</span><br><span class="line">   chunks:[&#x27;è‡ªå®šä¹‰é‚£ä¸ªå…¥å£  å¦‚ï¼šmain.js&#x27;]ï¼Œ              //è§„å®šå½“å‰é¡µé¢åˆ°åº•æ‰“åŒ…é‚£äº›chunk   å¦‚ä½•å®ç°å¤šä¸ªé¡µé¢å»è½½å…¥ä¸åŒçš„chunk   chunkå°±æ˜¯æˆ‘ä»¬åœ¨è·¯å£é…ç½®çš„é¡¹    æ¯ä¸€é¡¹å°±æ˜¯ä¸€ä¸ªchunk  é»˜è®¤ä¼šæŠŠæ‰€æœ‰chunkéƒ½æ”¾è¿›å»</span><br><span class="line">   publicPash:&#x27;http://www.a.com/&#x27;        //åŒ…çš„å‰ç¼€</span><br><span class="line"> &#125;)</span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title  %&gt;&lt;/title&gt;  options.å°±æ˜¯æˆ‘ä»¬åœ¨HtmlWebpackPluginå®šåˆ¶çš„é€‰é¡¹</span><br><span class="line">index.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;/&gt;</span><br><span class="line">  &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>å¤šé¡µé¢åº”ç”¨</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  pageOne: &#x27;./src/pageOne/index.js&#x27;,</span><br><span class="line">  pageTwo: &#x27;./src/pageTwo/index.js&#x27;,</span><br><span class="line">  pageThree: &#x27;./src/pageThree/index.js&#x27;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘ä»¬å‘Šè¯‰ webpack éœ€è¦ä¸‰ä¸ªç‹¬ç«‹åˆ†ç¦»çš„ä¾èµ–å›¾ï¼ˆå¦‚ä¸Šé¢çš„ç¤ºä¾‹ï¼‰</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿ åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ï¼Œserver ä¼šæ‹‰å–ä¸€ä¸ªæ–°çš„ HTML æ–‡æ¡£ç»™ä½ çš„å®¢æˆ·ç«¯ã€‚<br>é¡µé¢é‡æ–°åŠ è½½æ­¤æ–°æ–‡æ¡£ï¼Œå¹¶ä¸”èµ„æºè¢«é‡æ–°ä¸‹è½½ã€‚ç„¶è€Œï¼Œè¿™ç»™äº†æˆ‘ä»¬ç‰¹æ®Šçš„æœºä¼šå»åšå¾ˆ<br>å¤šäº‹ï¼Œä¾‹å¦‚ä½¿ç”¨ optimization.splitChunks ä¸ºé¡µé¢é—´å…±äº«çš„åº”ç”¨ç¨‹åºä»£ç åˆ›å»º<br>bundleã€‚ç”±äºå…¥å£èµ·ç‚¹æ•°é‡çš„å¢å¤šï¼Œå¤šé¡µåº”ç”¨èƒ½å¤Ÿå¤ç”¨å¤šä¸ªå…¥å£èµ·ç‚¹ä¹‹é—´çš„å¤§é‡ä»£<br>ç &#x2F;æ¨¡å—ï¼Œä»è€Œå¯ä»¥æå¤§åœ°ä»è¿™äº›æŠ€æœ¯ä¸­å—ç›Šã€‚</p>
<h2 id="äº”-Tree-Shaking"><a href="#äº”-Tree-Shaking" class="headerlink" title="äº”.Tree Shaking"></a>äº”.Tree Shaking</h2><p>tree shaking æ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œé€šå¸¸ç”¨äºæè¿°ç§»é™¤ JavaScript ä¸Šä¸‹æ–‡ä¸­çš„æœªå¼•ç”¨ä»£ç (dead-code)ã€‚å®ƒä¾èµ–äº ES2015 æ¨¡å—è¯­æ³•çš„ é™æ€ç»“æ„ ç‰¹æ€§ï¼Œä¾‹å¦‚ import å’Œexport ã€‚è¿™ä¸ªæœ¯è¯­å’Œæ¦‚å¿µå®é™…ä¸Šæ˜¯ç”± ES2015 æ¨¡å—æ‰“åŒ…å·¥å…· rollup æ™®åŠèµ·æ¥çš„ã€‚webpack 2 æ­£å¼ç‰ˆæœ¬å†…ç½®æ”¯æŒ ES2015 æ¨¡å—ï¼ˆä¹Ÿå«åš harmony modulesï¼‰å’Œæœªä½¿ç”¨æ¨¡å—æ£€æµ‹èƒ½åŠ›ã€‚æ–°çš„ webpack4 æ­£å¼ç‰ˆæœ¬æ‰©å±•äº†æ­¤æ£€æµ‹èƒ½åŠ›ï¼Œé€šè¿‡ package.jsonçš„ â€œsideEffectsâ€ å±æ€§ä½œä¸ºæ ‡è®°ï¼Œå‘ compiler æä¾›æç¤ºï¼Œè¡¨æ˜é¡¹ç›®ä¸­çš„å“ªäº›æ–‡ä»¶æ˜¯ â€œpure(çº¯æ­£ ES2015 æ¨¡å—)â€ï¼Œç”±æ­¤å¯ä»¥å®‰å…¨åœ°åˆ é™¤æ–‡ä»¶ä¸­æœªä½¿ç”¨çš„éƒ¨åˆ†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line"> usedExports: true,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>webpack5æ‰“åŒ…æ›´åŠ ç²¾ç®€åŒ–           åªæ‰“åŒ…ç”¨åˆ°çš„æ–¹æ³•æˆ–å±æ€§      tree shaking  ä¼˜åŒ–åˆ°äº†æè´¨ï¼ŒæŠŠä¸€äº›æ²¡æœ‰ç”¨çš„ä»£ç å…¨éƒ¨æ‘‡æ‰åªæ˜¯ç»™æˆ‘ä»¬ç”¨åˆ°äº†çš„æ•°æ®<br>ç†è®ºï¼šåªè¦æ˜¯æˆ‘è®¤ä¸ºè¿™ä¸ªä»£ç åœ¨é¡¹ç›®ä¸­æ²¡æœ‰ä½¿ç”¨  é‚£ä¹ˆå°±ç»™æ‘‡æ‰ã€‚å®ƒåŸºäºes  module</p>
<p><strong>sideEffects</strong><br>æ³¨æ„ Webpack ä¸èƒ½ç™¾åˆ†ç™¾å®‰å…¨åœ°è¿›è¡Œ tree-shakingã€‚æœ‰äº›æ¨¡å—å¯¼å…¥ï¼Œåªè¦è¢«å¼•å…¥ï¼Œå°±ä¼šå¯¹åº”ç”¨ç¨‹åºäº§ç”Ÿé‡è¦çš„å½±å“ã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å°±æ˜¯å…¨å±€æ ·å¼è¡¨ï¼Œæˆ–è€…è®¾ç½®å…¨å±€é…ç½®çš„JavaScript æ–‡ä»¶ã€‚</p>
<p>Webpack è®¤ä¸ºè¿™æ ·çš„æ–‡ä»¶æœ‰â€œå‰¯ä½œç”¨â€ã€‚å…·æœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶ä¸åº”è¯¥åš tree-shakingï¼Œå› ä¸ºè¿™å°†ç ´åæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚<br>Webpack çš„è®¾è®¡è€…æ¸…æ¥šåœ°è®¤è¯†åˆ°ä¸çŸ¥é“å“ªäº›æ–‡ä»¶æœ‰å‰¯ä½œç”¨çš„æƒ…å†µä¸‹æ‰“åŒ…ä»£ç çš„é£é™©ï¼Œå› æ­¤webpack4é»˜è®¤åœ°å°†æ‰€æœ‰ä»£ç è§†ä¸ºæœ‰å‰¯ä½œç”¨ã€‚è¿™å¯ä»¥ä¿æŠ¤ä½ å…äºåˆ é™¤å¿…è¦çš„æ–‡ä»¶ï¼Œä½†è¿™æ„å‘³ç€ Webpack çš„é»˜è®¤è¡Œä¸ºå®é™…ä¸Šæ˜¯ä¸è¿›è¡Œ tree-shakingã€‚å€¼å¾—æ³¨æ„çš„æ˜¯webpack5é»˜è®¤ä¼šè¿›è¡Œ tree-shakingã€‚<br>å¦‚ä½•å‘Šè¯‰ Webpack ä½ çš„ä»£ç æ— å‰¯ä½œç”¨ï¼Œå¯ä»¥é€šè¿‡ package.json æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§<br>sideEffectsï¼Œå°±æ˜¯ä¸ºæ­¤è€Œå­˜åœ¨çš„ã€‚<br>å®ƒæœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ï¼š<br>true<br>å¦‚æœä¸æŒ‡å®šå…¶ä»–å€¼çš„è¯ã€‚è¿™æ„å‘³ç€æ‰€æœ‰çš„æ–‡ä»¶éƒ½æœ‰å‰¯ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä¸€ä¸ªæ–‡ä»¶<br>å¯ä»¥ tree-shakingã€‚<br>false<br>å‘Šè¯‰ Webpack æ²¡æœ‰æ–‡ä»¶æœ‰å‰¯ä½œç”¨ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥ tree-shakingã€‚<br>æ•°ç»„[â€¦]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">package.json</span><br><span class="line">&#x27;sideEffects&#x27;:true/false,</span><br><span class="line">&#x27;sideEffects&#x27;:[&#x27;*.css&#x27;,&#x27;*.global.js&#x27;],</span><br></pre></td></tr></table></figure>
<p>æ˜¯æ–‡ä»¶è·¯å¾„æ•°ç»„ã€‚å®ƒå‘Šè¯‰ webpackï¼Œé™¤äº†æ•°ç»„ä¸­åŒ…å«çš„æ–‡ä»¶å¤–ï¼Œä½ çš„ä»»ä½•æ–‡ä»¶<br>éƒ½æ²¡æœ‰å‰¯ä½œç”¨ã€‚å› æ­¤ï¼Œé™¤äº†æŒ‡å®šçš„æ–‡ä»¶ä¹‹å¤–ï¼Œå…¶ä»–æ–‡ä»¶éƒ½å¯ä»¥å®‰å…¨åœ°è¿›è¡Œ tree-<br>shakingã€‚<br>webpack4 æ›¾ç»ä¸è¿›è¡Œå¯¹ CommonJs å¯¼å‡ºå’Œ require() è°ƒç”¨æ—¶çš„å¯¼å‡ºä½¿ç”¨åˆ†æã€‚<br>webpack 5 å¢åŠ äº†å¯¹ä¸€äº› CommonJs æ„é€ çš„æ”¯æŒï¼Œå…è®¸æ¶ˆé™¤æœªä½¿ç”¨çš„ CommonJs<br>å¯¼å‡ºï¼Œå¹¶ä» require() è°ƒç”¨ä¸­è·Ÿè¸ªå¼•ç”¨çš„å¯¼å‡ºåç§°ã€‚</p>
<h2 id="å…­-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWA"><a href="#å…­-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWA" class="headerlink" title="å…­.æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWA"></a>å…­.æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWA</h2><p>æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº(progressive web application - PWA)ï¼Œæ˜¯ä¸€ç§å¯ä»¥æä¾›ç±»ä¼¼äºnative app(åŸç”Ÿåº”ç”¨ç¨‹åº) ä½“éªŒçš„ web app(ç½‘ç»œåº”ç”¨ç¨‹åº)ï¼Œå°±æ˜¯è¯´æˆ‘ä»¬åœ¨æµè§ˆå™¨ç«¯èƒ½å¤Ÿå®ç°ç±»ä¼¼äºåŸç”Ÿåº”ç”¨ç¨‹åºçš„ä½“éªŒã€‚PWA å¯ä»¥ç”¨æ¥åšå¾ˆå¤šäº‹ã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯ï¼Œåœ¨ç¦»çº¿(offline)æ—¶åº”ç”¨ç¨‹åºèƒ½å¤Ÿç»§ç»­è¿è¡ŒåŠŸèƒ½ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨åä¸º Service Workers çš„ web æŠ€æœ¯æ¥å®ç°çš„ã€‚</p>
<p><strong>éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ</strong></p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´æ˜¯ç›´æ¥æŸ¥çœ‹æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„è¾“å‡ºç»“æœã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒçœŸæ­£çš„ç”¨æˆ·æ˜¯é€šè¿‡ç½‘ç»œè®¿é—® web appï¼›ç”¨æˆ·çš„æµè§ˆå™¨ä¼šä¸ä¸€ä¸ªæä¾›æ‰€éœ€èµ„æºï¼ˆä¾‹å¦‚ï¼Œ .html ,.js å’Œ .css æ–‡ä»¶ï¼‰çš„ server é€šè®¯ã€‚<br>æˆ‘ä»¬é€šè¿‡æ­å»ºä¸€ä¸ªæ‹¥æœ‰æ›´å¤šåŸºç¡€ç‰¹æ€§çš„ server æ¥æµ‹è¯•ä¸‹è¿™ç§ç¦»çº¿ä½“éªŒã€‚è¿™é‡Œä½¿ç”¨http-server packageï¼š npm install http-server â€“save-dev ã€‚è¿˜è¦ä¿®æ”¹package.json çš„ scripts éƒ¨åˆ†ï¼Œæ¥æ·»åŠ ä¸€ä¸ª start scriptï¼š</p>
<p>ä¸ä½¿ç”¨webpack-dev-serverï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹serverï¼Œç›¸å½“äºæˆ‘ä»¬æŠŠdistå·²ç»æ‰“åŒ…å‡ºæ¥å‡†å¤‡å‘å¸ƒäº†<br>npm install http-server -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> ...</span><br><span class="line"> &quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;start&quot;: &quot;http-server dist&quot;</span><br><span class="line">&#125;,</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br><span class="line">//æ³¨æ„ï¼šwebpack-dev-server æ˜¯ä¸€ä¸ªéç¦»çº¿ åœ¨çº¿çš„serverã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpack DevServer ä¼šå†™å…¥åˆ°å†…å­˜ï¼ˆå½“æˆ‘ä»¬ä¿®æ”¹ä»£ç çš„æ—¶å€™é‡æ–°å¯åŠ¨æœåŠ¡å®ƒå¹¶ä¸èƒ½å¤ŸæŠŠæˆ‘ä»¬çš„æ–‡ä»¶æ‰“åŒ…åˆ°distä¸‹é¢ï¼Œå› ä¸ºä»–æ˜¯ç›´æ¥æ”¾åˆ°å†…å­˜é‡Œçš„ã€‚ï¼‰ã€‚æˆ‘ä»¬éœ€è¦å¯ç”¨devserverdevmiddleware.writeToDisk é…ç½®é¡¹ï¼Œæ¥è®© http-server å¤„ç† ./dist ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line"> devMiddleware: &#123;    //å¼€å‘ç¯å¢ƒçš„serverçš„ä¸­é—´ä»¶</span><br><span class="line">  writeToDisk:true,    // å†™å…¥åˆ°ç¡¬ç›˜é‡Œ</span><br><span class="line">  index: true,</span><br><span class="line">  writeToDisk: true,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ‰“å¼€æµè§ˆå™¨è®¿é—® <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a> (å³ <a target="_blank" rel="noopener" href="http://127.0.0.1/">http://127.0.0.1</a> )ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ° webpack åº”ç”¨ç¨‹åºè¢« serve åˆ° dist ç›®å½•ã€‚å¦‚æœåœæ­¢ server ç„¶ååˆ·æ–°ï¼Œåˆ™ webpack åº”ç”¨ç¨‹åºä¸å†å¯è®¿é—®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä¸ºå®ç°ç¦»çº¿ä½“éªŒæ‰€éœ€è¦çš„æ”¹å˜ã€‚åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥è¦å®ç°çš„æ˜¯ï¼Œåœæ­¢ server ç„¶ååˆ·æ–°ï¼Œä»ç„¶å¯ä»¥çœ‹åˆ°åº”ç”¨ç¨‹åºæ­£å¸¸è¿è¡Œã€‚</p>
<p><strong>æ·»åŠ  Workbox</strong><br>æ·»åŠ  workbox-webpack-plugin æ’ä»¶ï¼Œç„¶åè°ƒæ•´ webpack.config.js æ–‡ä»¶ï¼š    å®ç°PWA<br>npm install workbox-webpack-plugin â€“save-dev</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);</span><br><span class="line">const WorkboxPlugin = require(&#x27;workbox-webpack-plugin&#x27;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  app: &#x27;./src/index.js&#x27;,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new WorkboxPlugin.GenerateSW(&#123;</span><br><span class="line">   // è¿™äº›é€‰é¡¹å¸®åŠ©å¿«é€Ÿå¯ç”¨ ServiceWorkers</span><br><span class="line">   // ä¸å…è®¸é—ç•™ä»»ä½•â€œæ—§çš„â€ ServiceWorkers</span><br><span class="line">   clientsClaim: true,  // å¿«é€Ÿçš„å¯ç”¨ServiceWorkers</span><br><span class="line">   skipWaiting: true,     // è·³å‡ºç­‰å¾…</span><br><span class="line"> &#125;),</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line"> output: &#123;</span><br><span class="line">  filename: &#x27;[name].bundle.js&#x27;,</span><br><span class="line">  path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">  clean: true,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ å¯ä»¥çœ‹åˆ°ï¼Œç”Ÿæˆäº†ä¸¤ä¸ªé¢å¤–çš„æ–‡ä»¶ï¼š service-worker.js å’Œåç§°å†—é•¿çš„workbox-718aa5be.js ã€‚ service-worker.js æ˜¯ Service Worker æ–‡ä»¶ï¼Œ workbox-718aa5be.js æ˜¯ service-worker.js å¼•ç”¨çš„æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥è¿è¡Œã€‚ä½ æœ¬åœ°ç”Ÿæˆçš„æ–‡ä»¶å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼›ä½†æ˜¯åº”è¯¥ä¼šæœ‰ä¸€ä¸ª service-worker.js æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œå€¼å¾—é«˜å…´çš„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»åˆ›å»ºå‡ºä¸€ä¸ª Service Workerã€‚æ¥ä¸‹æ¥è¯¥åšä»€ä¹ˆï¼Ÿ</p>
<p><strong>æ³¨å†Œ Service Worker  å®ç°ç¦»çº¿æµè§ˆé¡µé¢çš„åŠŸèƒ½</strong><br>æ¥ä¸‹æ¥æˆ‘ä»¬æ³¨å†Œ Service Workerï¼Œä½¿å…¶å‡ºåœºå¹¶å¼€å§‹è¡¨æ¼”ã€‚é€šè¿‡æ·»åŠ ä»¥ä¸‹æ³¨å†Œä»£ç æ¥<br>å®Œæˆæ­¤æ“ä½œï¼š<br>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if (&#x27;serviceWorker&#x27; in navigator) &#123;    //æµè§ˆå™¨æ˜¯å¦æ”¯æŒserviceWorker</span><br><span class="line"> window.addEventListener(&#x27;load&#x27;, () =&gt; &#123;   //ç»‘å®šäº‹ä»¶loadåœ¨é¡µé¢åŠ è½½å®Œä¹‹åæ‰§è¡Œ</span><br><span class="line">  navigator.serviceWorker.register(&#x27;/service-     // æ–¹æ³•ä¼ å…¥åˆšåˆšæ‰“åŒ…å¥½çš„service-worker.jsã€‚</span><br><span class="line">worker.js&#x27;).then(registration =&gt; &#123;                  // æ‹¿åˆ°æ³¨å†Œä»¥åçš„æˆåŠŸçš„ç»“æœ</span><br><span class="line">   console.log(&#x27;SW æ³¨å†ŒæˆåŠŸ: &#x27;, registration);</span><br><span class="line"> &#125;).catch(registrationError =&gt; &#123;</span><br><span class="line">   console.log(&#x27;SW æ³¨å†Œå¤±è´¥: &#x27;, registrationError);</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›¸å½“äºåœ¨æµè§ˆå™¨é‡Œæˆ‘ä»¬çš„é¡µé¢è¢«ç¼“å­˜ä¸‹æ¥äº†<br>chrome:&#x2F;&#x2F;serviceworker-internals    æ¸…é™¤http-serverç¼“å­˜ã€‚   æœåŠ¡å°±è·‘ä¸èµ·æ¥äº†ã€‚</p>
<p>å†æ¬¡è¿è¡Œ npx webpack æ¥æ„å»ºåŒ…å«æ³¨å†Œä»£ç ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºã€‚ç„¶åç”¨ npm startå¯åŠ¨æœåŠ¡ã€‚è®¿<a href="http://localhost:8080å¹¶æŸ¥çœ‹">http://localhost:8080å¹¶æŸ¥çœ‹</a> console æ§åˆ¶å°ã€‚åœ¨é‚£é‡Œä½ åº”è¯¥çœ‹åˆ°ï¼š<br>SW registered<br>ç°åœ¨æ¥è¿›è¡Œæµ‹è¯•ã€‚åœæ­¢ server å¹¶åˆ·æ–°é¡µé¢ã€‚å¦‚æœæµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒ Service Workerï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°ä½ çš„åº”ç”¨ç¨‹åºè¿˜åœ¨æ­£å¸¸è¿è¡Œã€‚ç„¶è€Œï¼Œserver å·²ç»åœæ­¢ serve æ•´ä¸ª distæ–‡ä»¶å¤¹ï¼Œæ­¤åˆ»æ˜¯ Service Worker åœ¨è¿›è¡Œ serveã€‚</p>
<h2 id="ä¸ƒ-Shimmingé¢„ç½®ä¾èµ–"><a href="#ä¸ƒ-Shimmingé¢„ç½®ä¾èµ–" class="headerlink" title="ä¸ƒ.Shimmingé¢„ç½®ä¾èµ–"></a>ä¸ƒ.Shimmingé¢„ç½®ä¾èµ–</h2><p>ä¸å¯¼å…¥ç›´æ¥å°±å¯ä»¥ä½¿ç”¨ä¸€äº›å˜é‡</p>
<p>webpack compiler èƒ½å¤Ÿè¯†åˆ«éµå¾ª ES2015 æ¨¡å—è¯­æ³•ã€CommonJS æˆ– AMD è§„èŒƒç¼–å†™çš„æ¨¡å—ã€‚ç„¶è€Œï¼Œä¸€äº› third party(ç¬¬ä¸‰æ–¹åº“) å¯èƒ½ä¼šå¼•ç”¨ä¸€äº›å…¨å±€ä¾èµ–ï¼ˆä¾‹å¦‚ jQueryä¸­çš„ $ ï¼‰ã€‚å› æ­¤è¿™äº› library ä¹Ÿå¯èƒ½ä¼šåˆ›å»ºä¸€äº›éœ€è¦å¯¼å‡ºçš„å…¨å±€å˜é‡è¿™äº› â€œbrokenmodules(ä¸ç¬¦åˆè§„èŒƒçš„æ¨¡å—)â€ å°±æ˜¯ shimming(é¢„ç½®ä¾èµ–) å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚<br>shim å¦å¤–ä¸€ä¸ªæå…¶æœ‰ç”¨çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ï¼šå½“ä½ å¸Œæœ› polyfill æ‰©å±•æµè§ˆå™¨èƒ½åŠ›ï¼Œæ¥æ”¯æŒåˆ°æ›´å¤šç”¨æˆ·æ—¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½åªæ˜¯æƒ³è¦å°†è¿™äº› polyfills æä¾›ç»™éœ€è¦ä¿®è¡¥(patch)çš„æµè§ˆå™¨ï¼ˆä¹Ÿå°±æ˜¯å®ç°æŒ‰éœ€åŠ è½½ï¼‰ã€‚</p>
<p><strong>Shimming é¢„ç½®å…¨å±€å˜é‡</strong></p>
<p>è®©æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€ä¸ª shimming å…¨å±€å˜é‡çš„ç”¨ä¾‹ã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰ç”¨è¿‡çš„ lodashå—ï¼Ÿå‡ºäºæ¼”ç¤ºç›®çš„ï¼Œä¾‹å¦‚æŠŠè¿™ä¸ªåº”ç”¨ç¨‹åºä¸­çš„æ¨¡å—ä¾èµ–ï¼Œæ”¹ä¸ºä¸€ä¸ªå…¨å±€å˜é‡ä¾èµ–ã€‚è¦å®ç°è¿™äº›ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ ProvidePlugin æ’ä»¶ã€‚ä½¿ç”¨ ProvidePlugin åï¼Œèƒ½å¤Ÿåœ¨ webpack ç¼–è¯‘çš„æ¯ä¸ªæ¨¡å—ä¸­ï¼Œé€šè¿‡è®¿é—®ä¸€ä¸ªå˜é‡æ¥è·å–ä¸€ä¸ª packageã€‚å¦‚æœ webpack çœ‹åˆ°æ¨¡å—ä¸­ç”¨åˆ°è¿™ä¸ªå˜é‡ï¼Œå®ƒå°†åœ¨æœ€ç»ˆbundle ä¸­å¼•å…¥ç»™å®šçš„ packageã€‚è®©æˆ‘ä»¬å…ˆç§»é™¤ lodash çš„ import è¯­å¥ï¼Œæ”¹ä¸ºé€šè¿‡æ’ä»¶æä¾›å®ƒï¼š<br>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">console.log(_.join([&#x27;hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;))</span><br><span class="line">webpack.config.js</span><br><span class="line"></span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;development&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new webpack.ProvidePlugin(&#123;</span><br><span class="line">   _: &#x27;lodash&#x27;     // lodashå˜æˆå…¨å±€  é‡åˆ°_å°†lodashåŒ…å¼•è¿›æ¥</span><br><span class="line"> &#125;)</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æœ¬è´¨ä¸Šæ‰€åšçš„ï¼Œå°±æ˜¯å‘Šè¯‰ webpackâ€¦â€¦å¦‚æœä½ é‡åˆ°äº†è‡³å°‘ä¸€å¤„ç”¨åˆ° _ å˜é‡çš„æ¨¡å—å®ä¾‹ï¼Œé‚£è¯·ä½ å°† lodash package å¼•å…¥è¿›æ¥ï¼Œå¹¶å°†å…¶æä¾›ç»™éœ€è¦ç”¨åˆ°å®ƒçš„æ¨¡å—ã€‚è¿è¡Œæˆ‘ä»¬çš„æ„å»ºè„šæœ¬ï¼Œå°†ä¼šçœ‹åˆ°åŒæ ·çš„è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[felix] 01-third-party-shimming $ npx webpack</span><br><span class="line">asset main.js 549 KiB [emitted] (name: main)</span><br><span class="line">runtime modules 344 bytes 2 modules</span><br><span class="line">cacheable modules 528 KiB</span><br><span class="line">./src/index.js 46 bytes [built] [code generated]</span><br><span class="line">../../../../../node_modules/lodash/lodash.js 528 KiB [built]</span><br><span class="line">[code generated]</span><br><span class="line">webpack 5.61.0 compiled successfully in 275 ms</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥ä½¿ç”¨ ProvidePlugin æš´éœ²å‡ºæŸä¸ªæ¨¡å—ä¸­å•ä¸ªå¯¼å‡ºï¼Œé€šè¿‡é…ç½®ä¸€ä¸ªâ€œæ•°ç»„è·¯å¾„â€ï¼ˆä¾‹å¦‚ [module, child, â€¦children?] ï¼‰å®ç°æ­¤åŠŸèƒ½ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å‡æƒ³å¦‚ä¸‹ï¼Œæ— è®º join æ–¹æ³•åœ¨ä½•å¤„è°ƒç”¨ï¼Œæˆ‘ä»¬éƒ½åªä¼šè·å–åˆ° lodash ä¸­æä¾›çš„ join æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">src/index.js</span><br><span class="line">console.log(join([&#x27;hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;))</span><br><span class="line">webpack.config.js</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;development&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new webpack.ProvidePlugin(&#123;</span><br><span class="line">   // _: &#x27;lodash&#x27;</span><br><span class="line">   join: [&#x27;lodash&#x27;, &#x27;join&#x27;],</span><br><span class="line"> &#125;)</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±èƒ½å¾ˆå¥½çš„ä¸ tree shaking é…åˆï¼Œå°† lodash library ä¸­çš„å…¶ä½™æ²¡æœ‰ç”¨åˆ°çš„å¯¼å‡º<br>å»é™¤</p>
<p><strong>ç»†ç²’åº¦ Shimming</strong><br>ä¸€äº›é—ç•™æ¨¡å—ä¾èµ–çš„ this æŒ‡å‘çš„æ˜¯ window å¯¹è±¡ã€‚åœ¨æ¥ä¸‹æ¥çš„ç”¨ä¾‹ä¸­ï¼Œè°ƒæ•´æˆ‘ä»¬çš„ index.js ï¼š<br>npm istall imports-loader -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.alert(&#x27;hello webpack&#x27;)</span><br></pre></td></tr></table></figure>
<p>å½“æ¨¡å—è¿è¡Œåœ¨ CommonJS ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™å°†ä¼šå˜æˆä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶çš„ thisæŒ‡å‘çš„æ˜¯ module.exports ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ imports-loader è¦†ç›– this æŒ‡å‘ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">  &#123;</span><br><span class="line">    test: require.resolve(&#x27;./src/index.js&#x27;),     // è°ƒç”¨require.resolveå»è°ƒç”¨  æ–‡ä»¶ã€‚</span><br><span class="line">    use: &#x27;imports-loader?wrapper=window&#x27;,     //webpackè§£æåˆ°  è¿™ä¸ªæ–‡ä»¶æ—¶ä½¿ç”¨çš„loader  wrapper=window  æŒ‡æ˜åŒ…é‡Œé¢çš„thisæŒ‡å‘æµè§ˆå™¨çš„windowã€‚</span><br><span class="line">  &#125;,</span><br><span class="line"> ]</span><br><span class="line">&#125;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new webpack.ProvidePlugin(&#123;</span><br><span class="line">   _: &#x27;lodash&#x27;</span><br><span class="line"> &#125;),</span><br><span class="line">  new HtmlWebpackPlugin()</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å…¨å±€ Exports</strong></p>
<p>è®©æˆ‘ä»¬å‡è®¾ï¼ŒæŸä¸ª library åˆ›å»ºå‡ºä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæœŸæœ› consumer(ä½¿ç”¨è€…) ä½¿ç”¨è¿™ä¸ªå˜é‡ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®é…ç½®ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå°æ¨¡å—æ¥æ¼”ç¤ºè¯´æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">src/globals.js</span><br><span class="line">const file = &#x27;example.txt&#x27;;</span><br><span class="line">const helpers = &#123;</span><br><span class="line"> test: function () &#123;</span><br><span class="line">  console.log(&#x27;test something&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line"> parse: function () &#123;</span><br><span class="line">  console.log(&#x27;parse something&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">npm install exports-loader -D</span><br><span class="line"></span><br><span class="line">webpack.config.js</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">  &#123;</span><br><span class="line">    test: require.resolve(&#x27;./src/index.js&#x27;),</span><br><span class="line">    use: &#x27;imports-loader?wrapper=window&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    test: require.resolve(&#x27;./src/globals.js&#x27;),</span><br><span class="line">    use: &#x27;exports-loader?type=commonjs&amp;exports=file,multiple|helpers.parseï¼ˆvalueï¼‰|parseï¼ˆkeyï¼‰&#x27;,   //  typeï¼šç±»å‹ä¸ºæ¨¡å—å¯¼å‡ºçš„ç±»å‹commonjs    å¯¼å‡ºçš„å˜é‡file  jsæ–‡ä»¶ä¸­çš„File    ï¼Œmultipleè¡¨ç¤ºå¯¼å‡ºä¸€ä¸ªkey|valueçš„å½¢å¼ã€‚</span><br><span class="line">  &#125;,</span><br><span class="line"> ]</span><br><span class="line">&#125;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new webpack.ProvidePlugin(&#123;</span><br><span class="line">   _: &#x27;lodash&#x27;</span><br><span class="line"> &#125;),</span><br><span class="line">  new HtmlWebpackPlugin()</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123;file,parse&#125; = require(&#x27;./globals&#x27;)   //  é‚£æˆ‘ç›´æ¥å¯¼å…¥ä¸å°±è¡Œäº†ï¼Œå‰ææ¡ä»¶globals.jsæ˜¯å¤–éƒ¨çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¹¶ä¸çŸ¥é“å®ƒæ˜¯å¦‚ä½•å¯¼å‡ºçš„   æ‰€æœ‰æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶é‡Œè¾¹åšä¸€ä¸ª  ä¸€äº›å†…å®¹çš„å¯¼å‡º   è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å•ç‹¬çš„å»ä½¿ç”¨æˆ‘ä»¬æƒ³è¦çš„ä¸€äº›æ¨¡å—äº†</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œåœ¨æˆ‘ä»¬çš„ entry å…¥å£æ–‡ä»¶ä¸­ï¼ˆå³ src&#x2F;index.js ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ const {file, parse } &#x3D; require(â€˜.&#x2F;globals.jsâ€™); ï¼Œå¯ä»¥ä¿è¯ä¸€åˆ‡å°†é¡ºåˆ©è¿è¡Œã€‚</p>
<p><strong>åŠ è½½ Polyfills</strong><br>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®¨è®ºçš„æ‰€æœ‰å†…å®¹ éƒ½æ˜¯å¤„ç†é‚£äº›é—ç•™çš„ packageï¼Œè®©æˆ‘ä»¬è¿›å…¥åˆ°ç¬¬äºŒä¸ªè¯é¢˜ï¼špolyfillã€‚<br>æœ‰å¾ˆå¤šæ–¹æ³•æ¥åŠ è½½ polyfillã€‚ä¾‹å¦‚ï¼Œæƒ³è¦å¼•å…¥ @babel&#x2F;polyfill æˆ‘ä»¬åªéœ€å¦‚ä¸‹æ“ä½œï¼š<br>npm install â€“save @babel&#x2F;polyfill<br>ç„¶åï¼Œä½¿ç”¨ import å°†å…¶å¼•å…¥åˆ°æˆ‘ä»¬çš„ä¸» bundle æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">index.js</span><br><span class="line">import &#x27;@babel/polyfill&#x27;    //polyfillä¿—ç§°å«ç‰‡   åœ¨æ‰§è¡Œä¸‹é¢çš„è¯­å¥ä¹‹å‰ï¼ŒæŠŠæ‰€æœ‰çš„å¯èƒ½éœ€è¦é™çº§çš„ä»£ç éƒ½æ”¾åœ¨äº†æˆ‘ä»¬ä»£ç çš„å‰é¢</span><br><span class="line">console.log(Array.from([1, 2, 3], x =&gt; x + x))    //fromæ–¹æ³•ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒçš„   å¦‚æœæ˜¯æˆ‘ä»¬ä¸å‘Šè¯‰webpacké‚£ä¹ˆä»–å°±çº¯ç²¹å…«Array.fromç›´æ¥çš„æ‰“åˆ°æˆ‘ä»¬çš„é¡µé¢ä¸Šå»äº†ï¼Œå³ä½¿æ˜¯æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨ä¸€äº›@babal/loader,ä½†æ˜¯ä»–ä¹Ÿä¸ä¼š  100%çš„å°†æˆ‘ä»¬çš„ä»£ç å…¨éƒ¨è½¬æ¢ä¸ºä½ç‰ˆæœ¬çš„æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„æ‰€æœ‰ä»£ç ã€‚æ‰€ä»¥æˆ‘ä»¬å¾—å‘Šè¯‰æµè§ˆå™¨ åœ¨æŸäº›ç‰ˆæœ¬é‡Œé¢å¾—æŠŠä»–è½¬æˆä½ç‰ˆæœ¬çš„ä»£ç æ¯”å¦‚  es6=&gt;es3.1  è¿™æ˜¯æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªå«ç‰‡æ¥å®Œæˆã€‚</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™ç§æ–¹å¼ä¼˜å…ˆè€ƒè™‘æ­£ç¡®æ€§ï¼Œè€Œä¸è€ƒè™‘ bundle ä½“ç§¯å¤§å°ã€‚ä¸ºäº†å®‰å…¨å’Œå¯é ï¼Œpolyfill&#x2F;shim å¿…é¡»è¿è¡Œäºæ‰€æœ‰å…¶ä»–ä»£ç ä¹‹å‰ï¼Œè€Œä¸”éœ€è¦åŒæ­¥åŠ è½½ï¼Œæˆ–è€…è¯´ï¼Œéœ€è¦åœ¨æ‰€æœ‰ polyfill&#x2F;shim åŠ è½½ä¹‹åï¼Œå†å»åŠ è½½æ‰€æœ‰åº”ç”¨ç¨‹åºä»£ç ã€‚ ç¤¾åŒºä¸­å­˜åœ¨è®¸å¤šè¯¯è§£ï¼Œå³ç°ä»£æµè§ˆå™¨â€œä¸éœ€è¦â€polyfillï¼Œæˆ–è€… polyfill&#x2F;shim ä»…ç”¨äºæ·»åŠ ç¼ºå¤±åŠŸèƒ½ - å®é™…ä¸Šï¼Œå®ƒä»¬é€šå¸¸ç”¨äºä¿®å¤æŸåå®ç°(repair broken implementation)ï¼Œå³ä½¿æ˜¯åœ¨æœ€ç°ä»£çš„æµè§ˆå™¨ä¸­ï¼Œä¹Ÿä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ å› æ­¤ï¼Œæœ€ä½³å®è·µä»ç„¶æ˜¯ï¼Œä¸åŠ é€‰æ‹©åœ°å’ŒåŒæ­¥åœ°åŠ è½½æ‰€æœ‰polyfill&#x2F;shimï¼Œå°½ç®¡è¿™ä¼šå¯¼è‡´é¢å¤–çš„ bundle ä½“ç§¯æˆæœ¬ã€‚</p>
<p><strong>è¿›ä¸€æ­¥ä¼˜åŒ– Polyfills</strong><br>ä¸å»ºè®®ä½¿ç”¨ import @babel&#x2F;polyfilll ã€‚å› ä¸ºè¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ä¼šå…¨å±€å¼•å…¥æ•´ä¸ªpolyfillåŒ…ï¼Œæ¯”å¦‚ Array.from ä¼šå…¨å±€å¼•å…¥ï¼Œä¸ä½†åŒ…çš„ä½“ç§¯å¤§ï¼Œè€Œä¸”è¿˜ä¼šæ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚<br>babel-preset-env package é€šè¿‡ browserslist æ¥æŒ‡å®šæ¥å¯¹é‚£äº›æµè§ˆå™¨é‚£äº›æµè§ˆå™¨çš„ç‰ˆæœ¬è¿›è¡Œè½¬æ¢ï¼Œæ¥è½¬è¯‘é‚£äº›ä½ æµè§ˆå™¨ä¸­ä¸æ”¯æŒçš„ç‰¹æ€§ã€‚è¿™ä¸ª preset ä½¿ç”¨ useBuiltIns é€‰é¡¹ï¼Œé»˜è®¤å€¼æ˜¯ false ï¼Œè¿™ç§æ–¹å¼å¯ä»¥å°†å…¨å±€babel-polyfill å¯¼å…¥ï¼Œæ”¹è¿›ä¸ºæ›´ç»†ç²’åº¦çš„ import æ ¼å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;core-js/modules/es7.string.pad-start&#x27;;</span><br><span class="line">import &#x27;core-js/modules/es7.string.pad-end&#x27;;</span><br><span class="line">import &#x27;core-js/modules/web.timers&#x27;;</span><br><span class="line">import &#x27;core-js/modules/web.immediate&#x27;;</span><br><span class="line">import &#x27;core-js/modules/web.dom.iterable&#x27;;</span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;å®‰è£… @babel&#x2F;preset-env åŠ ç›¸å…³çš„åŒ…<br>npm i babel-loader @babel&#x2F;core @babel&#x2F;preset-env -D<br>&#x2F;&#x2F; webpack.config.js<br>const HtmlWebpackPlugin &#x3D; require(â€˜html-webpack-pluginâ€™)<br>module.exports &#x3D; {<br> mode: â€˜productionâ€™,<br> entry: â€˜.&#x2F;src&#x2F;index.jsâ€™,<br> plugins: [<br>  new HtmlWebpackPlugin()<br>],<br> module: {<br>  rules: [<br>  {<br>    test: &#x2F;.js$&#x2F;,<br>    exclude: &#x2F;node_modules&#x2F;,<br>    use: {<br>     loader: â€˜babel-loaderâ€™,<br>     options: {<br>      presets: [<br>      [<br>        â€˜@babel&#x2F;preset-envâ€™,<br>       {<br>         targets: [  &#x2F;&#x2F;ä¹Ÿå¯ä»¥é¡¶çŸ¥é“package.jsonä¸­  ç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„ä»£ç éƒ½éœ€è¦é€šè¿‡Polyfillæ¥è¿›è¡Œå«ç‰‡çš„æ·»åŠ <br>          â€œlast 1 versionâ€,<br>          â€œ&gt; 1%â€,<br>         ],<br>         useBuiltIns: â€˜usageâ€™ ï¼Œ    &#x2F;&#x2F;  è¿™é‡Œè¿™ä¸ª@babel&#x2F;preset-env  åæˆ‘ä»¬å°±ä¸éœ€è¦æ‰‹åŠ¨çš„å¯¼å…¥  import â€˜@babel&#x2F;polyfillâ€™äº†ã€‚        ä½¿ç”¨è¿™ä¸ªé€‰é¡¹éœ€è¦ Core.jsç¿»è¯‘å™¨ï¼Œè¿™æ˜¯ä¼˜é›…é™çº§çš„ä¸€äº›åº“<br>         &#x2F;&#x2F;æ·»åŠ corejsé…ç½®<br>           corejs: 3,     &#x2F;&#x2F;å®šä¹‰core.jsçš„ç‰ˆæœ¬é­ä¸‰<br>       }<br>      ]<br>     ]<br>    }<br>   }<br>  }<br> ]<br>}<br>}<br>useBuiltIns: å‚æ•°æœ‰ â€œentryâ€ã€â€usageâ€ã€false ä¸‰ä¸ªå€¼é»˜è®¤å€¼æ˜¯ false ï¼Œæ­¤å‚æ•°å†³å®šäº†babelæ‰“åŒ…æ—¶å¦‚ä½•å¤„ç†@babel&#x2F;polyfilll è¯­å¥ã€‚<br>â€œentryâ€: ä¼šå°†æ–‡ä»¶ä¸­ import @babel&#x2F;polyfilll è¯­å¥ ç»“åˆ targets ï¼Œè½¬æ¢ä¸ºä¸€ç³»åˆ—å¼•å…¥è¯­å¥ï¼Œå»æ‰ç›®æ ‡æµè§ˆå™¨å·²æ”¯æŒçš„ polyfilll æ¨¡å—ï¼Œä¸ç®¡ä»£ç é‡Œæœ‰æ²¡æœ‰ç”¨åˆ°ï¼Œåªè¦ç›®æ ‡æµè§ˆå™¨ä¸æ”¯æŒéƒ½ä¼šå¼•å…¥å¯¹åº”çš„ polyfilll æ¨¡å—ã€‚<br>â€œusageâ€: ä¸éœ€è¦æ‰‹åŠ¨åœ¨ä»£ç é‡Œå†™ import @babel&#x2F;polyfilll ï¼Œæ‰“åŒ…æ—¶ä¼šè‡ªåŠ¨æ ¹æ®å®é™…ä»£ç çš„ä½¿ç”¨æƒ…å†µï¼Œç»“åˆ targets å¼•å…¥ä»£ç é‡Œå®é™…ç”¨åˆ°éƒ¨åˆ† polyfilll æ¨¡å—<br>false: å¯¹ importâ€˜@babel&#x2F;polyfilllâ€™ä¸ä½œä»»ä½•å¤„ç†ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨å¼•å…¥ polyfilll æ¨¡å—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ webpack æ‰“åŒ…æ–‡ä»¶é…ç½®çš„ entry ä¸­å¼•å…¥çš„ @babel&#x2F;polyfill ä¸ä¼šæ ¹æ®useBuiltIns é…ç½®ä»»ä½•è½¬æ¢å¤„ç†ã€‚</p>
<p>ç”±äº@babel&#x2F;polyfillåœ¨7.4.0ä¸­è¢«å¼ƒç”¨ï¼Œæˆ‘ä»¬å»ºè®®ç›´æ¥æ·»åŠ corejså¹¶é€šè¿‡corejsé€‰é¡¹è®¾ç½®ç‰ˆæœ¬ã€‚<br>æ‰§è¡Œç¼–è¯‘ npx webpack</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[felix] 02-polyfill $ npx webpack</span><br><span class="line">WARNING (@babel/preset-env): We noticed you&#x27;re using the</span><br><span class="line">`useBuiltIns` option without declaring a core-js version.</span><br><span class="line">Currently, we assume version 2.x when no version is passed. Since</span><br><span class="line">this default version will likely change in future versions of</span><br><span class="line">Babel, we recommend explicitly setting the core-js version you</span><br><span class="line">are using via the `corejs` option.</span><br><span class="line">You should also be sure that the version you pass to the `corejs`</span><br><span class="line">option matches the version specified in your `package.json`&#x27;s</span><br><span class="line">`dependencies` section. If it doesn&#x27;t, you need to run one of the</span><br><span class="line">following commands:</span><br><span class="line">npm install --save core-js@2   npm install --save core-js@3</span><br><span class="line">yarn add core-js@2       yarn add core-js@3</span><br><span class="line">More info about useBuiltIns: https://babeljs.io/docs/en/babel-</span><br><span class="line">preset-env#usebuiltins</span><br><span class="line">More info about core-js: https://babeljs.io/docs/en/babel-preset-</span><br><span class="line">env#corejs</span><br><span class="line">asset main.js 16.7 KiB [emitted] [minimized] (name: main)</span><br><span class="line">asset index.html 214 bytes [compared for emit]</span><br><span class="line">runtime modules 663 bytes 3 modules</span><br><span class="line">modules by path ./node_modules/core-js/modules/*.js 38.9 KiB 68</span><br><span class="line">modules</span><br><span class="line">./src/index.js 374 bytes [built] [code generated]</span><br><span class="line">webpack 5.61.0 compiled successfully in 1613 ms</span><br></pre></td></tr></table></figure>
<p>æç¤ºæˆ‘ä»¬éœ€è¦å®‰è£… core-js ã€‚<br>npm i core-js@3 -S<br>æ­¤æ—¶è¿˜éœ€è¦ æ·»åŠ ä¸€ä¸ªé…ç½®ï¼š<br>&#x2F;&#x2F; æ·»åŠ corejsé…ç½®<br>corejs: 3,<br>æˆåŠŸä¼˜åŒ–</p>
<h2 id="å…«-åˆ›å»º-library"><a href="#å…«-åˆ›å»º-library" class="headerlink" title="å…«.åˆ›å»º library"></a>å…«.åˆ›å»º library</h2><p>é™¤äº†æ‰“åŒ…åº”ç”¨ç¨‹åºï¼Œwebpack è¿˜å¯ä»¥ç”¨äºæ‰“åŒ… JavaScript libraryã€‚<br>ä¾‹å¦‚ï¼šå½“æˆ‘ä»¬æƒ³è¦è‡ªå·±å¼€å‘ä¸€ä¸ªç»„ä»¶åº“å·¥å…·æˆ–è€…æ¡†æ¶çš„æ—¶å€™ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è‡ªå·±é€ ä¸€ä¸ªè½®å­ç»™åˆ«äººç”¨çš„æ—¶å€™æˆ‘ä»¬å…ä¸äº†è¦å¼€å‘å¾ˆå¤šçš„æ¨¡å—ï¼Œæœ€ç»ˆéƒ½å¯ä»¥è¯·webpackæ¥å¸®æˆ‘ä»¬æ‰“åŒ…ã€‚</p>
<p><strong>åˆ›å»ºä¸€ä¸ª library</strong><br>å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªåä¸º webpack-numbers çš„å°çš„ libraryï¼Œå¯ä»¥å°†æ•°å­— 1 åˆ° 5è½¬æ¢ä¸ºæ–‡æœ¬è¡¨ç¤ºï¼Œåä¹‹äº¦ç„¶ï¼Œä¾‹å¦‚å°† 2 è½¬æ¢ä¸º â€˜twoâ€™ã€‚<br>ä½¿ç”¨ npm åˆå§‹åŒ–é¡¹ç›®ï¼Œç„¶åå®‰è£… webpack ï¼Œ webpack-cli å’Œ lodash ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli lodash -D</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°† lodash å®‰è£…ä¸º devDependencies è€Œä¸æ˜¯ dependencies ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å°†å…¶æ‰“åŒ…åˆ°æˆ‘ä»¬çš„åº“ä¸­ï¼Œå¦åˆ™æˆ‘ä»¬çš„åº“ä½“ç§¯å¾ˆå®¹æ˜“å˜å¤§ã€‚</p>
<p>src&#x2F;ref.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 1,</span><br><span class="line">  &quot;word&quot;: &quot;One&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 2,</span><br><span class="line">  &quot;word&quot;: &quot;Two&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 3,</span><br><span class="line">  &quot;word&quot;: &quot;Three&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 4,</span><br><span class="line">  &quot;word&quot;: &quot;Four&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 5,</span><br><span class="line">  &quot;word&quot;: &quot;Five&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 0,</span><br><span class="line">  &quot;word&quot;: &quot;Zero&quot;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import _ from &#x27;lodash&#x27;;</span><br><span class="line">import numRef from &#x27;./ref.json&#x27;;</span><br><span class="line">export function numToWord(num) &#123;</span><br><span class="line"> return _.reduce(</span><br><span class="line">  numRef,</span><br><span class="line"> (accum, ref) =&gt; &#123;</span><br><span class="line">   return ref.num === num ? ref.word : accum;</span><br><span class="line"> &#125;,</span><br><span class="line">  &#x27;&#x27;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">export function wordToNum(word) &#123;</span><br><span class="line"> return _.reduce(</span><br><span class="line">  numRef,</span><br><span class="line"> (accum, ref) =&gt; &#123;</span><br><span class="line">   return ref.word === word &amp;&amp; word.toLowerCase() ? ref.num :</span><br><span class="line">accum;</span><br><span class="line"> &#125;,</span><br><span class="line">  -1</span><br><span class="line">);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode:&#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> output: &#123;</span><br><span class="line">  path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">  filename: &#x27;webpack-numbers.js&#x27;,</span><br><span class="line">  library:&#123;</span><br><span class="line">    name:&#x27;webpackNumbers&#x27;,</span><br><span class="line">	type&#x27;umd&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  globalObject:&#x27;globalThis&#x27;</span><br><span class="line">&#125;,</span><br><span class="line"> externals:&#123;</span><br><span class="line"> 	lodash:&#123;   lodash  å¼•å…¥åŒ…çš„åå­—</span><br><span class="line">		commonjs:&#x27;lodash&#x27;,   //  å…¼å®¹å¼•å…¥å½¢å¼</span><br><span class="line">		commonjs2:&#x27;lodash&#x27;,</span><br><span class="line">		amd:&#x27;lodash&#x27;,</span><br><span class="line">		root:&#x27;_&#x27;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>å‘å¸ƒåˆ°çº¿ä¸Š</strong><br>æ‹¥æœ‰npmè´¦å·<br>npm config get registry   &#x2F;&#x2F; ä¸€å®šè¦ä¿è¯æœ¬åœ°çš„registryçš„åœ°å€æ˜¯<a target="_blank" rel="noopener" href="https://registry.npmjs.org/">https://registry.npmjs.org/</a>    å› ä¸ºè¿™æ ·çš„è¯æ‰æ˜¯çœŸæ­£çš„è¿æ¥åˆ°npmå®˜ç½‘çš„åœ°å€ä¸Š   æœ‰äº›äººå¯èƒ½æ˜¯æ·˜å®  é‚£ä¹ˆå°±è®¿é—®ä¸ä¸Šå»äº†<br>npm adduser  &#x2F;&#x2F;æ·»åŠ ç”¨æˆ·   è¾“å…¥ç”¨æˆ·åå¯†ç <br>åŒ…çš„åå­—å¿…é¡»æ˜¯å…¨çƒå”¯ä¸€çš„ã€‚   npm publish    ä¸Šä¼ æ—¶package.jsonä¸­çš„mainå…¥å£å¿…é¡»å¯¹åº”ï¼šdist&#x2F;æ–‡ä»¶å   å› ä¸ºåˆ«äººé€šè¿‡ requireå»è½½å…¥åŒ…çš„æ—¶å€™  ä¼šè¯»å– è¿™ä¸ªmainè¿™æ˜¯çš„æš´éœ²çš„åŒ…çš„åå­—<br>npm install åŒ…åå°±å¯ä»¥ä¸‹è½½äº†</p>
<p><strong>Webpack é…ç½®</strong></p>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output:&#123;</span><br><span class="line">	path:&#x27;&#x27;,</span><br><span class="line">	filname:&#x27;&#x27;,</span><br><span class="line">	library:&#x27;&#x27;,    //æˆ‘ä»¬åªæ˜¯å®šä¹‰äº†å¯¼å‡º å¹¶ä¸”æ²¡æœ‰ä½¿ç”¨å®ƒ  æ‰€ä»¥webpackè®¤ä¸ºè¿™ä¸ªä»£ç æ˜¯æ²¡æœ‰ç”¨çš„ã€‚   å¦‚ä½•è®©ä»–ä½œä¸ºä¸€ä¸ªlibraryæ¥è¿›è¡Œä¸€ä¸ªå¯¹å¤–çš„æ‰“åŒ…   è®©ä»£ç ä¸è¢« Webpack Tree shaking   é…ç½® library:&#x27;åŒ…çš„åå­—&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡éƒ½åº”è¯¥ä¸æ‰“åŒ…åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œè¿™é‡Œæ˜¯ä¸åŒçš„éƒ¨åˆ† - æˆ‘ä»¬éœ€è¦é€šè¿‡output.library é…ç½®é¡¹æš´éœ²ä»å…¥å£å¯¼å‡ºçš„å†…å®¹ã€‚<br>æˆ‘ä»¬æš´éœ²äº† webpackNumbers ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥é€šè¿‡ script æ ‡ç­¾ä½¿ç”¨ã€‚	</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://example.org/webpack-numbers.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> window.webpackNumbers.wordToNum(&#x27;Five&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œå®ƒåªèƒ½é€šè¿‡è¢« script æ ‡ç­¾å¼•ç”¨è€Œå‘æŒ¥ä½œç”¨ï¼Œå®ƒä¸èƒ½è¿è¡Œåœ¨ CommonJSã€AMDã€Node.js ç­‰ç¯å¢ƒä¸­ã€‚<br>ä½œä¸ºä¸€ä¸ªåº“ä½œè€…ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒèƒ½å¤Ÿå…¼å®¹ä¸åŒçš„ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·åº”è¯¥èƒ½å¤Ÿé€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨æ‰“åŒ…åçš„åº“ï¼š<br>CommonJS module require:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const webpackNumbers = require(&#x27;webpack-numbers&#x27;);</span><br><span class="line">// ...</span><br><span class="line">webpackNumbers.wordToNum(&#x27;Two&#x27;);</span><br></pre></td></tr></table></figure>
<p>AMD module require:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">require([&#x27;webpackNumbers&#x27;], function (webpackNumbers) &#123;</span><br><span class="line"> // ...</span><br><span class="line"> webpackNumbers.wordToNum(&#x27;Two&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>script tag:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">...</span><br><span class="line"> &lt;script src=&quot;https://example.org/webpack-numbers.js&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> &lt;script&gt;</span><br><span class="line">  // ...</span><br><span class="line">  // Global variable</span><br><span class="line">  webpackNumbers.wordToNum(&#x27;Five&#x27;);</span><br><span class="line">  // Property in the window object</span><br><span class="line">  window.webpackNumbers.wordToNum(&#x27;Five&#x27;);</span><br><span class="line">  // ...</span><br><span class="line"> &lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ›´æ–° output.library é…ç½®é¡¹ï¼Œå°†å…¶ type è®¾ç½®ä¸º â€˜umdâ€™ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> output: &#123;</span><br><span class="line">  path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">  filename: &#x27;webpack-numbers.js&#x27;,</span><br><span class="line">  library: &#123;</span><br><span class="line">   name: &#x27;webpackNumbers&#x27;,</span><br><span class="line">   type: &#x27;umd&#x27;,   //  window&#x27;(es module)   &#x27;commonjs&#x27;   &#x27;module&#x27; å®ƒåœ¨experiments:&#123;outputModule:true&#125;æ‰èƒ½ä½¿ç”¨ï¼Œä»–æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„åŠŸèƒ½ï¼Œå°±ä¸éœ€è¦è¿™ä¸ªnameäº†ã€‚&lt;script type=&quot;module&quot;&gt;    &#x27;umd&#x27;æ”¯æŒæ‰€æœ‰çš„ç±»å‹ã€‚  esmodule æœ‰é—®é¢˜</span><br><span class="line">  &#125;,</span><br><span class="line">  globalObject:&#x27;globalThis&#x27;    //éœ€è¦å…¨å±€çš„thisæ¥å»  ä»£æ›¿self   å¦åˆ™æµè§ˆå™¨ä¼šself  undefinedæŠ¥é”™</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ webpack å°†æ‰“åŒ…ä¸€ä¸ªåº“ï¼Œå…¶å¯ä»¥ä¸ CommonJSã€AMD ä»¥åŠ script æ ‡ç­¾ä½¿ç”¨</p>
<h2 id="ä¹-æ¨¡å—è”é‚¦-Module-Federation"><a href="#ä¹-æ¨¡å—è”é‚¦-Module-Federation" class="headerlink" title="ä¹.æ¨¡å—è”é‚¦(Module Federation)"></a>ä¹.æ¨¡å—è”é‚¦(Module Federation)</h2><p>å¤šä¸ªç‹¬ç«‹çš„æ„å»ºå¯ä»¥ç»„æˆä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œè¿™äº›ç‹¬ç«‹çš„æ„å»ºä¹‹é—´ä¸åº”è¯¥å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå› æ­¤å¯ä»¥å•ç‹¬å¼€å‘å’Œéƒ¨ç½²å®ƒä»¬ã€‚<br>è¿™é€šå¸¸è¢«ç§°ä½œå¾®å‰ç«¯ï¼Œä½†å¹¶ä¸ä»…é™äºæ­¤ã€‚<br>Webpack5 æ¨¡å—è”é‚¦å¯ä»¥è®© Webpack è¾¾åˆ°äº†çº¿ä¸Š Runtime çš„æ•ˆæœï¼Œè®©ä»£ç ç›´æ¥åœ¨é¡¹ç›®é—´åˆ©ç”¨ CDN ç›´æ¥å…±äº«ï¼Œä¸å†éœ€è¦æœ¬åœ°å®‰è£… Npm åŒ…ã€æ„å»ºå†å‘å¸ƒäº†ï¼<br>æˆ‘ä»¬çŸ¥é“ Webpack å¯ä»¥é€šè¿‡ DLL æˆ–è€… Externals åšä»£ç å…±äº«æ—¶ Common Chunkï¼Œä½†ä¸åŒåº”ç”¨å’Œé¡¹ç›®é—´è¿™ä¸ªä»»åŠ¡å°±å˜å¾—å›°éš¾äº†ï¼Œæˆ‘ä»¬å‡ ä¹æ— æ³•åœ¨é¡¹ç›®ä¹‹é—´åšåˆ°æŒ‰éœ€çƒ­æ’æ‹”ã€‚</p>
<p>æ—©æœŸNPMæ–¹å¼å…±äº«æ¨¡å—   ä»£ç çš„å…±äº«æ˜¯å°†ä¾èµ–ä½œä¸ºlibraryå®‰è£…åˆ°æˆ‘ä»¬çš„é¡¹ç›®é‡Œè¿›è¡Œwebpackæ‰“åŒ…å¹¶ä¸”æ„å»ºä¸Šçº¿<br>å¯¹äºé¡¹ç›® Home ä¸ Searchï¼Œéœ€è¦å…±äº«ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œæœ€å¸¸è§çš„åŠæ³•å°±æ˜¯å°†å…¶æŠ½æˆé€šç”¨ä¾èµ–å¹¶åˆ†åˆ«å®‰è£…åœ¨å„è‡ªé¡¹ç›®ä¸­ã€‚è™½ç„¶ Monorepo å¯ä»¥ä¸€å®šç¨‹åº¦è§£å†³é‡å¤å®‰è£…å’Œä¿®æ”¹å›°éš¾çš„é—®é¢˜ï¼Œä½†ä¾ç„¶éœ€è¦èµ°æœ¬åœ°ç¼–è¯‘ã€‚</p>
<p>çœŸæ­£ Runtime çš„æ–¹å¼å¯èƒ½æ˜¯ UMD æ–¹å¼å…±äº«ä»£ç æ¨¡å—ï¼Œå³å°†æ¨¡å—ç”¨ Webpack UMDæ¨¡å¼æ‰“åŒ…ï¼Œå¹¶è¾“å‡ºåˆ°å…¶ä»–é¡¹ç›®ä¸­ã€‚è¿™æ˜¯éå¸¸æ™®éçš„æ¨¡å—å…±äº«æ–¹å¼ï¼š<br>å¯¹äºé¡¹ç›® Home ä¸ Searchï¼Œç›´æ¥åˆ©ç”¨ UMD åŒ…å¤ç”¨ä¸€ä¸ªæ¨¡å—ã€‚ä½†è¿™ç§æŠ€æœ¯æ–¹æ¡ˆé—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯åŒ…ä½“ç§¯æ— æ³•è¾¾åˆ°æœ¬åœ°ç¼–è¯‘æ—¶çš„ä¼˜åŒ–æ•ˆæœï¼Œä¸”åº“ä¹‹é—´å®¹æ˜“å†²çªã€‚</p>
<p>å¾®å‰ç«¯ï¼šmicro-frontends (MFE) ä¹Ÿæ˜¯æœ€è¿‘æ¯”è¾ƒç«çš„æ¨¡å—å…±äº«ç®¡ç†æ–¹å¼ï¼Œå¾®å‰ç«¯å°±æ˜¯è¦è§£å†³å¤šé¡¹ç›®å¹¶å­˜é—®é¢˜ï¼Œå¤šé¡¹ç›®å¹¶å­˜çš„æœ€å¤§é—®é¢˜å°±æ˜¯æ¨¡å—å…±äº«ï¼Œæ¨¡å—ä¹‹é—´æ˜¯ä¸èƒ½æœ‰å†²çªã€‚  å¯¹äºå¾®å‰ç«¯æˆ‘ä»¬è¿˜è¦è€ƒè™‘æ ·å¼å†²çªï¼Œå£°æ˜å‘¨æœŸç®¡ç†å†²çªç­‰é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆä¸è€ƒè™‘è¿™äº›   æƒ³æŠŠé—®é¢˜èšç„¦åœ¨èµ„æºåŠ è½½çš„æ–¹å¼ä¸Š   å¾®å‰ç«¯ä¸€èˆ¬æœ‰ä¸¤ç§æ‰“åŒ…æ–¹å¼ï¼š1.å­åº”ç”¨ç‹¬ç«‹æ‰“åŒ…ï¼Œæ¨¡å—å®ç°è§£è€¦ï¼Œä½†è¿™ç§æ–¹å¼æ— æ³•æŠ½å–å…¬å…±çš„ä¾èµ–ï¼Œ2.æ•´ä½“åº”ç”¨æ‰“ä¸€ä¸ªæ‰“åŒ… å¾ˆå¥½çš„è§£å†³æˆ‘ä»¬ä¸Šé¢ç¬¬ä¸€ç§æ–¹å¼çš„é—®é¢˜ï¼Œä½†æ˜¯æ‰“åŒ…æ•ˆç‡é€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ã€‚ä¸å…·å¤‡æ°´å¹³çš„æ‰©å±•èƒ½åŠ›ã€‚<br>ç”±äºå¾®å‰ç«¯è¿˜è¦è€ƒè™‘æ ·å¼å†²çªã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ‰€ä»¥æœ¬æ–‡åªèšç„¦åœ¨èµ„æºåŠ è½½æ–¹å¼ä¸Šã€‚å¾®å‰ç«¯ä¸€èˆ¬æœ‰ä¸¤ç§æ‰“åŒ…æ–¹å¼ï¼š</p>
<ol>
<li>å­åº”ç”¨ç‹¬ç«‹æ‰“åŒ…ï¼Œæ¨¡å—æ›´è§£è€¦ï¼Œä½†æ— æ³•æŠ½å–å…¬å…±ä¾èµ–ç­‰ã€‚</li>
<li>æ•´ä½“åº”ç”¨ä¸€èµ·æ‰“åŒ…ï¼Œå¾ˆå¥½è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œä½†æ‰“åŒ…é€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ï¼Œä¸å…·å¤‡æ°´å¹³æ‰©å±•èƒ½åŠ›ã€‚</li>
</ol>
<p>ç»ˆäºæåˆ°æœ¬æ–‡çš„ä¸»è§’äº†ï¼Œæ¨¡å—è”é‚¦æ–¹å¼ä½œä¸º Webpack5 å†…ç½®æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€çš„ FederatedModuleï¼š<br>è¿™ä¸ªæ–¹æ¡ˆæ˜¯ç›´æ¥å°†ä¸€ä¸ªåº”ç”¨çš„åŒ…åº”ç”¨äºå¦ä¸€ä¸ªåº”ç”¨ï¼ŒåŒæ—¶å…·å¤‡æ•´ä½“åº”ç”¨ä¸€èµ·æ‰“åŒ…çš„å…¬å…±ä¾èµ–æŠ½å–èƒ½åŠ›ã€‚  æ¯”å¦‚ï¼šæˆ‘ä»¬ç›´æ¥å¯ä»¥åœ¨Searchåº”ç”¨é‡Œç›´æ¥ä½¿ç”¨å·²ç»å‘å¸ƒåˆ°çº¿ä¸Šçš„Homeåº”ç”¨çš„ç»„ä»¶ã€‚</p>
<p><strong>åº”ç”¨æ¡ˆä¾‹</strong><br>æœ¬æ¡ˆä¾‹æ¨¡æ‹Ÿä¸‰ä¸ªåº”ç”¨ï¼š Nav ã€ Search åŠ Home ã€‚æ¯ä¸ªåº”ç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œåˆé€šè¿‡æ¨¡å—é‚¦è”ç³»åˆ°äº†ä¸€èµ·ã€‚<br>æ¯”å¦‚Homeéœ€è¦ä½¿ç”¨Navç»„ä»¶å…±äº«å‡ºæ¥çš„headerï¼ŒSearchå¯èƒ½è¦ä½¿ç”¨Headerå’ŒHomeç»„ä»¶æ„å»ºå‡ºæ¥çš„HomeListã€‚<br>æ¨¡å—è”é‚¦å°†ä»–ä»¬å…±äº«çš„æ¨¡å—æš´éœ²å‡ºæ¥è¿›è¡Œå¼•ç”¨ã€‚<br>1ã€Nav å¯¼èˆª<br>src&#x2F;header.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const Header = () =&gt; &#123;</span><br><span class="line"> const header = document.createElement(&#x27;h1&#x27;)</span><br><span class="line"> header.textContent = &#x27;å…¬å…±å¤´éƒ¨å†…å®¹&#x27;</span><br><span class="line"> return header</span><br><span class="line">&#125;</span><br><span class="line">export default Header</span><br></pre></td></tr></table></figure>
<p>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import Header from &#x27;./Header&#x27;</span><br><span class="line">const div = document.createElement(&#x27;div&#x27;)</span><br><span class="line">div.appendChild(Header())</span><br><span class="line">document.body.appendChild(div)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   // æ¨¡å—è”é‚¦åå­—</span><br><span class="line">   name: &#x27;nav&#x27;,</span><br><span class="line">   // å¤–éƒ¨è®¿é—®çš„èµ„æºåå­—</span><br><span class="line">   filename: &#x27;remoteEntry.js&#x27;,</span><br><span class="line">   // å¼•ç”¨çš„å¤–éƒ¨èµ„æºåˆ—è¡¨</span><br><span class="line">   remotes: &#123;&#125;,</span><br><span class="line">   // æš´éœ²ç»™å¤–éƒ¨èµ„æºåˆ—è¡¨</span><br><span class="line">   exposes: &#123;</span><br><span class="line">    &#x27;./Header&#x27;: &#x27;./src/Header.js&#x27;,   // æš´éœ² Headerç»„ä»¶  keyï¼šå¯ä»¥å®šä¹‰æˆ./Header è¿™ä¸ª./Headerå¹¶ä¸ä»£è¡¨æ˜¯æˆ‘å½“å‰å¼•ç”¨ä¸‹çš„æŸä¸ªè·¯å¾„   è€Œæ˜¯å°†æ¥åœ¨åˆ«äººç”¨çš„æ—¶å€™åŸºäºè¿™ä¸ªè·¯å¾„æ¥æ‹¼æ¥urlï¼Œå€¼æ˜¯æ­£çœŸçš„æˆ‘ä»¬æœ¬åœ°é¡¹ç›®çš„åº”ç”¨</span><br><span class="line">  &#125;,</span><br><span class="line">   // å…±äº«æ¨¡å—ï¼Œå¦‚lodash</span><br><span class="line">   shared: &#123;&#125;,   // å¦‚æœæˆ‘ä»¬çš„ headeræ¨¡å—é‡Œæœ‰å…±äº«çš„ç¬¬ä¸‰æ–¹æ¨¡å—æ¯”å¦‚ï¼šlodashç­‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–æ”¾åˆ°è¿™é‡Œåœ¨æ‰“åŒ…çš„æ—¶å€™å¯ä»¥æŠŠç¬¬ä¸‰æ–¹çš„å…±äº«çš„æ¨¡å—æ‰“åˆ°å•ç‹¬çš„ä¸€ä¸ªåŒ…é‡Œã€‚</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3003</span><br></pre></td></tr></table></figure>

<p>2ã€Home é¦–é¡µ<br>src&#x2F;HomeList</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const HomeList = (num) =&gt; &#123;</span><br><span class="line"> let str = &#x27;&lt;ul&gt;&#x27;</span><br><span class="line"> for (let i = 0; i &lt; num; i++) &#123;</span><br><span class="line">  str += &#x27;&lt;li&gt;item &#x27; + i + &#x27;&lt;/li&gt;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"> str += &#x27;&lt;/ul&gt;&#x27;</span><br><span class="line"> return str</span><br><span class="line">&#125;</span><br><span class="line">export default HomeList</span><br></pre></td></tr></table></figure>
<p>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import HomeList from &#x27;./HomeList&#x27;</span><br><span class="line">remotes: &#123;</span><br><span class="line">    nav</span><br><span class="line">	(&#x27;nav/Header&#x27;)ï¼šremotes: &#123; nav &#125;Header    exposes: &#123;./Header&#x27;:&#x27;&#x27;&#125;</span><br><span class="line">import(&#x27;nav/Header&#x27;).then((Header) =&gt; &#123;  //å¼•ç”¨æ¨¡å—è”é‚¦çš„ç»„ä»¶  è¿™æ ·å¯¼å…¥åˆ«äººç»„ä»¶çš„æ—¶å€™éœ€è¦é€šè¿‡å¼‚æ­¥çš„æ–¹å¼å› ä¸º ç½‘ç»œå…±äº«æˆ–è€…æ˜¯æ¨¡å—è½½å…¥ æ˜¯ç”±å»¶è¿Ÿçš„ï¼Œæ‰€ä»¥è¦é€šè¿‡promiseçš„æ–¹å¼ï¼ˆå¼‚æ­¥æ¨¡å—åŠ è½½çš„å½¢å¼ï¼‰å»å¼•ç”¨å®ƒã€‚</span><br><span class="line"> const body = document.createElement(&#x27;div&#x27;)</span><br><span class="line"> body.appendChild(Header.default())</span><br><span class="line"> document.body.appendChild(body)</span><br><span class="line"> document.body.innerHTML += HomeList(5)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   name: &quot;home&quot;,</span><br><span class="line">   filename: &quot;remoteEntry.js&quot;,</span><br><span class="line">   remotes: &#123;</span><br><span class="line">    nav: &quot;nav@http://localhost:3003/remoteEntry.js&quot;,    // å¼•ç”¨ç¬¬ä¸‰æ–¹æˆ–åˆ«äººå†™å¥½çš„åº”ç”¨çš„è·¯å¾„ã€‚è¿œç«¯çš„æœåŠ¡è·¯å¾„</span><br><span class="line">  &#125;,</span><br><span class="line">   exposes: &#123;</span><br><span class="line">    &#x27;./HomeList&#x27;: &#x27;./src/HomeList.js&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line">   shared: &#123;&#125;,</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3001</span><br></pre></td></tr></table></figure>

<p>3ã€search æœç´¢<br>src&#x2F;index</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Promise.all([import(&#x27;nav/Header&#x27;), import(&#x27;home/HomeList&#x27;)])</span><br><span class="line">.then(([&#123;</span><br><span class="line">  default: Header</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  default: HomeList</span><br><span class="line">&#125;]) =&gt; &#123;</span><br><span class="line">  document.body.appendChild(Header())</span><br><span class="line">  document.body.innerHTML += HomeList(4)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   name: &#x27;search&#x27;,</span><br><span class="line">   filename: &#x27;remoteEntry.js&#x27;,</span><br><span class="line">   remotes: &#123;</span><br><span class="line">    nav: &quot;nav@http://localhost:3003/remoteEntry.js&quot;,</span><br><span class="line">    home: &quot;home@http://localhost:3001/remoteEntry.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">   exposes: &#123;&#125;,</span><br><span class="line">   shared: &#123;&#125;,</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3002</span><br></pre></td></tr></table></figure>
<h2 id="å-æå‡æ„å»ºæ€§èƒ½"><a href="#å-æå‡æ„å»ºæ€§èƒ½" class="headerlink" title="å. æå‡æ„å»ºæ€§èƒ½"></a>å. æå‡æ„å»ºæ€§èƒ½</h2><p>æ¾„æ¸…ï¼šæœ‰æ—¶å€™æˆ‘ä»¬ä¼šç¬¼ç»Ÿçš„è¯´webpackçš„æ€§èƒ½æå‡ï¼Œå®é™…ä¸Šwebpackçš„æ€§èƒ½æå‡å¯ä»¥åˆ†ä¸ºä¸¤ç±»  ç¬¬ä¸€ç±»æ˜¯é€šè¿‡webpackæ¥æå‡æˆ‘ä»¬é¡¹ç›®æ€§èƒ½  å¦‚ï¼šç½‘ç«™çš„é¦–å±åˆ°è¾¾æ—¶é—´ï¼Œè¿™ä¸ªä¼˜åŒ–çš„å—ç›Šè€…æ˜¯cç«¯çš„ç”¨æˆ·  ï¼Œ2.æå‡webpackçš„æ„å»ºç¼–è¯‘æ€§èƒ½ï¼Œå¦‚ï¼šæé«˜æ‰“åŒ…é€Ÿåº¦ï¼Œé™ä½æ‰“åŒ…æ—¶é—´ï¼Œè¿™ä¸ªä¼˜åŒ–çš„å—ç›Šè€…æ˜¯æˆ‘ä»¬çš„å¼€å‘äººå‘˜ã€‚   æœ¬ç« è®²çš„æ˜¯ç¬¬äºŒç§<br>æŠŠå®˜ç½‘ä¸Šæå‡ºçš„webpack5 æå‡æ„å»ºæ€§èƒ½çš„ç‚¹  åˆ—ï¼š<br><strong>æ³¨æ„ï¼š</strong>  webpack æ¯ä¸ªç‰ˆæœ¬çš„ä¼˜åŒ–ç‚¹éƒ½æ˜¯ä¸ä¸€æ ·çš„<br>é€šç”¨ç¯å¢ƒï¼šè¿™äº›ä¼˜åŒ–æ—¢é€‚ç”¨äºå¼€å‘åŒ–å¢ƒä¹Ÿé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚<br>å¼€å‘ç¯å¢ƒï¼š<br>ç”Ÿäº§ç¯å¢ƒï¼š<br><strong>é€šç”¨ç¯å¢ƒ</strong><br>æ— è®ºä½ æ˜¯åœ¨ å¼€å‘ç¯å¢ƒ è¿˜æ˜¯åœ¨ ç”Ÿäº§ç¯å¢ƒ ä¸‹è¿è¡Œæ„å»ºè„šæœ¬ï¼Œä»¥ä¸‹æœ€ä½³å®è·µéƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>1ã€æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬<br>ä½¿ç”¨æœ€æ–°çš„ webpack ç‰ˆæœ¬ã€‚æˆ‘ä»¬ä¼šç»å¸¸è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚webpack çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬æ˜¯ï¼š<br>å°† Node.js æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿæœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå°†ä½ çš„ package ç®¡ç†å·¥å…·ï¼ˆä¾‹å¦‚ npm æˆ–è€… yarn ï¼‰æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿæœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚è¾ƒæ–°çš„ç‰ˆæœ¬èƒ½å¤Ÿå»ºç«‹æ›´é«˜æ•ˆçš„æ¨¡å—æ ‘ä»¥åŠæé«˜è§£æé€Ÿåº¦ã€‚</p>
<p>2ã€loader<br>å°† loader åº”ç”¨äºæœ€å°‘æ•°é‡çš„å¿…è¦æ¨¡å—ã€‚è€Œéå¦‚ä¸‹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> //...</span><br><span class="line"> module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">  &#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    loader: &#x27;babel-loader&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line"> ],</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä½¿ç”¨ include å­—æ®µï¼Œä»…å°† loader åº”ç”¨åœ¨å®é™…éœ€è¦å°†å…¶è½¬æ¢çš„æ¨¡å—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> //...</span><br><span class="line"> module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">  &#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    include: path.resolve(__dirname, &#x27;src&#x27;),</span><br><span class="line">    loader: &#x27;babel-loader&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line"> ],</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>3ã€å¼•å¯¼(bootstrap)<br>æ¯ä¸ªé¢å¤–çš„ loader&#x2F;plugin éƒ½æœ‰å…¶å¯åŠ¨æ—¶é—´ã€‚å°½é‡å°‘åœ°ä½¿ç”¨å·¥å…·ã€‚</p>
<p>4ã€è§£æ<br>ä»¥ä¸‹æ­¥éª¤å¯ä»¥æé«˜è§£æé€Ÿåº¦ï¼š<br>å‡å°‘ resolve.modules , resolve.extensions , resolve.mainFiles ,resolve.descriptionFiles ä¸­æ¡ç›®æ•°é‡ï¼Œå› ä¸ºä»–ä»¬ä¼šå¢åŠ æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ã€‚</p>
<p>å¦‚æœä½ ä¸ä½¿ç”¨ symlinksï¼ˆä¾‹å¦‚ npm link æˆ–è€… yarn link ï¼‰ï¼Œå¯ä»¥è®¾ç½®resolve.symlinks: false ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨è‡ªå®šä¹‰ resolve plugin è§„åˆ™ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®š context ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥è®¾ç½® resolve.cacheWithContext: false ã€‚</p>
<p>5ã€å°å³æ˜¯å¿«(smaller &#x3D; faster)<br>å‡å°‘ç¼–è¯‘ç»“æœçš„æ•´ä½“å¤§å°ï¼Œä»¥æé«˜æ„å»ºæ€§èƒ½ã€‚å°½é‡ä¿æŒ chunk ä½“ç§¯å°ã€‚ä½¿ç”¨æ•°é‡æ›´å°‘&#x2F;ä½“ç§¯æ›´å°çš„ libraryã€‚</p>
<p>åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ SplitChunksPlugin ã€‚<br>åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ SplitChunksPlugin ï¼Œå¹¶å¼€å¯ async æ¨¡å¼ã€‚<br>ç§»é™¤æœªå¼•ç”¨ä»£ç ã€‚<br>åªç¼–è¯‘ä½ å½“å‰æ­£åœ¨å¼€å‘çš„é‚£äº›ä»£ç ã€‚</p>
<p>6ã€æŒä¹…åŒ–ç¼“å­˜<br>åœ¨ webpack é…ç½®ä¸­ä½¿ç”¨ cache é€‰é¡¹ã€‚ä½¿ç”¨ package.json ä¸­çš„ â€œpostinstallâ€æ¸…é™¤ç¼“å­˜ç›®å½•ã€‚<br>å°† cache ç±»å‹è®¾ç½®ä¸ºå†…å­˜æˆ–è€…æ–‡ä»¶ç³»ç»Ÿã€‚ memory é€‰é¡¹å¾ˆç®€å•ï¼Œå®ƒå‘Šè¯‰ webpackåœ¨å†…å­˜ä¸­å­˜å‚¨ç¼“å­˜ï¼Œä¸å…è®¸é¢å¤–çš„é…ç½®ï¼š<br>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> //...</span><br><span class="line"> cache: &#123;</span><br><span class="line">  type: &#x27;memory&#x27;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>7ã€è‡ªå®šä¹‰ plugin&#x2F;loader<br>å¯¹å®ƒä»¬è¿›è¡Œæ¦‚è¦åˆ†æï¼Œä»¥å…åœ¨æ­¤å¤„å¼•å…¥æ€§èƒ½é—®é¢˜ã€‚<br>8ã€dll<br>ä½¿ç”¨ DllPlugin ä¸ºæ›´æ”¹ä¸é¢‘ç¹çš„ä»£ç ç”Ÿæˆå•ç‹¬çš„ç¼–è¯‘ç»“æœã€‚è¿™å¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„ç¼–è¯‘é€Ÿåº¦ï¼Œå°½ç®¡å®ƒå¢åŠ äº†æ„å»ºè¿‡ç¨‹çš„å¤æ‚åº¦ã€‚</p>
<p>webpack.all.config.js  é…ç½®å…³äºdllç›¸å…³çš„å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">	mode:&#x27;production&#x27;   // åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹é¢å»åšäº‹æƒ…</span><br><span class="line">	entry:&#123;</span><br><span class="line">		jquery:[&#x27;jquery&#x27;],</span><br><span class="line">	&#125;,  //æ³¨æ„ï¼šè¿™ä¸ªentryä¸æ˜¯é…ç½®æœ¬åœ°çš„åŒ…ï¼Œè€Œæ˜¯è¦é…ç½®æˆ‘ä»¬åœ¨node_modulesé‡Œé¢å®‰è£…çš„ç¬¬ä¸‰æ–¹çš„åŒ…</span><br><span class="line">	output:&#123;</span><br><span class="line">		filename:&#x27;[name].js&#x27;     // [name]  å–åˆ°çš„æ˜¯æœ¬èº«çš„jqueryçš„chunkçš„åå­—</span><br><span class="line">		path:path.resolve(__dirname,&#x27;dll&#x27;),</span><br><span class="line">		library:&#x27;[name]_[hash]&#x27;    // æŠŠä»–å¯¼å‡ºä¸€ä¸ªåº“    ç»™è¿™ä¸ªåŒ…èµ·äº†ä¸€ä¸ªåå­—ï¼Œæ‰“ä»–å¯¼å‡ºä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åŒ…ã€‚</span><br><span class="line">	&#125;,</span><br><span class="line">	plugins:[</span><br><span class="line">		new webpack.DllPlugin(&#123;</span><br><span class="line">			name:&#x27;[name]_[hash]&#x27;,     //åå­—å’Œä¸Šé¢libraryå–çš„åå­—æ˜¯ä¸€æ ·çš„</span><br><span class="line">			path:path.resolve(__dirname,&#x27;dll/manifest.json&#x27;)      // æŠŠä¸€ä¸ªmanifestçš„æ–‡ä»¶ç»™ç”Ÿæˆå‡ºæ¥</span><br><span class="line">		&#125;)</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">package.json</span><br><span class="line">&#123;</span><br><span class="line">	&quot;scripts&quot;:&#123;</span><br><span class="line">		&quot;all&quot;:&quot;webpack --config ./webpack.dll.config.js&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">webpack.config.js</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">plugins:[</span><br><span class="line">	new webpack.DllReferencePlugin(&#123;</span><br><span class="line">		manifest:path.resolve(__dirname,&#x27;./all/manifest.json&#x27;)     // å®ƒçš„å€¼å°±æ˜¯åˆšåˆšç”Ÿæˆçš„manifest</span><br><span class="line">	&#125;)    //å’Œåˆšæ‰çš„DllPluginåšäº†ä¸€ä¸ªå‘¼åº”</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>ä»…ä»…æ˜¯æé«˜äº†æ„å»ºé€Ÿåº¦  å¦‚æœæƒ³æŠŠjqueryæ”¾åˆ°é¡µé¢ä¸Šæ˜¾ç¤ºçš„è¯è¿˜æ˜¯æœ‰äº›é—®é¢˜çš„ã€‚   è¿˜éœ€è¦å¯¹dllæ–‡ä»¶è¿›è¡Œä¸€æ¬¡æ‰“åŒ…   å¯ä»¥ä½¿ç”¨æ’ä»¶æ¥å®Œæˆ<br>npm install add-asset-html-webpack-plugin -D<br>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const AddAssetHtmlPlugin = require(&#x27;add-asset-html-webpack-plugin&#x27;)</span><br><span class="line">plugins:[</span><br><span class="line">	new AddAssetHtmlPlugin(&#123;</span><br><span class="line">		filepath:path.resolve(__dirname,&#x27;./dll/jquery.js&#x27;),</span><br><span class="line">		publicPath:&#x27;./&#x27;</span><br><span class="line">	&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å¤§å°æœ‰å³è¾¹å›æ¥ä¹‹å‰çš„å¤§å°ï¼Œä½†æ˜¯jqueryä¼šå•ç‹¬åšæˆä¸€ä¸ªæ–‡ä»¶æ‰“å‡ºæ¥ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åœ¨æœ€åçš„æ—¶å€™åœ¨åšä¸€æ¬¡æ‰“åŒ…ï¼Œä¹‹å‰æ‰“åŒ…çš„æ—¶å€™å¯ä»¥ä½¿ç”¨dllè¿™ä¸ªæ‰€è°“çš„linkï¼Œå®æ—¶ä¸Šä»–è¿˜æ˜¯é€šè¿‡linkå»åŠ è½½çš„æˆ‘ä»¬çš„jquery.jsæ–‡ä»¶</p>
<p>9ã€worker æ± (worker pool)<br>thread-loader å¯ä»¥å°†éå¸¸æ¶ˆè€—èµ„æºçš„ loader åˆ†æµç»™ä¸€ä¸ª worker poolã€‚</p>
<p>è¯¥æ€ä¹ˆå»æµ‹è¯•worker pool  ï¼Œå®šä¹‰ï¼šå®ƒçš„å®ç°åŸç†å°±æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠä»–å®šä¹‰åœ¨å…¶ä»–çš„loaderå‰é¢ç„¶åæŠŠå…¶ä»–çš„loaderæ”¾åœ¨å¦å¤–ä¸€ä¸ªworker poolçš„æ± é‡Œé¢å»è¿è¡Œæ¥æé«˜æˆ‘ä»¬çš„æ‰“åŒ…é€Ÿåº¦ï¼Œå…¶å®å°±æ˜¯æŠŠä»–æ”¾åˆ°å¦å¤–ä¸€ä¸ªcpuå»è¿è¡Œäº†ï¼Œæ¥åˆ©ç”¨æˆ‘ä»¬ç”µè„‘çš„cpuã€‚<br>npm install thread-loader -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">module:&#123;</span><br><span class="line">	rules:[</span><br><span class="line">		&#123;</span><br><span class="line">			test:/\.js$/,</span><br><span class="line">			exclude:/node_modules/,</span><br><span class="line">			use:[</span><br><span class="line">				&#123;</span><br><span class="line">					loader:&#x27;babel-loader&#x27;   //é—®äº†æé«˜Babel-loaderçš„æ‰“åŒ…é€Ÿåº¦å¯ä»¥æŠŠä»–æ”¾åœ¨ worker poolé‡Œè¿è¡Œï¼ˆå¯ä»¥åœ¨å•ç‹¬çš„cpué‡Œå»è¿è¡Œï¼‰</span><br><span class="line">				options:&#123;</span><br><span class="line">					presets:[&#x27;@babel/preset-env&#x27;]   //è¿™æ ·ä»–å°±å¯ä»¥è§£ææˆ‘ä»¬jsé‡Œé¢çš„ä¸€äº›es6çš„ä»£ç äº†</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;  // thread-loaderå¯åŠ¨éœ€è¦å¤§æ¦‚è€—è´¹600msçš„æ—¶é—´ï¼ˆæœ‰å¼€é”€ï¼‰ï¼Œè¿™ä¸ªloaderå¯¹è€—æ—¶éå¸¸æ‰“çš„loaderæœ‰æ„ä¹‰ã€‚</span><br><span class="line">					loader:&#x27;thread-loader&#x27;,</span><br><span class="line">					options:&#123;</span><br><span class="line">						workers:2    // cpuçš„æ•°é‡</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸è¦ä½¿ç”¨å¤ªå¤šçš„ workerï¼Œå› ä¸º Node.js çš„ runtime å’Œ loader éƒ½æœ‰å¯åŠ¨å¼€é”€ã€‚æœ€å°åŒ– worker å’Œ mainprocess(ä¸»è¿›ç¨‹) ä¹‹é—´çš„æ¨¡å—ä¼ è¾“ã€‚è¿›ç¨‹é—´é€šè®¯(IPC,inter process communication)æ˜¯éå¸¸æ¶ˆè€—èµ„æºçš„ã€‚</p>
<p>10ã€Progress plugin<br>å°† ProgressPlugin ä» webpack ä¸­åˆ é™¤ï¼Œå¯ä»¥ç¼©çŸ­æ„å»ºæ—¶é—´ã€‚è¯·æ³¨æ„ï¼Œ<br>ProgressPlugin å¯èƒ½ä¸ä¼šä¸ºå¿«é€Ÿæ„å»ºæä¾›å¤ªå¤šä»·å€¼ï¼Œå› æ­¤ï¼Œè¯·æƒè¡¡åˆ©å¼Šå†ä½¿ç”¨ã€‚</p>
<p><strong>å¼€å‘ç¯å¢ƒ</strong><br>ä»¥ä¸‹æ­¥éª¤å¯¹äº å¼€å‘ç¯å¢ƒ ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚<br>1ã€å¢é‡ç¼–è¯‘<br>ä½¿ç”¨ webpack çš„ watch mode(ç›‘å¬æ¨¡å¼)ã€‚è€Œä¸ä½¿ç”¨å…¶ä»–å·¥å…·æ¥ watch æ–‡ä»¶å’Œè°ƒç”¨webpack ã€‚å†…ç½®çš„ watch mode ä¼šè®°å½•æ—¶é—´æˆ³å¹¶å°†æ­¤ä¿¡æ¯ä¼ é€’ç»™ compilation ä»¥ä½¿ç¼“å­˜å¤±æ•ˆã€‚</p>
<p>åœ¨æŸäº›é…ç½®ç¯å¢ƒä¸­ï¼Œwatch mode ä¼šå›é€€åˆ° poll mode(è½®è¯¢æ¨¡å¼)ã€‚ç›‘å¬è®¸å¤šæ–‡ä»¶ä¼šå¯¼è‡´ CPU å¤§é‡è´Ÿè½½ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ watchOptions.poll æ¥å¢åŠ è½®è¯¢çš„é—´éš”æ—¶é—´ã€‚</p>
<p>2ã€åœ¨å†…å­˜ä¸­ç¼–è¯‘<br>ä¸‹é¢å‡ ä¸ªå·¥å…·é€šè¿‡åœ¨å†…å­˜ä¸­ï¼ˆè€Œä¸æ˜¯å†™å…¥ç£ç›˜ï¼‰ç¼–è¯‘å’Œ serve èµ„æºæ¥æé«˜æ€§èƒ½ï¼š</p>
<p>webpack-dev-server<br>webpack-hot-middleware<br>webpack-dev-middleware<br>3ã€stats.toJson åŠ é€Ÿ<br>webpack 4 é»˜è®¤ä½¿ç”¨ stats.toJson() è¾“å‡ºå¤§é‡æ•°æ®ã€‚é™¤éåœ¨å¢é‡æ­¥éª¤ä¸­åšå¿…è¦çš„ç»Ÿè®¡ï¼Œå¦åˆ™è¯·é¿å…è·å– stats å¯¹è±¡çš„éƒ¨åˆ†å†…å®¹ã€‚ webpack-dev-server åœ¨ v3.1.3 ä»¥åçš„ç‰ˆæœ¬ï¼ŒåŒ…å«ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¿®å¤ï¼Œå³æœ€å°åŒ–æ¯ä¸ªå¢é‡æ„å»ºæ­¥éª¤ä¸­ï¼Œä» stats å¯¹è±¡è·å–çš„æ•°æ®é‡ã€‚</p>
<p>4ã€Devtool<br>éœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒçš„ devtool è®¾ç½®ï¼Œä¼šå¯¼è‡´æ€§èƒ½å·®å¼‚ã€‚</p>
<p>â€œevalâ€ å…·æœ‰æœ€å¥½çš„æ€§èƒ½ï¼Œä½†å¹¶ä¸èƒ½å¸®åŠ©ä½ è½¬è¯‘ä»£ç ã€‚<br>å¦‚æœä½ èƒ½æ¥å—ç¨å·®ä¸€äº›çš„ map è´¨é‡ï¼Œå¯ä»¥ä½¿ç”¨ cheap-source-map å˜ä½“é…ç½®æ¥æé«˜æ€§èƒ½<br>ä½¿ç”¨ eval-source-map å˜ä½“é…ç½®è¿›è¡Œå¢é‡ç¼–è¯‘ã€‚</p>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ€ä½³é€‰æ‹©æ˜¯ eval-cheap-module-source-map ã€‚</p>
<p>5ã€é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ‰ä¼šç”¨åˆ°çš„å·¥å…·<br>æŸäº› utility, plugin å’Œ loader éƒ½åªç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨TerserPlugin æ¥ minify(å‹ç¼©) å’Œ mangle(æ··æ·†ç ´å) ä»£ç æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚é€šå¸¸åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œåº”è¯¥æ’é™¤ä»¥ä¸‹è¿™äº›å·¥å…·ï¼š</p>
<p>TerserPlugin<br>[fullhash] &#x2F; [chunkhash] &#x2F; [contenthash]<br>AggressiveSplittingPlugin<br>AggressiveMergingPlugin<br>ModuleConcatenationPlugin</p>
<p>6ã€æœ€å°åŒ– entry chunk<br>Webpack åªä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è¾“å‡ºå·²ç»æ›´æ–°çš„ chunkã€‚æŸäº›é…ç½®é€‰é¡¹ï¼ˆHMR,output.chunkFilename çš„ [name] &#x2F; [chunkhash]&#x2F;[contenthash] ï¼Œ[fullhash] ï¼‰æ¥è¯´ï¼Œé™¤äº†å¯¹å·²ç»æ›´æ–°çš„ chunk æ— æ•ˆä¹‹å¤–ï¼Œå¯¹äº entry chunk ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚<br>ç¡®ä¿åœ¨ç”Ÿæˆ entry chunk æ—¶ï¼Œå°½é‡å‡å°‘å…¶ä½“ç§¯ä»¥æé«˜æ€§èƒ½ã€‚ä¸‹é¢çš„é…ç½®ä¸ºè¿è¡Œæ—¶ä»£ç åˆ›å»ºäº†ä¸€ä¸ªé¢å¤–çš„ chunkï¼Œæ‰€ä»¥å®ƒçš„ç”Ÿæˆä»£ä»·è¾ƒä½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> // ...</span><br><span class="line"> optimization: &#123;</span><br><span class="line">  runtimeChunk: true,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>7ã€é¿å…é¢å¤–çš„ä¼˜åŒ–æ­¥éª¤<br>Webpack é€šè¿‡æ‰§è¡Œé¢å¤–çš„ç®—æ³•ä»»åŠ¡ï¼Œæ¥ä¼˜åŒ–è¾“å‡ºç»“æœçš„ä½“ç§¯å’ŒåŠ è½½æ€§èƒ½ã€‚è¿™äº›ä¼˜åŒ–é€‚ç”¨äºå°å‹ä»£ç åº“ï¼Œä½†æ˜¯åœ¨å¤§å‹ä»£ç åº“ä¸­å´éå¸¸è€—è´¹æ€§èƒ½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> // ...</span><br><span class="line"> optimization: &#123;</span><br><span class="line">  removeAvailableModules: false,</span><br><span class="line">  removeEmptyChunks: false,</span><br><span class="line">  splitChunks: false,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>8ã€è¾“å‡ºç»“æœä¸æºå¸¦è·¯å¾„ä¿¡æ¯<br>Webpack ä¼šåœ¨è¾“å‡ºçš„ bundle ä¸­ç”Ÿæˆè·¯å¾„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œåœ¨æ‰“åŒ…æ•°åƒä¸ªæ¨¡å—çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¼šå¯¼è‡´é€ æˆåƒåœ¾å›æ”¶æ€§èƒ½å‹åŠ›ã€‚åœ¨ options.output.pathinfo è®¾ç½®ä¸­å…³é—­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> // ...</span><br><span class="line"> output: &#123;</span><br><span class="line">  pathinfo: false,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>9ã€Node.js ç‰ˆæœ¬ 8.9.10-9.11.1<br>Node.js v8.9.10 - v9.11.1 ä¸­çš„ ES2015 Map å’Œ Set å®ç°ï¼Œå­˜åœ¨ æ€§èƒ½å›é€€ã€‚Webpack å¤§é‡åœ°ä½¿ç”¨è¿™äº›æ•°æ®ç»“æ„ï¼Œå› æ­¤è¿™æ¬¡å›é€€ä¹Ÿä¼šå½±å“ç¼–è¯‘æ—¶é—´ã€‚<br>ä¹‹å‰å’Œä¹‹åçš„ Node.js ç‰ˆæœ¬ä¸å—å½±å“ã€‚</p>
<p>10ã€TypeScript loader<br>ä½ å¯ä»¥ä¸º loader ä¼ å…¥ transpileOnly é€‰é¡¹ï¼Œä»¥ç¼©çŸ­ä½¿ç”¨ ts-loader æ—¶çš„æ„å»ºæ—¶é—´ã€‚ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œä¼šå…³é—­ç±»å‹æ£€æŸ¥ã€‚å¦‚æœè¦å†æ¬¡å¼€å¯ç±»å‹æ£€æŸ¥ï¼Œè¯·ä½¿ç”¨<br>ForkTsCheckerWebpackPlugin ã€‚ä½¿ç”¨æ­¤æ’ä»¶ä¼šå°†æ£€æŸ¥è¿‡ç¨‹ç§»è‡³å•ç‹¬çš„è¿›ç¨‹ï¼Œå¯ä»¥åŠ å¿« TypeScript çš„ç±»å‹æ£€æŸ¥å’Œ ESLint æ’å…¥çš„é€Ÿåº¦ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> // ...</span><br><span class="line"> test: /\.tsx?$/,</span><br><span class="line"> use: [</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;ts-loader&#x27;,</span><br><span class="line">   options: &#123;</span><br><span class="line">    transpileOnly: true,</span><br><span class="line">  &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line">],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>ç”Ÿäº§ç¯å¢ƒ</strong><br>ä»¥ä¸‹æ­¥éª¤å¯¹äº ç”Ÿäº§ç¯å¢ƒ ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚<br>Source Maps<br>source map ç›¸å½“æ¶ˆè€—èµ„æºã€‚ä½ çœŸçš„éœ€è¦å®ƒä»¬ï¼Ÿ</p>
<h2 id="æœ¬ç¯‡å®Œâ€“"><a href="#æœ¬ç¯‡å®Œâ€“" class="headerlink" title="-æœ¬ç¯‡å®Œâ€“"></a>-æœ¬ç¯‡å®Œâ€“</h2><p><strong>ä¸‰ã€é¡¹ç›®å®æˆ˜ç¯‡</strong></p>
<p>Webpackä¸React<br>Webpackä¸Vue<br>Webpackä¸jQuery<br>Webpckä¸Node&#x2F;Express</p>
<p><strong>å››ã€å†…éƒ¨åŸç†ç¯‡</strong><br>webpackåŸç†<br>å¼€å‘loader plugin</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/11/28/webpack/webpack%E9%AB%98%E7%BA%A7/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpackåŸºç¡€">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/11/24/webpack/webpack%E5%9F%BA%E7%A1%80/">webpackåŸºç¡€</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-11-24
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€-åŸºç¡€æ„Ÿå¿µ"><a href="#ä¸€-åŸºç¡€æ„Ÿå¿µ" class="headerlink" title="ä¸€.åŸºç¡€æ„Ÿå¿µ"></a>ä¸€.åŸºç¡€æ„Ÿå¿µ</h2><p>webpackæ˜¯è¿è¡Œåœ¨nodejsä¸­çš„<br>webpack çš„ why ä¸how</p>
<p>ä¸ºä»€ä¹ˆå­¦   ï¼ˆåŸå…ˆscriptè¦æŒ‰é¡ºåºï¼‰<br>æ„å»ºæ‰“åŒ…ï¼Ÿä¹ æƒ¯ä½¿ç”¨å¼€ç®±å³ç”¨çš„è„šæ‰‹æ¶æ¥å®Œæˆé¡¹ç›®é…ç½®ï¼Œå¯¹å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„æ­å»ºäº†è§£çŸ¥ä¹‹ç”šå°‘ï¼Œå‰ç«¯æ¶æ„æœ€é‡è¦çš„ç‚¹åœ¨äº å‰ç«¯å·¥ç¨‹åŒ–ï¼ˆwebpackå°±æ˜¯æˆ‘ä»¬æ­å»ºå‰ç«¯ç¯å¢ƒçš„æŠ€æœ¯é€‰å‹ï¼Œä¹Ÿæ˜¯æœ€ä¸»æµçš„ï¼‰</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨webpack<br>é—®é¢˜ï¼šä½œç”¨åŸŸï¼Œæ–‡ä»¶å¤§ï¼ˆç½‘ç»œç“¶é¢ˆï¼ŒçŸ­æš‚ç™½å±ï¼‰ï¼Œå¯è¯»æ€§å·®ï¼Œå¯ç»´æŠ¤æ€§å¼±</p>
<p>è§£å†³ï¼š<br>1.ä½œç”¨åŸŸï¼šä½¿ç”¨gruntå’Œgulpç®¡ç†é¡¹ç›®èµ„æºï¼Œç§°ä¹‹ä¸ºä»»åŠ¡æ‰§è¡Œå™¨ï¼Œå°†æ‰€æœ‰çš„é¡¹ç›®æ–‡ä»¶æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œï¼ˆåˆ©ç”¨jsçš„ç«‹å³è°ƒç”¨è¡¨è¾¾å¼IIFEï¼‰<br>    å½“å‡½æ•°å˜æˆä¸€ä¸ªç«‹å³è°ƒç”¨è¡¨è¾¾å¼æ—¶ï¼Œè¡¨è¾¾å¼çš„å˜é‡æ˜¯ä¸èƒ½åœ¨å¤–éƒ¨è®¿é—®çš„ï¼Œä¸ä¼šæ±¡æŸ“æˆ‘ä»¬çš„windowç¯å¢ƒï¼Œè§£å†³äº†ä½œç”¨åŸŸé—®é¢˜ã€‚<br>    å¯ä»¥é€šè¿‡èµ‹å€¼å˜é‡ å‡½æ•°ä¸­é€šè¿‡returnæš´éœ²å‡ºæ¥å˜é‡è·å–æ•°æ®<br><img src="http://hghqz.vip/webpack/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%97%AE%E9%A2%98.jpg" alt="ä½œç”¨åŸŸé—®é¢˜" title="ä½œç”¨åŸŸé—®é¢˜"></p>
<pre><code>é—®é¢˜ä½¿ç”¨åè¡Œä»£ç å¯èƒ½å°±è¦åŠ è½½ä¸‡è¡Œä»£ç ï¼ˆé€šè¿‡ä»£ç æ‹†åˆ†è§£å†³,æ¨¡å—åŒ–ï¼Œcommonjs,amd,cmd,es6ï¼‰
</code></pre>
<p>nodeç¯å¢ƒè¯­æ³•åœ¨æµè§ˆå™¨æ— æ³•åŠ è½½å®ƒä¸æ”¯æŒcommonjs  ä»¥åŠä¸€äº›å…¶ä»–çš„è¯­æ³•<br>æ—©æœŸè§£å†³æ–¹æ¡ˆï¼ˆé¡µé¢å¯¼å…¥require  define,scriptæ ‡ç­¾data-mainï¼‰<br>ç°åœ¨ECMAscript  é€šè¿‡es6æ‹¥æœ‰è‡ªå·±çš„æ¨¡å—åŒ–  export default  import from (script æ ‡ç­¾æŒ‡å®štype&#x3D;â€moduleâ€)<br>é€šè¿‡http-serveræ­å»ºä¸€ä¸ªhttpè¯·æ±‚</p>
<p>es6å¯èƒ½è¿˜ä¸å¤ªå…¼å®¹æ‰€ä»¥ä½¿ç”¨webpackå¸®æˆ‘ä»¬æ‰“åŒ…ï¼ˆvsç«å“ parcelç§°é›¶é…ç½®ç”¨æˆ·ä¸€èˆ¬æ— éœ€åšå…¶ä»–çš„é…ç½®å¼€å³èšç”¨ rollup.jsç”¨æ ‡å‡†åŒ–çš„æ ¼å¼æ¥ç¼–å†™ä»£ç es6é€šè¿‡å‡å°‘æ— ç”¨çš„ä»£ç æ¥å°½å¯èƒ½çš„ç¼©å°åŒ…çš„ä½“ç§¯ï¼Œä¸€èˆ¬åªç”¨æ¥æ‰“åŒ…js  é»‘é©¬vite vue3ä½¿ç”¨  æœ‰petite vueæ¡†æ¶ ä»å¼€å‘ ç¼–è¯‘ å‘å¸ƒ demo å‡ ä¹å…¨éƒ¨éƒ½æ˜¯Viteå®Œæˆçš„ åŸºäºesmoduleçš„æ„å»ºæ–¹å¼ æŒ‰éœ€ç¼–è¯‘ çƒ­æ¨¡å—æ›´æ–°  ä¸æ»‘ä½“éªŒ ä¸vue3åŸç†ç»“åˆï¼‰<br>ä¸ä¼šè°å–ä»£è°  å„æœ‰å„çš„åº”ç”¨åœºæ™¯</p>
<h2 id="äºŒ-åŸºç¡€åº”ç”¨"><a href="#äºŒ-åŸºç¡€åº”ç”¨" class="headerlink" title="äºŒ.åŸºç¡€åº”ç”¨"></a>äºŒ.åŸºç¡€åº”ç”¨</h2><p><strong>å®‰è£…ä½¿ç”¨</strong>ï¼ˆè¦æ³¨æ„webpackä¸nodejsç‰ˆæœ¬å…¼å®¹é—®é¢˜ï¼‰<br>1.è¦æœ‰nodejs è¿è¡Œç¯å¢ƒ<br>2.å…¨å±€ä¸å·¥ä½œç›®å½•ä¸‹å®‰è£…<br>    npm install webpack webpack-cli â€“global  å…¨å±€ åœ¨ä»»ä½•ç›®å½•éƒ½å¯ä»¥è¿è¡Œwebpack(ä¸æ¨èå…¨å±€ä½¿ç”¨)<br>    æœ¬åœ°å®‰è£…éœ€è¦å…ˆæœ‰npmçš„åŒ…ç®¡ç†çš„é…ç½®æ–‡ä»¶npm init -y  npm install webpack webpack-cli â€“save-dev<br><strong>è¿è¡Œ</strong><br>1.ç›´æ¥ä½¿ç”¨ webpack  é»˜è®¤æ‰“åŒ…  ï¼ˆå…¥å£ï¼š.&#x2F;src&#x2F;index å‡ºå£ï¼šdist&#x2F;main.jsï¼‰<br>2.webpack â€“stats detailed å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„æ‰“åŒ…ä¿¡æ¯<br>npx æ‰§è¡Œæ²¡æœ‰æ‰¾åˆ°å‘½ä»¤ä¼šåˆ°ä¸Šå±‚ç›®å½•æŸ¥æ‰¾</p>
<p><strong>è‡ªå®šä¹‰webpacké…ç½®</strong><br>webpack â€“helpæŸ¥çœ‹ é…ç½®<br>npx å·¥å…·æ¦‚å¿µï¼š<br>å‘½ä»¤é…ç½®ï¼š<br>npx webpack â€“entry .&#x2F;src&#x2F;index.js â€“mode production</p>
<p>é…ç½®æ–‡ä»¶é…ç½®(webpack.config.jsæ–‡ä»¶åä¸å…è®¸éšæ„èµ·ï¼Œä»–æ˜¯webpackè‡ªåŠ¨è¯»å–çš„)<br><img src="http://hghqz.vip/webpack/%E5%87%BA%E5%85%A5%E5%8F%A3%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE.jpg" alt="å‡ºå…¥å£åŸºæœ¬é…ç½®" title="å‡ºå…¥å£åŸºæœ¬é…ç½®"><br>pathéœ€æ˜¯ç»å¯¹è·¯å¾„</p>
<h2 id="ä¸‰-è‡ªåŠ¨å¼•å…¥èµ„æºï¼ˆæ’ä»¶ï¼‰ï¼ˆhtmlä¸­å¼•å…¥èµ„æºï¼‰"><a href="#ä¸‰-è‡ªåŠ¨å¼•å…¥èµ„æºï¼ˆæ’ä»¶ï¼‰ï¼ˆhtmlä¸­å¼•å…¥èµ„æºï¼‰" class="headerlink" title="ä¸‰.è‡ªåŠ¨å¼•å…¥èµ„æºï¼ˆæ’ä»¶ï¼‰ï¼ˆhtmlä¸­å¼•å…¥èµ„æºï¼‰"></a>ä¸‰.è‡ªåŠ¨å¼•å…¥èµ„æºï¼ˆæ’ä»¶ï¼‰ï¼ˆhtmlä¸­å¼•å…¥èµ„æºï¼‰</h2><p><strong>ä»€ä¹ˆæ˜¯æ’ä»¶ï¼š</strong><br>webpackå°±åƒæ˜¯ä¸€æ¡ç”Ÿäº§çº¿ï¼Œéœ€è¦ç»è¿‡ä¸€ç³»åˆ—çš„æµç¨‹åæ‰èƒ½å°†æºæ–‡ä»¶ï¼ˆå…¥å£æ–‡ä»¶ï¼Œå¯ä»¥ç›¸äº’ä¾èµ–ï¼ˆjs,css-loadersåŠ è½½å™¨ï¼‰ï¼‰ç»è¿‡ç¼–è¯‘ï¼ˆå·¥å…·æ’ä»¶plugins å¸®åŠ©webpackæ¥æ‰§è¡Œä¸€äº›ç‰¹å®šçš„ä»»åŠ¡ï¼ˆæ‰“åŒ…ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†ï¼‰ï¼‰è½¬åŒ–æˆè¾“å‡ºçš„ç»“æœ</p>
<p>æ’ä»¶ï¼šä¸‰ç»„ï¼ˆcommunityç¤¾åŒºæ’ä»¶   webpackå†…ç½®å®˜æ–¹æ’ä»¶   webpack contrib ç¬¬ä¸‰æ–¹æ’ä»¶ï¼‰</p>
<p><strong>å¦‚ä½•ä½¿ç”¨htmlWebpackPlugin?</strong><br>npm install html-webpack-plugin -D</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin)</span></span><br><span class="line"><span class="string">module.exports=&#123;</span></span><br><span class="line"><span class="string">	plugins:[</span></span><br><span class="line"><span class="string">		new HtmlWebpackPlugin(&#123;</span></span><br><span class="line"><span class="string">			template:&#x27;</span>./index.<span class="property">html</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">			filename:&#x27;</span>app.<span class="property">html</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">			inject:&#x27;</span>body<span class="string">&#x27;</span></span><br><span class="line"><span class="string">		&#125;)</span></span><br><span class="line"><span class="string">	]</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ¸…ç†ä¸Šæ¬¡disté‡Œçš„åƒåœ¾</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>:&#123;</span><br><span class="line">	<span class="attr">filename</span>:    ,</span><br><span class="line">	<span class="attr">path</span>:    ,</span><br><span class="line">	<span class="attr">clean</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å››-æ­å»ºå¼€å‘ç¯å¢ƒ"><a href="#å››-æ­å»ºå¼€å‘ç¯å¢ƒ" class="headerlink" title="å››.æ­å»ºå¼€å‘ç¯å¢ƒ"></a>å››.æ­å»ºå¼€å‘ç¯å¢ƒ</h2><p>è§£å†³æ‰‹å·¥å·¥ä½œï¼šå¤åˆ¶index.htmlè·¯å¾„åˆ°åœ°å€æ æ‰èƒ½è®¿é—®é¡µé¢ï¼Œæ¯æ¬¡æ›´æ–°ä»£ç éƒ½éœ€è¦åˆ·æ–°é¡µé¢ã€‚é€šè¿‡æ­å»ºå¼€å‘ç¯å¢ƒæ¥è§£å†³ï¼Œæé«˜å¼€å‘ä½“éªŒ</p>
<p>mode:â€™developmentâ€™  å¼€å‘æ¨¡å¼   é€šè¿‡ä»£ç å¯¹ç¯å¢ƒè¿›è¡Œè°ƒè¯•ï¼ˆcore.jsæ¨¡å—ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=production webpack --config webpack.config.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development webpack-dev-server --config webpack.config.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development webpack serve&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="keyword">const</span> isDev = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;development&quot;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>ç²¾å‡†é”å®šä»£ç å‡ºé”™çš„ä½ç½®</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devtool</span>:<span class="string">&#x27;inline-source-map&#x27;</span>,</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨watch mode(è§‚å¯Ÿæ¨¡å¼)</strong><br>æ¯æ¬¡ç¼–è¯‘éƒ½è¦æ‰‹åŠ¨è¿è¡Œnpx webpack<br>npx webpack â€“watch   å®æ—¶ç›‘æµ‹ç¼–è¯‘å˜åŒ– ï¼ˆéœ€è¦é‡æ–°åˆ·æ–°é¡µé¢ï¼‰</p>
<p><strong>webpack-dev-server</strong><br>ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæœ€åŸºæœ¬çš„web serverï¼Œå¹¶å…·æœ‰live reloadingï¼ˆå®æ—¶é‡æ–°åŠ è½½ï¼‰åŠŸèƒ½ã€‚å½“é¡µé¢ä¿®æ”¹äº†ç¼–è¯‘åæµè§ˆå™¨ä¼šç›‘å¬åˆ°æ–‡ä»¶çš„ä¿®æ”¹å®ç°è‡ªåŠ¨åˆ·æ–°<br>npm install webpack-dev-server -D</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>:&#123;</span><br><span class="line">	<span class="attr">devServer</span>:&#123;</span><br><span class="line">		<span class="attr">static</span>: <span class="string">&#x27;./dist&#x27;</span> #serverçš„æ ¹ç›®å½•</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>npx debpack-dev-server â€“open(è‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªé¡µé¢)  å¯åŠ¨é¡¹ç›®   å®é™…æ˜¯å§æ•°æ®çš„æ‰“åŒ…ä»¥åçš„bundleæ–‡ä»¶æ”¾åˆ°äº†å†…å­˜é‡Œã€‚æé«˜å¼€å‘æ•ˆç‡å’Œwebpackçš„ç¼–è¯‘æ•ˆç‡</p>
<h2 id="äº”-èµ„æºæ¨¡å—åŠ è½½"><a href="#äº”-èµ„æºæ¨¡å—åŠ è½½" class="headerlink" title="äº”.èµ„æºæ¨¡å—åŠ è½½"></a>äº”.èµ„æºæ¨¡å—åŠ è½½</h2><p>å†…ç½®èµ„æºæ¨¡å—asset modulesæ¥å¼•å…¥ä»»ä½•çš„å…¶ä»–ç±»å‹èµ„æº   æ˜¯ä¸€ç§æ¨¡å—ç±»å‹  å®ƒå…è®¸æˆ‘ä»¬ç”¨webpackæ¥æ‰“åŒ…å…¶ä»–çš„èµ„æºæ–‡ä»¶ å¦‚ï¼šå­—ä½“ï¼Œå›¾æ ‡ç­‰<br>èµ„æºæ¨¡å—ç±»å‹ï¼šasset module type   ä¼šé€šè¿‡å››ç§æ–°çš„ç±»å‹æ¨¡å—æ¥æ›¿æ¢æ‰€æœ‰çš„loader<br>1.asset&#x2F;resourceä»–ä¼šå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡ºURL  2.asset&#x2F;inline å®ƒä¼šå¯¼å‡ºä¸€ä¸ªèµ„æºçš„Data URL<br>3.asset&#x2F;source ä¼šå¯¼å‡ºèµ„æºçš„æºä»£ç <br>4.asset é€šç”¨èµ„æºç±»å‹ ä¼šåœ¨å¯¼å‡ºä¸€ä¸ªData URL å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨è¿›è¡Œé€‰æ‹©</p>
<p>moduleé…ç½®æ¨¡å—</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>:&#123;</span><br><span class="line">	<span class="attr">assetModuleFilename</span>:<span class="string">&#x27;images/[contenthash].[ext]&#x27;</span> <span class="comment">//è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å//æ ¹æ®æ–‡ä»¶çš„å†…å®¹æ¥ç”Ÿæˆä¸€ä¸ªå“ˆå¸Œçš„å­—ç¬¦ä¸²</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">module</span>:&#123;</span><br><span class="line">	<span class="attr">rules</span>:&#123; <span class="comment">//è§„åˆ™</span></span><br><span class="line">		&#123;  <span class="comment">//é…ç½®å¯¹è±¡æ¥å»åŠ è½½ä¸åŒç±»å‹çš„æ–‡ä»¶</span></span><br><span class="line">			<span class="attr">test</span>: <span class="string">&#x27;/\.png$/&#x27;</span>, <span class="comment">//test æ›´æ­£åˆ™è¡¨è¾¾å¼ æ¥åŠ è½½å®šä¹‰æ–‡ä»¶çš„ç±»å‹</span></span><br><span class="line">		 	<span class="attr">type</span>:<span class="string">&#x27;asset/resource&#x27;</span>,<span class="comment">// å›¾ç‰‡ä¸ºURLæ ¼å¼</span></span><br><span class="line">			<span class="attr">generator</span>:&#123; <span class="comment">// ä¼˜å…ˆçº§é«˜äºåœ¨output é…ç½®çš„ä¼˜å…ˆçº§</span></span><br><span class="line">				<span class="attr">filename</span>:<span class="string">&#x27;images/[contenthash].[ext]&#x27;</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">test</span>: <span class="string">&#x27;/\.svg$/&#x27;</span>,</span><br><span class="line">			<span class="attr">type</span>: <span class="string">&#x27;asset/inline&#x27;</span> <span class="comment">//å›¾ç‰‡ä¸ºbase64æ ¼å¼</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">test</span>: <span class="string">&#x27;/\.txt$/&#x27;</span>,</span><br><span class="line">			<span class="attr">type</span>: <span class="string">&#x27;asset/source&#x27;</span> <span class="comment">// åŠ è½½æ–‡ä»¶çš„æºå†…å®¹</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">test</span>: <span class="string">&#x27;/\.jpg$/&#x27;</span>,</span><br><span class="line">			<span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">//ä¼šåœ¨å¯¼å‡ºä¸€ä¸ªData URL å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨è¿›è¡Œé€‰æ‹©   å°äº8kç”Ÿæˆbase64  å¤§äº8kåˆ›å»ºèµ„æº</span></span><br><span class="line">			<span class="attr">parser</span>:&#123;</span><br><span class="line">				<span class="attr">dataUrlCondition</span>:&#123;</span><br><span class="line">					<span class="attr">maxSize</span>:<span class="number">4</span> * <span class="number">1024</span> * <span class="number">1024</span>  <span class="comment">// å½“çªå˜å¤§äº4å…†åœ¨ç”Ÿæˆä¸€ä¸ªèµ„æºæ–‡ä»¶  å¦åˆ™çš„è¯å°±æ˜¯base64</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…­-loader"><a href="#å…­-loader" class="headerlink" title="å…­.loader"></a>å…­.loader</h2><p>ä¸Šé¢é‡‡ç”¨å››ç§èµ„æºæ¨¡å—æ¥å¼•å…¥å¤–éƒ¨èµ„æº<br>webpackè¿˜å¯ä»¥é€šè¿‡loaderå¼•å…¥å…¶ä»–ç±»å‹çš„æ–‡ä»¶<br>webpackæ™ºèƒ½ç†è§£jså’Œjsonè¿™æ ·çš„æ–‡ä»¶<br>loaderå¯ä»¥è®©webpackå»è§£æå…¶ä»–çš„ç±»å‹çš„æ–‡ä»¶  å¹¶ä¸”å°†è¿™äº›æ–‡ä»¶è½¬åŒ–ä¸ºæœ‰æ•ˆçš„æ¨¡å—  ä»¥ä¾›æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„ä½¿ç”¨  ä¾‹å¦‚åŠ è½½css</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>:&#123;</span><br><span class="line">	<span class="attr">rules</span>:&#123;</span><br><span class="line">		&#123; <span class="comment">//å½“ç¢°åˆ°é€šè¿‡requireæˆ–importå»è§£æ .txtæ–‡ä»¶æ—¶åœ¨å¯¹æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ä¹‹å‰å…ˆä½¿ç”¨raw-loaderè¿›è¡Œè½¬åŒ–</span></span><br><span class="line">			<span class="attr">test</span>: <span class="string">&#x27;/\.txt$/&#x27;</span>, <span class="comment">// å®šä¹‰é‚£ç§ç±»å‹çš„æ–‡ä»¶è¢«è½¬æ¢</span></span><br><span class="line">		 	<span class="attr">use</span>:<span class="string">&#x27;raw-loader&#x27;</span>,  <span class="comment">// åœ¨å®šä¹‰è½¬åŒ–çš„æ—¶å€™åº”è¯¥ä½¿ç”¨å“ªä¸ªloaderæ¥è¿›è¡Œè½¬æ¢</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¦‚ä½•é…ç½®</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>:&#123;</span><br><span class="line">	<span class="attr">rules</span>:&#123;</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">test</span>: <span class="string">&#x27;/\.css$/&#x27;</span>,</span><br><span class="line">		 	<span class="attr">use</span>:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>],  <span class="comment">// è‡ªä¸‹è€Œä¸Š loaderé“¾å¼è°ƒç”¨  å…ˆéœ€è¦ç”¨css-loaderè®©æˆ‘ä»¬æ‰“åŒ…æ²¡æœ‰é—®é¢˜è¯†åˆ«æˆ‘ä»¬cssæ–‡ä»¶   åœ¨é€šè¿‡style-loaderæŠŠcssæ”¾ç½®åˆ°æˆ‘ä»¬çš„é¡µé¢ä¸Š</span></span><br><span class="line">		&#125;ï¼Œ</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">test</span>: <span class="string">&#x27;/\.(css|less)/$&#x27;</span>,</span><br><span class="line">		 	<span class="attr">use</span>:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>,<span class="string">&#x27;less-loader&#x27;</span>],</span><br><span class="line">		&#125;ï¼Œ</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æŠ½ç¦»å’Œå‹ç¼©css</strong><br>æŠ½ç¦»ï¼šnpm install mini-css-extract-plugin -D   è¿™ä¸ªæ’ä»¶æ—¶åŸºäºwebpack5æ„å»ºçš„<br>å‹ç¼©ï¼šnpm install css-minimizer-webpack-plugin -D  è¿™ä¸ªå±äºä¼˜åŒ–æ’ä»¶åœ¨optimizationé€‰é¡¹é…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;css-minimizer-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="attr">mode</span>:<span class="string">&#x27;production&#x27;</span>,   <span class="comment">//ä½¿ç”¨å‹ç¼©ç¯å¢ƒå¿…é¡»æ—¶è¿™ä¸ª</span></span><br><span class="line"><span class="attr">plugins</span>:&#123;</span><br><span class="line">	<span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">		<span class="attr">filename</span>:<span class="string">&#x27;style/[contenthash].css&#x27;</span></span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">module</span>:&#123;</span><br><span class="line">	<span class="attr">rules</span>:&#123;</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">test</span>: <span class="string">&#x27;/\.(css|less)/$&#x27;</span>,</span><br><span class="line">		 	<span class="attr">use</span>:[<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,<span class="string">&#x27;css-loader&#x27;</span>,<span class="string">&#x27;less-loader&#x27;</span>],  <span class="comment">//ä¹‹å‰é€šè¿‡style-loader å°†æ ·å¼æ”¾åˆ°é¡µé¢çš„style æ›´æ”¹ä¸ºé€šè¿‡linkå¼•å…¥çš„cssæ–‡ä»¶</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">optimization</span>:&#123;</span><br><span class="line">	<span class="attr">minimizer</span>:[</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">CssMinimizerWebpackPlugin</span>()</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>åŠ è½½imageå›¾åƒ</strong><br>å¦‚ä½•åœ¨cssé‡ŒåŠ è½½å›¾ç‰‡èµ„æº<br>mode:â€™developmentâ€™   æ¸…é™¤æç¤º</p>
<p><strong>åŠ è½½fontså­—ä½“</strong><br>css3ä¸­æ–°å¢webfontåŠŸèƒ½å¯ä»¥åœ¨css3ä¸­å»åŠ è½½ä¸€ä¸ªfontå­—åº“  ç„¶ååœ¨ä»£ç ä¸­å°±å¯ä»¥å®šä¹‰è‡ªå·±çš„iconå›¾æ ‡äº†<br>å¦‚ä½•å»åŠ è½½å­—ä½“è¿™æ ·çš„èµ„æºï¼ˆasset moduleèµ„æºæ¨¡å—ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">test</span>:<span class="string">&#x27;/\.(woff|woff2|eot|ttf|otf)$/&#x27;</span>,  <span class="comment">//å­—ä½“æ–‡ä»¶ä¼šæœ‰å¾ˆå¤šç§ç±»å‹</span></span><br><span class="line">	<span class="attr">type</span>:<span class="string">&#x27;asset/resource&#x27;</span>  <span class="comment">//è½½å…¥ä»»ä½•ç±»å‹çš„èµ„æº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://hghqz.vip/webpack/%E5%AD%97%E4%BD%93%E9%85%8D%E7%BD%AE.jpg" alt="å­—ä½“é…ç½®" title="å­—ä½“é…ç½®"></p>
<p>ä¹‹åå‘æ–‡æœ¬ä¸€æ ·å»åŠ è½½ä¸€ä¸ªæ–‡æœ¬ä»£ç   <span class='icon'>&amp;#xe668;</span>(æ“ä½œdomæ—¶å¿…é¡»æ˜¯innerhtmlä¸èƒ½ä½¿innertext)</p>
<p><strong>åŠ è½½æ•°æ®</strong><br>ä¹‹å‰å›¾ç‰‡  cionå›¾æ ‡  æ–‡æœ¬æ–‡ä»¶ç­‰ç­‰éƒ½æ•°æ®<br>è¿˜æœ‰ç±»ä¼¼äºjsonï¼Œcsvï¼Œtsvï¼Œxmlç­‰ï¼Œjsonå’Œnodejsç±»ä¼¼webpackå¯ä»¥ç›´æ¥æ”¯æŒä½†æ˜¯åƒcsvï¼Œtsvå’Œxmlæˆ‘éƒ½æ²¡éœ€è¦ä½¿ç”¨loaderæ‰èƒ½å¤„ç†ä»–ä»¬<br>npm install csv-loader xml-loader -D</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">text</span>:<span class="string">&#x27;/\.(tsv|csv)$/&#x27;</span>, <span class="comment">//ä¼šè½¬æ¢æˆ æ•°ç»„ </span></span><br><span class="line">	<span class="attr">use</span>:<span class="string">&#x27;csv-loader&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">text</span>:<span class="string">&#x27;/\.xml$/&#x27;</span>,  <span class="comment">//ä¼šè½¬æ¢æˆ jså¯¹è±¡</span></span><br><span class="line">	<span class="attr">use</span>:<span class="string">&#x27;xml-loader&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è‡ªå®šä¹‰JSONæ¨¡å—parser</strong><br>é€šè¿‡ä½¿ç”¨è‡ªå®šä¹‰parseræ›¿ä»£æŒ‡å®šçš„webpack loaderï¼Œå¯ä»¥å°†ä»»ä½•tomlï¼Œyamlï¼Œæˆ–json5æ–‡ä»¶ä½œä¸ºJSONæ¨¡å—å¯¼å…¥ã€‚<br>npm install toml yaml json5 -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const toml = require(&#x27;toml&#x27;)</span><br><span class="line">const yaml = require(&#x27;yaml&#x27;)</span><br><span class="line">const json5 = require(&#x27;json5&#x27;)</span><br><span class="line">&#123;</span><br><span class="line">	text:&#x27;/\.toml$/&#x27;,  //ä¼šè½¬æ¢æˆ jså¯¹è±¡</span><br><span class="line">	type:&#x27;json&#x27;,</span><br><span class="line">	parser:&#123;</span><br><span class="line">		parse:toml.parse</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">	text:&#x27;/\.yaml$/&#x27;,  //ä¼šè½¬æ¢æˆ jså¯¹è±¡</span><br><span class="line">	type:&#x27;json&#x27;,</span><br><span class="line">	parser:&#123;</span><br><span class="line">		parse:yaml.parse</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">	text:&#x27;/\.json5$/&#x27;,  //ä¼šè½¬æ¢æˆ jså¯¹è±¡</span><br><span class="line">	type:&#x27;json&#x27;,</span><br><span class="line">	parser:&#123;</span><br><span class="line">		parse:json5.parse</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒ-å¦‚ä½•ä½¿ç”¨babel-loader"><a href="#ä¸ƒ-å¦‚ä½•ä½¿ç”¨babel-loader" class="headerlink" title="ä¸ƒ.å¦‚ä½•ä½¿ç”¨babel-loader"></a>ä¸ƒ.å¦‚ä½•ä½¿ç”¨babel-loader</h2><p>webpacké»˜è®¤è½¬æ¢  æ˜¯æºä»£ç åŸå°ä¸åŠ¨è¿›è¡Œè½¬æ¢çš„  é‚£ä¹ˆå¦‚æœæµè§ˆå™¨ä¸å…¼å®¹å‘¢ï¼Ÿ<br>ä½¿ç”¨babel-loaderå°†es6 è½¬æ¢æˆä½ç‰ˆæœ¬æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„jsä»£ç <br>npm install babel-loader @babal&#x2F;core @babel&#x2F;preset-env -D<br>babel-loader: è§£æes6çš„æ¡¥æ¢<br>@babal&#x2F;core babelï¼š æ ¸å¿ƒæ¨¡å—<br>@babel&#x2F;preset-envï¼š babelé¢„è®¾ï¼Œä¸€ç»„Babelæ’ä»¶çš„é›†åˆ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">test</span>:<span class="string">&#x27;/\.js$/&#x27;</span>,</span><br><span class="line">	<span class="attr">exclude</span>:<span class="string">&#x27;/node_modules/&#x27;</span>,<span class="comment">//ä¸šåŠ¡é‡Œæ—¢å¯ä»¥åŠ è½½æœ¬åœ°jsä¹Ÿå¯ä»¥åŠ è½½å…¨å±€é‡Œçš„node modulesé‡Œé¢çš„js  å¯¹äºå…¨å±€çš„node modulesé‡Œçš„jsæˆ‘ä»¬æ˜¯ä¸éœ€è¦è¿›è¡Œbabel-loaderçš„ç¼–è¯‘çš„  æ‰€ä»¥éœ€è¦æ’é™¤ node modules é‡Œçš„ä»£ç </span></span><br><span class="line">	<span class="attr">use</span>:&#123;</span><br><span class="line">		<span class="attr">loader</span>:<span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">			<span class="attr">options</span>:&#123;</span><br><span class="line">				<span class="attr">presets</span>:[<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">				<span class="attr">plugins</span>:[</span><br><span class="line">					[<span class="string">&#x27;@babel/plugin-transform-runtime&#x27;</span>]</span><br><span class="line">				]</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>regeneratorRuntimeæ˜¯webpackæ‰“åŒ…ç”Ÿæˆçš„å…¨å±€è¾…åŠ©å‡½æ•°ï¼Œæœ‰babelç”Ÿæˆï¼Œç”¨äºå…¼å®¹async&#x2F;awaitçš„è¯­æ³•<br>npm install @babel&#x2F;runtime -D<br>æ’ä»¶ï¼š npm install @babel&#x2F;plugin-transform-runtime -D<br>@babel&#x2F;runtimeï¼š åŒ…å«äº†regeneratorRuntimeè¿è¡Œæ—¶éœ€è¦çš„å†…å®¹<br>@babel&#x2F;plugin-transform-runtimeï¼š ä¼šåœ¨éœ€è¦regeneratorRuntimeçš„åœ°æ–¹è‡ªåŠ¨requireæ‰“åŒ…ç„¶åç¼–è¯‘çš„æ—¶å€™å°±ä¼šéœ€è¦å®ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins:[</span><br><span class="line">					[&#x27;@babel/plugin-transform-runtime&#x27;]</span><br><span class="line">				]</span><br></pre></td></tr></table></figure>

<h2 id="å…«-ä»£ç åˆ†ç¦»"><a href="#å…«-ä»£ç åˆ†ç¦»" class="headerlink" title="å…«.ä»£ç åˆ†ç¦»"></a>å…«.ä»£ç åˆ†ç¦»</h2><p>èƒ½å¤ŸæŠŠä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„bundleä¸­<br>bundleå°±æ˜¯æˆ‘ä»¬æ‰“åŒ…åˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶ç„¶åæˆ‘ä»¬æŠŠè¿™äº›æ–‡ä»¶æŒ‰éœ€åŠ è½½æˆ–è€…æ˜¯å¹¶è¡ŒåŠ è½½<br>ä»£ç åˆ†ç¦»å¯ä»¥ç”¨äºè·å–æ›´å°çš„bundleä»¥åŠæ§åˆ¶èµ„æºåŠ è½½çš„ä¼˜å…ˆçº§ï¼Œå¦‚æœä½¿ç”¨åˆç†ä¼šæå¤§çš„å½±å“åŠ è½½äº‹ä»¶<br>å¸¸ç”¨çš„ä»£ç åˆ†ç¦»ï¼š1.é…ç½®å…¥å£èŠ‚ç‚¹ï¼Œä½¿ç”¨entryæ¥æ‰‹åŠ¨é…ç½®åˆ†ç¦»ä»£ç ï¼ˆå¦‚æœæ˜¯å¤šä¸ªå…¥å£é‚£ä¹ˆè¿™äº›å¤šä¸ªå…¥å£å…±äº«çš„æ–‡ä»¶ä¼šåˆ†åˆ«åœ¨æ¯ä¸ªåŒ…é‡Œé¢å»é‡å¤æ‰“åŒ…ï¼‰<br>2.é˜²æ­¢é‡çš„åˆ†ç¦»æ–¹æ³•ï¼šåœ¨entryï¼ˆå…¥å£ï¼‰çš„åœ°æ–¹é€šè¿‡entry dependenciesæˆ–è€… SplitChunksPlaginå»é‡å’Œåˆ†ç¦»ä»£ç <br>3.åŠ¨æ€å¯¼å…¥ é€šè¿‡æ¨¡å—çš„å†…è”å‡½æ•°importæ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°åˆ†ç¦»ä»£ç </p>
<p><strong>ç¬¬ä¸€ç§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">entry</span>:&#123;</span><br><span class="line">	<span class="attr">index</span>:<span class="string">&#x27;./src/index&#x27;</span>,</span><br><span class="line">	<span class="attr">another</span>:<span class="string">&#x27;./src/another-module.js&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">output</span>:&#123;</span><br><span class="line">	<span class="attr">filename</span>:<span class="string">&#x27;[name]&#x27;</span>.<span class="property">bundle</span>.<span class="property">js</span>,   <span class="comment">//æ–¹å¼å¤šä¸ªå…¥å£æ‰“åŒ…å‡ºå£æ–‡ä»¶å†²çªï¼Œä½¿ç”¨[&#x27;name&#x27;]å¯ä»¥æ‹¿åˆ°æˆ‘ä»¬å…¥å£é‡Œé¢çš„keyçš„åå­—</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span>ï¼ˆ_.<span class="title function_">join</span>([<span class="string">&#x27;Vue&#x27;</span>,<span class="string">&#x27;React!&#x27;</span>],<span class="string">&#x27;-&#x27;</span>)ï¼‰</span><br></pre></td></tr></table></figure>
<p><strong>ç¬¬äºŒç§ é˜²æ­¢é‡å¤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// 1.entry dependencies</span><br><span class="line">entry:&#123;</span><br><span class="line">	index:&#123;</span><br><span class="line">		import :&#x27;./src/index&#x27;,</span><br><span class="line">		dependOn:&#x27;shared&#x27;,  //å¯ä»¥æŠŠä¸€äº›å…±äº«çš„æ–‡ä»¶ç»™å®šä¹‰å‡ºæ¥</span><br><span class="line">	&#125;,</span><br><span class="line">	another:&#123;</span><br><span class="line">		import :&#x27;./src/another-module.js&#x27;,</span><br><span class="line">		dependOn:&#x27;shared&#x27;,  //å¯ä»¥æŠŠä¸€äº›å…±äº«çš„æ–‡ä»¶ç»™å®šä¹‰å‡ºæ¥</span><br><span class="line">	&#125;</span><br><span class="line">	shared:&#x27;lodash&#x27; //å½“æˆ‘ä»¬è¿™ä¸¤ä¸ªæ¨¡å—é‡Œè¾¹ æœ‰lodashè¿™ä¸ªæ¨¡å—çš„æ—¶å€™  ä»–å°±ä¼šæŠŠä»–æŠ½ç¦»å‡ºæ¥  å¹¶ä¸”æŠŠä»–å–åä¸ºå«sharedè¿™æ ·çš„ä¸€ä¸ªchunkã€‚</span><br><span class="line">&#125;</span><br><span class="line">//2.SplitChunksPlaginæ’ä»¶</span><br><span class="line">entry:&#123;</span><br><span class="line">	index:&#x27;./src/index&#x27;,</span><br><span class="line">	another:&#x27;./src/another-module.js&#x27;</span><br><span class="line">&#125;</span><br><span class="line">optimization:&#123;</span><br><span class="line">	splitChunks:&#123;</span><br><span class="line">		chunks:&#x27;all&#x27;  //å®ç°ä»£ç åˆ†å‰²å¹¶æŠŠå…¬å…±çš„ä»£ç  æŠ½ç¦»åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œ</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬ä¸‰ç§</strong><br>ä½¿ç”¨  ECMAScriptææ¡ˆçš„import()å‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function getComponent()&#123;</span><br><span class="line">	return import(&#x27;lodash&#x27;)   // è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡</span><br><span class="line">	.then((&#123;default:_&#125;)=&gt;&#123;    // .thençš„å›è°ƒå‡½æ•°æ‹¿åˆ°çš„æ˜¯ è½½å…¥çš„lodashçš„ä¸€ä¸ªå¼•ç”¨</span><br><span class="line">		const element = document.createElement(&#x27;div&#x27;)</span><br><span class="line">		element.innerHTML = _.join([&#x27;Vue&#x27;,&#x27;React!&#x27;],&#x27;-&#x27;)</span><br><span class="line">		return element</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"> // è¿™æ ·å†™çš„ç›®çš„æ˜¯ä¸ºäº†è®© import æ¥å»å¸®åŠ©æˆ‘ä»¬å»æŠ½ç¦»ä¸€ä¸ªå•ç‹¬çš„lodashæ–‡ä»¶</span><br><span class="line">getComponent().then((element)=&gt;&#123;</span><br><span class="line">	document.body.appendChild(element)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// é™æ€å¯¼å…¥çš„å†…å®¹å’ŒåŠ¨æ€å¯¼å…¥çš„å†…å®¹ä¸€èµ·æ¥ å»åšä»£ç æŠ½ç¦»</span><br><span class="line">optimization:&#123;</span><br><span class="line">	splitChunks:&#123;</span><br><span class="line">		chunks:&#x27;all&#x27;  //å®ç°ä»£ç åˆ†å‰²å¹¶æŠŠå…¬å…±çš„ä»£ç  æŠ½ç¦»åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œ</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨åŠ¨æ€å¯¼å…¥ï¼Œé™æ€å¯¼å…¥ä¸å°±è¡Œäº†å—ï¼ŸåŠ¨æ€å¯¼å…¥çš„åº”ç”¨</strong><br>1.å¯ä»¥å®ç°æ‡’åŠ è½½ï¼š æŒ‰éœ€åŠ è½½ï¼Œæ˜¯ä¸€ç§å¾ˆå¥½çš„ä¼˜åŒ–é¡µé¢æˆ–åº”ç”¨çš„æ–¹å¼ã€‚è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯å…ˆæŠŠä½ çš„ä»£ç åœ¨ä¸€äº›é€»è¾‘æ–­ç‚¹å¤„åˆ†ç¦»å¼€ï¼Œç„¶ååœ¨ä¸€äº›ä»£ç å—ä¸­å®ŒæˆæŸäº›æ“ä½œåï¼Œç«‹å³å¼•ç”¨æˆ–å³å°†å¼•ç”¨å¦å¤–ä¸€äº›æ–°çš„ä»£ç å—ã€‚è¿™æ ·åŠ å¿«äº†åº”ç”¨çš„åˆå§‹åŠ è½½é€Ÿåº¦ï¼Œå‡è½»äº†å®ƒçš„æ€»ä½“ä½“ç§¯ï¼Œå› ä¸ºæŸäº›ä»£ç å—å¯èƒ½æ°¸è¿œä¸ä¼šåŠ è½½ã€‚<br><img src="http://hghqz.vip/webpack/import%E6%87%92%E5%8A%A0%E8%BD%BD.jpg" alt="importæ‡’åŠ è½½" title="importæ‡’åŠ è½½"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ‡’åŠ è½½</span><br><span class="line">import(/* webpackChunkName: &#x27;æ‰“åŒ…åçš„æ–‡ä»¶å&#x27;*/&#x27;æ–‡ä»¶åœ°å€&#x27;).then(å›è°ƒ)//é€šè¿‡æ³¨é‡Š æ§åˆ¶æ‡’åŠ è½½æ‰“åŒ…åçš„æ–‡ä»¶å  +bundle.js</span><br></pre></td></tr></table></figure>

<p>2.å¯ä»¥å®ç°é¢„è·å–&#x2F;é¢„åŠ è½½æ¨¡å—<br>webpack v4.6.0+ å¢åŠ äº†å¯¹é¢„è·å–å’Œé¢„åŠ è½½çš„æ”¯æŒã€‚<br>åœ¨å£°æ˜importæ—¶ï¼Œä½¿ç”¨ä¸‹é¢è¿™äº›å†…ç½®æŒ‡ä»¤ï¼Œå¯ä»¥è®©webpackè¾“å‡ºâ€resource hint(èµ„æºæç¤º)â€,æ¥å‘Šè¯‰æµè§ˆå™¨ï¼š<br>prefetch(é¢„è·å–)ï¼šå°†æ¥æŸäº›å¯¼èˆªä¸‹å¯èƒ½éœ€è¦çš„èµ„æº<br>preload(é¢„åŠ è½½)ï¼šå½“å‰å¯¼èˆªä¸‹å¯èƒ½éœ€è¦èµ„æº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// é¢„è·å–   æ„ä¹‰é¦–é¡µé¢çš„å†…å®¹éƒ½åŠ è½½å®Œæ¯•åœ¨ç½‘ç»œç©ºé—²çš„æ—¶å€™å†å»åŠ è½½æˆ‘ä»¬æ‰“åŒ…å¥½çš„ æ–‡ä»¶     æ¯”æ‡’åŠ è½½è¿˜è¦ä¼˜ç§€</span><br><span class="line">import(/* webpackChunkName: &#x27;æ‰“åŒ…åçš„æ–‡ä»¶å&#x27;, webpackPrefetch:true*/&#x27;æ–‡ä»¶åœ°å€&#x27;)</span><br><span class="line">// é¢„åŠ è½½   å’Œæ‡’åŠ è½½ç±»ä¼¼   å®ç°é¡µé¢æ¨¡å—çš„å¹¶è¡ŒåŠ è½½</span><br><span class="line">import(/* webpackChunkName: &#x27;æ‰“åŒ…åçš„æ–‡ä»¶å&#x27;, webpackPreload:true*/&#x27;æ–‡ä»¶åœ°å€&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ä¹-ç¼“å­˜"><a href="#ä¹-ç¼“å­˜" class="headerlink" title="ä¹.ç¼“å­˜"></a>ä¹.ç¼“å­˜</h2><p>ä»¥å‰æˆ‘ä»¬ä½¿ç”¨webpackæ¥æ‰“åŒ…æˆ‘ä»¬æ¨¡å—åŒ–ä»¥åçš„åº”ç”¨ç¨‹åºï¼Œwebpackä¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥éƒ¨ç½²çš„distç›®å½•ã€‚ç„¶åæˆ‘ä»¬æŠŠæ‰“åŒ…å¥½çš„å†…å®¹æ”¾ç½®åˆ°è¿™ä¸ªç›®å½•é‡Œå°†æ¥æˆ‘ä»¬æŠŠè¿™ä¸ªç›®å½•çš„å†…å®¹éƒ¨ç½²åˆ°serverä¸Šä¹Ÿå°±æ˜¯æœåŠ¡å™¨ä¸Šï¼Œæµè§ˆå™¨å°±å¯ä»¥è®¿é—®æˆ‘ä»¬è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘ç«™å’Œèµ„æºäº†ï¼Œè€Œæœ€åä¸€æ­¥è·å–èµ„æºæ˜¯æ¯”è¾ƒè€—æ—¶é—´çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæµè§ˆå™¨ä¼šä½¿ç”¨ç¼“å­˜çš„æŠ€æœ¯ï¼Œå¯ä»¥é€šè¿‡å‘½ä¸­ç¼“å­˜ä»¥é™ä½ç½‘ç»œæµé‡ï¼Œä½¿ç½‘ç«™åŠ è½½é€Ÿåº¦æ›´å¿«ï¼Œç„¶è€Œæˆ‘ä»¬åœ¨éƒ¨ç½²æ–°ç‰ˆæœ¬çš„æ—¶å€™ä¸æ›´æ”¹èµ„æºçš„æ–‡ä»¶åï¼Œæµè§ˆå™¨å¯èƒ½ä¼šè®¤ä¸ºä½ æ²¡æœ‰æ›´æ–°ï¼Œé‚£å°±ä¼šä½¿ç”¨å®ƒçš„ç¼“å­˜ç‰ˆæœ¬ï¼Œç”±äºç¼“å­˜çš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦è·å–æ–°çš„ä»£ç çš„æ—¶å€™ï¼Œå°±ä¼šæ˜¾çš„å¾ˆæ£˜æ‰‹ï¼Œ<br>ç°åœ¨æˆ‘ä»¬é€šè¿‡webpacké…ç½®æ¥ç¡®ä¿ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶èƒ½å¤Ÿè¢«å®¢æˆ·ç«¯ç¼“å­˜è€Œåœ¨æ–‡ä»¶ä¼˜åŒ–çš„æ—¶å€™åˆèƒ½å¤Ÿè¯·æ±‚æ–°çš„æ–‡ä»¶ã€‚<br>é—®é¢˜ï¼šåœ¨distæ–‡ä»¶é‡Œçœ‹åˆ°æ‰“åŒ…å¥½ä»¥åçš„æ–‡ä»¶ï¼Œæµè§ˆå™¨æœ‰ç¼“å­˜ç‰¹æ€§ä¼šæŠŠæ–‡ä»¶ç¼“å­˜ä¸‹æ¥ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†è¿™ä¸ªæ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œè€Œæ–‡ä»¶åæ²¡æœ‰å˜ï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åœ¨æ‰“åŒ…çš„æ—¶å€™æŠŠè¿™ä¸ªæ–‡ä»¶çš„åå­—ä¹Ÿä¸€åŒç»™é‡æ–°æ‰“åŒ…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>:&#123;</span><br><span class="line">	<span class="attr">filename</span>:<span class="string">&#x27;[name].[contenthash].js&#x27;</span>  <span class="comment">//æ–‡ä»¶å ä¼šè·Ÿéšè¿™æˆ‘ä»¬æ–‡ä»¶å†…å®¹çš„å˜åŒ–è€Œå˜åŒ–ï¼Œè¿™æ ·çš„è¯å°±ä¸æ€•æµè§ˆå™¨ç¼“å­˜äº†ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç¼“å­˜ç¬¬ä¸‰æ–¹åº“ä»£ç ï¼Œå¦‚ï¼šlodashéœ€ä¸éœ€è¦ç¼“å­˜</strong><br>ç¼“å­˜è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œç¬¬ä¸‰æ–¹çš„ä»£ç æ¯”å¦‚lodashéœ€ä¸éœ€è¦ç¼“å­˜ã€‚<br>å¦‚æœæˆ‘ä»¬æŠŠlodashå•ç‹¬æå–åˆ°ä¸€ä¸ªvendor chunké‡Œè¾¹ï¼Œæ˜¯æ¯”è¾ƒæ¨èçš„æ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸ºä»–ä»¬å¾ˆå°‘åƒæœ¬åœ°æºä»£ç é‚£æ ·é¢‘ç¹ä¿®æ”¹ã€‚å› æ­¤é€šè¿‡ä»¥ä¸Šçš„æ­¥éª¤ï¼Œæˆ‘ä»¬åˆ©ç”¨clientæˆ–æµè§ˆå™¨çš„é•¿æ•ˆç¼“å­˜çš„æœºåˆ¶ï¼Œå‘½ä¸­çš„ç¼“å­˜æ¥æ¶ˆé™¤è¯·æ±‚ã€‚ä»è€Œå‡å°‘å‘serverè·å–èµ„æºçš„æ¬¡æ•°åŒæ—¶è¿˜èƒ½ä¿è¯clientä»£ç å’Œserverä»£ç ç‰ˆæœ¬çš„ä¸€è‡´ã€‚<br>æŠŠç¬¬ä¸‰æ–¹åº“çš„ä»£ç åƒlodashå•ç‹¬æ‰“åŒ…ç¼“å­˜åˆ°æµè§ˆå™¨é‡Œï¼Œè¿™æ ·åªæœ‰æˆ‘ä»¬è‡ªå·±ä»£ç å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥å»æ›´æ–°ä½†æ˜¯ç¬¬ä¸‰æ–¹çš„ä»£ç å§‹ç»ˆå¯ä»¥æ˜¯æµè§ˆå™¨ç¼“å­˜çš„å†…å®¹ï¼Œé‚£å°±éœ€è¦å¯¹ç¬¬ä¸‰æ–¹çš„ä»£ç åšä¸€ä¸ªç¼“å­˜ã€‚<br>å¯¹æ–‡ä»¶è¿›è¡Œå•ç‹¬æ‰“åŒ…å¹¶ç¼“å­˜åˆ°æµè§ˆå™¨é‡Œï¼Œä»£ç ï¼ˆæ–‡ä»¶å†…å®¹ä»¥åŠæ–‡ä»¶åéƒ½æ˜¯ä¸å˜çš„ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">optimization</span>:&#123;</span><br><span class="line">	splitChunksï¼š&#123;</span><br><span class="line">		<span class="attr">cacheGroups</span>:&#123;    <span class="comment">//å®šä¹‰ç¼“å­˜ç»„    ç¼“å­˜ç¬¬ä¸‰æ–¹æ–‡ä»¶ï¼ˆnode_modulesé‡Œçš„ï¼‰</span></span><br><span class="line">			<span class="attr">vendor</span>:&#123;</span><br><span class="line">				<span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>  <span class="comment">//é€šè¿‡æ–‡ä»¶ç›®å½•çš„æ–‡ä»¶åå»è¯†åˆ«   è¿™ä¸ªç›®å½•çš„å‰é¢åé¢å¯èƒ½ä¼šæœ‰æ–œçº¿</span></span><br><span class="line">				<span class="attr">name</span>:<span class="string">&#x27;vendors&#x27;</span>,</span><br><span class="line">				<span class="attr">chunks</span>:<span class="string">&#x27;all&#x27;</span>         <span class="comment">// å®šä¹‰é‚£äº›chunkåšå¤„ç†</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å°†æ‰€æœ‰çš„jsæ–‡ä»¶ï¼Œæ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">output:&#123;</span><br><span class="line">	filename:&#x27;scripts/[name].[contenthash].js&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°ç»“ï¼šç¼“å­˜ä¸šåŠ¡ä»£ç ï¼šå½“æˆ‘ä»¬çš„é¡¹ç›®éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šçš„æ—¶å€™ï¼Œæµè§ˆå™¨åŠ è½½å®Œæˆ‘ä»¬æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ä¼šç¼“å­˜æˆ‘ä»¬æ‰“åŒ…å¥½çš„æ¨¡å—ã€‚è¿™æ ·å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†jsä»£ç ï¼Œæ–‡ä»¶åå¦‚æœæ²¡å˜ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨ç”¨æˆ·æœ¬åœ°ç¼“å­˜çš„å†…å®¹ï¼Œå°±è·å–ä¸åˆ°æ–°çš„å†…å®¹äº†ã€‚å› æ­¤æˆ‘ä»¬é€šè¿‡ä¿®æ”¹è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶åæ¥è§£å†³   ä½¿ç”¨å¯æ›¿æ¢æ¨¡æ¿å­—ç¬¦ä¸²æ–¹æ³•æ¥å®šä¹‰contenthash   å®ç°åªè¦æ–‡ä»¶çš„å†…å®¹ä¸å˜å“ˆå¸Œçš„å­—ç¬¦ä¸²ä¹Ÿä¸å˜<br>ç¼“å­˜ç¬¬ä¸‰æ–¹ä»£ç ï¼šè¿™äº›æ–‡ä»¶ä¸é¢‘ç¹æ›´æ–°  å¯ä»¥æé«˜æˆ‘ä»¬é¦–å±çš„æ‰“å¼€é€Ÿåº¦ èŠ‚çœæˆ‘ä»¬ç½‘ç»œæµé‡</p>
<h2 id="å-æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®-è®©æ‰“åŒ…å˜å¾—æ›´çµæ´»"><a href="#å-æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®-è®©æ‰“åŒ…å˜å¾—æ›´çµæ´»" class="headerlink" title="å.æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®  è®©æ‰“åŒ…å˜å¾—æ›´çµæ´»"></a>å.æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®  è®©æ‰“åŒ…å˜å¾—æ›´çµæ´»</h2><p>å¹³å¸¸æˆ‘ä»¬éƒ½æ˜¯æ‰‹åŠ¨çš„è°ƒæ•´modeé€‰é¡¹  å®ç°ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒçš„åˆ‡æ¢<br>å¾ˆå¤šé…ç½®åœ¨ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒå­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µå¦‚ï¼šå¼€å‘ç¯å¢ƒæ²¡æœ‰å¿…è¦è®¾ç½®ç¼“å­˜ï¼Œç”Ÿäº§ç¯å¢ƒè¿˜éœ€è¦è®¾ç½®å…¬å…±è·¯å¾„ç­‰</p>
<p><strong>å…¬å…±è·¯å¾„</strong><br>publicPash é…ç½®é€‰é¡¹åœ¨å„ç§åœºæ™¯ä¸­éƒ½éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥æŒ‡å®šåº”ç”¨ç¨‹åºä¸­æ‰€æœ‰èµ„æºçš„åŸºç¡€è·¯å¾„</p>
<p>ç°åœ¨æ‰€æœ‰çš„èµ„æºéƒ½æ˜¯é€šè¿‡ç›¸å¯¹è·¯å¾„æ¥å»å¼•ç”¨çš„ã€‚æˆ‘ä»¬å¯ä¸å¯ä»¥æ ¹æ®cdnçš„è·¯å¾„æˆ–è€…å½“å‰æœåŠ¡å™¨çš„æŸä¸ªè·¯å¾„ æ¥å»ä¿®æ”¹æˆ‘ä»¬linkä¸Šé¢çš„è¿™ä¸ªè·¯å¾„çš„å‰ç¼€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">output:&#123;</span><br><span class="line">	publicPash: &#x27;http://localhost:8080/&#x27;    // æŒ‡å®šä¸€ä¸ªåŸŸå    è¿™ä¸ªåŸŸåå¯ä»¥æŒ‡å®šä¸ºé¡¹ç›®çš„å‰ç«¯åŸŸåï¼Œæˆ–è€…cdnæœåŠ¡å™¨çš„åŸŸå</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç¯å¢ƒå˜é‡</strong><br>å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¸…é™¤webpack.config.jsè¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œè¾¹çš„å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¹‹é—´çš„å·®å¼‚<br>åœ¨å‘½ä»¤è¡Œ npx webpack â€“env production (â€“env goal&#x3D;local)    çŸ¥é“ç”¨æˆ·åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒä½¿ç”¨  é…ç½®å¯¹åº”çš„modeé€‰é¡¹<br>å°†å¯¼å‡ºçš„å¯¹è±¡å˜ä¸ºå‡½æ•°ï¼Œå‡½æ•°æ‹¿åˆ°env   ç”Ÿäº§ç¯å¢ƒä»£ç å‹ç¼©  å¼€å‘ç¯å¢ƒä»£ç ä¸å‹ç¼©</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mode:env.production?&#x27;production&#x27;:&#x27;development&#x27;</span><br></pre></td></tr></table></figure>
<p>webpackå¼€ç®±å³ç”¨çš„terseræ’ä»¶è¿›è¡Œå‹ç¼©jsä»£ç   å½“æˆ‘ä»¬é…ç½®minimizerå‹ç¼©cssä»£ç æ—¶  terseråŠŸèƒ½å¤±æ•ˆ<br>npm install terser-webpack-plugin -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const TerserPlugin = require(&#x27;terser-webpack-plugin&#x27;)</span><br><span class="line">optimization:&#123;</span><br><span class="line">	minimizer:&#123;</span><br><span class="line">		//æ­¤å¤„æ—¶å‹ç¼©cssçš„æ’ä»¶</span><br><span class="line">		new TerserPlugin()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ‹†åˆ†é…ç½®æ–‡ä»¶</strong><br>æˆ‘ä»¬ä½¿ç”¨ç¯å¢ƒå˜é‡å°†webpackä¸­çš„ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒçš„åŒºåˆ«éƒ½é€šè¿‡ä¸‰å…ƒè¿ç®—ç¬¦åˆ¤æ–­  å¾ˆç³Ÿç³•<br>æˆ‘ä»¬å°†é…ç½®æ–‡ä»¶æ‹†åˆ†æˆä¸¤ä¸ªé…ç½®  ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒ  ä¸€ä¸ªå¼€å‘ç¯å¢ƒ<br>åªå½“å¯åŠ¨é…ç½®æ–‡ä»¶ npx webpack -c .&#x2F;config&#x2F;webpack.config.dev.js</p>
<p><strong>npmè„šæœ¬</strong><br>æ¯æ¬¡æ‰“åŒ…æˆ–è€…å¯åŠ¨æœåŠ¡çš„æ—¶å€™ éƒ½éœ€è¦åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥ä¸€é•¿ä¸²çš„å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package.jsonæ–‡ä»¶</span><br><span class="line">&#123;</span><br><span class="line">	&quot;scripts&quot;:&#123;</span><br><span class="line">		&quot;start&quot;:&quot;npx webpack serve -c ./config/webpack.config.dev.js --env development&quot;,</span><br><span class="line">		&quot;build&quot;:&quot;npx wenpack -c ./config/webpack.config.prod.js --env production&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”Ÿäº§ç¯å¢ƒè¿›è¡Œæ‰“åŒ…  æç¤ºæˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™è¶…è¿‡äº†æ‰“åŒ…çš„é¢„æœŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">performance:&#123;   // æ€§èƒ½æ–¹é¢é…ç½®</span><br><span class="line">	hints:false   //æ€§èƒ½æç¤ºå»æ‰</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æå–å…¬å…±é…ç½®</strong><br>å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒ  é…ç½®æœ‰å¤§é‡çš„é‡å¤ä»£ç    æŠŠè¿™äº›é‡å¤ä»£ç å•ç‹¬æŠ½åˆ°ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œ<br>npm install webpack-merge -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">webpack.config.common.js   //é€šè¿‡æ·±mergeè¿›è¡Œåˆå¹¶ä¸‰ä¸ªæ–‡ä»¶   æ’ä»¶ï¼šwebpack-merge</span><br><span class="line">webpack.config.js   //è¿™é‡Œåˆå¹¶ä¸‰ä¸ªæ–‡ä»¶</span><br><span class="line">const &#123;merge&#125; = require(&#x27;webpack-merge&#x27;)</span><br><span class="line">const commonConfig = require(&#x27;./webpack.config.common.js&#x27;)</span><br><span class="line">const developmentConfig = require(&#x27;./webpack.config.dev.js&#x27;)</span><br><span class="line">const productionConfig = require(&#x27;./webpack.config.prod.js&#x27;)</span><br><span class="line">module.exports = (env)=&gt;&#123;</span><br><span class="line">	switch(true)&#123;</span><br><span class="line">		case env.development:</span><br><span class="line">			return merge(commonConfig,developmentConfig)</span><br><span class="line">		case env.production:</span><br><span class="line">			return merge(commonConfig,productionConfig)</span><br><span class="line">		default:</span><br><span class="line">			return new Error(&#x27;æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„é…ç½®ç¯å¢ƒ&#x27;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/11/24/webpack/webpack%E5%9F%BA%E7%A1%80/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpackæ„å»ºæµç¨‹">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/11/20/webpack/webpack%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B/">webpackæ„å»ºæµç¨‹</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-11-20
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
                <a href="/tags/%E5%89%8D%E7%AB%AF/" class="cube-excerpt-tag-link">#å‰ç«¯</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€è¿è¡Œæµç¨‹"><a href="#ä¸€ã€è¿è¡Œæµç¨‹" class="headerlink" title="ä¸€ã€è¿è¡Œæµç¨‹"></a>ä¸€ã€è¿è¡Œæµç¨‹</h2><p><code>webpack</code> çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œå®ƒçš„å·¥ä½œæµç¨‹å°±æ˜¯å°†å„ä¸ªæ’ä»¶ä¸²è”èµ·æ¥</p>
<p>åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šå¹¿æ’­äº‹ä»¶ï¼Œæ’ä»¶åªéœ€è¦ç›‘å¬å®ƒæ‰€å…³å¿ƒçš„äº‹ä»¶ï¼Œå°±èƒ½åŠ å…¥åˆ°è¿™æ¡<code>webpack</code>æœºåˆ¶ä¸­ï¼Œå»æ”¹å˜<code>webpack</code>çš„è¿ä½œï¼Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿæ‰©å±•æ€§è‰¯å¥½</p>
<p>ä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹ä¸‰å¤§æ­¥éª¤ï¼š</p>
<ul>
<li>åˆå§‹åŒ–æµç¨‹ï¼šä»é…ç½®æ–‡ä»¶å’Œ <code>Shell</code> è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¹¶åˆå§‹åŒ–éœ€è¦ä½¿ç”¨çš„æ’ä»¶å’Œé…ç½®æ’ä»¶ç­‰æ‰§è¡Œç¯å¢ƒæ‰€éœ€è¦çš„å‚æ•°</li>
<li>ç¼–è¯‘æ„å»ºæµç¨‹ï¼šä» Entry å‘å‡ºï¼Œé’ˆå¯¹æ¯ä¸ª Module ä¸²è¡Œè°ƒç”¨å¯¹åº”çš„ Loader å»ç¿»è¯‘æ–‡ä»¶å†…å®¹ï¼Œå†æ‰¾åˆ°è¯¥ Module ä¾èµ–çš„ Moduleï¼Œé€’å½’åœ°è¿›è¡Œç¼–è¯‘å¤„ç†</li>
<li>è¾“å‡ºæµç¨‹ï¼šå¯¹ç¼–è¯‘åçš„ Module ç»„åˆæˆ Chunkï¼ŒæŠŠ Chunk è½¬æ¢æˆæ–‡ä»¶ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿ</li>
</ul>
<p><img src="https://static.vue-js.com/b566d400-a658-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h3 id="åˆå§‹åŒ–æµç¨‹"><a href="#åˆå§‹åŒ–æµç¨‹" class="headerlink" title="åˆå§‹åŒ–æµç¨‹"></a>åˆå§‹åŒ–æµç¨‹</h3><p>ä»é…ç½®æ–‡ä»¶å’Œ <code>Shell</code> è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°</p>
<p>é…ç½®æ–‡ä»¶é»˜è®¤ä¸‹ä¸º<code>webpack.config.js</code>ï¼Œä¹Ÿæˆ–è€…é€šè¿‡å‘½ä»¤çš„å½¢å¼æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œä¸»è¦ä½œç”¨æ˜¯ç”¨äºæ¿€æ´»<code>webpack</code>çš„åŠ è½½é¡¹å’Œæ’ä»¶</p>
<p>å…³äºæ–‡ä»¶é…ç½®å†…å®¹åˆ†æï¼Œå¦‚ä¸‹æ³¨é‡Šï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> node_modules = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;node_modules&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> pathToReact = path.<span class="title function_">resolve</span>(node_modules, <span class="string">&#x27;react/dist/react.min.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å…¥å£æ–‡ä»¶ï¼Œæ˜¯æ¨¡å—æ„å»ºçš„èµ·ç‚¹ï¼ŒåŒæ—¶æ¯ä¸€ä¸ªå…¥å£æ–‡ä»¶å¯¹åº”æœ€åç”Ÿæˆçš„ä¸€ä¸ª chunkã€‚</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./path/to/my/entry/file.js&#x27;</span>ï¼Œ</span><br><span class="line">  <span class="comment">// æ–‡ä»¶è·¯å¾„æŒ‡å‘(å¯åŠ å¿«æ‰“åŒ…è¿‡ç¨‹)ã€‚</span></span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;react&#x27;</span>: pathToReact</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç”Ÿæˆæ–‡ä»¶ï¼Œæ˜¯æ¨¡å—æ„å»ºçš„ç»ˆç‚¹ï¼ŒåŒ…æ‹¬è¾“å‡ºæ–‡ä»¶ä¸è¾“å‡ºè·¯å¾„ã€‚</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è¿™é‡Œé…ç½®äº†å¤„ç†å„æ¨¡å—çš„ loader ï¼ŒåŒ…æ‹¬ css é¢„å¤„ç† loader ï¼Œes6 ç¼–è¯‘ loaderï¼Œå›¾ç‰‡å¤„ç† loaderã€‚</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">loaders</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;babel&#x27;</span>,</span><br><span class="line">        <span class="attr">query</span>: &#123;</span><br><span class="line">          <span class="attr">presets</span>: [<span class="string">&#x27;es2015&#x27;</span>, <span class="string">&#x27;react&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">noParse</span>: [pathToReact]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// webpack å„æ’ä»¶å¯¹è±¡ï¼Œåœ¨ webpack çš„äº‹ä»¶æµä¸­æ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ã€‚</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack` å°† `webpack.config.js` ä¸­çš„å„ä¸ªé…ç½®é¡¹æ‹·è´åˆ° `options` å¯¹è±¡ä¸­ï¼Œå¹¶åŠ è½½ç”¨æˆ·é…ç½®çš„ `plugins</span><br></pre></td></tr></table></figure>

<p>å®Œæˆä¸Šè¿°æ­¥éª¤ä¹‹åï¼Œåˆ™å¼€å§‹åˆå§‹åŒ–<code>Compiler</code>ç¼–è¯‘å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æŒæ§è€…<code>webpack</code>å£°æ˜å‘¨æœŸï¼Œä¸æ‰§è¡Œå…·ä½“çš„ä»»åŠ¡ï¼Œåªæ˜¯è¿›è¡Œä¸€äº›è°ƒåº¦å·¥ä½œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Compiler</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Tapable</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">context</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span> = &#123;</span><br><span class="line">            <span class="attr">beforeCompile</span>: <span class="keyword">new</span> <span class="title class_">AsyncSeriesHook</span>([<span class="string">&quot;params&quot;</span>]),</span><br><span class="line">            <span class="attr">compile</span>: <span class="keyword">new</span> <span class="title class_">SyncHook</span>([<span class="string">&quot;params&quot;</span>]),</span><br><span class="line">            <span class="attr">afterCompile</span>: <span class="keyword">new</span> <span class="title class_">AsyncSeriesHook</span>([<span class="string">&quot;compilation&quot;</span>]),</span><br><span class="line">            <span class="attr">make</span>: <span class="keyword">new</span> <span class="title class_">AsyncParallelHook</span>([<span class="string">&quot;compilation&quot;</span>]),</span><br><span class="line">            <span class="attr">entryOption</span>: <span class="keyword">new</span> <span class="title class_">SyncBailHook</span>([<span class="string">&quot;context&quot;</span>, <span class="string">&quot;entry&quot;</span>])</span><br><span class="line">            <span class="comment">// å®šä¹‰äº†å¾ˆå¤šä¸åŒç±»å‹çš„é’©å­</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">webpack</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> compiler = <span class="keyword">new</span> <span class="title class_">Compiler</span>();</span><br><span class="line">  ...<span class="comment">// æ£€æŸ¥options,è‹¥watchå­—æ®µä¸ºtrue,åˆ™å¼€å¯watchçº¿ç¨‹</span></span><br><span class="line">  <span class="keyword">return</span> compiler;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><code>Compiler</code> å¯¹è±¡ç»§æ‰¿è‡ª <code>Tapable</code>ï¼Œåˆå§‹åŒ–æ—¶å®šä¹‰äº†å¾ˆå¤šé’©å­å‡½æ•°</p>
<h3 id="ç¼–è¯‘æ„å»ºæµç¨‹"><a href="#ç¼–è¯‘æ„å»ºæµç¨‹" class="headerlink" title="ç¼–è¯‘æ„å»ºæµç¨‹"></a>ç¼–è¯‘æ„å»ºæµç¨‹</h3><p>æ ¹æ®é…ç½®ä¸­çš„ <code>entry</code> æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/file.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–å®Œæˆåä¼šè°ƒç”¨<code>Compiler</code>çš„<code>run</code>æ¥çœŸæ­£å¯åŠ¨<code>webpack</code>ç¼–è¯‘æ„å»ºæµç¨‹ï¼Œä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>compile</code> å¼€å§‹ç¼–è¯‘</li>
<li><code>make</code> ä»å…¥å£ç‚¹åˆ†ææ¨¡å—åŠå…¶ä¾èµ–çš„æ¨¡å—ï¼Œåˆ›å»ºè¿™äº›æ¨¡å—å¯¹è±¡</li>
<li><code>build-module</code> æ„å»ºæ¨¡å—</li>
<li><code>seal</code> å°è£…æ„å»ºç»“æœ</li>
<li><code>emit</code> æŠŠå„ä¸ªchunkè¾“å‡ºåˆ°ç»“æœæ–‡ä»¶</li>
</ul>
<h4 id="compile-ç¼–è¯‘"><a href="#compile-ç¼–è¯‘" class="headerlink" title="compile ç¼–è¯‘"></a>compile ç¼–è¯‘</h4><p>æ‰§è¡Œäº†<code>run</code>æ–¹æ³•åï¼Œé¦–å…ˆä¼šè§¦å‘<code>compile</code>ï¼Œä¸»è¦æ˜¯æ„å»ºä¸€ä¸ª<code>Compilation</code>å¯¹è±¡</p>
<p>è¯¥å¯¹è±¡æ˜¯ç¼–è¯‘é˜¶æ®µçš„ä¸»è¦æ‰§è¡Œè€…ï¼Œä¸»è¦ä¼šä¾æ¬¡ä¸‹è¿°æµç¨‹ï¼šæ‰§è¡Œæ¨¡å—åˆ›å»ºã€ä¾èµ–æ”¶é›†ã€åˆ†å—ã€æ‰“åŒ…ç­‰ä¸»è¦ä»»åŠ¡çš„å¯¹è±¡</p>
<h4 id="make-ç¼–è¯‘æ¨¡å—"><a href="#make-ç¼–è¯‘æ¨¡å—" class="headerlink" title="make ç¼–è¯‘æ¨¡å—"></a>make ç¼–è¯‘æ¨¡å—</h4><p>å½“å®Œæˆäº†ä¸Šè¿°çš„<code>compilation</code>å¯¹è±¡åï¼Œå°±å¼€å§‹ä»<code>Entry</code>å…¥å£æ–‡ä»¶å¼€å§‹è¯»å–ï¼Œä¸»è¦æ‰§è¡Œ<code>_addModuleChain()</code>å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">_addModuleChain</span>(<span class="params">context, dependency, onModule, callback</span>) &#123;</span><br><span class="line">   ...</span><br><span class="line">   <span class="comment">// æ ¹æ®ä¾èµ–æŸ¥æ‰¾å¯¹åº”çš„å·¥å‚å‡½æ•°</span></span><br><span class="line">   <span class="keyword">const</span> <span class="title class_">Dep</span> = <span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">DepConstructor</span>&#125; */</span> (dependency.<span class="property">constructor</span>);</span><br><span class="line">   <span class="keyword">const</span> moduleFactory = <span class="variable language_">this</span>.<span class="property">dependencyFactories</span>.<span class="title function_">get</span>(<span class="title class_">Dep</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// è°ƒç”¨å·¥å‚å‡½æ•°NormalModuleFactoryçš„createæ¥ç”Ÿæˆä¸€ä¸ªç©ºçš„NormalModuleå¯¹è±¡</span></span><br><span class="line">   moduleFactory.<span class="title function_">create</span>(&#123;</span><br><span class="line">       <span class="attr">dependencies</span>: [dependency]</span><br><span class="line">       ...</span><br><span class="line">   &#125;, <span class="function">(<span class="params">err, <span class="variable language_">module</span></span>) =&gt;</span> &#123;</span><br><span class="line">       ...</span><br><span class="line">       <span class="keyword">const</span> <span class="title function_">afterBuild</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">processModuleDependencies</span>(<span class="variable language_">module</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">         <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="title function_">callback</span>(err);</span><br><span class="line">         <span class="title function_">callback</span>(<span class="literal">null</span>, <span class="variable language_">module</span>);</span><br><span class="line">           &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">       </span><br><span class="line">       <span class="variable language_">this</span>.<span class="title function_">buildModule</span>(<span class="variable language_">module</span>, <span class="literal">false</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">           ...</span><br><span class="line">           <span class="title function_">afterBuild</span>();</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><code>_addModuleChain</code>ä¸­æ¥æ”¶å‚æ•°<code>dependency</code>ä¼ å…¥çš„å…¥å£ä¾èµ–ï¼Œä½¿ç”¨å¯¹åº”çš„å·¥å‚å‡½æ•°<code>NormalModuleFactory.create</code>æ–¹æ³•ç”Ÿæˆä¸€ä¸ªç©ºçš„<code>module</code>å¯¹è±¡</p>
<p>å›è°ƒä¸­ä¼šæŠŠæ­¤<code>module</code>å­˜å…¥<code>compilation.modules</code>å¯¹è±¡å’Œ<code>dependencies.module</code>å¯¹è±¡ä¸­ï¼Œç”±äºæ˜¯å…¥å£æ–‡ä»¶ï¼Œä¹Ÿä¼šå­˜å…¥<code>compilation.entries</code>ä¸­</p>
<p>éšåæ‰§è¡Œ<code>buildModule</code>è¿›å…¥çœŸæ­£çš„æ„å»ºæ¨¡å—<code>module</code>å†…å®¹çš„è¿‡ç¨‹</p>
<h4 id="build-module-å®Œæˆæ¨¡å—ç¼–è¯‘"><a href="#build-module-å®Œæˆæ¨¡å—ç¼–è¯‘" class="headerlink" title="build module å®Œæˆæ¨¡å—ç¼–è¯‘"></a>build module å®Œæˆæ¨¡å—ç¼–è¯‘</h4><p>è¿™é‡Œä¸»è¦è°ƒç”¨é…ç½®çš„<code>loaders</code>ï¼Œå°†æˆ‘ä»¬çš„æ¨¡å—è½¬æˆæ ‡å‡†çš„<code>JS</code>æ¨¡å—</p>
<p>åœ¨ç”¨<code>Loader</code> å¯¹ä¸€ä¸ªæ¨¡å—è½¬æ¢å®Œåï¼Œä½¿ç”¨ <code>acorn</code> è§£æè½¬æ¢åçš„å†…å®¹ï¼Œè¾“å‡ºå¯¹åº”çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆ<code>AST</code>ï¼‰ï¼Œä»¥æ–¹ä¾¿ <code>Webpack</code>åé¢å¯¹ä»£ç çš„åˆ†æ</p>
<p>ä»é…ç½®çš„å…¥å£æ¨¡å—å¼€å§‹ï¼Œåˆ†æå…¶ <code>AST</code>ï¼Œå½“é‡åˆ°<code>require</code>ç­‰å¯¼å…¥å…¶å®ƒæ¨¡å—è¯­å¥æ—¶ï¼Œä¾¿å°†å…¶åŠ å…¥åˆ°ä¾èµ–çš„æ¨¡å—åˆ—è¡¨ï¼ŒåŒæ—¶å¯¹æ–°æ‰¾å‡ºçš„ä¾èµ–æ¨¡å—é€’å½’åˆ†æï¼Œæœ€ç»ˆææ¸…æ‰€æœ‰æ¨¡å—çš„ä¾èµ–å…³ç³»</p>
<h3 id="è¾“å‡ºæµç¨‹"><a href="#è¾“å‡ºæµç¨‹" class="headerlink" title="è¾“å‡ºæµç¨‹"></a>è¾“å‡ºæµç¨‹</h3><h4 id="seal-è¾“å‡ºèµ„æº"><a href="#seal-è¾“å‡ºèµ„æº" class="headerlink" title="seal è¾“å‡ºèµ„æº"></a>seal è¾“å‡ºèµ„æº</h4><p><code>seal</code>æ–¹æ³•ä¸»è¦æ˜¯è¦ç”Ÿæˆ<code>chunks</code>ï¼Œå¯¹<code>chunks</code>è¿›è¡Œä¸€ç³»åˆ—çš„ä¼˜åŒ–æ“ä½œï¼Œå¹¶ç”Ÿæˆè¦è¾“å‡ºçš„ä»£ç </p>
<p><code>webpack</code> ä¸­çš„ <code>chunk</code> ï¼Œå¯ä»¥ç†è§£ä¸ºé…ç½®åœ¨ <code>entry</code> ä¸­çš„æ¨¡å—ï¼Œæˆ–è€…æ˜¯åŠ¨æ€å¼•å…¥çš„æ¨¡å—</p>
<p>æ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ <code>Chunk</code>ï¼Œå†æŠŠæ¯ä¸ª <code>Chunk</code> è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨</p>
<h4 id="emit-è¾“å‡ºå®Œæˆ"><a href="#emit-è¾“å‡ºå®Œæˆ" class="headerlink" title="emit è¾“å‡ºå®Œæˆ"></a>emit è¾“å‡ºå®Œæˆ</h4><p>åœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>Compiler</code> å¼€å§‹ç”Ÿæˆæ–‡ä»¶å‰ï¼Œé’©å­ <code>emit</code> ä¼šè¢«æ‰§è¡Œï¼Œè¿™æ˜¯æˆ‘ä»¬ä¿®æ”¹æœ€ç»ˆæ–‡ä»¶çš„æœ€åä¸€ä¸ªæœºä¼š</p>
<p>ä»è€Œ<code>webpack</code>æ•´ä¸ªæ‰“åŒ…è¿‡ç¨‹åˆ™ç»“æŸäº†</p>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p><img src="https://static.vue-js.com/d77fc560-a658-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/11/20/webpack/webpack%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpackæ¦‚å¿µ">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/11/14/webpack/webpack%E6%A6%82%E5%BF%B5/">webpackæ¦‚å¿µ</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-11-14
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h1 id="ä¸€ã€webpackæ¦‚è¿°"><a href="#ä¸€ã€webpackæ¦‚è¿°" class="headerlink" title="ä¸€ã€webpackæ¦‚è¿°"></a>ä¸€ã€webpackæ¦‚è¿°</h1><h2 id="1-ä»€ä¹ˆæ˜¯webpackï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯webpackï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯webpackï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯webpackï¼Ÿ</h2><p>webpackè¢«å®šä¹‰ä¸ºç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ï¼Œæ˜¯ç›®å‰æœ€ä¸ºæµè¡Œçš„JavaScriptæ‰“åŒ…å·¥å…·ä¹‹ä¸€ã€‚</p>
<p>webpackä¼šä»¥ä¸€ä¸ªæˆ–å¤šä¸ªjsæ–‡ä»¶ä¸ºå…¥å£ï¼Œé€’å½’æ£€æŸ¥æ¯ä¸ªjsæ¨¡å—çš„ä¾èµ–ï¼Œä»è€Œæ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œç„¶åä¾æ®è¯¥å…³ç³»å›¾ï¼Œå°†æ•´ä¸ªåº”ç”¨ç¨‹åºæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚</p>
<p>ç”±äºwebpackæ˜¯ç”¨nodejsç¼–å†™çš„ï¼Œæ‰€ä»¥å®ƒä¾èµ–çš„è¿è¡Œç¯å¢ƒå°±æ˜¯nodejsã€‚ä¹Ÿæ­£å› ä¸ºè¿™ä¸€ç‚¹ï¼Œwebpackåªèƒ½è¯†åˆ«JavaScriptï¼Œæ‰€æœ‰éJavaScriptï¼ˆåŒ…æ‹¬HTMLï¼ŒCSSï¼ŒTypescriptç­‰ï¼‰ç¼–å†™çš„æ–‡ä»¶éƒ½éœ€è¦ç»è¿‡å¤„ç†ï¼Œè¿™æ˜¯å€ŸåŠ©å¯¹åº”çš„loaderå®ç°çš„ã€‚</p>
<p>webpackä½¿ç”¨çš„æ˜¯nodejsé»˜è®¤çš„æ¨¡å—ç³»ç»Ÿï¼šcommonjsï¼Œå€ŸåŠ©nodejsæä¾›çš„APIæ¥æ“ä½œå¾…æ‰“åŒ…é¡¹ç›®çš„æºæ–‡ä»¶ï¼ˆå¦‚fsæ¨¡å—ã€pathæ¨¡å—ç­‰ï¼‰ã€‚webpackå°†è¿™äº›æ–‡ä»¶æ•´åˆå‹ç¼©åï¼Œè¾“å‡ºåˆ°ä¸€ä¸ªç‰¹å®šçš„ç›®å½•ä¸‹ï¼ˆé€šå¸¸æ˜¯distï¼‰ã€‚å¤„ç†è¿‡çš„distä¸€èˆ¬ä¼šè¢«ç›´æ¥ä¸Šä¼ åˆ°é™æ€èµ„æºæœåŠ¡å™¨ä½¿ç”¨ã€‚</p>
<p>webpack æ˜¯ä¸€ä¸ªå¼€æºçš„å‰ç«¯åŒ…å·¥å…·ã€‚webpack æä¾›äº†å‰ç«¯å¼€å‘ç¼ºä¹çš„æ¨¡å—åŒ–å¼€å‘æ–¹å¼,å°†å„ç§é™æ€èµ„æºè§†ä¸ºæ¨¡å—,å¹¶ä»å®ƒç”Ÿæˆä¼˜åŒ–è¿‡çš„ä»£ç ã€‚ è¦ä½¿ç”¨ webpack å‰é¡»å…ˆå®‰è£… node.jsã€‚</p>
<p>webpackæ˜¯å‰ç«¯çš„ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·,æœ‰äº†å®ƒå¯ä»¥å¤§å¤§æé«˜å†™é¡¹ç›®çš„æ•ˆç‡,å¯ä»¥å¯¹css,jsæ–‡ä»¶è¿›è¡Œè‡ªåŠ¨å‹ç¼©,æŠŠsassä»£ç è‡ªåŠ¨è§£ææˆå¯¹åº”çš„cssæ–‡ä»¶,è®©ä½ çš„ä»£ç å’Œæ ·å¼å®æ—¶çš„æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸Š,å½“ç„¶,æˆ‘ä»¬ä½¿ç”¨webpackçš„ç›®çš„è¿˜æ˜¯ä¸ºäº†é¡¹ç›®å®Œæˆåè¿›è¡Œæ‰“åŒ…,webpackå¹¶ä¸å¼ºåˆ¶ä½¿ç”¨AMDæˆ–è€…CMDè¿™ä¹‹ä¸­çš„æŸä¸€ç§æ–¹æ¡ˆ,è€Œæ˜¯é€šè¿‡å…¼å®¹æ‰€æœ‰æ¨¡å—åŒ–æ–¹æ¡ˆè®©ä½ å¯ä»¥æŒ‰éœ€æ¥å…¥é¡¹ç›®ï¼Œæœ‰äº†webpackï¼Œä½ å¯ä»¥éšæ„é€‰æ‹©ä½ å–œæ¬¢çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œè‡³äºæ€ä¹ˆå¤„ç†æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»åŠå¦‚ä½•æŒ‰éœ€æ‰“åŒ…ï¼Œwebpackä¼šå¸®ä½ å¤„ç†å¥½ã€‚</p>
<h2 id="2-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpackï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpackï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpackï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpackï¼Ÿ</h2><p>ç¬¬ä¸€ï¼Œæœªæ‰“åŒ…çš„é¡¹ç›®é€šå¸¸ä½“ç§¯åºå¤§ï¼Œæ–‡ä»¶æ•°é‡ä¼—å¤šã€‚å¦‚æœå°†å…¶ç›´æ¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨ä¼šå‘é€å¤§é‡çš„httpè¯·æ±‚æ¥ä¸‹è½½è¿™äº›æ–‡ä»¶ï¼Œè¿™ä¼šç»™æœåŠ¡å™¨å¸¦æ¥å¾ˆå¤§çš„å‹åŠ›ï¼ŒåŒæ—¶å®¢æˆ·ç«¯çš„ä½“éªŒä¹Ÿéå¸¸ä¸å¥½ã€‚</p>
<p>ç¬¬äºŒï¼Œæµè§ˆå™¨æœ¬èº«ä¸æ”¯æŒä»»ä½•æ¨¡å—ç³»ç»Ÿã€‚å› æ­¤ï¼Œä½¿ç”¨æ¨¡å—ç³»ç»Ÿå¼€å‘å‡ºçš„JavaScriptä»£ç æ— æ³•ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œè€Œæ¨¡å—ç³»ç»Ÿå¯¹ç°ä»£JavaScriptå¼€å‘æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªå·¥å…·ï¼Œå°†æ¨¡å—ç³»ç»Ÿç¼–å†™å‡ºçš„ä»£ç è½¬åŒ–ä¸ºæµè§ˆå™¨æ‰€èƒ½è¯†åˆ«çš„ä»£ç ã€‚webpackå°±å¯ä»¥å®Œæˆè¿™ä¸€ä»»åŠ¡ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æºä»£ç æš´éœ²ç»™ç”¨æˆ·ï¼Œå³ä½¿æ˜¯ä¿å¯†æ€§è¦æ±‚ä¸é‚£ä¹ˆé«˜çš„å‰ç«¯ä»£ç ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒPCç«¯æµè§ˆå™¨é€šå¸¸éƒ½æä¾›å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹å’Œè°ƒè¯•å‰ç«¯ä»£ç ï¼Œè¿™åœ¨å¼€å‘ç¯å¢ƒä¸‹æ„ä¹‰é‡å¤§ã€‚ä½†å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œæš´éœ²æºä»£ç ä¸ä»…æ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼Œåè€Œå­˜åœ¨å®‰å…¨éšæ‚£ï¼ˆå¦‚æœé»‘å®¢æ¯”ä½ æ›´å…ˆå‘ç°ä»£ç ä¸­çš„bugï¼Œä½ å¯èƒ½é¢ä¸´ä¸¥é‡æŸå¤±ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©webpacké‡ç»„å’Œæ··æ·†æºä»£ç ï¼Œå¢åŠ é»‘å®¢é˜…è¯»æºä»£ç çš„éš¾åº¦ï¼Œä»¥æå‡ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚</p>
<p>ç¬¬å››ï¼Œå€ŸåŠ©webpackæä¾›çš„dev-serverï¼Œå¯ä»¥å®ç°å‰åç«¯åˆ†ç¦»ã€‚dev-serveræœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªnodeæœåŠ¡ã€‚å½“é€šè¿‡å‘½ä»¤è¡Œå¯ç”¨dev-serveræ—¶ï¼Œwebpackä¼šåœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªnodeæœåŠ¡ï¼Œå°†æ‰“åŒ…åçš„æ–‡ä»¶ä½œä¸ºé™æ€èµ„æºæ³¨å…¥è¯¥æœåŠ¡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸ä¾èµ–åå°ï¼ˆè¿™ç§è¯´æ³•å¹¶ä¸å®Œå…¨å‡†ç¡®ï¼Œå®é™…ä¸Šwebpackæ˜¯é€šè¿‡nodeä¸ºä½ æä¾›åå°æœåŠ¡ï¼‰çš„æƒ…å†µä¸‹è¿›è¡Œå‰ç«¯å¼€å‘äº†ã€‚</p>
<p>é™¤äº†ä»¥ä¸Šè¿™äº›ï¼Œwebpackè¿˜æœ‰å¾ˆå¤šå¼ºå¤§çš„åŠŸèƒ½ï¼Œè¿™é‡Œæš‚ä¸è¯¦è¿°ã€‚</p>
<h2 id="3-å·¥ä½œåŸç†"><a href="#3-å·¥ä½œåŸç†" class="headerlink" title="3. å·¥ä½œåŸç†"></a>3. å·¥ä½œåŸç†</h2><p>ç®€å•çš„è¯´å°±æ˜¯åˆ†æä»£ç ï¼Œæ‰¾åˆ°â€œrequireâ€ã€â€œexportsâ€ã€â€œdefineâ€ç­‰å…³é”®è¯ï¼Œå¹¶æ›¿æ¢æˆå¯¹åº”æ¨¡å—çš„å¼•ç”¨ã€‚</p>
<p>åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡æ˜å¯¹æŸäº›æ–‡ä»¶è¿›è¡Œç¼–è¯‘ã€å‹ç¼©ã€ç»„åˆç­‰ä»»åŠ¡ã€‚æŠŠä½ çš„é¡¹ç›®å½“æˆä¸€ä¸ªæ•´ä½“ï¼Œé€šè¿‡ä¸€ä¸ªç»™å®šçš„ä¸»æ–‡ä»¶ ï¼ˆindex.jsï¼‰ï¼Œwebpackå°†ä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹æ‰¾åˆ°ä½ çš„é¡¹ç›®çš„æ‰€æœ‰çš„ä¾èµ–æ–‡ä»¶ï¼Œä½¿ç”¨loaderså¤„ç†ä»–ä»¬ï¼Œæœ€åæ‰“åŒ…ä¸ºä¸€ä¸ªæµè§ˆå™¨å¯ä»¥è¯†åˆ«çš„jsæ–‡ä»¶ã€‚</p>
<p>æµç¨‹ç»†èŠ‚<br>Webpackçš„æ„å»ºæµç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>åˆå§‹åŒ–ï¼šå¯åŠ¨æ„å»ºï¼Œè¯»å–ä¸åˆå¹¶é…ç½®å‚æ•°ï¼ŒåŠ è½½Pluginï¼Œå®ä¾‹åŒ–Complier.</li>
<li>ç¼–è¯‘ï¼šä»Entryå‡ºå‘ï¼Œé’ˆå¯¹æ¯ä¸ªModuleä¸²è¡Œè°ƒç”¨å¯¹åº”çš„Loaderå»ç¿»è¯‘æ–‡ä»¶å†…å®¹ï¼Œå†æ‰¾åˆ°è¯¥Moduleä¾èµ–çš„Moduleï¼Œé€’å½’åœ°è¿›è¡Œç¼–è¯‘å¤„ç†ã€‚</li>
<li>è¾“å‡ºï¼š å¯¹ç¼–è¯‘åçš„Moduleç»„åˆæˆChunkï¼ŒæŠŠChunkè½¬æ¢æˆæ–‡ä»¶ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿã€‚<br> å¦‚æœåªæ‰§è¡Œä¸€æ¬¡æ„å»ºï¼Œä»¥ä¸Šé˜¶æ®µå°†ä¼šæŒ‰ç…§é¡ºåºå„æ‰§è¡Œä¸€æ¬¡ã€‚ä½†åœ¨å¼€å¯ç›‘å¬æ¨¡å¼ä¸‹ï¼Œæµç¨‹å°†å˜ä¸ºå¦‚ä¸‹ï¼š<br> <img src="http://hghqz.vip/webpack/%E6%89%93%E5%8C%85%E6%B5%81%E7%A8%8B.jpg" alt="æ‰“åŒ…æµç¨‹" title="æ‰“åŒ…æµç¨‹"></li>
</ol>
<h2 id="4-webpackçš„ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#4-webpackçš„ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="4. webpackçš„ä¼˜ç¼ºç‚¹ï¼Ÿ"></a>4. webpackçš„ä¼˜ç¼ºç‚¹ï¼Ÿ</h2><p>ä¼˜ç‚¹ï¼š<br>ï¼ˆ1ï¼‰ webpack æ˜¯ä»¥ commonJS çš„å½¢å¼æ¥ä¹¦å†™è„šæœ¬æ»´ï¼Œä½†å¯¹ AMD&#x2F;CMD çš„æ”¯æŒä¹Ÿå¾ˆå…¨é¢ï¼Œæ–¹ä¾¿æ—§é¡¹ç›®è¿›è¡Œä»£ç è¿ç§»ã€‚<br>ï¼ˆ2ï¼‰èƒ½è¢«æ¨¡å—åŒ–çš„ä¸ä»…ä»…æ˜¯ JS äº†ã€‚<br>ï¼ˆ3ï¼‰ å¼€å‘ä¾¿æ·ï¼Œèƒ½æ›¿ä»£éƒ¨åˆ† grunt&#x2F;gulp çš„å·¥ä½œï¼Œæ¯”å¦‚æ‰“åŒ…ã€å‹ç¼©æ··æ·†ã€å›¾ç‰‡è½¬base64ç­‰ã€‚<br>ï¼ˆ4ï¼‰æ‰©å±•æ€§å¼ºï¼Œæ’ä»¶æœºåˆ¶å®Œå–„<br>ç¼ºç‚¹ï¼š<br>â— é…ç½®å¤æ‚<br>â— ä¸åˆ†åŒ…bundle.jsä½“ç§¯åºå¤§<br>â— åªèƒ½ç”¨äºé‡‡ç”¨æ¨¡å—åŒ–å¼€å‘çš„é¡¹ç›®<br>â— æ‰“åŒ…æ…¢<br>â— ESæ¨¡å—é™¤Moduleå¤–å…¨ç”¨babelè½¬æ¢ï¼Œä½†æ˜¯ä¸€éƒ¨åˆ†ES2015 è¯­æ³•çš„ firefox ä¸ chrome æµè§ˆå™¨ä¸­èƒ½ç›´æ¥è·‘çš„ä»£ç ï¼Œæ— æ³•ç”¨ webpack ç¼–è¯‘</p>
<h2 id="5-åŸºæœ¬é…ç½®"><a href="#5-åŸºæœ¬é…ç½®" class="headerlink" title="5. åŸºæœ¬é…ç½®"></a>5. åŸºæœ¬é…ç½®</h2><p>è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨webpackï¼Œéœ€è¦é¦–å…ˆå®‰è£…nodejsï¼Œå®ƒæ˜¯webpackçš„è¿è¡Œç¯å¢ƒã€‚nodejså®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥é€šè¿‡npm install webpack -gæ¥å…¨å±€å®‰è£…webpackã€‚è¿™æ ·å°±å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨webpackäº†ã€‚</p>
<p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨webpackçš„æ ¸å¿ƒæ˜¯ç¼–å†™é…ç½®æ–‡ä»¶ã€‚é…ç½®æ–‡ä»¶é€šå¸¸å‘½åä¸ºwebpack.config.jsï¼Œæ˜¯ä¸€ä¸ªç¬¦åˆcommonjsè§„èŒƒçš„jsæ–‡ä»¶ã€‚è¯¥æ–‡ä»¶é€šè¿‡module.exportsæš´éœ²å‡ºä¸€ä¸ªjså¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªå¯¹è±¡ä¸ºwebpackçš„é…ç½®å¯¹è±¡ï¼ˆoptionsï¼‰ã€‚webpackä¼šæ ¹æ®è¿™ä¸ªé…ç½®å¯¹è±¡æ¥å†³å®šå¦‚ä½•æ‰“åŒ…é¡¹ç›®ã€‚</p>
<p>é…ç½®å¯¹è±¡ä¸­åŒ…å«å››ä¸ªæ ¸å¿ƒå‚æ•°ï¼š</p>
<p>å…¥å£ï¼ˆentryï¼‰Entry:å…¥å£æŒ‡ç¤ºwebpackä»¥å“ªä¸ªæ–‡ä»¶ä¸ºå…¥å£èµ·ç‚¹å¼€å§‹æ‰“åŒ…ï¼Œåˆ†ææ„å»ºå†…éƒ¨ä¾èµ–å›¾<br>å‡ºå£ï¼ˆoutputï¼‰output:è¾“å‡ºæŒ‡ç¤ºwebpackçš„æ‰“åŒ…åçš„èµ„æºbundlesè¾“å‡ºåˆ°å“ªé‡Œå»ï¼Œä»¥åŠå¦‚ä½•å‘½å<br>åŠ è½½å™¨ï¼ˆloaderï¼‰Loader:è®©webpackèƒ½å¤Ÿå»å¤„ç†å“ªäº›éJavaScripæ–‡ä»¶ï¼ˆwebpackè‡ªèº«åªç†è§£javaScript)<br>æ’ä»¶ï¼ˆpluginï¼‰ plugin:æ’ä»¶å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ç­‰<br>æ’ä»¶ï¼ˆmodeï¼‰ mode:æ¨¡å¼æŒ‡ç¤ºwebpackä½¿ç”¨ç›¸åº”æ¨¡å¼çš„é…ç½®</p>
<h3 id="1-å…¥å£ï¼ˆentryï¼‰"><a href="#1-å…¥å£ï¼ˆentryï¼‰" class="headerlink" title="1. å…¥å£ï¼ˆentryï¼‰"></a>1. å…¥å£ï¼ˆentryï¼‰</h3><p>é¡¾åæ€ä¹‰ï¼Œå®ƒå®šä¹‰äº†webpackçš„æ‰“åŒ…å…¥å£ï¼Œä¹Ÿå°±æ˜¯webpackä»å“ªä¸ªjså¼€å§‹æ‰“åŒ…ã€‚</p>
<p>ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå…¥å£ï¼Œç”±entryå±æ€§æŒ‡å®šï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªå¯¹è±¡å†…åªåŒ…å«äº†ä¸€ä¸ªå…¥å£ï¼Œä¹Ÿå¯ä»¥ç®€å†™ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆæˆ–å­—ç¬¦ä¸²æ•°ç»„ï¼‰ã€‚å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: &quot;./src/main.js&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¯ä»¥ç®€å†™ä¸º:</span><br><span class="line">  entry: &quot;./src/main.js&quot;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°é…ç½®å®šä¹‰srcç›®å½•ä¸‹çš„main.jsä¸ºæ‰“åŒ…å…¥å£ï¼Œwebpackå°†ä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹ï¼Œæ„å»ºæ•´ä¸ªé¡¹ç›®çš„ä¾èµ–å…³ç³»å›¾ã€‚</p>
<p>ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥æœ‰å¤šä¸ªæ‰“åŒ…å…¥å£ï¼Œå¸¸è§çš„åœºæ™¯å¦‚å¤šé¡µåº”ç”¨ï¼Œç‹¬ç«‹æ‰“åŒ…ç¬¬ä¸‰æ–¹åº“ç­‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">  app: &#x27;./src/app.js&#x27;,</span><br><span class="line">  vendors: &#x27;./src/vendors.js&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„é…ç½®ï¼Œè¦æ±‚webpackåˆ†åˆ«ä»¥app.jså’Œvendors.jsä¸ºæ‰“åŒ…å…¥å£ï¼Œç‹¬ç«‹æ„å»ºä¾èµ–å…³ç³»å›¾ã€‚æœ€ç»ˆï¼Œé¡¹ç›®ä»£ç å’Œç¬¬ä¸‰æ–¹ä»£ç å°†è¢«ç‹¬ç«‹æ‰“åŒ…å‡ºæ¥ã€‚æ„å»ºå¤šé¡µåº”ç”¨æ—¶ï¼Œä¹Ÿæ˜¯åˆ†åˆ«ä¸ºæ¯ä¸ªé¡µé¢æä¾›ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œç‹¬ç«‹æ„å»ºä¾èµ–å›¾ã€‚</p>
<p>æ­¤å¤–ï¼Œå…¥å£å‚æ•°å…è®¸ä¼ å…¥å­—ç¬¦ä¸²æ•°ç»„ã€‚å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry: [&quot;./src/main1.js&quot;, &quot;./src/main2.js&quot;]</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯åº”ç”¨çš„ä¸»å…¥å£ï¼Œå®ƒä»¬ä¼šè¢«æ‰“åŒ…ç”Ÿæˆåˆ°åŒä¸€ä¸ªchunkæ–‡ä»¶ä¸­ã€‚å½“ä¸»å…¥å£æ–‡ä»¶è¿‡äºåºå¤§ï¼Œéœ€è¦æ‹†åˆ†æˆå¤šä¸ªï¼Œä½†å¸Œæœ›å®ƒä»¬è¾“å‡ºåˆ°åŒä¸€ä¸ªæ‰“åŒ…æ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨ã€‚</p>
<h3 id="2-å‡ºå£ï¼ˆoutputï¼‰"><a href="#2-å‡ºå£ï¼ˆoutputï¼‰" class="headerlink" title="2. å‡ºå£ï¼ˆoutputï¼‰"></a>2. å‡ºå£ï¼ˆoutputï¼‰</h3><p>ä¹Ÿå°±æ˜¯webpackçš„è¾“å‡ºï¼Œç”±outputå±æ€§å®šä¹‰ã€‚</p>
<p>ä¸å…¥å£ä¸åŒçš„æ˜¯ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºåªèƒ½æœ‰ä¸€ä¸ªå‡ºå£ã€‚å‡ºå£æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼šfilenameå’Œpathï¼Œåˆ†åˆ«å®šä¹‰æ‰“åŒ…ç»“æœçš„æ–‡ä»¶åå’Œè¾“å‡ºä½ç½®ã€‚å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: &quot;./src/main.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &#x27;bundle.js&#x27;,</span><br><span class="line">    path: path.resolve(__dirname + &#x27;/dist&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šé…ç½®å®šä¹‰main.jsä¸ºåº”ç”¨çš„å…¥å£æ–‡ä»¶ï¼Œæœ€ç»ˆè¾“å‡ºçš„æ–‡ä»¶åä¸ºbundle.jsï¼Œè¾“å‡ºä½ç½®æ˜¯å½“å‰è·¯å¾„ä¸‹çš„distæ–‡ä»¶å¤¹ã€‚</p>
<p>å½“åº”ç”¨ç¨‹åºç”±å¤šä¸ªæ‰“åŒ…å…¥å£æ—¶ï¼Œäº§ç”Ÿçš„è¾“å‡ºç»“æœä¹Ÿä¼šæœ‰å¾ˆå¤šä¸ªï¼Œä¸€ä¸€ä¸ºæ¯ä¸ªæ–‡ä»¶æŒ‡å®šæ–‡ä»¶åéå¸¸ä¸çµæ´»ã€‚ä¸ºæ­¤ï¼Œwebpackå…è®¸ä½¿ç”¨å ä½ç¬¦æ¥å®šä¹‰æ–‡ä»¶åã€‚å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: &#x27;./src/app.js&#x27;,</span><br><span class="line">    search: &#x27;./src/search.js&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &#x27;[name].js&#x27;,</span><br><span class="line">    path: path.resolve(__dirname + &#x27;/dist&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ‰“åŒ…å°†è¾“å‡ºapp.jså’Œsearch.jsä¸¤ä¸ªæ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œfilenameçš„å€¼ä¸­[name]å°±æ˜¯ä½¿ç”¨äº†å ä½ç¬¦ï¼Œwebpackä¼šå°†å…¶æ›¿æ¢æˆå…¥å£æ–‡ä»¶çš„æ–‡ä»¶åã€‚å› æ­¤ï¼Œapp.jså’Œsearch.jsè¿™ä¸¤ä¸ªå…¥å£æ–‡ä»¶åœ¨æ‰“åŒ…åä¼šåœ¨distæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸¤ä¸ªåŒåæ–‡ä»¶ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å‡ ä¹ä»æ¥ä¸ä¼šè¿™æ ·å®šä¹‰filenameï¼Œå› ä¸ºå›ºå®šçš„æ–‡ä»¶åæ— æ³•ç”¨äºçƒ­æ›´æ–°ï¼ˆHMRï¼ŒHot Module Replacementï¼Œç›´è¯‘ä¸ºæ¨¡å—çƒ­æ›¿æ¢ï¼‰ã€‚çƒ­æ›´æ–°çš„å®ç°æœºåˆ¶å¦‚ä¸‹ï¼š</p>
<p>åœ¨ä¸€ä»½æ¸…å•æ–‡ä»¶ï¼ˆmanifestæ–‡ä»¶ï¼‰ä¸­åˆ—ä¸¾æ‰€æœ‰ä¾èµ–çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å¯¹åº”çš„æ–‡ä»¶åä¸­å¸¦æœ‰ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œå¦‚chunk.1.0.0.jsã€‚<br>å½“æŸä¸ªæ¨¡å—å‘ç”Ÿä¿®æ”¹ï¼Œå°±é‡æ–°æ‰“åŒ…è¯¥æ¨¡å—ï¼Œå¹¶ä¿®æ”¹å¯¹åº”æ–‡ä»¶åä¸­çš„ç‰ˆæœ¬å·ï¼Œå¦‚chunk.1.0.1.jsã€‚æ­¤æ—¶æ–‡ä»¶åå°±å‘ç”Ÿäº†å˜åŒ–ã€‚<br>çƒ­æ›´æ–°æœºåˆ¶æ£€æµ‹åˆ°æ¸…å•æ–‡ä»¶ä¸­çš„æ–‡ä»¶åå‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šé‡æ–°ä¸‹è½½å’Œæ›´æ–°è¯¥æ¨¡å—ï¼Œæ–‡ä»¶åæ²¡æœ‰å˜åŒ–çš„æ¨¡å—ä¸ä¼šè¢«é‡æ–°ä¸‹è½½ã€‚è¿™æ ·åº”ç”¨å°±å¾—åˆ°äº†æ›´æ–°ã€‚<br>ç”±äºwebpackä¸éœ€è¦å¯¹æ¯æ¬¡çš„ä»£ç ä¿®æ”¹éƒ½è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œæ‰€ä»¥å®ƒåªéœ€è¦å‘æ–‡ä»¶åä¸­æ’å…¥ä¸€ä¸ªéšæœºçš„hashå€¼å³å¯ã€‚è¿™ä¸ªhashå€¼æ¯æ¬¡é‡æ–°æ‰“åŒ…éƒ½ä¼šå˜åŒ–ï¼Œä»¥ä¿è¯çƒ­æ›´æ–°æœºåˆ¶å¯ä»¥æ­£ç¡®æ›´æ–°ã€‚å‡å¦‚æŸæ¬¡æ‰“åŒ…åçš„æ–‡ä»¶åä¸ºapp.23j3j2366842h76ewhd.jsï¼Œéšåæˆ‘ä»¬å¯¹è¯¥æ¨¡å—è¿›è¡Œäº†ä¿®æ”¹ï¼Œé‡æ–°æ‰“åŒ…åwebpackæ’å…¥äº†ä¸€ä¸ªæ–°çš„hashå€¼ï¼Œå¾—åˆ°app.er234hh9hydyt586.jsã€‚çƒ­æ›´æ–°æ¨¡å—æ£€æµ‹åˆ°æ–‡ä»¶åå˜åŒ–ï¼Œå°±ä¼šè‡ªåŠ¨ä¸‹è½½è¿™ä¸ªæ–°çš„jsæ–‡ä»¶ï¼Œæ¥æ›´æ–°åº”ç”¨çš„çŠ¶æ€ã€‚</p>
<p>æ­¤æ—¶çš„å‡ºå£ä¸€èˆ¬å†™æˆè¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: &#x27;./src/app.js&#x27;,</span><br><span class="line">    search: &#x27;./src/search.js&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &#x27;[name].[hash].js&#x27;,</span><br><span class="line">    path: path.resolve(__dirname + &#x27;/dist&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¼šè¾“å‡ºä¸¤ä¸ªç±»ä¼¼äºapp.57bjs8k8rfht7.jså’Œsearch.su774fju83jur.jsçš„æ‰“åŒ…ç»“æœï¼Œå®ƒä»¬ä¼šè¢«æ·»åŠ åˆ°ä¸€ä»½æ¸…å•æ–‡ä»¶ã€‚æ¯å½“ä¿®æ”¹æ¨¡å—çš„å†…å®¹ï¼Œwebpackéƒ½ä¼šé‡æ–°æ‰“åŒ…ï¼Œç”Ÿæˆæ–°çš„hashå€¼ï¼Œå¹¶æ›´æ–°æ¸…å•æ–‡ä»¶ï¼Œè¿™æ ·çƒ­æ›´æ–°æœºåˆ¶å°±å¯ä»¥ç”Ÿæ•ˆäº†ã€‚</p>
<p>æ³¨æ„ï¼Œä½¿ç”¨splitChunkè¿›è¡Œä»£ç åˆ†å‰²æ—¶ï¼Œè¢«åˆ†å‰²å‡ºæ¥çš„ä»£ç é»˜è®¤å‘½åä¸ºchunk.[hash].jsã€‚</p>
<h3 id="3-åŠ è½½å™¨ï¼ˆloaderï¼‰"><a href="#3-åŠ è½½å™¨ï¼ˆloaderï¼‰" class="headerlink" title="3. åŠ è½½å™¨ï¼ˆloaderï¼‰"></a>3. åŠ è½½å™¨ï¼ˆloaderï¼‰</h3><p>åœ¨ä»‹ç»åŠ è½½å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹webpackæ‰“åŒ…æ—¶ä¼šé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>åœ¨æ¦‚è¿°ä¸­æˆ‘ä»¬å·²ç»è®²åˆ°ï¼Œwebpackçš„è¿è¡Œç¯å¢ƒæ˜¯nodejsï¼Œå› æ­¤å®ƒåªèƒ½è¯†åˆ«JavaScriptã€‚ä½†æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ä¸­å¯èƒ½å­˜åœ¨å¤§é‡çš„éJavaScriptæ–‡ä»¶ï¼Œå¦‚HTMLã€CSSã€Typescriptã€txtï¼Œç”šè‡³å›¾ç‰‡æ–‡ä»¶ç­‰ã€‚</p>
<p>æœ‰äººå¯èƒ½ä¼šè¯´ï¼Œwebpackåˆä¸éœ€è¦æ‰§è¡Œè¿™äº›æ–‡ä»¶ï¼Œç›´æ¥è¾“å‡ºåˆ°distç›®å½•ä¸‹ä¸å°±è¡Œäº†å—ï¼Ÿ</p>
<p>å¦‚æœè¿™äº›éJavaScriptæ–‡ä»¶åªè¢«jsæ–‡ä»¶å¼•ç”¨ï¼Œè€Œä»–ä»¬ä¹‹é—´äº’ç›¸æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œwebpackç¡®å®æ²¡å¿…è¦è§£æä»–ä»¬ã€‚ä½†å½“å®ƒä»¬å­˜åœ¨ä¾èµ–å…³ç³»æ—¶ï¼Œé—®é¢˜å°±ä¸è¿™ä¹ˆç®€å•äº†ï¼Œå¦‚ï¼š<br>index.css</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;./color.css&quot;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œindex.cssä¸­å¼•å…¥äº†color.cssã€‚æˆ‘ä»¬å‡è®¾index.cssæ˜¯åœ¨jsä¸­å¼•å…¥çš„ï¼Œé‚£ä¹ˆwebpackåœ¨è§£æjsæ—¶è‡ªç„¶ä¼šæŠŠindex.cssæ·»åŠ åˆ°ä¾èµ–å…³ç³»å›¾ä¸­ã€‚</p>
<p>å¯æ˜¯webpackè¿è¡Œåœ¨nodejsç¯å¢ƒä¸‹ï¼Œå®ƒæ— æ³•è§£æindex.cssçš„å†…å®¹ï¼Œå› æ­¤å®ƒä¸çŸ¥é“index.csså†…éƒ¨è¿˜ä¾èµ–äº†color.cssã€‚è¿™æ ·ï¼Œcolor.csså°±æ— æ³•è¢«æ·»åŠ åˆ°ä¾èµ–å…³ç³»å›¾ä¸­ï¼Œè€Œä¸åœ¨ä¾èµ–å…³ç³»å›¾ä¸­çš„æ–‡ä»¶åœ¨æ‰“åŒ…æ—¶å°†è¢«èˆå¼ƒã€‚ä¹Ÿå³æ˜¯è¯´ï¼Œwebpackæœ€ç»ˆæ‰“åŒ…å‡ºçš„ä»£ç ä¸­ä¸ä¼šåŒ…å«color.cssã€‚</p>
<p>è¿™æ˜¾ç„¶æ˜¯é”™è¯¯çš„ï¼Œæˆ‘ä»¬éœ€è¦color.cssã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›é¢å¤–çš„ä»£ç å¸®åŠ©webpackè¯†åˆ«cssæ–‡ä»¶ä¸­çš„ä¾èµ–ã€‚æˆ‘ä»¬ä¼šç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†index.cssè¯»å–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åè½¬åŒ–æˆjsï¼ˆæ³¨æ„ï¼Œè½¬åŒ–æˆjsåªæ˜¯ä¸ºäº†è®©webpackè§£æä¾èµ–å…³ç³»ï¼Œå› æ­¤è½¬åŒ–å‡ºçš„jsä¸åŸcsså¹¶ä¸ç­‰ä»·ï¼‰è¾“å‡ºå‡ºæ¥ï¼Œè¿™æ ·webpackå°±å¯ä»¥è§£æäº†ã€‚è€Œè¿™ä¸ªç”¨äºè½¬æ¢çš„å‡½æ•°ï¼Œå°±ç§°ä¸ºä¸€ä¸ªloaderã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸€ä¸ªåŠ è½½å™¨ï¼ˆloaderï¼‰å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå°†ç‰¹å®šçš„å­—ç¬¦ä¸²è½¬åŒ–æˆJavaScriptä»£ç çš„å‡½æ•°ã€‚æ¢ä¸ªè§’åº¦æ¥è¯´ï¼Œä¸€ä¸ªloaderå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¤„ç†å‡½æ•°ã€‚</p>
<p>é€šå¸¸ï¼Œä¸ºäº†ä¿è¯loaderä¾¿äºæµ‹è¯•å’Œå¤ç”¨ï¼Œæ¯ä¸ªloaderä¸ä¼šå†™çš„å¾ˆå¤æ‚ï¼Œå®ç°çš„åŠŸèƒ½ä¹Ÿæœ‰é™ã€‚æ‰€ä»¥ä¸€ä¸ªæ–‡ä»¶é€šå¸¸éœ€è¦å¤šä¸ªloaderæ¥å¤„ç†ã€‚æ¯”å¦‚å¯¹äºä¸€ä¸ªcssæ–‡ä»¶ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦ä¸¤ä¸ªloaderï¼šcss-loaderå’Œstyle-loaderã€‚å‰è€…ç”¨äºè§£æcssæ–‡ä»¶ï¼Œåè€…ç”¨äºå°†cssæ³¨å…¥åˆ°HTMLæ–‡ä»¶ä¸­ã€‚style-loaderä¼šæŠŠcssæ·»åŠ ä¸ºé¡µå†…æ ·å¼ï¼ˆå³ç›´æ¥æŠŠæ ·å¼æ”¾åœ¨headä¸­çš„<style>æ ‡ç­¾å†…ï¼‰ï¼Œå¦‚æœä½ å¸Œæœ›æ‰“åŒ…å‡ºå•ç‹¬çš„cssæ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨extract-loaderã€‚</p>
<p>å¦‚æœä½ å¸Œæœ›ä¸ºcssæ–‡ä»¶å®šä¹‰loaderï¼Œå¯ä»¥è¿™æ ·å†™ï¼ˆå½“ç„¶ä½ éœ€è¦ä½¿ç”¨npmå…ˆå®‰è£…è¿™äº›loaderï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; </span><br><span class="line">        test: /\.css$/, </span><br><span class="line">        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;] </span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„å«ä¹‰æ˜¯ï¼Œå¯¹.cssç»“å°¾çš„æ–‡ä»¶ï¼Œä½¿ç”¨â€™css-loaderâ€™å’Œâ€™style-loaderâ€™è¿™ä¸¤ä¸ªloaderã€‚webpackå°†ä¾æ¬¡ä»åå‘å‰æ‰§è¡Œæ¯ä¸ªloaderã€‚æ¯”å¦‚åœ¨è§£æåˆ°index.cssæ—¶ï¼Œå®ƒå°†ç»å†ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<p>ä½¿ç”¨nodejsçš„fsæ¨¡å—è¯»å–index.cssï¼Œå°†è¯»å–åˆ°çš„å­—ç¬¦ä¸²äº¤ç»™css-loaderã€‚<br>æ‰§è¡Œcss-loaderã€‚å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°†åŸå§‹å­—ç¬¦ä¸²è¿›è¡Œä¸€å®šçš„å¤„ç†ï¼Œè¾“å‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚<br>å°†ä¸Šä¸€æ­¥è¾“å‡ºçš„å­—ç¬¦ä¸²äº¤ç»™style-loaderï¼Œè¿›è¡Œç¬¬äºŒæ­¥å¤„ç†ï¼Œæœ€ç»ˆä»ç„¶è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚<br>ç”±webpackè§£ææœ€ç»ˆçš„å¤„ç†ç»“æœã€‚<br>å› ä¸ºwebpacké‡‡ç”¨çš„æ˜¯æµå¼å¤„ç†ï¼Œæ‰€ä»¥loaderçš„ä¹¦å†™é¡ºåºéå¸¸é‡è¦ï¼Œæœ€å…ˆéœ€è¦æ‰§è¡Œçš„loaderå¿…é¡»æ”¾åœ¨æ•°ç»„çš„æœ€åã€‚</p>
<p>åŸºäºè¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œæ‰‹å†™loaderï¼Œæ¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚æ¯”å¦‚å®˜æ–¹æ²¡æœ‰å…³äº.txtæ–‡æœ¬æ–‡ä»¶çš„loaderï¼Œæ‰€ä»¥webpackä¸èƒ½è§£ææ–‡æœ¬æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„ä¾èµ–ï¼ˆå› ä¸ºæ–‡æœ¬æ–‡ä»¶æ²¡æœ‰ä»»ä½•æ ¼å¼çº¦å®šï¼Œæ‰€ä»¥æ— æ³•å®šä¹‰ä¸€ä¸ªæ™®é€‚çš„loaderï¼‰ã€‚å¦‚æœä½ çš„é¡¹ç›®ä¸­æœ‰éœ€è¦è§£æçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶ä¸”å®ƒä»¬æœ‰ä¸¥æ ¼çš„æ ¼å¼è¦æ±‚ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥è‡ªè¡Œå®ç°ä¸€ä¸ªloaderï¼Œå®ç°å¯¹è¿™ç±»èµ„æºçš„æ‰“åŒ…ã€‚å…·ä½“å®ç°æ–¹æ³•è§webpackä¸­æ–‡ç½‘ - ç¼–å†™ä¸€ä¸ª loaderã€‚</p>
<h3 id="4-æ’ä»¶ï¼ˆpluginï¼‰"><a href="#4-æ’ä»¶ï¼ˆpluginï¼‰" class="headerlink" title="4. æ’ä»¶ï¼ˆpluginï¼‰"></a>4. æ’ä»¶ï¼ˆpluginï¼‰</h3><p>ä¸€ä¸ªæ’ä»¶å°±æ˜¯ä¸€ä¸ªå¯¹webpackåŠŸèƒ½çš„å®šåˆ¶æˆ–æ‰©å±•ã€‚</p>
<p>loaderçš„ä½¿ç”¨åœºæ™¯æ˜¯æœ‰é™çš„ï¼Œå®ƒåªèƒ½ç”¨æ¥å¸®åŠ©webpackåŠ è½½éjsæ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨webpackæ‰“åŒ…çš„ä»»ä½•ä¸€ä¸ªè¿‡ç¨‹ä¸­æ·»åŠ æŸäº›ç‰¹å®šçš„åŠŸèƒ½ï¼Œå°±éœ€è¦å€ŸåŠ©æ’ä»¶æ¥å®ç°ã€‚å®ƒæ˜¯webpackçµæ´»æ€§çš„ä¸€å¤§ä½“ç°ï¼Œä¹Ÿæ˜¯webpackçš„æ”¯æŸ±åŠŸèƒ½ï¼Œå› ä¸ºwebpackè‡ªèº«å°±æ˜¯æ„å»ºäºæ’ä»¶ç³»ç»Ÿä¹‹ä¸Šçš„ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨webpackå¼€å§‹æ„å»ºæ—¶æ‰§è¡ŒæŸäº›æ“ä½œï¼Œå°±å¯ä»¥å®šä¹‰ä¸€ä¸ªåƒä¸‹é¢çš„æ’ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const pluginName = &#x27;ConsoleLogOnBuildWebpackPlugin&#x27;;</span><br><span class="line"></span><br><span class="line">class ConsoleLogOnBuildWebpackPlugin &#123;</span><br><span class="line">    apply(compiler) &#123;</span><br><span class="line">        compiler.hooks.run.tap(pluginName, compilation =&gt; &#123;</span><br><span class="line">            console.log(&quot;webpack æ„å»ºè¿‡ç¨‹å¼€å§‹ï¼&quot;);</span><br><span class="line">            console.log(&quot;å½“å‰æ—¶é—´ï¼š&quot; + new Date());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨webpacké…ç½®æ–‡ä»¶ä¸­è¿™æ ·ä½¿ç”¨æ’ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const ConsoleLogOnBuildWebpackPlugin = require(&#x27;ConsoleLogOnBuildWebpackPlugin&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  plugins: [</span><br><span class="line">    new ConsoleLogOnBuildWebpackPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œwebpackåœ¨å¼€å§‹æ„å»ºæ—¶ï¼Œå°±ä¼šæ‰§è¡Œæˆ‘ä»¬çš„console.logæ–¹æ³•ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥å®šåˆ¶çš„åŠŸèƒ½è¿œä¸æ­¢è¿™äº›ï¼Œè¿™é‡Œåªæ˜¯å‘ä½ å±•ç¤ºæ’ä»¶çš„åŸºæœ¬ç”¨æ³•ã€‚</p>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸€ä¸ªæ’ä»¶å°±æ˜¯ä¸€ä¸ªå¸¦æœ‰applyåŸå‹æ–¹æ³•çš„ç±»ï¼ˆä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å®ƒçš„åŸå‹å¯¹è±¡ä¸Šæœ‰applyæ–¹æ³•ï¼Œä¸¤è€…æ˜¯ç­‰ä»·çš„ï¼‰ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨newå…³é”®å­—ä¼šåˆ›å»ºä¸€ä¸ªæ’ä»¶å®ä¾‹ï¼Œwebpackå°†æ‰€æœ‰æ’ä»¶å®šä¹‰çš„å›è°ƒå‡½æ•°æ³¨å†Œåˆ°å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸Šã€‚å½“webpackæ‰§è¡Œåˆ°å¯¹åº”çš„é˜¶æ®µæ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™äº›é’©å­å‡½æ•°ï¼Œå®ç°æ’ä»¶å®šåˆ¶çš„åŠŸèƒ½ã€‚</p>
<p>æ’ä»¶å¯ä»¥ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œç”¨äºæ„é€ æ’ä»¶å®ä¾‹ã€‚è€Œæ’ä»¶ä¸Šçš„åŸå‹æ–¹æ³•applyä¼šè¢«webpackæ‰€è°ƒç”¨ï¼Œwebpackä¼šå°†ç¼–è¯‘å™¨å¯¹è±¡compilerä¼ å…¥applyæ–¹æ³•ã€‚è¯¥å¯¹è±¡åœ¨æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function HelloWorldPlugin(options) &#123;</span><br><span class="line">  // ä½¿ç”¨ options è®¾ç½®æ’ä»¶å®ä¾‹</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HelloWorldPlugin.prototype.apply = function(compiler) &#123;</span><br><span class="line">  compiler.plugin(&#x27;done&#x27;, function(compilation) &#123;</span><br><span class="line">    console.log(&#x27;Hello World!&#x27;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module.exports = HelloWorldPlugin;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­ä¼ å…¥çš„é…ç½®å¯¹è±¡optionsä¼šè¢«æ„é€ å‡½æ•°æ¥æ”¶ï¼Œç”¨äºæ„é€ æ’ä»¶å®ä¾‹ï¼Œåœ¨applyæ–¹æ³•ä¸­å¯ä»¥é€šè¿‡thisè·å¾—ã€‚</p>
<p>ç„¶åæˆ‘ä»¬åœ¨æ’ä»¶çš„åŸå‹ä¸Šå®šä¹‰äº†ä¸€ä¸ªapplyæ–¹æ³•ï¼Œwebpackè§£æé…ç½®æ–‡ä»¶æ—¶ä¼šæ‰§è¡Œå®ƒï¼Œå¹¶ä¼ å…¥webpackçš„ç¼–è¯‘å™¨å¯¹è±¡ã€‚æˆ‘ä»¬é€šè¿‡è¯­å¥compiler.plugin(â€˜doneâ€™,function(compilation){â€¦}ä¸ºwebpackçš„ç¼–è¯‘å™¨å¯¹è±¡æ³¨å†Œäº†ä¸€ä¸ªdoneé˜¶æ®µï¼ˆå³æ‰“åŒ…å®Œæˆï¼‰çš„å›è°ƒå‡½æ•°ã€‚å½“webpackæ‰“åŒ…å®Œæˆæ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¼ å…¥å½“å‰webpackçš„ç¼–è¯‘å™¨çŠ¶æ€å¯¹è±¡ï¼šcompilationã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©compilerå’Œcompilationè¿™ä¸¤ä¸ªå¯¹è±¡ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªé˜¶æ®µæ‰§è¡Œæˆ‘ä»¬æƒ³æ‰§è¡Œçš„æ“ä½œã€‚å‰è€…æ˜¯ç¼–è¯‘å™¨å¯¹è±¡ï¼Œåè€…æ˜¯å½“å‰çŠ¶æ€å¯¹è±¡ã€‚å…·ä½“ç¼–å†™æ’ä»¶çš„æ–¹æ³•è¯·å‚è€ƒwebpackä¸­æ–‡ç½‘ - ç¼–å†™ä¸€ä¸ªæ’ä»¶ã€‚</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/11/14/webpack/webpack%E6%A6%82%E5%BF%B5/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue-ç»„ä»¶åŒ–">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/11/11/Vue/vue-%E7%BB%84%E4%BB%B6%E5%8C%96/">vue-ç»„ä»¶åŒ–</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-11-11
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h2><blockquote>
<p>vueç»„ä»¶ç³»ç»Ÿæä¾›äº†ä¸€ç§æŠ½è±¡ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‹¬ç«‹å¯å¤ç”¨çš„ç»„ä»¶æ¥æ„å»ºå¤§å‹åº”ç”¨ï¼Œä»»æ„ç±»å‹çš„åº”ç”¨ç•Œ é¢éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘ã€‚ç»„ä»¶åŒ–èƒ½æé«˜å¼€å‘æ•ˆç‡ï¼Œæ–¹ä¾¿é‡å¤ä½¿ç”¨ï¼Œç®€åŒ–è°ƒè¯•æ­¥éª¤ï¼Œæå‡é¡¹ç›®å¯ç»´æŠ¤ æ€§ï¼Œä¾¿äºå¤šäººååŒå¼€å‘ã€‚</p>
</blockquote>
<p><img src="https://blog.poetries.top/img/static/images/20210313133919.png" alt="img"></p>
<h2 id="ç»„ä»¶é€šä¿¡å¸¸ç”¨æ–¹å¼"><a href="#ç»„ä»¶é€šä¿¡å¸¸ç”¨æ–¹å¼" class="headerlink" title="ç»„ä»¶é€šä¿¡å¸¸ç”¨æ–¹å¼"></a>ç»„ä»¶é€šä¿¡å¸¸ç”¨æ–¹å¼</h2><h3 id="1-props"><a href="#1-props" class="headerlink" title="1. props"></a><strong>1. props</strong></h3><blockquote>
<p>çˆ¶ç»™å­ä¼ å€¼</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// child</span><br><span class="line">props: &#123; msg: String &#125;</span><br><span class="line">// parent</span><br><span class="line">&lt;HelloWorld msg=&quot;Welcome to Your Vue.js App&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-è‡ªå®šä¹‰äº‹ä»¶"><a href="#2-è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="2. è‡ªå®šä¹‰äº‹ä»¶"></a>2. è‡ªå®šä¹‰äº‹ä»¶</h3><blockquote>
<p>å­ç»™çˆ¶ä¼ å€¼</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// child this.$emit(&#x27;add&#x27;, good)</span><br><span class="line">// parent</span><br><span class="line">&lt;Cart @add=&quot;cartAdd($event)&quot;&gt;&lt;/Cart&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-äº‹ä»¶æ€»çº¿"><a href="#3-äº‹ä»¶æ€»çº¿" class="headerlink" title="3. äº‹ä»¶æ€»çº¿"></a>3. äº‹ä»¶æ€»çº¿</h3><blockquote>
<p>ä»»æ„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´ä¼ å€¼å¸¸ç”¨äº‹ä»¶æ€»çº¿ æˆ– vuexçš„æ–¹å¼ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  // Bus:äº‹ä»¶æ´¾å‘ã€ç›‘å¬å’Œå›è°ƒç®¡ç† class Bus &#123;</span><br><span class="line">constructor()&#123; this.callbacks = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  $on(name, fn)&#123;</span><br><span class="line">this.callbacks[name] = this.callbacks[name] || []</span><br><span class="line">this.callbacks[name].push(fn) &#125;</span><br><span class="line">$emit(name, args)&#123; if(this.callbacks[name])&#123;</span><br><span class="line">this.callbacks[name].forEach(cb =&gt; cb(args)) &#125;</span><br><span class="line">&#125; &#125;</span><br><span class="line">// main.js</span><br><span class="line">Vue.prototype.$bus = new Bus()</span><br><span class="line">// child1</span><br><span class="line">this.$bus.$on(&#x27;foo&#x27;, handle) // child2 this.$bus.$emit(&#x27;foo&#x27;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®è·µä¸­é€šå¸¸ç”¨Vueä»£æ›¿Busï¼Œå› ä¸ºVueå·²ç»å®ç°äº†ç›¸åº”æ¥å£</p>
</blockquote>
<h3 id="4-vuex"><a href="#4-vuex" class="headerlink" title="4. vuex"></a><strong>4. vuex</strong></h3><blockquote>
<p>åˆ›å»ºå”¯ä¸€çš„å…¨å±€æ•°æ®ç®¡ç†è€…storeï¼Œé€šè¿‡å®ƒç®¡ç†æ•°æ®å¹¶é€šçŸ¥ç»„ä»¶çŠ¶æ€å˜æ›´ã€‚</p>
</blockquote>
<h3 id="5-parent-x2F-root"><a href="#5-parent-x2F-root" class="headerlink" title="5. $parent&#x2F;$root"></a>5. <strong>$parent&#x2F;$root</strong></h3><blockquote>
<p>å…„å¼Ÿç»„ä»¶ä¹‹é—´é€šä¿¡å¯é€šè¿‡å…±åŒç¥–è¾ˆæ­æ¡¥ï¼Œ<code>$parent</code>æˆ–<code>$root</code>ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// brother1</span><br><span class="line">this.$parent.$on(&#x27;foo&#x27;, handle)</span><br><span class="line">// brother2 </span><br><span class="line">this.$parent.$emit(&#x27;foo&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="6-children"><a href="#6-children" class="headerlink" title="6. $children"></a>6. <strong>$children</strong></h3><blockquote>
<p>çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡<code>$children</code>è®¿é—®å­ç»„ä»¶å®ç°çˆ¶å­é€šä¿¡ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// parent </span><br><span class="line">this.$children[0].xx = &#x27;xxx&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="7-attrs-x2F-listeners"><a href="#7-attrs-x2F-listeners" class="headerlink" title="7. $attrs&#x2F;$listeners"></a>7. <strong>$attrs&#x2F;$listeners</strong></h3><blockquote>
<p>åŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸ä½œä¸º <strong>prop</strong> è¢«è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š ( class å’Œ style é™¤å¤–)ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰ å£°æ˜ä»»ä½• prop æ—¶ï¼Œè¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®š ( class å’Œ style é™¤å¤–)ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ <code>v- bind=&quot;$attrs&quot;</code> ä¼ å…¥å†…éƒ¨ç»„ä»¶â€”â€”åœ¨åˆ›å»ºé«˜çº§åˆ«çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// child:å¹¶æœªåœ¨propsä¸­å£°æ˜foo </span><br><span class="line">&lt;p&gt;&#123;&#123;$attrs.foo&#125;&#125;&lt;/p&gt;</span><br><span class="line">// parent</span><br><span class="line">&lt;HelloWorld foo=&quot;foo&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="8-refs"><a href="#8-refs" class="headerlink" title="8. refs"></a>8. <strong>refs</strong></h3><blockquote>
<p>è·å–å­èŠ‚ç‚¹å¼•ç”¨</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// parent</span><br><span class="line">&lt;HelloWorld ref=&quot;hw&quot;/&gt;</span><br><span class="line">mounted() &#123; </span><br><span class="line">  this.$refs.hw.xx = &#x27;xxx&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-provide-x2F-inject"><a href="#9-provide-x2F-inject" class="headerlink" title="9. provide&#x2F;inject"></a>9. <strong>provide&#x2F;inject</strong></h3><blockquote>
<p>èƒ½å¤Ÿå®ç°ç¥–å…ˆå’Œåä»£ä¹‹é—´ä¼ å€¼</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// ancestor</span><br><span class="line">provide() &#123;</span><br><span class="line">  return &#123;foo: &#x27;foo&#x27;&#125;</span><br><span class="line">&#125;</span><br><span class="line">// descendant</span><br><span class="line">inject: [&#x27;foo&#x27;]</span><br></pre></td></tr></table></figure>

<p>å®ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">// index.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;ç»„ä»¶é€šä¿¡&lt;/h2&gt;</span><br><span class="line">    &lt;!-- props, è‡ªå®šä¹‰äº‹ä»¶ --&gt;</span><br><span class="line">    &lt;Child1 msg=&quot;some msg from parent&quot; @some-event=&quot;onSomeEvent&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">    &lt;!-- äº‹ä»¶æ€»çº¿ --&gt;</span><br><span class="line">    &lt;Child2 msg=&quot;other msg&quot;&gt;&lt;/Child2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Child1 from &#x27;@/components/communication/Child1.vue&#x27;</span><br><span class="line">  import Child2 from &#x27;@/components/communication/Child2.vue&#x27;</span><br><span class="line">  </span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">      Child1, Child2,</span><br><span class="line">      // Child3: () =&gt; import(&#x27;./Child3.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      onSomeEvent(msg) &#123;</span><br><span class="line">        console.log(&#x27;Communition:&#x27;, msg);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted () &#123;</span><br><span class="line">      // $childrenæŒæœ‰æ‰€æœ‰è‡ªå®šä¹‰ç»„ä»¶</span><br><span class="line">      // å®ƒä¸ä¿è¯é¡ºåº</span><br><span class="line">      console.log(this.$children);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">// child1.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div @click=&quot;$emit(&#x27;some-event&#x27;, &#x27;msg from child1&#x27;)&quot;&gt;</span><br><span class="line">    &lt;h3&gt;child1&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">      msg: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#x27;&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted () &#123;</span><br><span class="line">      // this.$bus.$on(&#x27;event-from-child2&#x27;, msg =&gt; &#123;</span><br><span class="line">      //   console.log(&#x27;Child1:&#x27;, msg);</span><br><span class="line">      // &#125;);</span><br><span class="line">      this.$parent.$on(&#x27;event-from-child2&#x27;, msg =&gt; &#123;</span><br><span class="line">        console.log(&#x27;Child1:&#x27;, msg);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">// child2.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- å±•å¼€$attrså¯¹è±¡ --&gt;</span><br><span class="line">    &lt;h3 v-bind=&quot;$attrs&quot;&gt;child2&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&quot;sendToChild1&quot;&gt;ç»™child1å‘é€æ¶ˆæ¯&lt;/button&gt;</span><br><span class="line">    &lt;!-- $attrs --&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123;$attrs.msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!-- inject --&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123;foo&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    inheritAttrs: false,</span><br><span class="line">    inject: [&#x27;foo&#x27;],</span><br><span class="line">    methods: &#123;</span><br><span class="line">      sendToChild1() &#123;</span><br><span class="line">        // åˆ©ç”¨äº‹ä»¶æ€»çº¿å‘é€äº‹ä»¶</span><br><span class="line">        // this.$bus.$emit(&#x27;event-from-child2&#x27;, &#x27;some msg from child2&#x27;)</span><br><span class="line">        this.$parent.$emit(&#x27;event-from-child2&#x27;, &#x27;some msg from child2&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="æ’æ§½"><a href="#æ’æ§½" class="headerlink" title="æ’æ§½"></a>æ’æ§½</h2><blockquote>
<p>æ’æ§½è¯­æ³•æ˜¯Vue å®ç°çš„å†…å®¹åˆ†å‘ APIï¼Œç”¨äºå¤åˆç»„ä»¶å¼€å‘ã€‚è¯¥æŠ€æœ¯åœ¨é€šç”¨ç»„ä»¶åº“å¼€å‘ä¸­æœ‰å¤§é‡åº”ç”¨</p>
</blockquote>
<h3 id="1-åŒ¿åæ’æ§½"><a href="#1-åŒ¿åæ’æ§½" class="headerlink" title="1. åŒ¿åæ’æ§½"></a>1. åŒ¿åæ’æ§½</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// comp1</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">// parent</span><br><span class="line">&lt;comp&gt;hello&lt;/comp&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-å…·åæ’æ§½"><a href="#2-å…·åæ’æ§½" class="headerlink" title="2. å…·åæ’æ§½"></a>2. å…·åæ’æ§½</h3><blockquote>
<p>å°†å†…å®¹åˆ†å‘åˆ°å­ç»„ä»¶æŒ‡å®šä½ç½®</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// comp2</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">&lt;slot name=&quot;content&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">// parent</span><br><span class="line">&lt;Comp2&gt;</span><br><span class="line">&lt;!-- é»˜è®¤æ’æ§½ç”¨defaultåšå‚æ•° --&gt;</span><br><span class="line">&lt;template v-slot:default&gt;å…·åæ’æ§½&lt;/template&gt; &lt;!-- å…·åæ’æ§½ç”¨æ’æ§½ååšå‚æ•° --&gt;</span><br><span class="line">&lt;template v-slot:content&gt;å†…å®¹...&lt;/template&gt;</span><br><span class="line">&lt;/Comp2&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-ä½œç”¨åŸŸæ’æ§½"><a href="#3-ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="3. ä½œç”¨åŸŸæ’æ§½"></a>3. ä½œç”¨åŸŸæ’æ§½</h3><blockquote>
<p>åˆ†å‘å†…å®¹è¦ç”¨åˆ°å­ç»„ä»¶ä¸­çš„æ•°æ®</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// comp3</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;slot :foo=&quot;foo&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">// parent</span><br><span class="line">&lt;Comp3&gt;</span><br><span class="line">&lt;!-- æŠŠv-slotçš„å€¼æŒ‡å®šä¸ºä½œç”¨åŸŸä¸Šä¸‹æ–‡å¯¹è±¡ --&gt; &lt;template v-slot:default=&quot;slotProps&quot;&gt; æ¥è‡ªå­ç»„ä»¶æ•°æ®:&#123;&#123;slotProps.foo&#125;&#125; &lt;/template&gt;</span><br><span class="line">&lt;/Comp3&gt;</span><br></pre></td></tr></table></figure>

<p>èŒƒä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">// å­ç»„ä»¶ Layout.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;header&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;body&quot;&gt;</span><br><span class="line">      &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;footer&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;footer&quot; :fc=&quot;footerContent&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        remark: [</span><br><span class="line">          &#x27;å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Š&#x27;,</span><br><span class="line">          &#x27;å­¦ä¹ æ°¸è¿œä¸æ™š&#x27;,</span><br><span class="line">          &#x27;å­¦ä¹ çŸ¥è¯†è¦å–„äºæ€è€ƒ,æ€è€ƒ,å†æ€è€ƒ&#x27;,</span><br><span class="line">          &#x27;å­¦ä¹ çš„æ•Œäººæ˜¯è‡ªå·±çš„æ»¡è¶³,è¦è®¤çœŸå­¦ä¹ ä¸€ç‚¹ä¸œè¥¿,å¿…é¡»ä»ä¸è‡ªæ»¡å¼€å§‹&#x27;,</span><br><span class="line">          &#x27;æ„æˆæˆ‘ä»¬å­¦ä¹ æœ€å¤§éšœç¢çš„æ˜¯å·²çŸ¥çš„ä¸œè¥¿,è€Œä¸æ˜¯æœªçŸ¥çš„ä¸œè¥¿&#x27;,</span><br><span class="line">          &#x27;åœ¨ä»Šå¤©å’Œæ˜å¤©ä¹‹é—´,æœ‰ä¸€æ®µå¾ˆé•¿çš„æ—¶é—´;è¶ä½ è¿˜æœ‰ç²¾ç¥çš„æ—¶å€™,å­¦ä¹ è¿…é€ŸåŠäº‹&#x27;,</span><br><span class="line">          &#x27;ä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆç„‰ï¼›æ‹©å…¶å–„è€…è€Œä»ä¹‹ï¼Œå…¶ä¸å–„è€…è€Œæ”¹ä¹‹&#x27;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      footerContent() &#123;</span><br><span class="line">        return this.remark[new Date().getDay() - 1] </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.header &#123;</span><br><span class="line">  background-color: rgb(252, 175, 175);</span><br><span class="line">&#125;</span><br><span class="line">.body &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  background-color: rgb(144, 250, 134);</span><br><span class="line">  min-height: 100px;</span><br><span class="line">  align-items: center;</span><br><span class="line">  justify-content: center;</span><br><span class="line">&#125;</span><br><span class="line">.footer &#123;</span><br><span class="line">  background-color: rgb(114, 116, 255);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">//çˆ¶ç»„ä»¶ index.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;æ’æ§½&lt;/h2&gt;</span><br><span class="line">    &lt;!-- æ’æ§½ --&gt;</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">      &lt;!-- å…·åæ’æ§½ --&gt;</span><br><span class="line">      &lt;template v-slot:header&gt;å…¨æ ˆå·¥ç¨‹å¸ˆ&lt;/template&gt;</span><br><span class="line">      &lt;!-- åŒ¿åæ’æ§½ --&gt;</span><br><span class="line">      &lt;template&gt;content...&lt;/template&gt;</span><br><span class="line">      &lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;</span><br><span class="line">      &lt;template v-slot:footer=&quot;&#123;fc&#125;&quot;&gt;&#123;&#123;fc&#125;&#125;&lt;/template&gt;</span><br><span class="line">    &lt;/Layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Layout from &#x27;@/components/slots/Layout.vue&#x27;</span><br><span class="line">  </span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">      Layout</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ç»„ä»¶åŒ–å®æˆ˜"><a href="#ç»„ä»¶åŒ–å®æˆ˜" class="headerlink" title="ç»„ä»¶åŒ–å®æˆ˜"></a>ç»„ä»¶åŒ–å®æˆ˜</h2><h3 id="é€šç”¨è¡¨å•ç»„ä»¶"><a href="#é€šç”¨è¡¨å•ç»„ä»¶" class="headerlink" title="é€šç”¨è¡¨å•ç»„ä»¶"></a>é€šç”¨è¡¨å•ç»„ä»¶</h3><blockquote>
<p>æ”¶é›†æ•°æ®ã€æ ¡éªŒæ•°æ®å¹¶æäº¤ã€‚</p>
</blockquote>
<ul>
<li>å®ç°KForm æŒ‡å®šæ•°æ®ã€æ ¡éªŒè§„åˆ™</li>
<li>KformItem<ul>
<li>labelæ ‡ç­¾æ·»åŠ </li>
<li>æ‰§è¡Œæ ¡éªŒ</li>
<li>æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</li>
</ul>
</li>
<li>KInput<ul>
<li>ç»´æŠ¤æ•°æ®</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-form :model=&quot;userInfo&quot; :rules=&quot;rules&quot; ref=&quot;loginForm&quot;&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;ç”¨æˆ·å&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;userInfo.name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;å¯†ç &quot; prop=&quot;password&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;userInfo.password&quot; type=&quot;password&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item&gt;</span><br><span class="line">      &lt;el-button @click=&quot;login&quot;&gt;ç™»å½•&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      userInfo: &#123;</span><br><span class="line">        username: &quot;&quot;,</span><br><span class="line">        password: &quot;&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      rules: &#123;</span><br><span class="line">        username: [&#123; required: true, message: &quot;è¯·è¾“å…¥ç”¨æˆ·åç§°&quot; &#125;],</span><br><span class="line">        password: [&#123; required: true, message: &quot;è¯·è¾“å…¥å¯†ç &quot; &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    login() &#123;</span><br><span class="line">      this.$refs[&quot;loginForm&quot;].validate(valid =&gt; &#123;</span><br><span class="line">        if (valid) &#123;</span><br><span class="line">          alert(&quot;submit&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          console.log(&quot;error submit!&quot;);</span><br><span class="line">          return false;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>1.</strong> KInput</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºcomponents/form/KInput.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- ç®¡ç†æ•°æ®ï¼šå®ç°åŒç»‘ --&gt;</span><br><span class="line">    &lt;!-- :value, @input --&gt;</span><br><span class="line">    &lt;input :type=&quot;type&quot; :value=&quot;value&quot; @input=&quot;onInput&quot;</span><br><span class="line">      v-bind=&quot;$attrs&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    inheritAttrs: false , // å…³é—­ç‰¹æ€§ç»§æ‰¿</span><br><span class="line">    props: &#123;</span><br><span class="line">      value: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#x27;&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      type: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#x27;text&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      onInput(e) &#123;</span><br><span class="line">        this.$emit(&#x27;input&#x27;, e.target.value)</span><br><span class="line"></span><br><span class="line">        // å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™å°±æ˜¯éœ€è¦æ ¡éªŒçš„æ—¶å€™</span><br><span class="line">        this.$parent.$emit(&#x27;validate&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>ä½¿ç”¨<strong>KInput</strong></li>
</ol>
<p>åˆ›å»ºcomponents&#x2F;form&#x2F;index.vueï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">&lt;h3&gt;KFormè¡¨å•&lt;/h3&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;k-input v-model=&quot;model.username&quot;&gt;&lt;/k-input&gt;</span><br><span class="line">&lt;k-input type=&quot;password&quot; v-model=&quot;model.password&quot;&gt;&lt;/k-input&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">  KInput</span><br><span class="line">&#125;, </span><br><span class="line">  data() &#123;</span><br><span class="line">   return &#123;</span><br><span class="line">      model: &#123; username: &quot;tom&quot;, password: &quot;&quot; &#125;,</span><br><span class="line">    &#125;; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>å®ç°<strong>KFormItem</strong></li>
</ol>
<p>åˆ›å»ºcomponents&#x2F;form&#x2F;KFormItem.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- labelæ ‡ç­¾ --&gt;</span><br><span class="line">    &lt;label v-if=&quot;label&quot;&gt;&#123;&#123;label&#125;&#125;&lt;/label&gt;</span><br><span class="line">    &lt;!-- å®¹å™¨ï¼Œæ”¾æ’æ§½ --&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;!-- é”™è¯¯ä¿¡æ¯å±•ç¤º --&gt;</span><br><span class="line">    &lt;p v-if=&quot;error&quot; class=&quot;error&quot;&gt;&#123;&#123;error&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Schema from &#x27;async-validator&#x27;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    inject: [&#x27;form&#x27;],</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        error: &#x27;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line">      label: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#x27;&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      prop: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#x27;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted () &#123;</span><br><span class="line">      // ç›‘å¬æ ¡éªŒäº‹ä»¶</span><br><span class="line">      this.$on(&#x27;validate&#x27;, () =&gt; &#123;</span><br><span class="line">        this.validate()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      validate() &#123;</span><br><span class="line">        // æ‰§è¡Œæ ¡éªŒ</span><br><span class="line">        // 1.è·å–å€¼å’Œæ ¡éªŒè§„åˆ™</span><br><span class="line">        const rules = this.form.rules[this.prop]</span><br><span class="line">        const value = this.form.model[this.prop]</span><br><span class="line"></span><br><span class="line">        // 2.æ‰§è¡Œæ ¡éªŒï¼šä½¿ç”¨å®˜æ–¹ä¹Ÿä½¿ç”¨çš„async-validator</span><br><span class="line">        // åˆ›å»ºæè¿°å¯¹è±¡</span><br><span class="line">        const descriptor = &#123;[this.prop]:rules&#125;</span><br><span class="line">        // åˆ›å»ºæ ¡éªŒå™¨</span><br><span class="line">        const validator = new Schema(descriptor)</span><br><span class="line">        // æ‰§è¡Œæ ¡éªŒ</span><br><span class="line">        return validator.validate(&#123;[this.prop]:value&#125;, errors =&gt; &#123;</span><br><span class="line">          // å¦‚æœerrorså­˜åœ¨ï¼Œåˆ™è¯´æ˜æ ¡éªŒå¤±è´¥</span><br><span class="line">          if (errors) &#123;</span><br><span class="line">            this.error = errors[0].message</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.error = &#x27;&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.error&#123;</span><br><span class="line">  color: red</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>ä½¿ç”¨<strong>KFormItem</strong></li>
</ol>
<p>components&#x2F;form&#x2F;index.vueï¼Œæ·»åŠ åŸºç¡€ä»£ç :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">&lt;h3&gt;KFormè¡¨å•&lt;/h3&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;k-form-item label=&quot;ç”¨æˆ·å&quot; prop=&quot;username&quot;&gt;</span><br><span class="line">&lt;k-input v-model=&quot;model.username&quot;&gt;&lt;/k-input&gt; &lt;/k-form-item&gt;</span><br><span class="line">&lt;k-form-item label=&quot;ç¡®è®¤å¯†ç &quot; prop=&quot;password&quot;&gt;</span><br><span class="line">&lt;k-input type=&quot;password&quot; v-model=&quot;model.password&quot;&gt;&lt;/k-input&gt;</span><br><span class="line">&lt;/k-form-item&gt; &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>å®ç°<strong>KForm</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- å®¹å™¨ï¼šå­˜æ”¾æ‰€æœ‰è¡¨å•é¡¹ --&gt;</span><br><span class="line">    &lt;!-- å­˜å‚¨å€¼è½½ä½“ï¼šä¿å­˜å¤§å®¶æ•°æ®å’Œæ ¡éªŒè§„åˆ™ --&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// æˆ‘ä»¬å¹³æ—¶å†™çš„ç»„ä»¶æ˜¯ä¸€ä¸ªç»„ä»¶é…ç½®å¯¹è±¡</span><br><span class="line">export default &#123;</span><br><span class="line">  provide() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // ç›´æ¥æŠŠå½“å‰ç»„ä»¶å®ä¾‹ä¼ é€’ä¸‹å»</span><br><span class="line">      // ä¼ é€’ä¸‹å»çš„å¯¹è±¡æ˜¯å“åº”å¼çš„åˆ™è¿˜å¯ä»¥å“åº”å¼</span><br><span class="line">      form: this</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    // æ•°æ®æ¨¡å‹</span><br><span class="line">    model: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      required: true</span><br><span class="line">    &#125;,</span><br><span class="line">    rules: Object</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    validate(cb) &#123;</span><br><span class="line">      // éå†è‚šå­é‡Œé¢çš„æ‰€æœ‰FormItemï¼Œæ‰§è¡Œä»–ä»¬çš„validateæ–¹æ³•</span><br><span class="line">      // å…¨éƒ¨é€šè¿‡æ‰ç®—é€šè¿‡</span><br><span class="line">      // tasksæ˜¯æ ¡éªŒç»“æœçš„Promiseç»„æˆçš„æ•°ç»„</span><br><span class="line">      const tasks = this.$children</span><br><span class="line">        .filter(item =&gt; item.prop)</span><br><span class="line">        .map(item =&gt; item.validate());</span><br><span class="line">      // ç»Ÿä¸€åˆ¤æ–­</span><br><span class="line">      Promise.all(tasks)</span><br><span class="line">        .then(() =&gt; cb(true))</span><br><span class="line">        .catch(() =&gt; cb(false));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>ä½¿ç”¨<strong>KForm</strong></li>
</ol>
<p>components&#x2F;form&#x2F;index.vueï¼Œæ·»åŠ åŸºç¡€ä»£ç :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt; template &gt; &lt;div &gt; &lt;h3 &gt; KFormè¡¨å• &lt; /h3&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;k-form :model=&quot;model&quot; :rules=&quot;rules&quot; ref=&quot;loginForm&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/k - form &gt; &lt;/div&gt;</span><br><span class="line">&lt;/template &gt; &lt;script &gt; import KForm from &quot;./KForm&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">        components:</span><br><span class="line">        &#123;</span><br><span class="line">            KForm,</span><br><span class="line">        &#125;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                rules: &#123;</span><br><span class="line">                    username: [&#123;</span><br><span class="line">                        required: true,</span><br><span class="line">                        message: &quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span><br><span class="line">                    &#125;],</span><br><span class="line">                    password: [&#123;</span><br><span class="line">                        required: true,</span><br><span class="line">                        message: &quot;è¯·è¾“å…¥å¯†ç &quot;</span><br><span class="line">                    &#125;]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            submitForm() &#123;</span><br><span class="line">                this.$refs[&#x27;loginForm&#x27;].validate(valid = &gt;&#123;</span><br><span class="line">                    if (valid) &#123;</span><br><span class="line">                        alert(&quot;è¯·æ±‚ç™»å½•!&quot;);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        alert(&quot;æ ¡éªŒå¤±è´¥!&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;; &lt; /script&gt;/</span><br></pre></td></tr></table></figure>

<ol>
<li>æ•°æ®æ ¡éªŒ</li>
</ol>
<p>Inputé€šçŸ¥æ ¡éªŒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onInput(e) &#123; // ...</span><br><span class="line">    // $parentæŒ‡FormItem</span><br><span class="line">    this.$parent.$emit(&#x27;validate&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>FormItemç›‘å¬æ ¡éªŒé€šçŸ¥ï¼Œè·å–è§„åˆ™å¹¶æ‰§è¡Œæ ¡éªŒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">inject: [&#x27;form&#x27;],</span><br><span class="line">// æ³¨å…¥ mounted()&#123;// ç›‘å¬æ ¡éªŒäº‹ä»¶</span><br><span class="line">this.$on(&#x27;validate&#x27;, () = &gt;&#123;</span><br><span class="line">    this.validate()</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    validate() &#123;</span><br><span class="line">        // è·å–å¯¹åº”FormItemæ ¡éªŒè§„åˆ™ console.log(this.form.rules[this.prop]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">import Schema from &quot;async-validator&quot;;</span><br><span class="line"></span><br><span class="line">validate() &#123;</span><br><span class="line">    // è·å–å¯¹åº”FormItemæ ¡éªŒè§„åˆ™</span><br><span class="line">    const rules = this.form.rules[this.prop];</span><br><span class="line">    // è·å–æ ¡éªŒå€¼</span><br><span class="line">    const value = this.form.model[this.prop];</span><br><span class="line">    // æ ¡éªŒ</span><br><span class="line">    const schema = new Schema(descriptor);</span><br><span class="line">    // è¿”å›Promiseï¼Œæ²¡æœ‰è§¦å‘catchå°±è¯´æ˜éªŒè¯é€šè¿‡</span><br><span class="line">    return schema.validate(&#123; [this.prop] : value</span><br><span class="line">    &#125;,</span><br><span class="line">    errors = &gt;&#123;</span><br><span class="line">        if (errors) &#123;</span><br><span class="line">            // å°†é”™è¯¯ä¿¡æ¯æ˜¾ç¤º</span><br><span class="line">            this.error = errors[0].message;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // æ ¡éªŒé€šè¿‡ this.error = &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¡¨å•å…¨å±€éªŒè¯ï¼Œä¸º<code>Form</code>æä¾›<code>validate</code>æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">validate(cb) &#123;</span><br><span class="line">    // è°ƒç”¨æ‰€æœ‰å«æœ‰propå±æ€§çš„å­ç»„ä»¶çš„validateæ–¹æ³•å¹¶å¾—åˆ°Promiseæ•°ç»„ const tasks = this.$children</span><br><span class="line">    .filter(item = &gt;item.prop).map(item = &gt;item.validate());</span><br><span class="line">    // æ‰€æœ‰ä»»åŠ¡å¿…é¡»å…¨éƒ¨æˆåŠŸæ‰ç®—æ ¡éªŒé€šè¿‡ï¼Œä»»ä¸€å¤±è´¥åˆ™æ ¡éªŒå¤±è´¥</span><br><span class="line">    Promise.all(tasks).then(() = &gt;cb(true)).catch(() = &gt;cb(false))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°å¼¹çª—ç»„ä»¶"><a href="#å®ç°å¼¹çª—ç»„ä»¶" class="headerlink" title="å®ç°å¼¹çª—ç»„ä»¶"></a>å®ç°å¼¹çª—ç»„ä»¶</h3><blockquote>
<p>å¼¹çª—è¿™ç±»ç»„ä»¶çš„ç‰¹ç‚¹æ˜¯å®ƒä»¬åœ¨å½“å‰<strong>vue</strong>å®ä¾‹ä¹‹å¤–ç‹¬ç«‹å­˜åœ¨ï¼Œé€šå¸¸æŒ‚è½½äºbody;å®ƒä»¬æ˜¯é€šè¿‡JSåŠ¨æ€åˆ›å»ºçš„ï¼Œä¸éœ€è¦åœ¨ä»»ä½•ç»„ä»¶ä¸­å£°æ˜ã€‚å¸¸â»…ä½¿ç”¨å§¿åŠ¿</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this.$create(Notice, &#123;</span><br><span class="line">    title: &#x27;å–Šä½ æ¥æ¬ç –&#x27;,</span><br><span class="line">    message: &#x27;æç¤ºä¿¡æ¯&#x27;,</span><br><span class="line">    duration: 1000</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<p>createå‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &quot;vue&quot;;</span><br><span class="line">// åˆ›å»ºå‡½æ•°æ¥æ”¶è¦åˆ›å»ºç»„ä»¶å®šä¹‰</span><br><span class="line">function create(Component, props) &#123;</span><br><span class="line">    // åˆ›å»ºä¸€ä¸ªVueæ–°å®ä¾‹ const vm = new Vue(&#123;</span><br><span class="line">    render(h) &#123;</span><br><span class="line">        // renderå‡½æ•°å°†ä¼ å…¥ç»„ä»¶é…ç½®å¯¹è±¡è½¬æ¢ä¸ºè™šæ‹Ÿdom console.log(h(Component, &#123; props &#125;)); return h(Component, &#123; props &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).$mount(); //æ‰§è¡ŒæŒ‚è½½å‡½æ•°ï¼Œä½†æœªæŒ‡å®šæŒ‚è½½ç›®æ ‡ï¼Œè¡¨ç¤ºåªæ‰§è¡Œåˆå§‹åŒ–å·¥ä½œ</span><br><span class="line"></span><br><span class="line">  // å°†ç”Ÿæˆdomå…ƒç´ è¿½åŠ è‡³</span><br><span class="line">  body document.body.appendChild(vm.$el);</span><br><span class="line"></span><br><span class="line">  // ç»™ç»„ä»¶å®ä¾‹æ·»åŠ é”€æ¯æ–¹æ³•</span><br><span class="line">  const comp = vm.$children[0];</span><br><span class="line">  comp.remove = () = &gt;&#123;</span><br><span class="line">      document.body.removeChild(vm.$el);</span><br><span class="line">      vm.$destroy();</span><br><span class="line">  &#125;;</span><br><span class="line">  return comp;</span><br><span class="line">&#125;</span><br><span class="line">// æš´éœ²è°ƒç”¨æ¥å£</span><br><span class="line">export default create</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦ä¸€ç§åˆ›å»ºç»„ä»¶å®ä¾‹çš„æ–¹å¼: <code>Vue.extend(Component)</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const Ctor = Vue.extend(Component) </span><br><span class="line">const comp = new Ctor(&#123;</span><br><span class="line">    propsData: props</span><br><span class="line">&#125;) </span><br><span class="line">comp.$mount();</span><br><span class="line"></span><br><span class="line">document.body.appendChild(comp.$el) </span><br><span class="line"></span><br><span class="line">comp.remove = () = &gt;&#123;</span><br><span class="line">    // ç§»é™¤dom document.body.removeChild(comp.$el) // é”€æ¯ç»„ä»¶</span><br><span class="line">    comp.$destroy();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é€šçŸ¥ç»„ä»¶"><a href="#é€šçŸ¥ç»„ä»¶" class="headerlink" title="é€šçŸ¥ç»„ä»¶"></a>é€šçŸ¥ç»„ä»¶</h3><p>å»ºé€šçŸ¥ç»„ä»¶ï¼ŒNotice.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot; v-if=&quot;isShow&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123;title&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;p class=&quot;box-content&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    title: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    message: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    duration: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 2000</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: false</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    show() &#123;</span><br><span class="line">      this.isShow = true;</span><br><span class="line">      setTimeout(this.hide, this.duration);</span><br><span class="line">    &#125;,</span><br><span class="line">    hide() &#123;</span><br><span class="line">      this.isShow = false;</span><br><span class="line">      this.remove();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.box &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  width: 100%;</span><br><span class="line">  top: 16px;</span><br><span class="line">  left: 0;</span><br><span class="line">  text-align: center;</span><br><span class="line">  pointer-events: none;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  border: grey 3px solid;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">.box-content &#123;</span><br><span class="line">  width: 200px;</span><br><span class="line">  margin: 10px auto;</span><br><span class="line">  font-size: 14px;  </span><br><span class="line">  padding: 8px 16px;</span><br><span class="line">  background: #fff;</span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  margin-bottom: 8px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨æ’ä»¶è¿›ä¸€æ­¥å°è£…ä¾¿äºä½¿ç”¨ï¼Œ<code>create.js</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import Notice from &#x27;@/components/Notice.vue&#x27; //...</span><br><span class="line">export default &#123;</span><br><span class="line">  install(Vue) &#123;</span><br><span class="line">      Vue.prototype.$notice = function(options) &#123;</span><br><span class="line">          return create(Notice, options)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/11/11/Vue/vue-%E7%BB%84%E4%BB%B6%E5%8C%96/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpackå¤šé¡µé¢åº”ç”¨">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/11/09/webpack/webpack%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8/">webpackå¤šé¡µé¢åº”ç”¨</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-11-09
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <p><strong>entryé…ç½®</strong><br>åœ¨å®é™…é¡¹ç›®çš„å¼€å‘ä¸­ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿä¸ä¼šå°†æ‰€æœ‰çš„åŠŸèƒ½éƒ½æ”¾åœ¨ä¸€ä¸ªç½‘é¡µä¸Šï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´ç½‘é¡µçš„æ€§èƒ½ä¸ä½³ï¼Œå®é™…å¯ä»¥æŒ‰ç…§åŠŸèƒ½æ¨¡å—åˆ’åˆ†å¤šä¸ªå•é¡µåº”ç”¨æ¯ä¸ªå•é¡µåº”ç”¨åˆç”Ÿå¤„ä¸€ä¸ªhtmlæ–‡ä»¶å¹¶ä¸”éšç€ä¸šåŠ¡çš„å‘å±•æ›´å¤šçš„å•é¡µåº”ç”¨å¯ä»¥è¢«é€æ¸çš„åŠ å…¥åˆ°è¿™ä¸ªé¡¹ç›®é‡Œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">entry: [&#x27;./src/file_1.js&#x27;, &#x27;./src/file_2.js&#x27;ï¼Œ&#x27;node_modulesé‡Œçš„æ¨¡å— lodash&#x27;],</span><br><span class="line">entry:&#123;</span><br><span class="line">	main:[&#x27;./src/file_1.js&#x27;, &#x27;./src/file_2.js&#x27;],    //è¿™é‡Œä½¿ç”¨lodash  è¿˜ä¼šæ‰“åŒ…åœ¨è¿™é‡Œæ‰“åŒ…ä¸€é</span><br><span class="line">	lodash:&#x27;lodash&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">entry:&#123;</span><br><span class="line">	main:&#123;</span><br><span class="line">	import :[&#x27;./src/file_1.js&#x27;, &#x27;./src/file_2.js&#x27;],  //è¿™ä¸¤ä¸ªæ–‡ä»¶å¯èƒ½ä¾èµ–äºlodashï¼Œè€Œlodashå•ç‹¬æ‰“åŒ…äº†ï¼Œæ‰€ä»¥dependOnè¿™ä¸ªä¾èµ–å¯ä»¥æŠŠå…¬å…±çš„lodashç»™æŠ½ç¦»å‡ºæ¥            lodash  å°±ä¸ä¼šåœ¨æ‰“åŒ…ä¸€éäº†</span><br><span class="line">	dependOn:&#x27;lodash&#x27;,           // åšä¾èµ–  è¿™é‡Œçš„lodash  æ˜¯ä¸‹é¢çš„å¯¹åº”å  å¯ä»¥éšæ„èµ·</span><br><span class="line">	&#125;,    //è¿™é‡Œä½¿ç”¨lodash  è¿˜ä¼šæ‰“åŒ…åœ¨è¿™é‡Œæ‰“åŒ…ä¸€é</span><br><span class="line">	lodash:&#x27;lodash&#x27;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹è±¡è¯­æ³•ä¼šæ¯”è¾ƒç¹çã€‚ç„¶è€Œï¼Œè¿™æ˜¯åº”ç”¨ç¨‹åºä¸­å®šä¹‰å…¥å£çš„æœ€å¯æ‰©å±•çš„æ–¹å¼ã€‚<br>æè¿°å…¥å£çš„å¯¹è±¡ï¼š<br>ç”¨äºæè¿°å…¥å£çš„å¯¹è±¡ã€‚ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å±æ€§ï¼š<br>dependOn : å½“å‰å…¥å£æ‰€ä¾èµ–çš„å…¥å£ã€‚å®ƒä»¬å¿…é¡»åœ¨è¯¥å…¥å£è¢«åŠ è½½å‰è¢«åŠ è½½ã€‚<br>filename : æŒ‡å®šè¦è¾“å‡ºçš„æ–‡ä»¶åç§°ã€‚<br>import : å¯åŠ¨æ—¶éœ€åŠ è½½çš„æ¨¡å—ã€‚<br>library : æŒ‡å®š library é€‰é¡¹ï¼Œä¸ºå½“å‰ entry æ„å»ºä¸€ä¸ª libraryã€‚<br>runtime : è¿è¡Œæ—¶ chunk çš„åå­—ã€‚å¦‚æœè®¾ç½®äº†ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿è¡Œæ—¶<br>chunkã€‚åœ¨ webpack 5.43.0 ä¹‹åå¯å°†å…¶è®¾ä¸º false ä»¥é¿å…ä¸€ä¸ªæ–°çš„è¿è¡Œæ—¶<br>chunkã€‚<br>publicPath : å½“è¯¥å…¥å£çš„è¾“å‡ºæ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­è¢«å¼•ç”¨æ—¶ï¼Œä¸ºå®ƒä»¬æŒ‡å®šä¸€ä¸ªå…¬å…±<br>URL åœ°å€ã€‚è¯·æŸ¥çœ‹ output.publicPathã€‚<br>webpack.config.js<br>runtime å’Œ dependOn ä¸åº”åœ¨åŒä¸€ä¸ªå…¥å£ä¸ŠåŒæ—¶ä½¿ç”¨ï¼Œæ‰€ä»¥å¦‚ä¸‹é…ç½®æ— æ•ˆï¼Œå¹¶ä¸”ä¼š<br>æŠ›å‡ºé”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  a2: &#x27;dependingfile.js&#x27;,</span><br><span class="line">  b2: &#123;</span><br><span class="line">   dependOn: &#x27;a2&#x27;,</span><br><span class="line">   import: &#x27;./src/app.js&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  a2: &#x27;./a&#x27;,</span><br><span class="line">  b2: &#123;</span><br><span class="line">   runtime: &#x27;x2&#x27;,</span><br><span class="line">   dependOn: &#x27;a2&#x27;,</span><br><span class="line">   import: &#x27;./b&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿ runtime ä¸èƒ½æŒ‡å‘å·²å­˜åœ¨çš„å…¥å£åç§°ï¼Œä¾‹å¦‚ä¸‹é¢é…ç½®ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  a1: &#x27;./a&#x27;,</span><br><span class="line">  b1: &#123;</span><br><span class="line">   runtime: &#x27;a1&#x27;,</span><br><span class="line">   import: &#x27;./b&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å¦å¤– dependOn ä¸èƒ½æ˜¯å¾ªç¯å¼•ç”¨çš„ï¼Œä¸‹é¢çš„ä¾‹å­ä¹Ÿä¼šå‡ºç°é”™è¯¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  a3: &#123;</span><br><span class="line">   import: &#x27;./a&#x27;,</span><br><span class="line">   dependOn: &#x27;b3&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">  b3: &#123;</span><br><span class="line">   import: &#x27;./b&#x27;,</span><br><span class="line">   dependOn: &#x27;a3&#x27;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>é…ç½®index.htmlæ¨¡æ¿</strong><br>è¦ç”Ÿæˆå¤šä¸ªHTMLæ–‡ä»¶ï¼Œè¯·åœ¨æ’ä»¶æ•°ç»„ä¸­å¤šæ¬¡å£°æ˜æ’ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line"> 	main:&#123;</span><br><span class="line">		import :[],</span><br><span class="line">		dependOn:&#x27;lodash2&#x27;,</span><br><span class="line">		filename:&#x27;chanel1.[name].js&#x27;</span><br><span class="line">	&#125;,</span><br><span class="line">	lodash2:&#123;</span><br><span class="line">		import :&#x27;lodash&#x27;,</span><br><span class="line">		filename:&#x27;common/[name].js&#x27;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(), // Generates default index.html</span><br><span class="line">  new HtmlWebpackPlugin(&#123;  // Also generate a test.html</span><br><span class="line">   title:   &#x27;ejs&#x27;,     //åœ¨é¡µé¢å¯ä»¥ä½¿ç”¨ejsæ¨¡æ¿è¯­æ³•è·å–æ•°æ®</span><br><span class="line">   filename: &#x27;chanel1/test.html&#x27;,                      //æ‰§è¡Œæ‰“åŒ…åçš„é¡µé¢æ–‡ä»¶     è¾“å‡ºçš„æ–‡ä»¶å</span><br><span class="line">   template: &#x27;src/assets/test.html&#x27;       //æŒ‡å®šæ¨¡æ¿çš„è·¯å¾„</span><br><span class="line">   inject:&#x27;body/head&#x27;,                       // å®šä¹‰å½“å‰æ‰€ç”Ÿæˆçš„scriptæ ‡ç­¾çš„ä½ç½®</span><br><span class="line">   chunks:[&#x27;è‡ªå®šä¹‰é‚£ä¸ªå…¥å£  å¦‚ï¼šmain.js&#x27;]ï¼Œ              //è§„å®šå½“å‰é¡µé¢åˆ°åº•æ‰“åŒ…é‚£äº›chunk   å¦‚ä½•å®ç°å¤šä¸ªé¡µé¢å»è½½å…¥ä¸åŒçš„chunk   chunkå°±æ˜¯æˆ‘ä»¬åœ¨è·¯å£é…ç½®çš„é¡¹    æ¯ä¸€é¡¹å°±æ˜¯ä¸€ä¸ªchunk  é»˜è®¤ä¼šæŠŠæ‰€æœ‰chunkéƒ½æ”¾è¿›å»</span><br><span class="line">   publicPash:&#x27;http://www.a.com/&#x27;        //åŒ…çš„å‰ç¼€</span><br><span class="line"> &#125;)</span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title  %&gt;&lt;/title&gt;  options.å°±æ˜¯æˆ‘ä»¬åœ¨HtmlWebpackPluginå®šåˆ¶çš„é€‰é¡¹</span><br><span class="line">index.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;/&gt;</span><br><span class="line">  &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>å¤šé¡µé¢åº”ç”¨</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#123;</span><br><span class="line">  pageOne: &#x27;./src/pageOne/index.js&#x27;,</span><br><span class="line">  pageTwo: &#x27;./src/pageTwo/index.js&#x27;,</span><br><span class="line">  pageThree: &#x27;./src/pageThree/index.js&#x27;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘ä»¬å‘Šè¯‰ webpack éœ€è¦ä¸‰ä¸ªç‹¬ç«‹åˆ†ç¦»çš„ä¾èµ–å›¾ï¼ˆå¦‚ä¸Šé¢çš„ç¤ºä¾‹ï¼‰</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿ åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ï¼Œserver ä¼šæ‹‰å–ä¸€ä¸ªæ–°çš„ HTML æ–‡æ¡£ç»™ä½ çš„å®¢æˆ·ç«¯ã€‚<br>é¡µé¢é‡æ–°åŠ è½½æ­¤æ–°æ–‡æ¡£ï¼Œå¹¶ä¸”èµ„æºè¢«é‡æ–°ä¸‹è½½ã€‚ç„¶è€Œï¼Œè¿™ç»™äº†æˆ‘ä»¬ç‰¹æ®Šçš„æœºä¼šå»åšå¾ˆ<br>å¤šäº‹ï¼Œä¾‹å¦‚ä½¿ç”¨ optimization.splitChunks ä¸ºé¡µé¢é—´å…±äº«çš„åº”ç”¨ç¨‹åºä»£ç åˆ›å»º<br>bundleã€‚ç”±äºå…¥å£èµ·ç‚¹æ•°é‡çš„å¢å¤šï¼Œå¤šé¡µåº”ç”¨èƒ½å¤Ÿå¤ç”¨å¤šä¸ªå…¥å£èµ·ç‚¹ä¹‹é—´çš„å¤§é‡ä»£<br>ç &#x2F;æ¨¡å—ï¼Œä»è€Œå¯ä»¥æå¤§åœ°ä»è¿™äº›æŠ€æœ¯ä¸­å—ç›Šã€‚</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/11/09/webpack/webpack%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue-ä¿®é¥°ç¬¦">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/11/02/Vue/vue-%E4%BF%AE%E9%A5%B0%E7%AC%A6/">vue-ä¿®é¥°ç¬¦</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-11-02
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€ä¿®é¥°ç¬¦æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€ä¿®é¥°ç¬¦æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€ä¿®é¥°ç¬¦æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€ä¿®é¥°ç¬¦æ˜¯ä»€ä¹ˆ</h2><p>åœ¨ç¨‹åºä¸–ç•Œé‡Œï¼Œä¿®é¥°ç¬¦æ˜¯ç”¨äºé™å®šç±»å‹ä»¥åŠç±»å‹æˆå‘˜çš„å£°æ˜çš„ä¸€ç§ç¬¦å·</p>
<p>åœ¨<code>Vue</code>ä¸­ï¼Œä¿®é¥°ç¬¦å¤„ç†äº†è®¸å¤š<code>DOM</code>äº‹ä»¶çš„ç»†èŠ‚ï¼Œè®©æˆ‘ä»¬ä¸å†éœ€è¦èŠ±å¤§é‡çš„æ—¶é—´å»å¤„ç†è¿™äº›çƒ¦æ¼çš„äº‹æƒ…ï¼Œè€Œèƒ½æœ‰æ›´å¤šçš„ç²¾åŠ›ä¸“æ³¨äºç¨‹åºçš„é€»è¾‘å¤„ç†</p>
<p><code>vue</code>ä¸­ä¿®é¥°ç¬¦åˆ†ä¸ºä»¥ä¸‹äº”ç§ï¼š</p>
<ul>
<li>è¡¨å•ä¿®é¥°ç¬¦</li>
<li>äº‹ä»¶ä¿®é¥°ç¬¦</li>
<li>é¼ æ ‡æŒ‰é”®ä¿®é¥°ç¬¦</li>
<li>é”®å€¼ä¿®é¥°ç¬¦</li>
<li>v-bindä¿®é¥°ç¬¦</li>
</ul>
<h2 id="äºŒã€ä¿®é¥°ç¬¦çš„ä½œç”¨"><a href="#äºŒã€ä¿®é¥°ç¬¦çš„ä½œç”¨" class="headerlink" title="äºŒã€ä¿®é¥°ç¬¦çš„ä½œç”¨"></a>äºŒã€ä¿®é¥°ç¬¦çš„ä½œç”¨</h2><h3 id="è¡¨å•ä¿®é¥°ç¬¦"><a href="#è¡¨å•ä¿®é¥°ç¬¦" class="headerlink" title="è¡¨å•ä¿®é¥°ç¬¦"></a>è¡¨å•ä¿®é¥°ç¬¦</h3><p>åœ¨æˆ‘ä»¬å¡«å†™è¡¨å•çš„æ—¶å€™ç”¨å¾—æœ€å¤šçš„æ˜¯<code>input</code>æ ‡ç­¾ï¼ŒæŒ‡ä»¤ç”¨å¾—æœ€å¤šçš„æ˜¯<code>v-model</code></p>
<p>å…³äºè¡¨å•çš„ä¿®é¥°ç¬¦æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>lazy</li>
<li>trim</li>
<li>number</li>
</ul>
<h4 id="lazy"><a href="#lazy" class="headerlink" title="lazy"></a>lazy</h4><p>åœ¨æˆ‘ä»¬å¡«å®Œä¿¡æ¯ï¼Œå…‰æ ‡ç¦»å¼€æ ‡ç­¾çš„æ—¶å€™ï¼Œæ‰ä¼šå°†å€¼èµ‹äºˆç»™<code>value</code>ï¼Œä¹Ÿå°±æ˜¯åœ¨<code>change</code>äº‹ä»¶ä¹‹åå†è¿›è¡Œä¿¡æ¯åŒæ­¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model.<span class="property">lazy</span>=<span class="string">&quot;value&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h4><p>è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–ç©ºæ ¼å­—ç¬¦ï¼Œè€Œä¸­é—´çš„ç©ºæ ¼ä¸ä¼šè¿‡æ»¤</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model.<span class="property">trim</span>=<span class="string">&quot;value&quot;</span>&gt;</span><br></pre></td></tr></table></figure>



<h4 id="number"><a href="#number" class="headerlink" title="number"></a>number</h4><p>è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹ï¼Œä½†å¦‚æœè¿™ä¸ªå€¼æ— æ³•è¢«<code>parseFloat</code>è§£æï¼Œåˆ™ä¼šè¿”å›åŸæ¥çš„å€¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model.<span class="property">number</span>=<span class="string">&quot;age&quot;</span> type=<span class="string">&quot;number&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="äº‹ä»¶ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h3><p>äº‹ä»¶ä¿®é¥°ç¬¦æ˜¯å¯¹äº‹ä»¶æ•è·ä»¥åŠç›®æ ‡è¿›è¡Œäº†å¤„ç†ï¼Œæœ‰å¦‚ä¸‹ä¿®é¥°ç¬¦ï¼š</p>
<ul>
<li>stop</li>
<li>prevent</li>
<li>self</li>
<li>once</li>
<li>capture</li>
<li>passive</li>
<li>native</li>
</ul>
<h4 id="stop"><a href="#stop" class="headerlink" title="stop"></a>stop</h4><p>é˜»æ­¢äº†äº‹ä»¶å†’æ³¡ï¼Œç›¸å½“äºè°ƒç”¨äº†<code>event.stopPropagation</code>æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div @click=<span class="string">&quot;shout(2)&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">&quot;shout(1)&quot;</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="comment">//åªè¾“å‡º1</span></span><br></pre></td></tr></table></figure>

<h4 id="prevent"><a href="#prevent" class="headerlink" title="prevent"></a>prevent</h4><p>é˜»æ­¢äº†äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œç›¸å½“äºè°ƒç”¨äº†<code>event.preventDefault</code>æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form v-<span class="attr">on</span>:submit.<span class="property">prevent</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h4 id="self"><a href="#self" class="headerlink" title="self"></a>self</h4><p>åªå½“åœ¨ <code>event.target</code> æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘å¤„ç†å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-<span class="attr">on</span>:click.<span class="property">self</span>=<span class="string">&quot;doThat&quot;</span>&gt;...&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨ä¿®é¥°ç¬¦æ—¶ï¼Œé¡ºåºå¾ˆé‡è¦ï¼›ç›¸åº”çš„ä»£ç ä¼šä»¥åŒæ ·çš„é¡ºåºäº§ç”Ÿã€‚å› æ­¤ï¼Œç”¨ <code>v-on:click.prevent.self</code>ä¼šé˜»æ­¢<strong>æ‰€æœ‰çš„ç‚¹å‡»</strong>ï¼Œè€Œ <code>v-on:click.self.prevent</code> åªä¼šé˜»æ­¢å¯¹å…ƒç´ è‡ªèº«çš„ç‚¹å‡»</p>
</blockquote>
<h4 id="once"><a href="#once" class="headerlink" title="once"></a>once</h4><p>ç»‘å®šäº†äº‹ä»¶ä»¥ååªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡å°±ä¸ä¼šè§¦å‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click.<span class="property">once</span>=<span class="string">&quot;shout(1)&quot;</span>&gt;ok&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h4 id="capture"><a href="#capture" class="headerlink" title="capture"></a>capture</h4><p>ä½¿äº‹ä»¶è§¦å‘ä»åŒ…å«è¿™ä¸ªå…ƒç´ çš„é¡¶å±‚å¼€å§‹å¾€ä¸‹è§¦å‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div @click.<span class="property">capture</span>=<span class="string">&quot;shout(1)&quot;</span>&gt;</span><br><span class="line">    obj1</span><br><span class="line">&lt;div @click.<span class="property">capture</span>=<span class="string">&quot;shout(2)&quot;</span>&gt;</span><br><span class="line">    obj2</span><br><span class="line">&lt;div @click=<span class="string">&quot;shout(3)&quot;</span>&gt;</span><br><span class="line">    obj3</span><br><span class="line">&lt;div @click=<span class="string">&quot;shout(4)&quot;</span>&gt;</span><br><span class="line">    obj4</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æ„: 1 2 4 3 </span></span><br></pre></td></tr></table></figure>

<h4 id="passive"><a href="#passive" class="headerlink" title="passive"></a>passive</h4><p>åœ¨ç§»åŠ¨ç«¯ï¼Œå½“æˆ‘ä»¬åœ¨ç›‘å¬å…ƒç´ æ»šåŠ¨äº‹ä»¶çš„æ—¶å€™ï¼Œä¼šä¸€ç›´è§¦å‘<code>onscroll</code>äº‹ä»¶ä¼šè®©æˆ‘ä»¬çš„ç½‘é¡µå˜å¡ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªä¿®é¥°ç¬¦çš„æ—¶å€™ï¼Œç›¸å½“äºç»™<code>onscroll</code>äº‹ä»¶æ•´äº†ä¸€ä¸ª<code>.lazy</code>ä¿®é¥°ç¬¦</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ»šåŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸º (å³æ»šåŠ¨è¡Œä¸º) å°†ä¼šç«‹å³è§¦å‘ --&gt;</span><br><span class="line">&lt;!-- è€Œä¸ä¼šç­‰å¾… <span class="string">`onScroll`</span> å®Œæˆ  --&gt;</span><br><span class="line">&lt;!-- è¿™å…¶ä¸­åŒ…å« <span class="string">`event.preventDefault()`</span> çš„æƒ…å†µ --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:scroll.passive</span>=<span class="string">&quot;onScroll&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸è¦æŠŠ <code>.passive</code> å’Œ <code>.prevent</code> ä¸€èµ·ä½¿ç”¨,å› ä¸º <code>.prevent</code> å°†ä¼šè¢«å¿½ç•¥ï¼ŒåŒæ—¶æµè§ˆå™¨å¯èƒ½ä¼šå‘ä½ å±•ç¤ºä¸€ä¸ªè­¦å‘Šã€‚</p>
<p><code>passive</code> ä¼šå‘Šè¯‰æµè§ˆå™¨ä½ ä¸æƒ³é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º</p>
</blockquote>
<h4 id="native"><a href="#native" class="headerlink" title="native"></a>native</h4><p>è®©ç»„ä»¶å˜æˆåƒ<code>html</code>å†…ç½®æ ‡ç­¾é‚£æ ·ç›‘å¬æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶ï¼Œå¦åˆ™ç»„ä»¶ä¸Šä½¿ç”¨ <code>v-on</code> åªä¼šç›‘å¬è‡ªå®šä¹‰äº‹ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component v-<span class="attr">on</span>:click.<span class="property">native</span>=<span class="string">&quot;doSomething&quot;</span>&gt;&lt;/my-component&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨.nativeä¿®é¥°ç¬¦æ¥æ“ä½œæ™®é€šHTMLæ ‡ç­¾æ˜¯ä¼šä»¤äº‹ä»¶å¤±æ•ˆçš„</p>
</blockquote>
<h3 id="é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦"><a href="#é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦" class="headerlink" title="é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦"></a>é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦</h3><p>é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦é’ˆå¯¹çš„å°±æ˜¯å·¦é”®ã€å³é”®ã€ä¸­é”®ç‚¹å‡»ï¼Œæœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>left å·¦é”®ç‚¹å‡»</li>
<li>right å³é”®ç‚¹å‡»</li>
<li>middle ä¸­é”®ç‚¹å‡»</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click.<span class="property">left</span>=<span class="string">&quot;shout(1)&quot;</span>&gt;ok&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.right</span>=<span class="string">&quot;shout(1)&quot;</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.middle</span>=<span class="string">&quot;shout(1)&quot;</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="é”®ç›˜ä¿®é¥°ç¬¦"><a href="#é”®ç›˜ä¿®é¥°ç¬¦" class="headerlink" title="é”®ç›˜ä¿®é¥°ç¬¦"></a>é”®ç›˜ä¿®é¥°ç¬¦</h3><p>é”®ç›˜ä¿®é¥°ç¬¦æ˜¯ç”¨æ¥ä¿®é¥°é”®ç›˜äº‹ä»¶ï¼ˆ<code>onkeyup</code>ï¼Œ<code>onkeydown</code>ï¼‰çš„ï¼Œæœ‰å¦‚ä¸‹ï¼š</p>
<p><code>keyCode</code>å­˜åœ¨å¾ˆå¤šï¼Œä½†<code>vue</code>ä¸ºæˆ‘ä»¬æä¾›äº†åˆ«åï¼Œåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p>
<ul>
<li>æ™®é€šé”®ï¼ˆenterã€tabã€deleteã€spaceã€escã€upâ€¦ï¼‰</li>
<li>ç³»ç»Ÿä¿®é¥°é”®ï¼ˆctrlã€altã€metaã€shiftâ€¦ï¼‰</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åªæœ‰æŒ‰é”®ä¸ºkeyCodeçš„æ—¶å€™æ‰è§¦å‘</span></span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> @keyup.<span class="property">keyCode</span>=<span class="string">&quot;shout()&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è‡ªå®šä¹‰ä¸€äº›å…¨å±€çš„é”®ç›˜ç åˆ«å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">keyCodes</span>.<span class="property">f2</span> = <span class="number">113</span></span><br></pre></td></tr></table></figure>

<h3 id="v-bindä¿®é¥°ç¬¦"><a href="#v-bindä¿®é¥°ç¬¦" class="headerlink" title="v-bindä¿®é¥°ç¬¦"></a>v-bindä¿®é¥°ç¬¦</h3><p>v-bindä¿®é¥°ç¬¦ä¸»è¦æ˜¯ä¸ºå±æ€§è¿›è¡Œæ“ä½œï¼Œç”¨æ¥åˆ†åˆ«æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>async</li>
<li>prop</li>
<li>camel</li>
</ul>
<h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4><p>èƒ½å¯¹<code>props</code>è¿›è¡Œä¸€ä¸ªåŒå‘ç»‘å®š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çˆ¶ç»„ä»¶</span></span><br><span class="line">&lt;comp :myMessage.<span class="property">sync</span>=<span class="string">&quot;bar&quot;</span>&gt;&lt;/comp&gt; </span><br><span class="line"><span class="comment">//å­ç»„ä»¶</span></span><br><span class="line"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:myMessage&#x27;</span>,params);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šè¿™ç§æ–¹æ³•ç›¸å½“äºä»¥ä¸‹çš„ç®€å†™</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çˆ¶äº²ç»„ä»¶</span></span><br><span class="line">&lt;comp :myMessage=<span class="string">&quot;bar&quot;</span> @<span class="attr">update</span>:myMessage=<span class="string">&quot;func&quot;</span>&gt;&lt;/comp&gt;</span><br><span class="line"><span class="title function_">func</span>(<span class="params">e</span>)&#123;</span><br><span class="line"> <span class="variable language_">this</span>.<span class="property">bar</span> = e;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å­ç»„ä»¶js</span></span><br><span class="line"><span class="title function_">func2</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:myMessage&#x27;</span>,params);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>async</code>éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>sync</code>çš„æ—¶å€™ï¼Œå­ç»„ä»¶ä¼ é€’çš„äº‹ä»¶åæ ¼å¼å¿…é¡»ä¸º<code>update:value</code>ï¼Œå…¶ä¸­<code>value</code>å¿…é¡»ä¸å­ç»„ä»¶ä¸­<code>props</code>ä¸­å£°æ˜çš„åç§°å®Œå…¨ä¸€è‡´</li>
<li>æ³¨æ„å¸¦æœ‰ <code>.sync</code> ä¿®é¥°ç¬¦çš„ <code>v-bind</code> ä¸èƒ½å’Œè¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨</li>
<li>å°† <code>v-bind.sync</code> ç”¨åœ¨ä¸€ä¸ªå­—é¢é‡çš„å¯¹è±¡ä¸Šï¼Œä¾‹å¦‚ <code>v-bind.sync=â€&#123; title: doc.title &#125;â€</code>ï¼Œæ˜¯æ— æ³•æ­£å¸¸å·¥ä½œçš„</li>
</ul>
<h4 id="props"><a href="#props" class="headerlink" title="props"></a>props</h4><p>è®¾ç½®è‡ªå®šä¹‰æ ‡ç­¾å±æ€§ï¼Œé¿å…æš´éœ²æ•°æ®ï¼Œé˜²æ­¢æ±¡æŸ“HTMLç»“æ„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input id=<span class="string">&quot;uid&quot;</span> title=<span class="string">&quot;title1&quot;</span> value=<span class="string">&quot;1&quot;</span> :index.<span class="property">prop</span>=<span class="string">&quot;index&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<h4 id="camel"><a href="#camel" class="headerlink" title="camel"></a>camel</h4><p>å°†å‘½åå˜ä¸ºé©¼å³°å‘½åæ³•ï¼Œå¦‚å°†<code>view-Box</code>å±æ€§åè½¬æ¢ä¸º <code>viewBox</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg :viewBox=<span class="string">&quot;viewBox&quot;</span>&gt;&lt;/svg&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€åº”ç”¨åœºæ™¯"><a href="#ä¸‰ã€åº”ç”¨åœºæ™¯" class="headerlink" title="ä¸‰ã€åº”ç”¨åœºæ™¯"></a>ä¸‰ã€åº”ç”¨åœºæ™¯</h2><p>æ ¹æ®æ¯ä¸€ä¸ªä¿®é¥°ç¬¦çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿®é¥°ç¬¦çš„åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>.stopï¼šé˜»æ­¢äº‹ä»¶å†’æ³¡</li>
<li>.nativeï¼šç»‘å®šåŸç”Ÿäº‹ä»¶</li>
<li>.onceï¼šäº‹ä»¶åªæ‰§è¡Œä¸€æ¬¡</li>
<li>.self ï¼šå°†äº‹ä»¶ç»‘å®šåœ¨è‡ªèº«èº«ä¸Šï¼Œç›¸å½“äºé˜»æ­¢äº‹ä»¶å†’æ³¡</li>
<li>.preventï¼šé˜»æ­¢é»˜è®¤äº‹ä»¶</li>
<li>.captionï¼šç”¨äºäº‹ä»¶æ•è·</li>
<li>.onceï¼šåªè§¦å‘ä¸€æ¬¡</li>
<li>.keyCodeï¼šç›‘å¬ç‰¹å®šé”®ç›˜æŒ‰ä¸‹</li>
<li>.rightï¼šå³é”®</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/11/02/Vue/vue-%E4%BF%AE%E9%A5%B0%E7%AC%A6/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpackçš„ç†è§£">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/11/01/webpack/webpack%E7%9A%84%E7%90%86%E8%A7%A3/">webpackçš„ç†è§£</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-11-01
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€èƒŒæ™¯"><a href="#ä¸€ã€èƒŒæ™¯" class="headerlink" title="ä¸€ã€èƒŒæ™¯"></a>ä¸€ã€èƒŒæ™¯</h2><p><code>Webpack</code> æœ€åˆçš„ç›®æ ‡æ˜¯å®ç°å‰ç«¯é¡¹ç›®çš„æ¨¡å—åŒ–ï¼Œæ—¨åœ¨æ›´é«˜æ•ˆåœ°ç®¡ç†å’Œç»´æŠ¤é¡¹ç›®ä¸­çš„æ¯ä¸€ä¸ªèµ„æº</p>
<h4 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h4><p>æœ€æ—©çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡æ–‡ä»¶åˆ’åˆ†çš„å½¢å¼å®ç°æ¨¡å—åŒ–ï¼Œä¹Ÿå°±æ˜¯å°†æ¯ä¸ªåŠŸèƒ½åŠå…¶ç›¸å…³çŠ¶æ€æ•°æ®å„è‡ªå•ç‹¬æ”¾åˆ°ä¸åŒçš„<code>JS</code> æ–‡ä»¶ä¸­</p>
<p>çº¦å®šæ¯ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œç„¶åå†å°†è¿™äº›<code>js</code>æ–‡ä»¶å¼•å…¥åˆ°é¡µé¢ï¼Œä¸€ä¸ª<code>script</code>æ ‡ç­¾å¯¹åº”ä¸€ä¸ªæ¨¡å—ï¼Œç„¶åè°ƒç”¨æ¨¡å—åŒ–çš„æˆå‘˜</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;module-a.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;module-b.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½†è¿™ç§æ¨¡å—å¼Šç«¯ååˆ†çš„æ˜æ˜¾ï¼Œæ¨¡å—éƒ½æ˜¯åœ¨å…¨å±€ä¸­å·¥ä½œï¼Œå¤§é‡æ¨¡å—æˆå‘˜æ±¡æŸ“äº†ç¯å¢ƒï¼Œæ¨¡å—ä¸æ¨¡å—ä¹‹é—´å¹¶æ²¡æœ‰ä¾èµ–å…³ç³»ã€ç»´æŠ¤å›°éš¾ã€æ²¡æœ‰ç§æœ‰ç©ºé—´ç­‰é—®é¢˜</p>
<p>é¡¹ç›®ä¸€æ—¦å˜å¤§ï¼Œä¸Šè¿°é—®é¢˜ä¼šå°¤å…¶æ˜æ˜¾</p>
<p>éšåï¼Œå°±å‡ºç°äº†å‘½åç©ºé—´æ–¹å¼ï¼Œè§„å®šæ¯ä¸ªæ¨¡å—åªæš´éœ²ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œç„¶åæ¨¡å—çš„å†…å®¹éƒ½æŒ‚è½½åˆ°è¿™ä¸ªå¯¹è±¡ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">moduleA</span> = &#123;</span><br><span class="line">  <span class="attr">method1</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;moduleA#method1&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼ä¹Ÿå¹¶æ²¡æœ‰è§£å†³ç¬¬ä¸€ç§æ–¹å¼çš„ä¾èµ–ç­‰é—®é¢˜</p>
<p>å†åæ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°ä¸ºæ¨¡å—æä¾›ç§æœ‰ç©ºé—´ï¼Œé€šè¿‡å‚æ•°çš„å½¢å¼ä½œä¸ºä¾èµ–å£°æ˜ï¼Œå¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module-a.js</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params">$</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&#x27;module-a&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">method1</span> () &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name + <span class="string">&#x27;#method1&#x27;</span>)</span><br><span class="line">    $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">animate</span>(&#123; <span class="attr">margin</span>: <span class="string">&#x27;200px&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">moduleA</span> = &#123;</span><br><span class="line">    <span class="attr">method1</span>: method1</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(jQuery)</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°çš„æ–¹å¼éƒ½æ˜¯æ—©æœŸè§£å†³æ¨¡å—çš„æ–¹å¼ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨ä¸€äº›æ²¡æœ‰è§£å†³çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ˜¯ç”¨è¿‡<code>script</code>æ ‡ç­¾åœ¨é¡µé¢å¼•å…¥è¿™äº›æ¨¡å—çš„ï¼Œè¿™äº›æ¨¡å—çš„åŠ è½½å¹¶ä¸å—ä»£ç çš„æ§åˆ¶ï¼Œæ—¶é—´ä¸€ä¹…ç»´æŠ¤èµ·æ¥ä¹Ÿååˆ†çš„éº»çƒ¦</p>
<p>ç†æƒ³çš„è§£å†³æ–¹å¼æ˜¯ï¼Œåœ¨é¡µé¢ä¸­å¼•å…¥ä¸€ä¸ª<code>JS</code>å…¥å£æ–‡ä»¶ï¼Œå…¶ä½™ç”¨åˆ°çš„æ¨¡å—å¯ä»¥é€šè¿‡ä»£ç æ§åˆ¶ï¼ŒæŒ‰éœ€åŠ è½½è¿›æ¥</p>
<p>é™¤äº†æ¨¡å—åŠ è½½çš„é—®é¢˜ä»¥å¤–ï¼Œè¿˜éœ€è¦è§„å®šæ¨¡å—åŒ–çš„è§„èŒƒï¼Œå¦‚ä»Šæµè¡Œçš„åˆ™æ˜¯<code>CommonJS</code>ã€<code>ES Modules</code></p>
<h2 id="äºŒã€é—®é¢˜"><a href="#äºŒã€é—®é¢˜" class="headerlink" title="äºŒã€é—®é¢˜"></a>äºŒã€é—®é¢˜</h2><p>ä»åç«¯æ¸²æŸ“çš„<code>JSP</code>ã€<code>PHP</code>ï¼Œåˆ°å‰ç«¯åŸç”Ÿ<code>JavaScript</code>ï¼Œå†åˆ°<code>jQuery</code>å¼€å‘ï¼Œå†åˆ°ç›®å‰çš„ä¸‰å¤§æ¡†æ¶<code>Vue</code>ã€<code>React</code>ã€<code>Angular</code></p>
<p>å¼€å‘æ–¹å¼ï¼Œä¹Ÿä»<code>javascript</code>åˆ°åé¢çš„<code>es5</code>ã€<code>es6ã€7ã€8ã€9ã€10</code>ï¼Œå†åˆ°<code>typescript</code>ï¼ŒåŒ…æ‹¬ç¼–å†™<code>CSS</code>çš„é¢„å¤„ç†å™¨<code>less</code>ã€<code>scss</code>ç­‰</p>
<p>ç°ä»£å‰ç«¯å¼€å‘å·²ç»å˜å¾—ååˆ†çš„å¤æ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å¦‚ä¸‹çš„é—®é¢˜ï¼š</p>
<ul>
<li>éœ€è¦é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼æ¥å¼€å‘</li>
<li>ä½¿ç”¨ä¸€äº›é«˜çº§çš„ç‰¹æ€§æ¥åŠ å¿«æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡æˆ–è€…å®‰å…¨æ€§ï¼Œæ¯”å¦‚é€šè¿‡ES6+ã€TypeScriptå¼€å‘è„šæœ¬é€»è¾‘ï¼Œé€šè¿‡sassã€lessç­‰æ–¹å¼æ¥ç¼–å†™cssæ ·å¼ä»£ç </li>
<li>ç›‘å¬æ–‡ä»¶çš„å˜åŒ–æ¥å¹¶ä¸”åæ˜ åˆ°æµè§ˆå™¨ä¸Šï¼Œæé«˜å¼€å‘çš„æ•ˆç‡</li>
<li>JavaScript ä»£ç éœ€è¦æ¨¡å—åŒ–ï¼ŒHTML å’Œ CSS è¿™äº›èµ„æºæ–‡ä»¶ä¹Ÿä¼šé¢ä¸´éœ€è¦è¢«æ¨¡å—åŒ–çš„é—®é¢˜</li>
<li>å¼€å‘å®Œæˆåæˆ‘ä»¬è¿˜éœ€è¦å°†ä»£ç è¿›è¡Œå‹ç¼©ã€åˆå¹¶ä»¥åŠå…¶ä»–ç›¸å…³çš„ä¼˜åŒ–</li>
</ul>
<p>è€Œ<code>webpack</code>æ°å·§å¯ä»¥è§£å†³ä»¥ä¸Šé—®é¢˜</p>
<h2 id="ä¸‰ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸‰ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸‰ã€æ˜¯ä»€ä¹ˆ"></a>ä¸‰ã€æ˜¯ä»€ä¹ˆ</h2><p><code>webpack</code> æ˜¯ä¸€ä¸ªç”¨äºç°ä»£<code>JavaScript</code>åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·</p>
<ul>
<li>é™æ€æ¨¡å—</li>
</ul>
<p>è¿™é‡Œçš„é™æ€æ¨¡å—æŒ‡çš„æ˜¯å¼€å‘é˜¶æ®µï¼Œå¯ä»¥è¢« <code>webpack</code> ç›´æ¥å¼•ç”¨çš„èµ„æºï¼ˆå¯ä»¥ç›´æ¥è¢«è·å–æ‰“åŒ…è¿›<code>bundle.js</code>çš„èµ„æºï¼‰</p>
<p>å½“ <code>webpack</code>å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨æ„å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œæ­¤ä¾èµ–å›¾å¯¹åº”æ˜ å°„åˆ°é¡¹ç›®æ‰€éœ€çš„æ¯ä¸ªæ¨¡å—ï¼ˆä¸å†å±€é™<code>js</code>æ–‡ä»¶ï¼‰ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª <code>bundle</code></p>
<p><img src="https://static.vue-js.com/9ce194a0-a578-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h4 id="webpackçš„èƒ½åŠ›ï¼š"><a href="#webpackçš„èƒ½åŠ›ï¼š" class="headerlink" title="webpackçš„èƒ½åŠ›ï¼š"></a><code>webpack</code>çš„èƒ½åŠ›ï¼š</h4><p><strong>ç¼–è¯‘ä»£ç èƒ½åŠ›</strong>ï¼Œæé«˜æ•ˆç‡ï¼Œè§£å†³æµè§ˆå™¨å…¼å®¹é—®é¢˜ <img src="https://static.vue-js.com/c5c2d360-a592-11eb-ab90-d9ae814b240d.png" alt="img"><strong>æ¨¡å—æ•´åˆèƒ½åŠ›</strong>ï¼Œæé«˜æ€§èƒ½ï¼Œå¯ç»´æŠ¤æ€§ï¼Œè§£å†³æµè§ˆå™¨é¢‘ç¹è¯·æ±‚æ–‡ä»¶çš„é—®é¢˜ <img src="https://static.vue-js.com/d306d260-a592-11eb-ab90-d9ae814b240d.png" alt="img"><strong>ä¸‡ç‰©çš†å¯æ¨¡å—èƒ½åŠ›</strong>ï¼Œé¡¹ç›®ç»´æŠ¤æ€§å¢å¼ºï¼Œæ”¯æŒä¸åŒç§ç±»çš„å‰ç«¯æ¨¡å—ç±»å‹ï¼Œç»Ÿä¸€çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œæ‰€æœ‰èµ„æºæ–‡ä»¶çš„åŠ è½½éƒ½å¯ä»¥é€šè¿‡ä»£ç æ§åˆ¶ <img src="https://static.vue-js.com/e3c5a040-a592-11eb-ab90-d9ae814b240d.png" alt="img"></p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/11/01/webpack/webpack%E7%9A%84%E7%90%86%E8%A7%A3/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpackåˆ›å»ºlibrary">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/10/31/webpack/webpack%E5%88%9B%E5%BB%BAlibrary/">webpackåˆ›å»ºlibrary</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-10-31
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <p>é™¤äº†æ‰“åŒ…åº”ç”¨ç¨‹åºï¼Œwebpack è¿˜å¯ä»¥ç”¨äºæ‰“åŒ… JavaScript libraryã€‚<br>ä¾‹å¦‚ï¼šå½“æˆ‘ä»¬æƒ³è¦è‡ªå·±å¼€å‘ä¸€ä¸ªç»„ä»¶åº“å·¥å…·æˆ–è€…æ¡†æ¶çš„æ—¶å€™ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è‡ªå·±é€ ä¸€ä¸ªè½®å­ç»™åˆ«äººç”¨çš„æ—¶å€™æˆ‘ä»¬å…ä¸äº†è¦å¼€å‘å¾ˆå¤šçš„æ¨¡å—ï¼Œæœ€ç»ˆéƒ½å¯ä»¥è¯·webpackæ¥å¸®æˆ‘ä»¬æ‰“åŒ…ã€‚</p>
<p><strong>åˆ›å»ºä¸€ä¸ª library</strong><br>å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªåä¸º webpack-numbers çš„å°çš„ libraryï¼Œå¯ä»¥å°†æ•°å­— 1 åˆ° 5è½¬æ¢ä¸ºæ–‡æœ¬è¡¨ç¤ºï¼Œåä¹‹äº¦ç„¶ï¼Œä¾‹å¦‚å°† 2 è½¬æ¢ä¸º â€˜twoâ€™ã€‚<br>ä½¿ç”¨ npm åˆå§‹åŒ–é¡¹ç›®ï¼Œç„¶åå®‰è£… webpack ï¼Œ webpack-cli å’Œ lodash ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli lodash -D</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°† lodash å®‰è£…ä¸º devDependencies è€Œä¸æ˜¯ dependencies ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å°†å…¶æ‰“åŒ…åˆ°æˆ‘ä»¬çš„åº“ä¸­ï¼Œå¦åˆ™æˆ‘ä»¬çš„åº“ä½“ç§¯å¾ˆå®¹æ˜“å˜å¤§ã€‚</p>
<p>src&#x2F;ref.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 1,</span><br><span class="line">  &quot;word&quot;: &quot;One&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 2,</span><br><span class="line">  &quot;word&quot;: &quot;Two&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 3,</span><br><span class="line">  &quot;word&quot;: &quot;Three&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 4,</span><br><span class="line">  &quot;word&quot;: &quot;Four&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 5,</span><br><span class="line">  &quot;word&quot;: &quot;Five&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  &quot;num&quot;: 0,</span><br><span class="line">  &quot;word&quot;: &quot;Zero&quot;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import _ from &#x27;lodash&#x27;;</span><br><span class="line">import numRef from &#x27;./ref.json&#x27;;</span><br><span class="line">export function numToWord(num) &#123;</span><br><span class="line"> return _.reduce(</span><br><span class="line">  numRef,</span><br><span class="line"> (accum, ref) =&gt; &#123;</span><br><span class="line">   return ref.num === num ? ref.word : accum;</span><br><span class="line"> &#125;,</span><br><span class="line">  &#x27;&#x27;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">export function wordToNum(word) &#123;</span><br><span class="line"> return _.reduce(</span><br><span class="line">  numRef,</span><br><span class="line"> (accum, ref) =&gt; &#123;</span><br><span class="line">   return ref.word === word &amp;&amp; word.toLowerCase() ? ref.num :</span><br><span class="line">accum;</span><br><span class="line"> &#125;,</span><br><span class="line">  -1</span><br><span class="line">);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode:&#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> output: &#123;</span><br><span class="line">  path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">  filename: &#x27;webpack-numbers.js&#x27;,</span><br><span class="line">  library:&#123;</span><br><span class="line">    name:&#x27;webpackNumbers&#x27;,</span><br><span class="line">	type&#x27;umd&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  globalObject:&#x27;globalThis&#x27;</span><br><span class="line">&#125;,</span><br><span class="line"> externals:&#123;</span><br><span class="line"> 	lodash:&#123;   lodash  å¼•å…¥åŒ…çš„åå­—</span><br><span class="line">		commonjs:&#x27;lodash&#x27;,   //  å…¼å®¹å¼•å…¥å½¢å¼</span><br><span class="line">		commonjs2:&#x27;lodash&#x27;,</span><br><span class="line">		amd:&#x27;lodash&#x27;,</span><br><span class="line">		root:&#x27;_&#x27;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>å‘å¸ƒåˆ°çº¿ä¸Š</strong><br>æ‹¥æœ‰npmè´¦å·<br>npm config get registry   &#x2F;&#x2F; ä¸€å®šè¦ä¿è¯æœ¬åœ°çš„registryçš„åœ°å€æ˜¯<a target="_blank" rel="noopener" href="https://registry.npmjs.org/">https://registry.npmjs.org/</a>    å› ä¸ºè¿™æ ·çš„è¯æ‰æ˜¯çœŸæ­£çš„è¿æ¥åˆ°npmå®˜ç½‘çš„åœ°å€ä¸Š   æœ‰äº›äººå¯èƒ½æ˜¯æ·˜å®  é‚£ä¹ˆå°±è®¿é—®ä¸ä¸Šå»äº†<br>npm adduser  &#x2F;&#x2F;æ·»åŠ ç”¨æˆ·   è¾“å…¥ç”¨æˆ·åå¯†ç <br>åŒ…çš„åå­—å¿…é¡»æ˜¯å…¨çƒå”¯ä¸€çš„ã€‚   npm publish    ä¸Šä¼ æ—¶package.jsonä¸­çš„mainå…¥å£å¿…é¡»å¯¹åº”ï¼šdist&#x2F;æ–‡ä»¶å   å› ä¸ºåˆ«äººé€šè¿‡ requireå»è½½å…¥åŒ…çš„æ—¶å€™  ä¼šè¯»å– è¿™ä¸ªmainè¿™æ˜¯çš„æš´éœ²çš„åŒ…çš„åå­—<br>npm install åŒ…åå°±å¯ä»¥ä¸‹è½½äº†</p>
<p><strong>Webpack é…ç½®</strong></p>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output:&#123;</span><br><span class="line">	path:&#x27;&#x27;,</span><br><span class="line">	filname:&#x27;&#x27;,</span><br><span class="line">	library:&#x27;&#x27;,    //æˆ‘ä»¬åªæ˜¯å®šä¹‰äº†å¯¼å‡º å¹¶ä¸”æ²¡æœ‰ä½¿ç”¨å®ƒ  æ‰€ä»¥webpackè®¤ä¸ºè¿™ä¸ªä»£ç æ˜¯æ²¡æœ‰ç”¨çš„ã€‚   å¦‚ä½•è®©ä»–ä½œä¸ºä¸€ä¸ªlibraryæ¥è¿›è¡Œä¸€ä¸ªå¯¹å¤–çš„æ‰“åŒ…   è®©ä»£ç ä¸è¢« Webpack Tree shaking   é…ç½® library:&#x27;åŒ…çš„åå­—&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡éƒ½åº”è¯¥ä¸æ‰“åŒ…åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œè¿™é‡Œæ˜¯ä¸åŒçš„éƒ¨åˆ† - æˆ‘ä»¬éœ€è¦é€šè¿‡output.library é…ç½®é¡¹æš´éœ²ä»å…¥å£å¯¼å‡ºçš„å†…å®¹ã€‚<br>æˆ‘ä»¬æš´éœ²äº† webpackNumbers ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥é€šè¿‡ script æ ‡ç­¾ä½¿ç”¨ã€‚	</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://example.org/webpack-numbers.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> window.webpackNumbers.wordToNum(&#x27;Five&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œå®ƒåªèƒ½é€šè¿‡è¢« script æ ‡ç­¾å¼•ç”¨è€Œå‘æŒ¥ä½œç”¨ï¼Œå®ƒä¸èƒ½è¿è¡Œåœ¨ CommonJSã€AMDã€Node.js ç­‰ç¯å¢ƒä¸­ã€‚<br>ä½œä¸ºä¸€ä¸ªåº“ä½œè€…ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒèƒ½å¤Ÿå…¼å®¹ä¸åŒçš„ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·åº”è¯¥èƒ½å¤Ÿé€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨æ‰“åŒ…åçš„åº“ï¼š<br>CommonJS module require:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const webpackNumbers = require(&#x27;webpack-numbers&#x27;);</span><br><span class="line">// ...</span><br><span class="line">webpackNumbers.wordToNum(&#x27;Two&#x27;);</span><br></pre></td></tr></table></figure>
<p>AMD module require:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">require([&#x27;webpackNumbers&#x27;], function (webpackNumbers) &#123;</span><br><span class="line"> // ...</span><br><span class="line"> webpackNumbers.wordToNum(&#x27;Two&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>script tag:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">...</span><br><span class="line"> &lt;script src=&quot;https://example.org/webpack-numbers.js&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> &lt;script&gt;</span><br><span class="line">  // ...</span><br><span class="line">  // Global variable</span><br><span class="line">  webpackNumbers.wordToNum(&#x27;Five&#x27;);</span><br><span class="line">  // Property in the window object</span><br><span class="line">  window.webpackNumbers.wordToNum(&#x27;Five&#x27;);</span><br><span class="line">  // ...</span><br><span class="line"> &lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ›´æ–° output.library é…ç½®é¡¹ï¼Œå°†å…¶ type è®¾ç½®ä¸º â€˜umdâ€™ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> output: &#123;</span><br><span class="line">  path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">  filename: &#x27;webpack-numbers.js&#x27;,</span><br><span class="line">  library: &#123;</span><br><span class="line">   name: &#x27;webpackNumbers&#x27;,</span><br><span class="line">   type: &#x27;umd&#x27;,   //  window&#x27;(es module)   &#x27;commonjs&#x27;   &#x27;module&#x27; å®ƒåœ¨experiments:&#123;outputModule:true&#125;æ‰èƒ½ä½¿ç”¨ï¼Œä»–æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„åŠŸèƒ½ï¼Œå°±ä¸éœ€è¦è¿™ä¸ªnameäº†ã€‚&lt;script type=&quot;module&quot;&gt;    &#x27;umd&#x27;æ”¯æŒæ‰€æœ‰çš„ç±»å‹ã€‚  esmodule æœ‰é—®é¢˜</span><br><span class="line">  &#125;,</span><br><span class="line">  globalObject:&#x27;globalThis&#x27;    //éœ€è¦å…¨å±€çš„thisæ¥å»  ä»£æ›¿self   å¦åˆ™æµè§ˆå™¨ä¼šself  undefinedæŠ¥é”™</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ webpack å°†æ‰“åŒ…ä¸€ä¸ªåº“ï¼Œå…¶å¯ä»¥ä¸ CommonJSã€AMD ä»¥åŠ script æ ‡ç­¾ä½¿ç”¨</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/10/31/webpack/webpack%E5%88%9B%E5%BB%BAlibrary/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpack proxyå·¥ä½œåŸç†">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/10/26/webpack/webpack-proxy%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/">webpack proxyå·¥ä½œåŸç†</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-10-26
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><p><code>webpack proxy</code>ï¼Œå³<code>webpack</code>æä¾›çš„ä»£ç†æœåŠ¡</p>
<p>åŸºæœ¬è¡Œä¸ºå°±æ˜¯æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚åè½¬å‘ç»™å…¶ä»–æœåŠ¡å™¨</p>
<p>å…¶ç›®çš„æ˜¯ä¸ºäº†ä¾¿äºå¼€å‘è€…åœ¨å¼€å‘æ¨¡å¼ä¸‹è§£å†³è·¨åŸŸé—®é¢˜ï¼ˆæµè§ˆå™¨å®‰å…¨ç­–ç•¥é™åˆ¶ï¼‰</p>
<p>æƒ³è¦å®ç°ä»£ç†é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸­é—´æœåŠ¡å™¨ï¼Œ<code>webpack</code>ä¸­æä¾›æœåŠ¡å™¨çš„å·¥å…·ä¸º<code>webpack-dev-server</code></p>
<h4 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h4><p><code>webpack-dev-server</code>æ˜¯ <code>webpack</code> å®˜æ–¹æ¨å‡ºçš„ä¸€æ¬¾å¼€å‘å·¥å…·ï¼Œå°†è‡ªåŠ¨ç¼–è¯‘å’Œè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ç­‰ä¸€ç³»åˆ—å¯¹å¼€å‘å‹å¥½çš„åŠŸèƒ½å…¨éƒ¨é›†æˆåœ¨äº†ä¸€èµ·</p>
<p>ç›®çš„æ˜¯ä¸ºäº†æé«˜å¼€å‘è€…æ—¥å¸¸çš„å¼€å‘æ•ˆç‡ï¼Œ<strong>åªé€‚ç”¨åœ¨å¼€å‘é˜¶æ®µ</strong></p>
<p>å…³äºé…ç½®æ–¹é¢ï¼Œåœ¨<code>webpack</code>é…ç½®å¯¹è±¡å±æ€§ä¸­é€šè¿‡<code>devServer</code>å±æ€§æä¾›ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">contentBase</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">compress</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">port</span>: <span class="number">9000</span>,</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;https://api.github.com&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>devServetr</code>é‡Œé¢<code>proxy</code>åˆ™æ˜¯å…³äºä»£ç†çš„é…ç½®ï¼Œè¯¥å±æ€§ä¸ºå¯¹è±¡çš„å½¢å¼ï¼Œå¯¹è±¡ä¸­æ¯ä¸€ä¸ªå±æ€§å°±æ˜¯ä¸€ä¸ªä»£ç†çš„è§„åˆ™åŒ¹é…</p>
<p>å±æ€§çš„åç§°æ˜¯éœ€è¦è¢«ä»£ç†çš„è¯·æ±‚è·¯å¾„å‰ç¼€ï¼Œä¸€èˆ¬ä¸ºäº†è¾¨åˆ«éƒ½ä¼šè®¾ç½®å‰ç¼€ä¸º<code>/api</code>ï¼Œå€¼ä¸ºå¯¹åº”çš„ä»£ç†åŒ¹é…è§„åˆ™ï¼Œå¯¹åº”å¦‚ä¸‹ï¼š</p>
<ul>
<li>targetï¼šè¡¨ç¤ºçš„æ˜¯ä»£ç†åˆ°çš„ç›®æ ‡åœ°å€</li>
<li>pathRewriteï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ &#x2F;api-hy ä¹Ÿä¼šè¢«å†™å…¥åˆ°URLä¸­ï¼Œå¦‚æœå¸Œæœ›åˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨pathRewrite</li>
<li>secureï¼šé»˜è®¤æƒ…å†µä¸‹ä¸æ¥æ”¶è½¬å‘åˆ°httpsçš„æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœå¸Œæœ›æ”¯æŒï¼Œå¯ä»¥è®¾ç½®ä¸ºfalse</li>
<li>changeOriginï¼šå®ƒè¡¨ç¤ºæ˜¯å¦æ›´æ–°ä»£ç†åè¯·æ±‚çš„ headers ä¸­hoståœ°å€</li>
</ul>
<h2 id="äºŒã€å·¥ä½œåŸç†"><a href="#äºŒã€å·¥ä½œåŸç†" class="headerlink" title="äºŒã€å·¥ä½œåŸç†"></a>äºŒã€å·¥ä½œåŸç†</h2><p><code>proxy</code>å·¥ä½œåŸç†å®è´¨ä¸Šæ˜¯åˆ©ç”¨<code>http-proxy-middleware</code> è¿™ä¸ª<code>http</code>ä»£ç†ä¸­é—´ä»¶ï¼Œå®ç°è¯·æ±‚è½¬å‘ç»™å…¶ä»–æœåŠ¡å™¨</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>åœ¨å¼€å‘é˜¶æ®µï¼Œæœ¬åœ°åœ°å€ä¸º<code>http://localhost:3000</code>ï¼Œè¯¥æµè§ˆå™¨å‘é€ä¸€ä¸ªå‰ç¼€å¸¦æœ‰<code>/api</code>æ ‡è¯†çš„è¯·æ±‚åˆ°æœåŠ¡ç«¯è·å–æ•°æ®ï¼Œä½†å“åº”è¿™ä¸ªè¯·æ±‚çš„æœåŠ¡å™¨åªæ˜¯å°†è¯·æ±‚è½¬å‘åˆ°å¦ä¸€å°æœåŠ¡å™¨ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, <span class="title function_">proxy</span>(&#123;<span class="attr">target</span>: <span class="string">&#x27;http://www.example.org&#x27;</span>, <span class="attr">changeOrigin</span>: <span class="literal">true</span>&#125;));</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://localhost:3000/api/foo/bar -&gt; http://www.example.org/api/foo/bar</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€è·¨åŸŸ"><a href="#ä¸‰ã€è·¨åŸŸ" class="headerlink" title="ä¸‰ã€è·¨åŸŸ"></a>ä¸‰ã€è·¨åŸŸ</h2><p>åœ¨å¼€å‘é˜¶æ®µï¼Œ <code>webpack-dev-server</code> ä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åº”ç”¨åœ¨å¼€å‘é˜¶æ®µæ˜¯ç‹¬ç«‹è¿è¡Œåœ¨ <code>localhost</code>çš„ä¸€ä¸ªç«¯å£ä¸Šï¼Œè€Œåç«¯æœåŠ¡åˆæ˜¯è¿è¡Œåœ¨å¦å¤–ä¸€ä¸ªåœ°å€ä¸Š</p>
<p>æ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µä¸­ï¼Œç”±äºæµè§ˆå™¨åŒæºç­–ç•¥çš„åŸå› ï¼Œå½“æœ¬åœ°è®¿é—®åç«¯å°±ä¼šå‡ºç°è·¨åŸŸè¯·æ±‚çš„é—®é¢˜</p>
<p>é€šè¿‡è®¾ç½®<code>webpack proxy</code>å®ç°ä»£ç†è¯·æ±‚åï¼Œç›¸å½“äºæµè§ˆå™¨ä¸æœåŠ¡ç«¯ä¸­æ·»åŠ ä¸€ä¸ªä»£ç†è€…</p>
<p>å½“æœ¬åœ°å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä»£ç†æœåŠ¡å™¨å“åº”è¯¥è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œç›®æ ‡æœåŠ¡å™¨å“åº”æ•°æ®åå†å°†æ•°æ®è¿”å›ç»™ä»£ç†æœåŠ¡å™¨ï¼Œæœ€ç»ˆå†ç”±ä»£ç†æœåŠ¡å™¨å°†æ•°æ®å“åº”ç»™æœ¬åœ°</p>
<p><img src="https://static.vue-js.com/65b5e5c0-ace5-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>åœ¨ä»£ç†æœåŠ¡å™¨ä¼ é€’æ•°æ®ç»™æœ¬åœ°æµè§ˆå™¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸¤è€…åŒæºï¼Œå¹¶ä¸å­˜åœ¨è·¨åŸŸè¡Œä¸ºï¼Œè¿™æ—¶å€™æµè§ˆå™¨å°±èƒ½æ­£å¸¸æ¥æ”¶æ•°æ®</p>
<p>æ³¨æ„ï¼š<strong>æœåŠ¡å™¨ä¸æœåŠ¡å™¨ä¹‹é—´è¯·æ±‚æ•°æ®å¹¶ä¸ä¼šå­˜åœ¨è·¨åŸŸè¡Œä¸ºï¼Œè·¨åŸŸè¡Œä¸ºæ˜¯æµè§ˆå™¨å®‰å…¨ç­–ç•¥é™åˆ¶</strong></p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/10/26/webpack/webpack-proxy%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/">Read More</a>
    </footer>
</div>



<ul class="cube-pagination cube-pagination-9">
    
    <li class="cube-pagination-prev">
        <a href="/page/4/">Â« Prev</a>
    </li>
    
    
        
                <li class="cube-pagination-index">
                    <a href="/">1</a>
                </li>
                <li class="cube-pagination-ellipses">
                    <span>...</span>
                </li>
            
                
                <li class="cube-pagination-index">
                    <a href="/page/4">4</a>
                </li>
                
            
                
                <li class="cube-pagination-index disabled">
                    <span>5</span>
                </li>
                
            
                
                <li class="cube-pagination-index">
                    <a href="/page/6">6</a>
                </li>
                
            
                <li class="cube-pagination-ellipses">
                    <span>...</span>
                </li>
                <li class="cube-pagination-index">
                    <a href="/page/19">19</a>
                </li>
        
    

    
    <li class="cube-pagination-next">
        <a href="/page/6/">Next Â»</a>
    </li>
    
</ul>

<!--å…¶ä»–ç»„ä»¶åç»­æ·»åŠ -->
        </div>
        <div class="cube-right">
            

<div class="cube-search cube-sidebar" id="cube-search">
    <div class="search-container">
        <input type="text" placeholder="Search" class="cube-search-input" id="cube-search-input">
        <i class="cube-icon cube-icon-search cube-search-submit" aria-hidden="true"></i>
    </div>
    <!-- TODO é€šè¿‡ç»™windowèµ‹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé€šè¿‡è„šæœ¬èµ‹å€¼ -->
</div>
<script>
    (function (window) {
        'use strict';
        window.searchModule = {}
        window.searchModule.JSONUrl = '/content.json'
        window.searchModule.rootUrl = '/'
    })(window)
</script>
<div class="cube-search-form">
    <div class="cube-search-control">
        <input type="text" placeholder="Search" class="search-input">
        <a class="close-button">
            <i class="cube-icon cube-close" aria-hidden="true"></i>
        </a>
    </div>
    <div class="cube-search-result"></div>
</div>


<div class="cube-author cube-sidebar" id="cube-author">
    
    
    <span>John Doe</span>
    
    
    <div class="count">
        <a class="count articles"><span>186</span>Article</a>
        <a class="count tags"><span>35</span>Tags</a>
        <a class="count categories"><span>23</span>Categories</a>
    </div>
</div>



<div class="cube-music cube-sidebar" id="cube-music">
    <div class="cube-player aplayer" id="cube-player"></div>
</div>
<script>
    (function (window) {
        window.musicModule = {}
        window.musicModule.musicConfig = '{"narrow":false,"autoplay":false,"showlrc":3,"theme":"#b7daff","mutex":true,"mode":"circulation","preload":"auto","listmaxheight":"513px","music":[{"title":"Dear friends","author":"TRIPLANE","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/TRIPLANE - Dear friends.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Dear friends - TRIPLANE.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/TRIPLANE - Dear friends.jpg"},{"title":"Butter-Fly","author":"å’Œç”°å…‰å¸","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³) - å’Œç”°å…‰å¸.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).jpg"},{"title":"å®µé—‡èŠ±ç«","author":"è‘‰æœˆã‚†ã‚‰","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/å®µé—‡èŠ±ç« - è‘‰æœˆã‚†ã‚‰.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.jpg"}]}'
        window.musicModule.lrcConfig = {
            open: 'Open Lyrics',
            close: 'Close Lyrics'
        }
    })(window)
</script>



<div class="cube-recent-posts cube-sidebar" id="cube-recent-posts">
    <div class="title">
        <a>Recent Posts</a>
    </div>
    <ul class="list">
        
        
        <li>
            <!-- TODO å¦‚æœæ–‡ç« è¦æ˜¾ç¤ºå›¾ç‰‡ï¼Œé‚£ä¹ˆåœ¨front-matterä¸Šæ·»åŠ previewå±æ€§(url or path) -->
            
            <div class="normal">
                <p class="index first">
                    <span>1</span>
                </p>
                <p class="title">
                    <a href="/2022/08/25/Js%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="å˜é‡ç±»å‹">å˜é‡ç±»å‹</a>
                </p>
            </div>
            
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>2</span>
                </p>
                <p class="title">
                    <a href="/2022/06/09/html+css+js+ts/3-js%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C%E5%AE%9E%E4%BE%8B/" title="js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹">js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>3</span>
                </p>
                <p class="title">
                    <a href="/2022/05/28/html+css+js+ts/1-%E9%9F%B3%E8%A7%86%E9%A2%91/" title="html-åŸç”ŸéŸ³è§†é¢‘">html-åŸç”ŸéŸ³è§†é¢‘</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>4</span>
                </p>
                <p class="title">
                    <a href="/2022/04/25/http/DNS%E5%8D%8F%E8%AE%AE/" title="DNSåè®®">DNSåè®®</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>5</span>
                </p>
                <p class="title">
                    <a href="/2022/04/17/html+css+js+ts/4-%E8%A3%85%E9%A5%B0%E5%99%A8/" title="ES6 è£…é¥°å™¨">ES6 è£…é¥°å™¨</a>
                </p>
            </div>
        </li>
        
        
    </ul>
</div>



<div class="cube-categories cube-sidebar" id="cube-categories">
    <div class="title">
        <a href="/categories">Categories</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/categories/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/React/">#React</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">#æ•°æ®å¯è§†åŒ–</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">#æ¶æ„æ¨¡å¼</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%9F%B3%E8%A7%86%E9%A2%91/">#éŸ³è§†é¢‘</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%97%AE%E9%A2%98/">#é—®é¢˜</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/">#åç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">#å‰ç«¯å·¥ç¨‹åŒ–</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%B7%A5%E5%85%B7/">#å·¥å…·</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">#å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">#æ•°æ®åº“</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/liunx/">#liunx</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-tagcloud cube-sidebar" id="cube-tagcloud">
    <div class="title">
        <a href="/tags">Tagcloud</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box-bg ">
            <a href="/tags/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vue/">#vue</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/React/">#React</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Redux/">#Redux</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/echart/">#echart</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vue3/">#vue3</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/react/">#react</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/html/">#html</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/xml/">#xml</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/css/">#css</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Promise/">#Promise</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/es6/">#es6</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/typescript/">#typescript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/async-await/">#async/await</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nodejs/">#nodejs</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/python/">#python</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/glup/">#glup</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/webpack/">#webpack</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/git/">#git</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Mock/">#Mock</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/eslint/">#eslint</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/RESTful/">#RESTful</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/hexo/">#hexo</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vs-code/">#vs code</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E4%BC%98%E5%8C%96/">#ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mongodb/">#mongodb</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mysql/">#mysql</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nginx/">#nginx</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-links cube-sidebar" id="cube-links">
    <div class="title">
        <a>Links</a>
    </div>
    <ul class="list">
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/GitHub.png">
            
            <a href="https://github.com/ZEROKISEKI" target="_blank">GitHub</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/Coding.png">
            
            <a href="https://coding.net/u/SORA1" target="_blank">Coding</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/SF.png">
            
            <a href="https://segmentfault.com/u/aonosora" target="_blank">SFç¤¾åŒº</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/å¼€å‘è€…å¤´æ¡.png">
            
            <a href="https://toutiao.io/u/148070" target="_blank">å¼€å‘è€…å¤´æ¡</a>
        </li>
        
    </ul>
</div>



<div class="cube-friend-links cube-sidebar" id="cube-friend-links">
    <div class="title">
        <a>Friend Links</a>
    </div>
    <ul class="list">
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/micblo.png">
            <a href="https://blog.micblo.com/" target="_blank">ç½—å¤§ä½¬</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/DIYgod.jpg">
            <a href="https://www.anotherhome.net/" target="_blank">DIYgod</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="/images/friend_links.jpg ">
            <a href="https://aonosora.com/" target="_blank">å’ªè¥¿è¥¿ã®éƒ¨è½æ ¼</a>
        </li>
        
    </ul>
</div>


        </div>
    </div>
</div>
<footer class="cube-footer">
    
Â© 2017 John Doe

<br>
Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
</footer>
<!-- inject:script -->
<script src="/js/script.js"></script>
<!-- endinject -->
<div class="cube-loading out"></div>
</body>
</html>