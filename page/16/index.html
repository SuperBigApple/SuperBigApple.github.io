<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="John Doe">
    
    
    
    
    
    
    <title>Hexo</title>
    <!-- inject:style -->
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <!-- endinject -->
    <style>
        .cube-loading {
            top: 0;
            position: fixed;
            width: 100%;
            height: 100%;
            background: url('/images/lg/loading.gif') no-repeat center center;
            background-color: rgba(0,0,0,.7);
        }

        .cube-loading.out {
            display: none;
        }

        .cube-loading:before {
            display: block;
            content: 'Loading';
            position: relative;
            width: 100%;
            top: 50%;
            right: -50%;
            color: #fff;
        }

        @media(max-width: 768px) {
            .cube-loading:before {
                font-size: 1.2em;
                transform: translate(-24px,20px);
                -webkit-transform: translate(-24px,20px);
                -o-transform: translate(-24px,20px);
                -ms-transform: translate(-24px,20px);
            }
        }

        @media(min-width: 768px) {
            .cube-loading:before {

            }
        }
    </style>
    
<meta name="generator" content="Hexo 6.2.0"></head>
<body>
<div class="cube-body">
    <nav id="cube-top-memu" class="cube-menu">
    <ul class="cube-menu-collapse">
        
        <li>
            <i class="cube-icon cube-icon-home" aria-hidden="true"></i>
            <a href="/">é¦–é¡µ</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-archive" aria-hidden="true"></i>
            <a href="/archives">å½’æ¡£</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-categories" aria-hidden="true"></i>
            <a href="/categories">åˆ†ç±»</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-tags" aria-hidden="true"></i>
            <a href="/tags">æ ‡ç­¾</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-about" aria-hidden="true"></i>
            <a href="/about-me">å…³äºæˆ‘</a>
        </li>
        
    </ul>
</nav>
<nav class="cube-side-menu" id="cube-side-menu">
    <ul class="cube-menu-list">
        
        <li>
            <a class="lrc-control">Open Lyrics</a>
        </li>
        
        <li>
            <a class="scroll-to-top">Top</a>
        </li>
    </ul>
</nav>
    <header class="cube-header" id="cube-header">
    <img src=" https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2 " alt="å¤´éƒ¨èƒŒæ™¯å›¾ç‰‡">
    
    <div class="cube-type">
        <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
        <span class="cube-typed-cursor">|</span>
    </div>
    
</header>

    <style>
        nav.cube-menu:before {
            content: '';
            visibility: hidden;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 44px;
        
            filter: blur(5px);
            -webkit-filter: blur(5px);
        
            z-index: -1;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-repeat: no-repeat;
            background-position: center -356px;
            background-size: cover;
            background-color: transparent;
        }

        header.cube-background.cube-header-background {
            visibility: hidden;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-position: center -400px;
        }
    </style>
    <header class="cube-background cube-header-background">
        
        <div class="cube-type">
            <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
            <span class="cube-typed-cursor">|</span>
        </div>
        
    </header>
    <div class="load-header-background"></div>
    <script>
        (function (window) {

            window.headerModule = {}
            window.headerModule.image = {
                width: '2000',
                height: '1414'
            }

        })(window)
    </script>
    
    <div class="cube-content">
        <div class="cube-left">
            
<div class="cube-excerpt" id="cube-excerpt-SPAé¦–å±åŠ è½½ä¼˜åŒ–">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/06/15/Vue/SPA%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/">SPAé¦–å±åŠ è½½ä¼˜åŒ–</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-06-15
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h1 id="é¢è¯•å®˜ï¼šSPAé¦–å±åŠ è½½é€Ÿåº¦æ…¢çš„æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#é¢è¯•å®˜ï¼šSPAé¦–å±åŠ è½½é€Ÿåº¦æ…¢çš„æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="é¢è¯•å®˜ï¼šSPAé¦–å±åŠ è½½é€Ÿåº¦æ…¢çš„æ€ä¹ˆè§£å†³ï¼Ÿ"></a>é¢è¯•å®˜ï¼šSPAé¦–å±åŠ è½½é€Ÿåº¦æ…¢çš„æ€ä¹ˆè§£å†³ï¼Ÿ</h1><p><img src="https://static.vue-js.com/24617c00-3acc-11eb-ab90-d9ae814b240d.png" alt="image.png"></p>
<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯é¦–å±åŠ è½½"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯é¦–å±åŠ è½½" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯é¦–å±åŠ è½½"></a>ä¸€ã€ä»€ä¹ˆæ˜¯é¦–å±åŠ è½½</h2><p>é¦–å±æ—¶é—´ï¼ˆFirst Contentful Paintï¼‰ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨ä»å“åº”ç”¨æˆ·è¾“å…¥ç½‘å€åœ°å€ï¼Œåˆ°é¦–å±å†…å®¹æ¸²æŸ“å®Œæˆçš„æ—¶é—´ï¼Œæ­¤æ—¶æ•´ä¸ªç½‘é¡µä¸ä¸€å®šè¦å…¨éƒ¨æ¸²æŸ“å®Œæˆï¼Œä½†éœ€è¦å±•ç¤ºå½“å‰è§†çª—éœ€è¦çš„å†…å®¹</p>
<p>é¦–å±åŠ è½½å¯ä»¥è¯´æ˜¯ç”¨æˆ·ä½“éªŒä¸­<strong>æœ€é‡è¦</strong>çš„ç¯èŠ‚</p>
<h3 id="å…³äºè®¡ç®—é¦–å±æ—¶é—´"><a href="#å…³äºè®¡ç®—é¦–å±æ—¶é—´" class="headerlink" title="å…³äºè®¡ç®—é¦–å±æ—¶é—´"></a>å…³äºè®¡ç®—é¦–å±æ—¶é—´</h3><p>åˆ©ç”¨<code>performance.timing</code>æä¾›çš„æ•°æ®ï¼š</p>
<p><img src="https://static.vue-js.com/2e2491a0-3acc-11eb-85f6-6fac77c0c9b3.png" alt="image.png"></p>
<p>é€šè¿‡<code>DOMContentLoad</code>æˆ–è€…<code>performance</code>æ¥è®¡ç®—å‡ºé¦–å±æ—¶é—´</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ¡ˆä¸€ï¼š</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;first contentful painting&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// æ–¹æ¡ˆäºŒï¼š</span></span><br><span class="line">performance.<span class="title function_">getEntriesByName</span>(<span class="string">&quot;first-contentful-paint&quot;</span>)[<span class="number">0</span>].<span class="property">startTime</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// performance.getEntriesByName(&quot;first-contentful-paint&quot;)[0]</span></span><br><span class="line"><span class="comment">// ä¼šè¿”å›ä¸€ä¸ª PerformancePaintTimingçš„å®ä¾‹ï¼Œç»“æ„å¦‚ä¸‹ï¼š</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;first-contentful-paint&quot;</span>,</span><br><span class="line">  <span class="attr">entryType</span>: <span class="string">&quot;paint&quot;</span>,</span><br><span class="line">  <span class="attr">startTime</span>: <span class="number">507.80000002123415</span>,</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">0</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="äºŒã€åŠ è½½æ…¢çš„åŸå› "><a href="#äºŒã€åŠ è½½æ…¢çš„åŸå› " class="headerlink" title="äºŒã€åŠ è½½æ…¢çš„åŸå› "></a>äºŒã€åŠ è½½æ…¢çš„åŸå› </h2><p>åœ¨é¡µé¢æ¸²æŸ“çš„è¿‡ç¨‹ï¼Œå¯¼è‡´åŠ è½½é€Ÿåº¦æ…¢çš„å› ç´ å¯èƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç½‘ç»œå»¶æ—¶é—®é¢˜</li>
<li>èµ„æºæ–‡ä»¶ä½“ç§¯æ˜¯å¦è¿‡å¤§</li>
<li>èµ„æºæ˜¯å¦é‡å¤å‘é€è¯·æ±‚å»åŠ è½½äº†</li>
<li>åŠ è½½è„šæœ¬çš„æ—¶å€™ï¼Œæ¸²æŸ“å†…å®¹å µå¡äº†</li>
</ul>
<h2 id="ä¸‰ã€è§£å†³æ–¹æ¡ˆ"><a href="#ä¸‰ã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€è§£å†³æ–¹æ¡ˆ"></a>ä¸‰ã€è§£å†³æ–¹æ¡ˆ</h2><p>å¸¸è§çš„å‡ ç§SPAé¦–å±ä¼˜åŒ–æ–¹å¼</p>
<ul>
<li>å‡å°å…¥å£æ–‡ä»¶ç§¯</li>
<li>é™æ€èµ„æºæœ¬åœ°ç¼“å­˜</li>
<li>UIæ¡†æ¶æŒ‰éœ€åŠ è½½</li>
<li>å›¾ç‰‡èµ„æºçš„å‹ç¼©</li>
<li>ç»„ä»¶é‡å¤æ‰“åŒ…</li>
<li>å¼€å¯GZipå‹ç¼©</li>
<li>ä½¿ç”¨SSR</li>
</ul>
<h3 id="å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯"><a href="#å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯" class="headerlink" title="å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯"></a>å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯</h3><p>å¸¸ç”¨çš„æ‰‹æ®µæ˜¯è·¯ç”±æ‡’åŠ è½½ï¼ŒæŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œå¾…è·¯ç”±è¢«è¯·æ±‚çš„æ—¶å€™ä¼šå•ç‹¬æ‰“åŒ…è·¯ç”±ï¼Œä½¿å¾—å…¥å£æ–‡ä»¶å˜å°ï¼ŒåŠ è½½é€Ÿåº¦å¤§å¤§å¢åŠ </p>
<p><img src="https://static.vue-js.com/486cee90-3acc-11eb-ab90-d9ae814b240d.png" alt="image.png"></p>
<p>åœ¨<code>vue-router</code>é…ç½®è·¯ç”±çš„æ—¶å€™ï¼Œé‡‡ç”¨åŠ¨æ€åŠ è½½è·¯ç”±çš„å½¢å¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[ </span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;Blogs&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ShowBlogs&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&#x27;./components/ShowBlogs.vue&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<p>ä»¥å‡½æ•°çš„å½¢å¼åŠ è½½è·¯ç”±ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠå„è‡ªçš„è·¯ç”±æ–‡ä»¶åˆ†åˆ«æ‰“åŒ…ï¼Œåªæœ‰åœ¨è§£æç»™å®šçš„è·¯ç”±æ—¶ï¼Œæ‰ä¼šåŠ è½½è·¯ç”±ç»„ä»¶</p>
<h3 id="é™æ€èµ„æºæœ¬åœ°ç¼“å­˜"><a href="#é™æ€èµ„æºæœ¬åœ°ç¼“å­˜" class="headerlink" title="é™æ€èµ„æºæœ¬åœ°ç¼“å­˜"></a>é™æ€èµ„æºæœ¬åœ°ç¼“å­˜</h3><p>åç«¯è¿”å›èµ„æºé—®é¢˜ï¼š</p>
<ul>
<li>é‡‡ç”¨<code>HTTP</code>ç¼“å­˜ï¼Œè®¾ç½®<code>Cache-Control</code>ï¼Œ<code>Last-Modified</code>ï¼Œ<code>Etag</code>ç­‰å“åº”å¤´</li>
<li>é‡‡ç”¨<code>Service Worker</code>ç¦»çº¿ç¼“å­˜</li>
</ul>
<p>å‰ç«¯åˆç†åˆ©ç”¨<code>localStorage</code></p>
<h3 id="UIæ¡†æ¶æŒ‰éœ€åŠ è½½"><a href="#UIæ¡†æ¶æŒ‰éœ€åŠ è½½" class="headerlink" title="UIæ¡†æ¶æŒ‰éœ€åŠ è½½"></a>UIæ¡†æ¶æŒ‰éœ€åŠ è½½</h3><p>åœ¨æ—¥å¸¸ä½¿ç”¨<code>UI</code>æ¡†æ¶ï¼Œä¾‹å¦‚<code>element-UI</code>ã€æˆ–è€…<code>antd</code>ï¼Œæˆ‘ä»¬ç»å¸¸æ€§ç›´æ¥å¼•ç”¨æ•´ä¸ª<code>UI</code>åº“</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>)</span><br></pre></td></tr></table></figure>



<p>ä½†å®é™…ä¸Šæˆ‘ç”¨åˆ°çš„ç»„ä»¶åªæœ‰æŒ‰é’®ï¼Œåˆ†é¡µï¼Œè¡¨æ ¼ï¼Œè¾“å…¥ä¸è­¦å‘Š æ‰€ä»¥æˆ‘ä»¬è¦æŒ‰éœ€å¼•ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Input</span>, <span class="title class_">Pagination</span>, <span class="title class_">Table</span>, <span class="title class_">TableColumn</span>, <span class="title class_">MessageBox</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Button</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Input</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Pagination</span>)</span><br></pre></td></tr></table></figure>



<h3 id="ç»„ä»¶é‡å¤æ‰“åŒ…"><a href="#ç»„ä»¶é‡å¤æ‰“åŒ…" class="headerlink" title="ç»„ä»¶é‡å¤æ‰“åŒ…"></a>ç»„ä»¶é‡å¤æ‰“åŒ…</h3><p>å‡è®¾<code>A.js</code>æ–‡ä»¶æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„åº“ï¼Œç°åœ¨æœ‰å¤šä¸ªè·¯ç”±ä½¿ç”¨äº†<code>A.js</code>æ–‡ä»¶ï¼Œè¿™å°±é€ æˆäº†é‡å¤ä¸‹è½½</p>
<p>è§£å†³æ–¹æ¡ˆï¼šåœ¨<code>webpack</code>çš„<code>config</code>æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹<code>CommonsChunkPlugin</code>çš„é…ç½®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">minChunks</span>: <span class="number">3</span></span><br></pre></td></tr></table></figure>



<p><code>minChunks</code>ä¸º3è¡¨ç¤ºä¼šæŠŠä½¿ç”¨3æ¬¡åŠä»¥ä¸Šçš„åŒ…æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾è¿›å…¬å…±ä¾èµ–æ–‡ä»¶ï¼Œé¿å…äº†é‡å¤åŠ è½½ç»„ä»¶</p>
<h3 id="å›¾ç‰‡èµ„æºçš„å‹ç¼©"><a href="#å›¾ç‰‡èµ„æºçš„å‹ç¼©" class="headerlink" title="å›¾ç‰‡èµ„æºçš„å‹ç¼©"></a>å›¾ç‰‡èµ„æºçš„å‹ç¼©</h3><p>å›¾ç‰‡èµ„æºè™½ç„¶ä¸åœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œä½†å®ƒå´æ˜¯å¯¹é¡µé¢æ€§èƒ½å½±å“æœ€å¤§çš„å› ç´ </p>
<p>å¯¹äºæ‰€æœ‰çš„å›¾ç‰‡èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œé€‚å½“çš„å‹ç¼©</p>
<p>å¯¹é¡µé¢ä¸Šä½¿ç”¨åˆ°çš„<code>icon</code>ï¼Œå¯ä»¥ä½¿ç”¨åœ¨çº¿å­—ä½“å›¾æ ‡ï¼Œæˆ–è€…é›ªç¢§å›¾ï¼Œå°†ä¼—å¤šå°å›¾æ ‡åˆå¹¶åˆ°åŒä¸€å¼ å›¾ä¸Šï¼Œç”¨ä»¥å‡è½»<code>http</code>è¯·æ±‚å‹åŠ›ã€‚</p>
<h3 id="å¼€å¯GZipå‹ç¼©"><a href="#å¼€å¯GZipå‹ç¼©" class="headerlink" title="å¼€å¯GZipå‹ç¼©"></a>å¼€å¯GZipå‹ç¼©</h3><p>æ‹†å®ŒåŒ…ä¹‹åï¼Œæˆ‘ä»¬å†ç”¨<code>gzip</code>åšä¸€ä¸‹å‹ç¼© å®‰è£…<code>compression-webpack-plugin</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnmp i compression-webpack-plugin -D</span><br></pre></td></tr></table></figure>



<p>åœ¨<code>vue.congig.js</code>ä¸­å¼•å…¥å¹¶ä¿®æ”¹<code>webpack</code>é…ç½®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CompressionPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;compression-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="attr">configureWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®...</span></span><br><span class="line">            config.<span class="property">mode</span> = <span class="string">&#x27;production&#x27;</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">CompressionPlugin</span>(&#123;</span><br><span class="line">                    <span class="attr">test</span>: <span class="regexp">/\.js$|\.html$|\.css/</span>, <span class="comment">//åŒ¹é…æ–‡ä»¶å</span></span><br><span class="line">                    <span class="attr">threshold</span>: <span class="number">10240</span>, <span class="comment">//å¯¹è¶…è¿‡10kçš„æ•°æ®è¿›è¡Œå‹ç¼©</span></span><br><span class="line">                    <span class="attr">deleteOriginalAssets</span>: <span class="literal">false</span> <span class="comment">//æ˜¯å¦åˆ é™¤åŸæ–‡ä»¶</span></span><br><span class="line">                &#125;)]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>



<p>åœ¨æœåŠ¡å™¨æˆ‘ä»¬ä¹Ÿè¦åšç›¸åº”çš„é…ç½® å¦‚æœå‘é€è¯·æ±‚çš„æµè§ˆå™¨æ”¯æŒ<code>gzip</code>ï¼Œå°±å‘é€ç»™å®ƒ<code>gzip</code>æ ¼å¼çš„æ–‡ä»¶ æˆ‘çš„æœåŠ¡å™¨æ˜¯ç”¨<code>express</code>æ¡†æ¶æ­å»ºçš„ åªè¦å®‰è£…ä¸€ä¸‹<code>compression</code>å°±èƒ½ä½¿ç”¨</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const compression = require(&#x27;compression&#x27;)</span><br><span class="line">app.use(compression())  // åœ¨å…¶ä»–ä¸­é—´ä»¶ä½¿ç”¨ä¹‹å‰è°ƒç”¨</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨SSR"><a href="#ä½¿ç”¨SSR" class="headerlink" title="ä½¿ç”¨SSR"></a>ä½¿ç”¨SSR</h3><p>SSRï¼ˆServer side ï¼‰ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œç»„ä»¶æˆ–é¡µé¢é€šè¿‡æœåŠ¡å™¨ç”Ÿæˆhtmlå­—ç¬¦ä¸²ï¼Œå†å‘é€åˆ°æµè§ˆå™¨</p>
<p>ä»å¤´æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“æ˜¯å¾ˆå¤æ‚çš„ï¼Œ<code>vue</code>åº”ç”¨å»ºè®®ä½¿ç”¨<code>Nuxt.js</code>å®ç°æœåŠ¡ç«¯æ¸²æŸ“</p>
<h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><p>å‡å°‘é¦–å±æ¸²æŸ“æ—¶é—´çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ€»çš„æ¥è®²å¯ä»¥åˆ†æˆä¸¤å¤§éƒ¨åˆ† ï¼šèµ„æºåŠ è½½ä¼˜åŒ– å’Œ é¡µé¢æ¸²æŸ“ä¼˜åŒ–</p>
<p>ä¸‹å›¾æ˜¯æ›´ä¸ºå…¨é¢çš„é¦–å±ä¼˜åŒ–çš„æ–¹æ¡ˆ</p>
<p><img src="https://static.vue-js.com/4fafe900-3acc-11eb-85f6-6fac77c0c9b3.png" alt="image.png"></p>
<p>å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®çš„æƒ…å†µé€‰æ‹©å„ç§æ–¹å¼è¿›è¡Œé¦–å±æ¸²æŸ“çš„ä¼˜åŒ–</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/06/15/Vue/SPA%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-Object.definePropertyè¯¦è§£">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/06/11/Vue/Object.defineProperty%E8%AF%A6%E8%A7%A3/">Object.definePropertyè¯¦è§£</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-06-11
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h2><p><strong>å…¼å®¹æ€§</strong></p>
<blockquote>
<p>åœ¨<code>ie8</code>ä¸‹åªèƒ½åœ¨<code>DOM</code>å¯¹è±¡ä¸Šä½¿ç”¨ï¼Œå°è¯•åœ¨åŸç”Ÿçš„å¯¹è±¡ä½¿ç”¨ <code>Object.defineProperty()</code>ä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<p>å®šä¹‰å¯¹è±¡å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æˆ–å­—é¢é‡çš„å½¢å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var obj = new Object;  //obj = &#123;&#125;</span><br><span class="line">obj.name = &quot;å¼ ä¸‰&quot;;  //æ·»åŠ æè¿°</span><br><span class="line">obj.say = function()&#123;&#125;;  //æ·»åŠ è¡Œä¸º</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é™¤äº†ä»¥ä¸Šæ·»åŠ å±æ€§çš„æ–¹å¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>Object.defineProperty</code>å®šä¹‰æ–°å±æ€§æˆ–ä¿®æ”¹åŸæœ‰çš„å±æ€§</p>
</blockquote>
<h2 id="äºŒã€Object-defineProperty"><a href="#äºŒã€Object-defineProperty" class="headerlink" title="äºŒã€Object.defineProperty()"></a>äºŒã€Object.defineProperty()</h2><h3 id="2-1-å®šä¹‰"><a href="#2-1-å®šä¹‰" class="headerlink" title="2.1 å®šä¹‰"></a>2.1 å®šä¹‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(obj, prop, descriptor)</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>obj</code>ï¼šå¿…éœ€ã€‚ç›®æ ‡å¯¹è±¡</li>
<li><code>prop</code>ï¼šå¿…éœ€ã€‚éœ€å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åå­—</li>
<li><code>descriptor</code>ï¼šå¿…éœ€ã€‚ç›®æ ‡å±æ€§æ‰€æ‹¥æœ‰çš„ç‰¹æ€§</li>
</ul>
<blockquote>
<p>è¿”å›å€¼ï¼šä¼ å…¥å‡½æ•°çš„å¯¹è±¡ã€‚å³ç¬¬ä¸€ä¸ªå‚æ•°<code>obj</code></p>
</blockquote>
<ul>
<li>é’ˆå¯¹å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç»™è¿™ä¸ªå±æ€§è®¾ç½®ä¸€äº›ç‰¹æ€§ï¼Œæ¯”å¦‚æ˜¯å¦åªè¯»ä¸å¯ä»¥å†™ï¼›æ˜¯å¦å¯ä»¥è¢«<code>for..in</code>æˆ–<code>Object.keys()</code>éå†ã€‚</li>
</ul>
<p><strong>ç»™å¯¹è±¡çš„å±æ€§æ·»åŠ ç‰¹æ€§æè¿°ï¼Œç›®å‰æä¾›ä¸¤ç§å½¢å¼ï¼šæ•°æ®æè¿°å’Œå­˜å–å™¨æè¿°</strong></p>
<h3 id="2-2-æ•°æ®æè¿°"><a href="#2-2-æ•°æ®æè¿°" class="headerlink" title="2.2 æ•°æ®æè¿°"></a>2.2 æ•°æ®æè¿°</h3><blockquote>
<p>å½“ä¿®æ”¹æˆ–å®šä¹‰å¯¹è±¡çš„æŸä¸ªå±æ€§çš„æ—¶å€™ï¼Œç»™è¿™ä¸ªå±æ€§æ·»åŠ ä¸€äº›ç‰¹æ€§</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">    test:&quot;hello&quot;</span><br><span class="line">&#125;</span><br><span class="line">//å¯¹è±¡å·²æœ‰çš„å±æ€§æ·»åŠ ç‰¹æ€§æè¿°</span><br><span class="line">Object.defineProperty(obj,&quot;test&quot;,&#123;</span><br><span class="line">    configurable:true | false,</span><br><span class="line">    enumerable:true | false,</span><br><span class="line">    value:ä»»æ„ç±»å‹çš„å€¼,</span><br><span class="line">    writable:true | false</span><br><span class="line">&#125;);</span><br><span class="line">//å¯¹è±¡æ–°æ·»åŠ çš„å±æ€§çš„ç‰¹æ€§æè¿°</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    configurable:true | false,</span><br><span class="line">    enumerable:true | false,</span><br><span class="line">    value:ä»»æ„ç±»å‹çš„å€¼,</span><br><span class="line">    writable:true | false</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ•°æ®æè¿°ä¸­çš„å±æ€§éƒ½æ˜¯å¯é€‰çš„ï¼Œæ¥çœ‹ä¸€ä¸‹è®¾ç½®æ¯ä¸€ä¸ªå±æ€§çš„ä½œç”¨</p>
</blockquote>
<h4 id="2-2-1-value"><a href="#2-2-1-value" class="headerlink" title="2.2.1 value"></a>2.2.1 value</h4><blockquote>
<p>å±æ€§å¯¹åº”çš„å€¼,å¯ä»¥ä½¿ä»»æ„ç±»å‹çš„å€¼ï¼Œé»˜è®¤ä¸º<code>undefined</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;</span><br><span class="line">//ç¬¬ä¸€ç§æƒ…å†µï¼šä¸è®¾ç½®valueå±æ€§</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">console.log( obj.newKey );  //undefined</span><br><span class="line">------------------------------</span><br><span class="line">//ç¬¬äºŒç§æƒ…å†µï¼šè®¾ç½®valueå±æ€§</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;</span><br><span class="line">&#125;);</span><br><span class="line">console.log( obj.newKey );  //hello</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-writable"><a href="#2-2-2-writable" class="headerlink" title="2.2.2 writable"></a>2.2.2 writable</h4><blockquote>
<p>å±æ€§çš„å€¼æ˜¯å¦å¯ä»¥è¢«é‡å†™ã€‚è®¾ç½®ä¸º<code>true</code>å¯ä»¥è¢«é‡å†™ï¼›è®¾ç½®ä¸º<code>false</code>ï¼Œä¸èƒ½è¢«é‡å†™ã€‚é»˜è®¤ä¸º<code>false</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;</span><br><span class="line">//ç¬¬ä¸€ç§æƒ…å†µï¼šwritableè®¾ç½®ä¸ºfalseï¼Œä¸èƒ½é‡å†™ã€‚</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:false</span><br><span class="line">&#125;);</span><br><span class="line">//æ›´æ”¹newKeyçš„å€¼</span><br><span class="line">obj.newKey = &quot;change value&quot;;</span><br><span class="line">console.log( obj.newKey );  //hello</span><br><span class="line"></span><br><span class="line">//ç¬¬äºŒç§æƒ…å†µï¼šwritableè®¾ç½®ä¸ºtrueï¼Œå¯ä»¥é‡å†™</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:true</span><br><span class="line">&#125;);</span><br><span class="line">//æ›´æ”¹newKeyçš„å€¼</span><br><span class="line">obj.newKey = &quot;change value&quot;;</span><br><span class="line">console.log( obj.newKey );  //change value</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-enumerable"><a href="#2-2-3-enumerable" class="headerlink" title="2.2.3 enumerable"></a>2.2.3 enumerable</h4><blockquote>
<p>æ­¤å±æ€§æ˜¯å¦å¯ä»¥è¢«æšä¸¾ï¼ˆä½¿ç”¨<code>for...in</code>æˆ–<code>Object.keys()</code>ï¼‰ã€‚è®¾ç½®ä¸º<code>true</code>å¯ä»¥è¢«æšä¸¾ï¼›è®¾ç½®ä¸º<code>false</code>ï¼Œä¸èƒ½è¢«æšä¸¾ã€‚é»˜è®¤ä¸º<code>false</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;</span><br><span class="line">//ç¬¬ä¸€ç§æƒ…å†µï¼šenumerableè®¾ç½®ä¸ºfalseï¼Œä¸èƒ½è¢«æšä¸¾ã€‚</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:false,</span><br><span class="line">    enumerable:false</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//æšä¸¾å¯¹è±¡çš„å±æ€§</span><br><span class="line">for( var attr in obj )&#123;</span><br><span class="line">    console.log( attr );  </span><br><span class="line">&#125;</span><br><span class="line">//ç¬¬äºŒç§æƒ…å†µï¼šenumerableè®¾ç½®ä¸ºtrueï¼Œå¯ä»¥è¢«æšä¸¾ã€‚</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:false,</span><br><span class="line">    enumerable:true</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//æšä¸¾å¯¹è±¡çš„å±æ€§</span><br><span class="line">for( var attr in obj )&#123;</span><br><span class="line">    console.log( attr );  //newKey</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-4-configurable"><a href="#2-2-4-configurable" class="headerlink" title="2.2.4 configurable"></a>2.2.4 configurable</h4><blockquote>
<p>æ˜¯å¦å¯ä»¥åˆ é™¤ç›®æ ‡å±æ€§æˆ–æ˜¯å¦å¯ä»¥å†æ¬¡ä¿®æ”¹å±æ€§çš„ç‰¹æ€§ï¼ˆ<code>writable</code>, <code>configurable</code>, <code>enumerable</code>ï¼‰ã€‚è®¾ç½®ä¸º<code>true</code>å¯ä»¥è¢«åˆ é™¤æˆ–å¯ä»¥é‡æ–°è®¾ç½®ç‰¹æ€§ï¼›è®¾ç½®ä¸º<code>false</code>ï¼Œä¸èƒ½è¢«å¯ä»¥è¢«åˆ é™¤æˆ–ä¸å¯ä»¥é‡æ–°è®¾ç½®ç‰¹æ€§ã€‚é»˜è®¤ä¸º<code>false</code></p>
</blockquote>
<p><strong>è¿™ä¸ªå±æ€§èµ·åˆ°ä¸¤ä¸ªä½œç”¨</strong></p>
<ul>
<li>ç›®æ ‡å±æ€§æ˜¯å¦å¯ä»¥ä½¿ç”¨<code>delete</code>åˆ é™¤</li>
<li>ç›®æ ‡å±æ€§æ˜¯å¦å¯ä»¥å†æ¬¡è®¾ç½®ç‰¹æ€§</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">//-----------------æµ‹è¯•ç›®æ ‡å±æ€§æ˜¯å¦èƒ½è¢«åˆ é™¤------------------------</span><br><span class="line">var obj = &#123;&#125;</span><br><span class="line">//ç¬¬ä¸€ç§æƒ…å†µï¼šconfigurableè®¾ç½®ä¸ºfalseï¼Œä¸èƒ½è¢«åˆ é™¤ã€‚</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:false,</span><br><span class="line">    enumerable:false,</span><br><span class="line">    configurable:false</span><br><span class="line">&#125;);</span><br><span class="line">//åˆ é™¤å±æ€§</span><br><span class="line">delete obj.newKey;</span><br><span class="line">console.log( obj.newKey ); //hello</span><br><span class="line"></span><br><span class="line">//ç¬¬äºŒç§æƒ…å†µï¼šconfigurableè®¾ç½®ä¸ºtrueï¼Œå¯ä»¥è¢«åˆ é™¤ã€‚</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:false,</span><br><span class="line">    enumerable:false,</span><br><span class="line">    configurable:true</span><br><span class="line">&#125;);</span><br><span class="line">//åˆ é™¤å±æ€§</span><br><span class="line">delete obj.newKey;</span><br><span class="line">console.log( obj.newKey ); //undefined</span><br><span class="line">//-----------------æµ‹è¯•æ˜¯å¦å¯ä»¥å†æ¬¡ä¿®æ”¹ç‰¹æ€§------------------------</span><br><span class="line">var obj = &#123;&#125;</span><br><span class="line">//ç¬¬ä¸€ç§æƒ…å†µï¼šconfigurableè®¾ç½®ä¸ºfalseï¼Œä¸èƒ½å†æ¬¡ä¿®æ”¹ç‰¹æ€§ã€‚</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:false,</span><br><span class="line">    enumerable:false,</span><br><span class="line">    configurable:false</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//é‡æ–°ä¿®æ”¹ç‰¹æ€§</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:true,</span><br><span class="line">    enumerable:true,</span><br><span class="line">    configurable:true</span><br><span class="line">&#125;);</span><br><span class="line">console.log( obj.newKey ); //æŠ¥é”™ï¼šUncaught TypeError: Cannot redefine property: newKey</span><br><span class="line"></span><br><span class="line">//ç¬¬äºŒç§æƒ…å†µï¼šconfigurableè®¾ç½®ä¸ºtrueï¼Œå¯ä»¥å†æ¬¡ä¿®æ”¹ç‰¹æ€§ã€‚</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:false,</span><br><span class="line">    enumerable:false,</span><br><span class="line">    configurable:true</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//é‡æ–°ä¿®æ”¹ç‰¹æ€§</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    value:&quot;hello&quot;,</span><br><span class="line">    writable:true,</span><br><span class="line">    enumerable:true,</span><br><span class="line">    configurable:true</span><br><span class="line">&#125;);</span><br><span class="line">console.log( obj.newKey ); //hello</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é™¤äº†å¯ä»¥ç»™æ–°å®šä¹‰çš„å±æ€§è®¾ç½®ç‰¹æ€§ï¼Œä¹Ÿå¯ä»¥ç»™å·²æœ‰çš„å±æ€§è®¾ç½®ç‰¹æ€§</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰å¯¹è±¡çš„æ—¶å€™æ·»åŠ çš„å±æ€§ï¼Œæ˜¯å¯åˆ é™¤ã€å¯é‡å†™ã€å¯æšä¸¾çš„ã€‚</span><br><span class="line">var obj = &#123;</span><br><span class="line">    test:&quot;hello&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//æ”¹å†™å€¼</span><br><span class="line">obj.test = &#x27;change value&#x27;;</span><br><span class="line"></span><br><span class="line">console.log( obj.test ); //&#x27;change value&#x27;</span><br><span class="line"></span><br><span class="line">Object.defineProperty(obj,&quot;test&quot;,&#123;</span><br><span class="line">    writable:false</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//å†æ¬¡æ”¹å†™å€¼</span><br><span class="line">obj.test = &#x27;change value again&#x27;;</span><br><span class="line"></span><br><span class="line">console.log( obj.test ); //ä¾ç„¶æ˜¯ï¼š&#x27;change value&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æç¤ºï¼šä¸€æ—¦ä½¿ç”¨<code>Object.defineProperty</code>ç»™å¯¹è±¡æ·»åŠ å±æ€§ï¼Œé‚£ä¹ˆå¦‚æœä¸è®¾ç½®å±æ€§çš„ç‰¹æ€§ï¼Œé‚£ä¹ˆ<code>configurable</code>ã€<code>enumerable</code>ã€<code>writable</code>è¿™äº›å€¼éƒ½ä¸ºé»˜è®¤çš„<code>false</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;;</span><br><span class="line">//å®šä¹‰çš„æ–°å±æ€§åï¼Œè¿™ä¸ªå±æ€§çš„ç‰¹æ€§ä¸­configurableï¼Œenumerableï¼Œwritableéƒ½ä¸ºé»˜è®¤çš„å€¼false</span><br><span class="line">//è¿™å°±å¯¼è‡´äº†neykeyè¿™ä¸ªæ˜¯ä¸èƒ½é‡å†™ã€ä¸èƒ½æšä¸¾ã€ä¸èƒ½å†æ¬¡è®¾ç½®ç‰¹æ€§</span><br><span class="line">//</span><br><span class="line">Object.defineProperty(obj,&#x27;newKey&#x27;,&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//è®¾ç½®å€¼</span><br><span class="line">obj.newKey = &#x27;hello&#x27;;</span><br><span class="line">console.log(obj.newKey);  //undefined</span><br><span class="line"></span><br><span class="line">//æšä¸¾</span><br><span class="line">for( var attr in obj )&#123;</span><br><span class="line">    console.log(attr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è®¾ç½®çš„ç‰¹æ€§æ€»ç»“</strong></p>
<ul>
<li><code>value</code>: è®¾ç½®å±æ€§çš„å€¼</li>
<li><code>writable</code>: å€¼æ˜¯å¦å¯ä»¥é‡å†™ã€‚<code>true</code> | <code>false</code></li>
<li><code>enumerable</code>: ç›®æ ‡å±æ€§æ˜¯å¦å¯ä»¥è¢«æšä¸¾ã€‚<code>true</code> | <code>false</code></li>
<li><code>configurable</code>: ç›®æ ‡å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤æˆ–æ˜¯å¦å¯ä»¥å†æ¬¡ä¿®æ”¹ç‰¹æ€§ <code>true</code> | <code>false</code></li>
</ul>
<h3 id="2-3-å­˜å–å™¨æè¿°"><a href="#2-3-å­˜å–å™¨æè¿°" class="headerlink" title="2.3 å­˜å–å™¨æè¿°"></a>2.3 å­˜å–å™¨æè¿°</h3><h4 id="2-3-1-å®šä¹‰"><a href="#2-3-1-å®šä¹‰" class="headerlink" title="2.3.1 å®šä¹‰"></a>2.3.1 å®šä¹‰</h4><blockquote>
<p>å½“ä½¿ç”¨å­˜å–å™¨æè¿°å±æ€§çš„ç‰¹æ€§çš„æ—¶å€™ï¼Œå…è®¸è®¾ç½®ä»¥ä¸‹ç‰¹æ€§å±æ€§</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;;</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    get:function ()&#123;&#125; | undefined,</span><br><span class="line">    set:function (value)&#123;&#125; | undefined</span><br><span class="line">    configurable: true | false</span><br><span class="line">    enumerable: true | false</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šå½“ä½¿ç”¨äº†<code>getter</code>æˆ–<code>setter</code>æ–¹æ³•ï¼Œä¸å…è®¸ä½¿ç”¨<code>writable</code>å’Œ<code>value</code>è¿™ä¸¤ä¸ªå±æ€§</p>
</blockquote>
<h4 id="2-3-2-getter-x2F-setter"><a href="#2-3-2-getter-x2F-setter" class="headerlink" title="2.3.2 getter&#x2F;setter"></a>2.3.2 getter&#x2F;setter</h4><blockquote>
<p>å½“è®¾ç½®æˆ–è·å–å¯¹è±¡çš„æŸä¸ªå±æ€§çš„å€¼çš„æ—¶å€™ï¼Œå¯ä»¥æä¾›<code>getter/setter</code>æ–¹æ³•ã€‚</p>
</blockquote>
<ul>
<li><code>getter</code> æ˜¯ä¸€ç§è·å¾—å±æ€§å€¼çš„æ–¹æ³•</li>
<li><code>setter</code>æ˜¯ä¸€ç§è®¾ç½®å±æ€§å€¼çš„æ–¹æ³•</li>
</ul>
<blockquote>
<p>åœ¨ç‰¹æ€§ä¸­ä½¿ç”¨<code>get/set</code>å±æ€§æ¥å®šä¹‰å¯¹åº”çš„æ–¹æ³•</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;;</span><br><span class="line">var initValue = &#x27;hello&#x27;;</span><br><span class="line">Object.defineProperty(obj,&quot;newKey&quot;,&#123;</span><br><span class="line">    get:function ()&#123;</span><br><span class="line">        //å½“è·å–å€¼çš„æ—¶å€™è§¦å‘çš„å‡½æ•°</span><br><span class="line">        return initValue;    </span><br><span class="line">    &#125;,</span><br><span class="line">    set:function (value)&#123;</span><br><span class="line">        //å½“è®¾ç½®å€¼çš„æ—¶å€™è§¦å‘çš„å‡½æ•°,è®¾ç½®çš„æ–°å€¼é€šè¿‡å‚æ•°valueæ‹¿åˆ°</span><br><span class="line">        initValue = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">//è·å–å€¼</span><br><span class="line">console.log( obj.newKey );  //hello</span><br><span class="line"></span><br><span class="line">//è®¾ç½®å€¼</span><br><span class="line">obj.newKey = &#x27;change value&#x27;;</span><br><span class="line"></span><br><span class="line">console.log( obj.newKey ); //change value</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šgetæˆ–setä¸æ˜¯å¿…é¡»æˆå¯¹å‡ºç°ï¼Œä»»å†™å…¶ä¸€å°±å¯ä»¥ã€‚å¦‚æœä¸è®¾ç½®æ–¹æ³•ï¼Œåˆ™<code>get</code>å’Œ<code>set</code>çš„é»˜è®¤å€¼ä¸º<code>undefined</code></p>
</blockquote>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/06/11/Vue/Object.defineProperty%E8%AF%A6%E8%A7%A3/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-MVCã€MVPã€MVVMä¹‹é—´çš„å…³ç³»">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/06/08/Vue/MVC%E3%80%81MVP%E3%80%81MVVM%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/">MVCã€MVPã€MVVMä¹‹é—´çš„å…³ç³»</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-06-08
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€MVC"><a href="#ä¸€ã€MVC" class="headerlink" title="ä¸€ã€MVC"></a>ä¸€ã€MVC</h2><hr>
<h3 id="ä»€ä¹ˆæ˜¯MVC"><a href="#ä»€ä¹ˆæ˜¯MVC" class="headerlink" title="ä»€ä¹ˆæ˜¯MVC"></a>ä»€ä¹ˆæ˜¯MVC</h3><hr>
<ul>
<li>MVCæ˜¯ä¸€ç§æ¨¡å¼ï¼Œå®ƒå°†åº”ç”¨åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼šæ•°æ®ï¼ˆæ¨¡å‹ï¼‰ã€è¡¨ç°å±‚ï¼ˆè§†å›¾ï¼‰ã€ç”¨æˆ·äº¤äº’å±‚ï¼ˆæ§åˆ¶å™¨ï¼‰</li>
<li>ä¸€ä¸ªäº‹ä»¶çš„å¤„ç†å¤§æ¦‚æ˜¯è¿™æ ·<ul>
<li>ç”¨æˆ·å’Œåº”ç”¨äº§ç”Ÿäº¤äº’</li>
<li>æ§åˆ¶å™¨çš„äº‹ä»¶å¤„ç†å™¨è¢«è§¦å‘</li>
<li>æ§åˆ¶å™¨ä»æ¨¡å‹ä¸­è¯·æ±‚æ•°æ®ï¼Œå¹¶å°†å…¶äº¤ç»™è§†å›¾</li>
<li>è§†å›¾å°†æ•°æ®å‘ˆç°ç»™ç”¨æˆ·</li>
</ul>
</li>
</ul>
<h3 id="æ¨¡å‹ï¼ˆæ•°æ®ä¿å­˜ï¼‰"><a href="#æ¨¡å‹ï¼ˆæ•°æ®ä¿å­˜ï¼‰" class="headerlink" title="æ¨¡å‹ï¼ˆæ•°æ®ä¿å­˜ï¼‰"></a>æ¨¡å‹ï¼ˆæ•°æ®ä¿å­˜ï¼‰</h3><hr>
<ul>
<li>æ¨¡å‹ç”¨æ¥å­˜æ”¾ç”¨æˆ·çš„æ‰€æœ‰æ•°æ®å¯¹è±¡ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªuseræ¨¡å‹ï¼Œç”¨æ¥å­˜æ”¾ç”¨æˆ·åˆ—è¡¨ã€ä»–ä»¬çš„å±æ€§ä»¥åŠæ‰€æœ‰å’Œæ¨¡å‹æœ‰å…³çš„é€»è¾‘</li>
<li>æ¨¡å‹ä¸å¿…çŸ¥æ™“è§†å›¾å’Œæ§åˆ¶å™¨çš„ç»†èŠ‚ï¼Œæ¨¡å‹åªéœ€åŒ…å«æ•°æ®ä»¥åŠç›´æ¥å’Œè¿™äº›æ•°æ®ç›¸å…³çš„é€»è¾‘</li>
</ul>
<h3 id="è§†å›¾ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰"><a href="#è§†å›¾ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰" class="headerlink" title="è§†å›¾ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰"></a>è§†å›¾ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰</h3><hr>
<ul>
<li>è§†å›¾æ˜¯å‘ˆç°ç»™ç”¨æˆ·çš„ï¼Œç”¨æˆ·ä¸ä¹‹äº§ç”Ÿäº¤äº’ã€‚åœ¨JavaScriptåº”ç”¨ä¸­ï¼Œè§†å›¾å¤§éƒ½æ˜¯ç”±HTMLã€cssã€JavaScriptæ¨¡æ¿ç»„æˆçš„</li>
</ul>
<h3 id="æ§åˆ¶å™¨ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰"><a href="#æ§åˆ¶å™¨ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰" class="headerlink" title="æ§åˆ¶å™¨ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰"></a>æ§åˆ¶å™¨ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰</h3><hr>
<ul>
<li>æ§åˆ¶å™¨æ˜¯æ¨¡å‹å’Œè§†å›¾ä¹‹é—´çš„çº½å¸¦ã€‚æ§åˆ¶å™¨ä»è§†å›¾è·å¾—äº‹ä»¶å’Œè¾“å…¥ï¼Œå¯¹å®ƒä»¬è¿›è¡Œè¿›è¡Œå¤„ç†ï¼Œå¹¶ç›¸åº”çš„æ›´æ–°è§†å›¾ã€‚</li>
<li>å½“é¡µé¢åŠ è½½æ—¶ï¼Œæ§åˆ¶å™¨ä¼šç»™è§†å›¾æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œæ¯”å¦‚ç›‘å¬è¡¨å•æäº¤æˆ–æŒ‰é’®ç‚¹å‡»ã€‚ç„¶åå½“ç”¨æˆ·å’Œä½ çš„åº”ç”¨äº§ç”Ÿäº¤äº’æ—¶ï¼Œæ§åˆ¶å™¨ä¸­çš„äº‹ä»¶è§¦å‘å™¨å°±å¼€å§‹å·¥ä½œäº†</li>
</ul>
<h3 id="æ€»ç»“ä¸€ä¸‹ï¼š"><a href="#æ€»ç»“ä¸€ä¸‹ï¼š" class="headerlink" title="æ€»ç»“ä¸€ä¸‹ï¼š"></a>æ€»ç»“ä¸€ä¸‹ï¼š</h3><hr>
<ul>
<li><code>Controller</code> ç›‘å¬ <code>Model</code> å˜åŒ–ï¼Œ<code>Model</code> ä¸€å˜ï¼Œ<code>Controller</code> å°±ä¼šå»æ›´æ–°<code>View</code>ã€‚</li>
<li><code>Controller</code> ç›‘å¬ç”¨æˆ·äº¤äº’ï¼Œç”¨æˆ·ç‚¹äº†æäº¤æˆ–ä¿®æ”¹æŒ‰é’®ï¼ŒController å°±è¦å»æ›´æ–° Model</li>
<li><code>View</code> ä¼ é€æŒ‡ä»¤åˆ° <code>Controller</code></li>
<li><code>Controller</code> å®Œæˆä¸šåŠ¡é€»è¾‘åï¼Œè¦æ±‚ <code>Model</code> æ”¹å˜çŠ¶æ€</li>
<li><code>Model</code> å°†æ–°çš„æ•°æ®å‘é€åˆ° <code>View</code>ï¼Œç”¨æˆ·å¾—åˆ°åé¦ˆ</li>
</ul>
<p>å„éƒ¨åˆ†ä¹‹é—´çš„é€šä¿¡æ–¹å¼</p>
<h2 id="äº’åŠ¨æ¨¡å¼"><a href="#äº’åŠ¨æ¨¡å¼" class="headerlink" title="äº’åŠ¨æ¨¡å¼"></a>äº’åŠ¨æ¨¡å¼</h2><hr>
<ul>
<li><p>æ¥å—ç”¨æˆ·æŒ‡ä»¤æ—¶ï¼ŒMVC å¯ä»¥åˆ†æˆä¸¤ç§æ–¹å¼ã€‚ä¸€ç§æ˜¯é€šè¿‡ View æ¥å—æŒ‡ä»¤ï¼Œä¼ é€’ç»™ Controller</p>
</li>
<li><p>å¦ä¸€ç§æ˜¯ç›´æ¥é€šè¿‡controlleræ¥å—æŒ‡ä»¤</p>
</li>
</ul>
<h2 id="äºŒã€MVP"><a href="#äºŒã€MVP" class="headerlink" title="äºŒã€MVP"></a>äºŒã€MVP</h2><hr>
<ul>
<li><p><code>MVP</code> æ¨¡å¼å°† <code>Controller æ”¹åä¸º</code>Presenter&#96;ï¼ŒåŒæ—¶æ”¹å˜äº†é€šä¿¡æ–¹å‘</p>
</li>
<li><p>å„éƒ¨åˆ†ä¹‹é—´çš„é€šä¿¡ï¼Œéƒ½æ˜¯åŒå‘çš„ã€‚</p>
</li>
<li><p><code>View</code> ä¸<code>Model</code> ä¸å‘ç”Ÿè”ç³»ï¼Œéƒ½é€šè¿‡ <code>Presenter</code> ä¼ é€’ã€‚</p>
</li>
<li><p><code>View</code> éå¸¸è–„ï¼Œä¸éƒ¨ç½²ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œç§°ä¸ºâ€è¢«åŠ¨è§†å›¾â€ï¼ˆPassive Viewï¼‰ï¼Œå³æ²¡æœ‰ä»»ä½•ä¸»åŠ¨æ€§ï¼Œè€Œ Presenteréå¸¸åšï¼Œæ‰€æœ‰é€»è¾‘éƒ½éƒ¨ç½²åœ¨é‚£é‡Œ</p>
</li>
</ul>
<h2 id="ä¸‰ã€MVVM"><a href="#ä¸‰ã€MVVM" class="headerlink" title="ä¸‰ã€MVVM"></a>ä¸‰ã€MVVM</h2><hr>
<ul>
<li><code>MVVM</code> æ¨¡å¼å°† <code>Presenter</code> æ”¹åä¸º <code>ViewModel</code>ï¼ŒåŸºæœ¬ä¸Šä¸ <code>MVP</code> æ¨¡å¼å®Œå…¨ä¸€è‡´</li>
<li>å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå®ƒé‡‡ç”¨åŒå‘ç»‘å®šï¼ˆdata-bindingï¼‰ï¼š<code>View</code>çš„å˜åŠ¨ï¼Œè‡ªåŠ¨åæ˜ åœ¨ <code>ViewModel</code>ï¼Œåä¹‹äº¦ç„¶</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/06/08/Vue/MVC%E3%80%81MVP%E3%80%81MVVM%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue-diffç®—æ³•">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/05/31/Vue/diff%E7%AE%97%E6%B3%95/">vue-diffç®—æ³•</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-05-31
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><p><code>diff</code> ç®—æ³•æ˜¯ä¸€ç§é€šè¿‡åŒå±‚çš„æ ‘èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒçš„é«˜æ•ˆç®—æ³•</p>
<p>å…¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¯”è¾ƒåªä¼šåœ¨åŒå±‚çº§è¿›è¡Œ, ä¸ä¼šè·¨å±‚çº§æ¯”è¾ƒ</li>
<li>åœ¨diffæ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œå¾ªç¯ä»ä¸¤è¾¹å‘ä¸­é—´æ¯”è¾ƒ</li>
</ul>
<p><code>diff</code> ç®—æ³•åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½æœ‰åº”ç”¨ï¼Œåœ¨ <code>vue</code> ä¸­ï¼Œä½œç”¨äºè™šæ‹Ÿ <code>dom</code> æ¸²æŸ“æˆçœŸå® <code>dom</code> çš„æ–°æ—§ <code>VNode</code> èŠ‚ç‚¹æ¯”è¾ƒ</p>
<h2 id="äºŒã€æ¯”è¾ƒæ–¹å¼"><a href="#äºŒã€æ¯”è¾ƒæ–¹å¼" class="headerlink" title="äºŒã€æ¯”è¾ƒæ–¹å¼"></a>äºŒã€æ¯”è¾ƒæ–¹å¼</h2><p><code>diff</code>æ•´ä½“ç­–ç•¥ä¸ºï¼šæ·±åº¦ä¼˜å…ˆï¼ŒåŒå±‚æ¯”è¾ƒ</p>
<ol>
<li>æ¯”è¾ƒåªä¼šåœ¨åŒå±‚çº§è¿›è¡Œ, ä¸ä¼šè·¨å±‚çº§æ¯”è¾ƒ</li>
</ol>
<p><img src="https://static001.infoq.cn/resource/image/91/54/91e9c9519a11caa0c5bf70714383f054.png" alt="img"></p>
<ol>
<li>æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œå¾ªç¯ä»ä¸¤è¾¹å‘ä¸­é—´æ”¶æ‹¢</li>
</ol>
<p><img src="https://static001.infoq.cn/resource/image/2d/ec/2dcd6ad5cf82c65b9cfc43a27ba1e4ec.png" alt="img"></p>
<p>ä¸‹é¢ä¸¾ä¸ª<code>vue</code>é€šè¿‡<code>diff</code>ç®—æ³•æ›´æ–°çš„ä¾‹å­ï¼š</p>
<p>æ–°æ—§<code>VNode</code>èŠ‚ç‚¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://static001.infoq.cn/resource/image/80/6d/80dc339f73b186479e6d1fc18bfbf66d.png" alt="img"></p>
<p>ç¬¬ä¸€æ¬¡å¾ªç¯åï¼Œå‘ç°æ—§èŠ‚ç‚¹Dä¸æ–°èŠ‚ç‚¹Dç›¸åŒï¼Œç›´æ¥å¤ç”¨æ—§èŠ‚ç‚¹Dä½œä¸º<code>diff</code>åçš„ç¬¬ä¸€ä¸ªçœŸå®èŠ‚ç‚¹ï¼ŒåŒæ—¶æ—§èŠ‚ç‚¹<code>endIndex</code>ç§»åŠ¨åˆ°Cï¼Œæ–°èŠ‚ç‚¹çš„ <code>startIndex</code> ç§»åŠ¨åˆ°äº† C</p>
<p><img src="https://static001.infoq.cn/resource/image/76/54/76032c78c8ef74047efd42c070e48854.png" alt="img"></p>
<p>ç¬¬äºŒæ¬¡å¾ªç¯åï¼ŒåŒæ ·æ˜¯æ—§èŠ‚ç‚¹çš„æœ«å°¾å’Œæ–°èŠ‚ç‚¹çš„å¼€å¤´(éƒ½æ˜¯ C)ç›¸åŒï¼ŒåŒç†ï¼Œ<code>diff</code> ååˆ›å»ºäº† C çš„çœŸå®èŠ‚ç‚¹æ’å…¥åˆ°ç¬¬ä¸€æ¬¡åˆ›å»ºçš„ B èŠ‚ç‚¹åé¢ã€‚åŒæ—¶æ—§èŠ‚ç‚¹çš„ <code>endIndex</code> ç§»åŠ¨åˆ°äº† Bï¼Œæ–°èŠ‚ç‚¹çš„ <code>startIndex</code> ç§»åŠ¨åˆ°äº† E</p>
<p><img src="https://static001.infoq.cn/resource/image/1c/d7/1c76e7489660188d35f0a38ea8c8ecd7.png" alt="img"></p>
<p>ç¬¬ä¸‰æ¬¡å¾ªç¯ä¸­ï¼Œå‘ç°Eæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿™æ—¶å€™åªèƒ½ç›´æ¥åˆ›å»ºæ–°çš„çœŸå®èŠ‚ç‚¹ Eï¼Œæ’å…¥åˆ°ç¬¬äºŒæ¬¡åˆ›å»ºçš„ C èŠ‚ç‚¹ä¹‹åã€‚åŒæ—¶æ–°èŠ‚ç‚¹çš„ <code>startIndex</code> ç§»åŠ¨åˆ°äº† Aã€‚æ—§èŠ‚ç‚¹çš„ <code>startIndex</code> å’Œ <code>endIndex</code> éƒ½ä¿æŒä¸åŠ¨</p>
<p><img src="https://static001.infoq.cn/resource/image/4b/08/4b622c0d61673ec5474465d82305d308.png" alt="img"></p>
<p>ç¬¬å››æ¬¡å¾ªç¯ä¸­ï¼Œå‘ç°äº†æ–°æ—§èŠ‚ç‚¹çš„å¼€å¤´(éƒ½æ˜¯ A)ç›¸åŒï¼Œäºæ˜¯ <code>diff</code> ååˆ›å»ºäº† A çš„çœŸå®èŠ‚ç‚¹ï¼Œæ’å…¥åˆ°å‰ä¸€æ¬¡åˆ›å»ºçš„ E èŠ‚ç‚¹åé¢ã€‚åŒæ—¶æ—§èŠ‚ç‚¹çš„ <code>startIndex</code> ç§»åŠ¨åˆ°äº† Bï¼Œæ–°èŠ‚ç‚¹çš„<code>startIndex</code> ç§»åŠ¨åˆ°äº† B</p>
<p><img src="https://static001.infoq.cn/resource/image/59/b4/5982417c3e0b2fa9ae940354a0e67ab4.png" alt="img"></p>
<p>ç¬¬äº”æ¬¡å¾ªç¯ä¸­ï¼Œæƒ…å½¢åŒç¬¬å››æ¬¡å¾ªç¯ä¸€æ ·ï¼Œå› æ­¤ <code>diff</code> ååˆ›å»ºäº† B çœŸå®èŠ‚ç‚¹ æ’å…¥åˆ°å‰ä¸€æ¬¡åˆ›å»ºçš„ A èŠ‚ç‚¹åé¢ã€‚åŒæ—¶æ—§èŠ‚ç‚¹çš„ <code>startIndex</code>ç§»åŠ¨åˆ°äº† Cï¼Œæ–°èŠ‚ç‚¹çš„ startIndex ç§»åŠ¨åˆ°äº† F</p>
<p><img src="https://static001.infoq.cn/resource/image/16/86/16cf0ef90f6e19d26c0ddffeca067e86.png" alt="img"></p>
<p>æ–°èŠ‚ç‚¹çš„ <code>startIndex</code> å·²ç»å¤§äº <code>endIndex</code> äº†ï¼Œéœ€è¦åˆ›å»º <code>newStartIdx</code> å’Œ <code>newEndIdx</code> ä¹‹é—´çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯èŠ‚ç‚¹Fï¼Œç›´æ¥åˆ›å»º F èŠ‚ç‚¹å¯¹åº”çš„çœŸå®èŠ‚ç‚¹æ”¾åˆ° B èŠ‚ç‚¹åé¢</p>
<p><img src="https://static001.infoq.cn/resource/image/dc/ad/dc215b45682cf6c9cc4700a5425673ad.png" alt="img"></p>
<h2 id="ä¸‰ã€åŸç†åˆ†æ"><a href="#ä¸‰ã€åŸç†åˆ†æ" class="headerlink" title="ä¸‰ã€åŸç†åˆ†æ"></a>ä¸‰ã€åŸç†åˆ†æ</h2><p>å½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œ<code>set</code>æ–¹æ³•ä¼šè°ƒç”¨<code>Dep.notify</code>é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…<code>Watcher</code>ï¼Œè®¢é˜…è€…å°±ä¼šè°ƒç”¨<code>patch</code>ç»™çœŸå®çš„<code>DOM</code>æ‰“è¡¥ä¸ï¼Œæ›´æ–°ç›¸åº”çš„è§†å›¾</p>
<p>æºç ä½ç½®ï¼šsrc&#x2F;core&#x2F;vdom&#x2F;patch.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">patch</span>(<span class="params">oldVnode, vnode, hydrating, removeOnly</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isUndef</span>(vnode)) &#123; <span class="comment">// æ²¡æœ‰æ–°èŠ‚ç‚¹ï¼Œç›´æ¥æ‰§è¡Œdestoryé’©å­å‡½æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isDef</span>(oldVnode)) <span class="title function_">invokeDestroyHook</span>(oldVnode)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> isInitialPatch = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">const</span> insertedVnodeQueue = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isUndef</span>(oldVnode)) &#123;</span><br><span class="line">        isInitialPatch = <span class="literal">true</span></span><br><span class="line">        <span class="title function_">createElm</span>(vnode, insertedVnodeQueue) <span class="comment">// æ²¡æœ‰æ—§èŠ‚ç‚¹ï¼Œç›´æ¥ç”¨æ–°èŠ‚ç‚¹ç”Ÿæˆdomå…ƒç´ </span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> isRealElement = <span class="title function_">isDef</span>(oldVnode.<span class="property">nodeType</span>)</span><br><span class="line">        <span class="keyword">if</span> (!isRealElement &amp;&amp; <span class="title function_">sameVnode</span>(oldVnode, vnode)) &#123;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹è‡ªèº«ä¸€æ ·ï¼Œä¸€è‡´æ‰§è¡ŒpatchVnode</span></span><br><span class="line">            <span class="title function_">patchVnode</span>(oldVnode, vnode, insertedVnodeQueue, <span class="literal">null</span>, <span class="literal">null</span>, removeOnly)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦åˆ™ç›´æ¥é”€æ¯åŠæ—§èŠ‚ç‚¹ï¼Œæ ¹æ®æ–°èŠ‚ç‚¹ç”Ÿæˆdomå…ƒç´ </span></span><br><span class="line">            <span class="keyword">if</span> (isRealElement) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (oldVnode.<span class="property">nodeType</span> === <span class="number">1</span> &amp;&amp; oldVnode.<span class="title function_">hasAttribute</span>(<span class="variable constant_">SSR_ATTR</span>)) &#123;</span><br><span class="line">                    oldVnode.<span class="title function_">removeAttribute</span>(<span class="variable constant_">SSR_ATTR</span>)</span><br><span class="line">                    hydrating = <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="title function_">isTrue</span>(hydrating)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="title function_">hydrate</span>(oldVnode, vnode, insertedVnodeQueue)) &#123;</span><br><span class="line">                        <span class="title function_">invokeInsertHook</span>(vnode, insertedVnodeQueue, <span class="literal">true</span>)</span><br><span class="line">                        <span class="keyword">return</span> oldVnode</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                oldVnode = <span class="title function_">emptyNodeAt</span>(oldVnode)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> vnode.<span class="property">elm</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>patch</code>å‡½æ•°å‰ä¸¤ä¸ªå‚æ•°ä½ä¸º<code>oldVnode</code> å’Œ <code>Vnode</code> ï¼Œåˆ†åˆ«ä»£è¡¨æ–°çš„èŠ‚ç‚¹å’Œä¹‹å‰çš„æ—§èŠ‚ç‚¹ï¼Œä¸»è¦åšäº†å››ä¸ªåˆ¤æ–­ï¼š</p>
<ul>
<li>æ²¡æœ‰æ–°èŠ‚ç‚¹ï¼Œç›´æ¥è§¦å‘æ—§èŠ‚ç‚¹çš„<code>destory</code>é’©å­</li>
<li>æ²¡æœ‰æ—§èŠ‚ç‚¹ï¼Œè¯´æ˜æ˜¯é¡µé¢åˆšå¼€å§‹åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ­¤æ—¶ï¼Œæ ¹æœ¬ä¸éœ€è¦æ¯”è¾ƒäº†ï¼Œç›´æ¥å…¨æ˜¯æ–°å»ºï¼Œæ‰€ä»¥åªè°ƒç”¨ <code>createElm</code></li>
<li>æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹è‡ªèº«ä¸€æ ·ï¼Œé€šè¿‡ <code>sameVnode</code> åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦ä¸€æ ·ï¼Œä¸€æ ·æ—¶ï¼Œç›´æ¥è°ƒç”¨ <code>patchVnode</code>å»å¤„ç†è¿™ä¸¤ä¸ªèŠ‚ç‚¹</li>
<li>æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹è‡ªèº«ä¸ä¸€æ ·ï¼Œå½“ä¸¤ä¸ªèŠ‚ç‚¹ä¸ä¸€æ ·çš„æ—¶å€™ï¼Œç›´æ¥åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œåˆ é™¤æ—§èŠ‚ç‚¹</li>
</ul>
<p>ä¸‹é¢ä¸»è¦è®²çš„æ˜¯<code>patchVnode</code>éƒ¨åˆ†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">patchVnode</span> (oldVnode, vnode, insertedVnodeQueue, removeOnly) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ–°æ—§èŠ‚ç‚¹ä¸€è‡´ï¼Œä»€ä¹ˆéƒ½ä¸åš</span></span><br><span class="line">    <span class="keyword">if</span> (oldVnode === vnode) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®©vnode.elå¼•ç”¨åˆ°ç°åœ¨çš„çœŸå®domï¼Œå½“elä¿®æ”¹æ—¶ï¼Œvnode.elä¼šåŒæ­¥å˜åŒ–</span></span><br><span class="line">    <span class="keyword">const</span> elm = vnode.<span class="property">elm</span> = oldVnode.<span class="property">elm</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼‚æ­¥å ä½ç¬¦</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isTrue</span>(oldVnode.<span class="property">isAsyncPlaceholder</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">isDef</span>(vnode.<span class="property">asyncFactory</span>.<span class="property">resolved</span>)) &#123;</span><br><span class="line">        <span class="title function_">hydrate</span>(oldVnode.<span class="property">elm</span>, vnode, insertedVnodeQueue)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        vnode.<span class="property">isAsyncPlaceholder</span> = <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæ–°æ—§éƒ½æ˜¯é™æ€èŠ‚ç‚¹ï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„key</span></span><br><span class="line">    <span class="comment">// å½“vnodeæ˜¯å…‹éš†èŠ‚ç‚¹æˆ–æ˜¯v-onceæŒ‡ä»¤æ§åˆ¶çš„èŠ‚ç‚¹æ—¶ï¼Œåªéœ€è¦æŠŠoldVnode.elmå’ŒoldVnode.childéƒ½å¤åˆ¶åˆ°vnodeä¸Š</span></span><br><span class="line">    <span class="comment">// ä¹Ÿä¸ç”¨å†æœ‰å…¶ä»–æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isTrue</span>(vnode.<span class="property">isStatic</span>) &amp;&amp;</span><br><span class="line">      <span class="title function_">isTrue</span>(oldVnode.<span class="property">isStatic</span>) &amp;&amp;</span><br><span class="line">      vnode.<span class="property">key</span> === oldVnode.<span class="property">key</span> &amp;&amp;</span><br><span class="line">      (<span class="title function_">isTrue</span>(vnode.<span class="property">isCloned</span>) || <span class="title function_">isTrue</span>(vnode.<span class="property">isOnce</span>))</span><br><span class="line">    ) &#123;</span><br><span class="line">      vnode.<span class="property">componentInstance</span> = oldVnode.<span class="property">componentInstance</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> i</span><br><span class="line">    <span class="keyword">const</span> data = vnode.<span class="property">data</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isDef</span>(data) &amp;&amp; <span class="title function_">isDef</span>(i = data.<span class="property">hook</span>) &amp;&amp; <span class="title function_">isDef</span>(i = i.<span class="property">prepatch</span>)) &#123;</span><br><span class="line">      <span class="title function_">i</span>(oldVnode, vnode)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> oldCh = oldVnode.<span class="property">children</span></span><br><span class="line">    <span class="keyword">const</span> ch = vnode.<span class="property">children</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isDef</span>(data) &amp;&amp; <span class="title function_">isPatchable</span>(vnode)) &#123;</span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; cbs.<span class="property">update</span>.<span class="property">length</span>; ++i) cbs.<span class="property">update</span>[i](oldVnode, vnode)</span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">isDef</span>(i = data.<span class="property">hook</span>) &amp;&amp; <span class="title function_">isDef</span>(i = i.<span class="property">update</span>)) <span class="title function_">i</span>(oldVnode, vnode)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœvnodeä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–è€…æ³¨é‡ŠèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isUndef</span>(vnode.<span class="property">text</span>)) &#123;</span><br><span class="line">      <span class="comment">// å¹¶ä¸”éƒ½æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">isDef</span>(oldCh) &amp;&amp; <span class="title function_">isDef</span>(ch)) &#123;</span><br><span class="line">        <span class="comment">// å¹¶ä¸”å­èŠ‚ç‚¹ä¸å®Œå…¨ä¸€è‡´ï¼Œåˆ™è°ƒç”¨updateChildren</span></span><br><span class="line">        <span class="keyword">if</span> (oldCh !== ch) <span class="title function_">updateChildren</span>(elm, oldCh, ch, insertedVnodeQueue, removeOnly)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœåªæœ‰æ–°çš„vnodeæœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isDef</span>(ch)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isDef</span>(oldVnode.<span class="property">text</span>)) nodeOps.<span class="title function_">setTextContent</span>(elm, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="comment">// elmå·²ç»å¼•ç”¨äº†è€çš„domèŠ‚ç‚¹ï¼Œåœ¨è€çš„domèŠ‚ç‚¹ä¸Šæ·»åŠ å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="title function_">addVnodes</span>(elm, <span class="literal">null</span>, ch, <span class="number">0</span>, ch.<span class="property">length</span> - <span class="number">1</span>, insertedVnodeQueue)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæ–°vnodeæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œè€Œvnodeæœ‰å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤è€çš„oldCh</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isDef</span>(oldCh)) &#123;</span><br><span class="line">        <span class="title function_">removeVnodes</span>(elm, oldCh, <span class="number">0</span>, oldCh.<span class="property">length</span> - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœè€èŠ‚ç‚¹æ˜¯æ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isDef</span>(oldVnode.<span class="property">text</span>)) &#123;</span><br><span class="line">        nodeOps.<span class="title function_">setTextContent</span>(elm, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæ–°vnodeå’Œè€vnodeæ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹</span></span><br><span class="line">      <span class="comment">// ä½†æ˜¯vnode.text != oldVnode.textæ—¶ï¼Œåªéœ€è¦æ›´æ–°vnode.elmçš„æ–‡æœ¬å†…å®¹å°±å¯ä»¥</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldVnode.<span class="property">text</span> !== vnode.<span class="property">text</span>) &#123;</span><br><span class="line">      nodeOps.<span class="title function_">setTextContent</span>(elm, vnode.<span class="property">text</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isDef</span>(data)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">isDef</span>(i = data.<span class="property">hook</span>) &amp;&amp; <span class="title function_">isDef</span>(i = i.<span class="property">postpatch</span>)) <span class="title function_">i</span>(oldVnode, vnode)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><code>patchVnode</code>ä¸»è¦åšäº†å‡ ä¸ªåˆ¤æ–­ï¼š</p>
<ul>
<li>æ–°èŠ‚ç‚¹æ˜¯å¦æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç›´æ¥æ›´æ–°<code>dom</code>çš„æ–‡æœ¬å†…å®¹ä¸ºæ–°èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹</li>
<li>æ–°èŠ‚ç‚¹å’Œæ—§èŠ‚ç‚¹å¦‚æœéƒ½æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™å¤„ç†æ¯”è¾ƒæ›´æ–°å­èŠ‚ç‚¹</li>
<li>åªæœ‰æ–°èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œæ—§èŠ‚ç‚¹æ²¡æœ‰ï¼Œé‚£ä¹ˆä¸ç”¨æ¯”è¾ƒäº†ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯å…¨æ–°çš„ï¼Œæ‰€ä»¥ç›´æ¥å…¨éƒ¨æ–°å»ºå°±å¥½äº†ï¼Œæ–°å»ºæ˜¯æŒ‡åˆ›å»ºå‡ºæ‰€æœ‰æ–°<code>DOM</code>ï¼Œå¹¶ä¸”æ·»åŠ è¿›çˆ¶èŠ‚ç‚¹</li>
<li>åªæœ‰æ—§èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹è€Œæ–°èŠ‚ç‚¹æ²¡æœ‰ï¼Œè¯´æ˜æ›´æ–°åçš„é¡µé¢ï¼Œæ—§èŠ‚ç‚¹å…¨éƒ¨éƒ½ä¸è§äº†ï¼Œé‚£ä¹ˆè¦åšçš„ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰çš„æ—§èŠ‚ç‚¹åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥æŠŠ<code>DOM</code> åˆ é™¤</li>
</ul>
<p>å­èŠ‚ç‚¹ä¸å®Œå…¨ä¸€è‡´ï¼Œåˆ™è°ƒç”¨<code>updateChildren</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">updateChildren</span> (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) &#123;</span><br><span class="line">    <span class="keyword">let</span> oldStartIdx = <span class="number">0</span> <span class="comment">// æ—§å¤´ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">let</span> newStartIdx = <span class="number">0</span> <span class="comment">// æ–°å¤´ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">let</span> oldEndIdx = oldCh.<span class="property">length</span> - <span class="number">1</span> <span class="comment">// æ—§å°¾ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">let</span> newEndIdx = newCh.<span class="property">length</span> - <span class="number">1</span> <span class="comment">// æ–°å°¾ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">let</span> oldStartVnode = oldCh[<span class="number">0</span>] <span class="comment">// oldVnodeçš„ç¬¬ä¸€ä¸ªchild</span></span><br><span class="line">    <span class="keyword">let</span> oldEndVnode = oldCh[oldEndIdx] <span class="comment">// oldVnodeçš„æœ€åä¸€ä¸ªchild</span></span><br><span class="line">    <span class="keyword">let</span> newStartVnode = newCh[<span class="number">0</span>] <span class="comment">// newVnodeçš„ç¬¬ä¸€ä¸ªchild</span></span><br><span class="line">    <span class="keyword">let</span> newEndVnode = newCh[newEndIdx] <span class="comment">// newVnodeçš„æœ€åä¸€ä¸ªchild</span></span><br><span class="line">    <span class="keyword">let</span> oldKeyToIdx, idxInOld, vnodeToMove, refElm</span><br><span class="line"></span><br><span class="line">    <span class="comment">// removeOnly is a special flag used only by &lt;transition-group&gt;</span></span><br><span class="line">    <span class="comment">// to ensure removed elements stay in correct relative positions</span></span><br><span class="line">    <span class="comment">// during leaving transitions</span></span><br><span class="line">    <span class="keyword">const</span> canMove = !removeOnly</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœoldStartVnodeå’ŒoldEndVnodeé‡åˆï¼Œå¹¶ä¸”æ–°çš„ä¹Ÿéƒ½é‡åˆäº†ï¼Œè¯æ˜diffå®Œäº†ï¼Œå¾ªç¯ç»“æŸ</span></span><br><span class="line">    <span class="keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœoldVnodeçš„ç¬¬ä¸€ä¸ªchildä¸å­˜åœ¨</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">isUndef</span>(oldStartVnode)) &#123;</span><br><span class="line">        <span class="comment">// oldStartç´¢å¼•å³ç§»</span></span><br><span class="line">        oldStartVnode = oldCh[++oldStartIdx] <span class="comment">// Vnode has been moved left</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœoldVnodeçš„æœ€åä¸€ä¸ªchildä¸å­˜åœ¨</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isUndef</span>(oldEndVnode)) &#123;</span><br><span class="line">        <span class="comment">// oldEndç´¢å¼•å·¦ç§»</span></span><br><span class="line">        oldEndVnode = oldCh[--oldEndIdx]</span><br><span class="line"></span><br><span class="line">      <span class="comment">// oldStartVnodeå’ŒnewStartVnodeæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldStartVnode, newStartVnode)) &#123;</span><br><span class="line">        <span class="comment">// patch oldStartVnodeå’ŒnewStartVnodeï¼Œ ç´¢å¼•å·¦ç§»ï¼Œç»§ç»­å¾ªç¯</span></span><br><span class="line">        <span class="title function_">patchVnode</span>(oldStartVnode, newStartVnode, insertedVnodeQueue)</span><br><span class="line">        oldStartVnode = oldCh[++oldStartIdx]</span><br><span class="line">        newStartVnode = newCh[++newStartIdx]</span><br><span class="line"></span><br><span class="line">      <span class="comment">// oldEndVnodeå’ŒnewEndVnodeæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldEndVnode, newEndVnode)) &#123;</span><br><span class="line">        <span class="comment">// patch oldEndVnodeå’ŒnewEndVnodeï¼Œç´¢å¼•å³ç§»ï¼Œç»§ç»­å¾ªç¯</span></span><br><span class="line">        <span class="title function_">patchVnode</span>(oldEndVnode, newEndVnode, insertedVnodeQueue)</span><br><span class="line">        oldEndVnode = oldCh[--oldEndIdx]</span><br><span class="line">        newEndVnode = newCh[--newEndIdx]</span><br><span class="line"></span><br><span class="line">      <span class="comment">// oldStartVnodeå’ŒnewEndVnodeæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldStartVnode, newEndVnode)) &#123; <span class="comment">// Vnode moved right</span></span><br><span class="line">        <span class="comment">// patch oldStartVnodeå’ŒnewEndVnode</span></span><br><span class="line">        <span class="title function_">patchVnode</span>(oldStartVnode, newEndVnode, insertedVnodeQueue)</span><br><span class="line">        <span class="comment">// å¦‚æœremoveOnlyæ˜¯falseï¼Œåˆ™å°†oldStartVnode.emlç§»åŠ¨åˆ°oldEndVnode.elmä¹‹å</span></span><br><span class="line">        canMove &amp;&amp; nodeOps.<span class="title function_">insertBefore</span>(parentElm, oldStartVnode.<span class="property">elm</span>, nodeOps.<span class="title function_">nextSibling</span>(oldEndVnode.<span class="property">elm</span>))</span><br><span class="line">        <span class="comment">// oldStartç´¢å¼•å³ç§»ï¼ŒnewEndç´¢å¼•å·¦ç§»</span></span><br><span class="line">        oldStartVnode = oldCh[++oldStartIdx]</span><br><span class="line">        newEndVnode = newCh[--newEndIdx]</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœoldEndVnodeå’ŒnewStartVnodeæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldEndVnode, newStartVnode)) &#123; <span class="comment">// Vnode moved left</span></span><br><span class="line">        <span class="comment">// patch oldEndVnodeå’ŒnewStartVnode</span></span><br><span class="line">        <span class="title function_">patchVnode</span>(oldEndVnode, newStartVnode, insertedVnodeQueue)</span><br><span class="line">        <span class="comment">// å¦‚æœremoveOnlyæ˜¯falseï¼Œåˆ™å°†oldEndVnode.elmç§»åŠ¨åˆ°oldStartVnode.elmä¹‹å‰</span></span><br><span class="line">        canMove &amp;&amp; nodeOps.<span class="title function_">insertBefore</span>(parentElm, oldEndVnode.<span class="property">elm</span>, oldStartVnode.<span class="property">elm</span>)</span><br><span class="line">        <span class="comment">// oldEndç´¢å¼•å·¦ç§»ï¼ŒnewStartç´¢å¼•å³ç§»</span></span><br><span class="line">        oldEndVnode = oldCh[--oldEndIdx]</span><br><span class="line">        newStartVnode = newCh[++newStartIdx]</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœéƒ½ä¸åŒ¹é…</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isUndef</span>(oldKeyToIdx)) oldKeyToIdx = <span class="title function_">createKeyToOldIdx</span>(oldCh, oldStartIdx, oldEndIdx)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°è¯•åœ¨oldChildrenä¸­å¯»æ‰¾å’ŒnewStartVnodeçš„å…·æœ‰ç›¸åŒçš„keyçš„Vnode</span></span><br><span class="line">        idxInOld = <span class="title function_">isDef</span>(newStartVnode.<span class="property">key</span>)</span><br><span class="line">          ? oldKeyToIdx[newStartVnode.<span class="property">key</span>]</span><br><span class="line">          : <span class="title function_">findIdxInOld</span>(newStartVnode, oldCh, oldStartIdx, oldEndIdx)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæœªæ‰¾åˆ°ï¼Œè¯´æ˜newStartVnodeæ˜¯ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isUndef</span>(idxInOld)) &#123; <span class="comment">// New element</span></span><br><span class="line">          <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°Vnode</span></span><br><span class="line">          <span class="title function_">createElm</span>(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.<span class="property">elm</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæ‰¾åˆ°äº†å’ŒnewStartVnodejå…·æœ‰ç›¸åŒçš„keyçš„Vnodeï¼Œå«vnodeToMove</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          vnodeToMove = oldCh[idxInOld]</span><br><span class="line">          <span class="comment">/* istanbul ignore if */</span></span><br><span class="line">          <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span> &amp;&amp; !vnodeToMove) &#123;</span><br><span class="line">            <span class="title function_">warn</span>(</span><br><span class="line">              <span class="string">&#x27;It seems there are duplicate keys that is causing an update error. &#x27;</span> +</span><br><span class="line">              <span class="string">&#x27;Make sure each v-for item has a unique key.&#x27;</span></span><br><span class="line">            )</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// æ¯”è¾ƒä¸¤ä¸ªå…·æœ‰ç›¸åŒçš„keyçš„æ–°èŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">          <span class="comment">//ä¸è®¾keyï¼ŒnewChå’ŒoldChåªä¼šè¿›è¡Œå¤´å°¾ä¸¤ç«¯çš„ç›¸äº’æ¯”è¾ƒï¼Œè®¾keyåï¼Œé™¤äº†å¤´å°¾ä¸¤ç«¯çš„æ¯”è¾ƒå¤–ï¼Œè¿˜ä¼šä»ç”¨keyç”Ÿæˆçš„å¯¹è±¡oldKeyToIdxä¸­æŸ¥æ‰¾åŒ¹é…çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸ºèŠ‚ç‚¹è®¾ç½®keyå¯ä»¥æ›´é«˜æ•ˆçš„åˆ©ç”¨domã€‚</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(vnodeToMove, newStartVnode)) &#123;</span><br><span class="line">            <span class="comment">// patch vnodeToMoveå’ŒnewStartVnode</span></span><br><span class="line">            <span class="title function_">patchVnode</span>(vnodeToMove, newStartVnode, insertedVnodeQueue)</span><br><span class="line">            <span class="comment">// æ¸…é™¤</span></span><br><span class="line">            oldCh[idxInOld] = <span class="literal">undefined</span></span><br><span class="line">            <span class="comment">// å¦‚æœremoveOnlyæ˜¯falseï¼Œåˆ™å°†æ‰¾åˆ°çš„å’ŒnewStartVnodejå…·æœ‰ç›¸åŒçš„keyçš„Vnodeï¼Œå«vnodeToMove.elm</span></span><br><span class="line">            <span class="comment">// ç§»åŠ¨åˆ°oldStartVnode.elmä¹‹å‰</span></span><br><span class="line">            canMove &amp;&amp; nodeOps.<span class="title function_">insertBefore</span>(parentElm, vnodeToMove.<span class="property">elm</span>, oldStartVnode.<span class="property">elm</span>)</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å¦‚æœkeyç›¸åŒï¼Œä½†æ˜¯èŠ‚ç‚¹ä¸ç›¸åŒï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// same key but different element. treat as new element</span></span><br><span class="line">            <span class="title function_">createElm</span>(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.<span class="property">elm</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å³ç§»</span></span><br><span class="line">        newStartVnode = newCh[++newStartIdx]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><code>while</code>å¾ªç¯ä¸»è¦å¤„ç†äº†ä»¥ä¸‹äº”ç§æƒ…æ™¯ï¼š</p>
<ul>
<li>å½“æ–°è€ <code>VNode</code> èŠ‚ç‚¹çš„ <code>start</code> ç›¸åŒæ—¶ï¼Œç›´æ¥ <code>patchVnode</code> ï¼ŒåŒæ—¶æ–°è€ <code>VNode</code> èŠ‚ç‚¹çš„å¼€å§‹ç´¢å¼•éƒ½åŠ  1</li>
<li>å½“æ–°è€ <code>VNode</code> èŠ‚ç‚¹çš„ <code>end</code>ç›¸åŒæ—¶ï¼ŒåŒæ ·ç›´æ¥ <code>patchVnode</code> ï¼ŒåŒæ—¶æ–°è€ <code>VNode</code> èŠ‚ç‚¹çš„ç»“æŸç´¢å¼•éƒ½å‡ 1</li>
<li>å½“è€ <code>VNode</code> èŠ‚ç‚¹çš„ <code>start</code> å’Œæ–° <code>VNode</code> èŠ‚ç‚¹çš„ <code>end</code> ç›¸åŒæ—¶ï¼Œè¿™æ—¶å€™åœ¨ <code>patchVnode</code> åï¼Œè¿˜éœ€è¦å°†å½“å‰çœŸå® <code>dom</code> èŠ‚ç‚¹ç§»åŠ¨åˆ° <code>oldEndVnode</code> çš„åé¢ï¼ŒåŒæ—¶è€ <code>VNode</code> èŠ‚ç‚¹å¼€å§‹ç´¢å¼•åŠ  1ï¼Œæ–° <code>VNode</code> èŠ‚ç‚¹çš„ç»“æŸç´¢å¼•å‡ 1</li>
<li>å½“è€ <code>VNode</code> èŠ‚ç‚¹çš„ <code>end</code> å’Œæ–° <code>VNode</code> èŠ‚ç‚¹çš„ <code>start</code> ç›¸åŒæ—¶ï¼Œè¿™æ—¶å€™åœ¨ <code>patchVnode</code> åï¼Œè¿˜éœ€è¦å°†å½“å‰çœŸå® <code>dom</code> èŠ‚ç‚¹ç§»åŠ¨åˆ° <code>oldStartVnode</code> çš„å‰é¢ï¼ŒåŒæ—¶è€ <code>VNode</code> èŠ‚ç‚¹ç»“æŸç´¢å¼•å‡ 1ï¼Œæ–° <code>VNode</code>èŠ‚ç‚¹çš„å¼€å§‹ç´¢å¼•åŠ  1</li>
<li>å¦‚æœéƒ½ä¸æ»¡è¶³ä»¥ä¸Šå››ç§æƒ…å½¢ï¼Œé‚£è¯´æ˜æ²¡æœ‰ç›¸åŒçš„èŠ‚ç‚¹å¯ä»¥å¤ç”¨ï¼Œåˆ™ä¼šåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š<ul>
<li>ä»æ—§çš„ <code>VNode</code> ä¸º <code>key</code> å€¼ï¼Œå¯¹åº” <code>index</code> åºåˆ—ä¸º <code>value</code> å€¼çš„å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°ä¸ <code>newStartVnode</code> ä¸€è‡´ <code>key</code> çš„æ—§çš„ <code>VNode</code> èŠ‚ç‚¹ï¼Œå†è¿›è¡Œ<code>patchVnode</code>ï¼ŒåŒæ—¶å°†è¿™ä¸ªçœŸå® <code>dom</code>ç§»åŠ¨åˆ° <code>oldStartVnode</code>å¯¹åº”çš„çœŸå® <code>dom</code> çš„å‰é¢</li>
<li>è°ƒç”¨ <code>createElm</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>dom</code> èŠ‚ç‚¹æ”¾åˆ°å½“å‰ <code>newStartIdx</code> çš„ä½ç½®</li>
</ul>
</li>
</ul>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul>
<li><p>å½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè®¢é˜…è€…<code>watcher</code>å°±ä¼šè°ƒç”¨<code>patch</code>ç»™çœŸå®çš„<code>DOM</code>æ‰“è¡¥ä¸</p>
</li>
<li><p>é€šè¿‡<code>isSameVnode</code>è¿›è¡Œåˆ¤æ–­ï¼Œç›¸åŒåˆ™è°ƒç”¨<code>patchVnode</code>æ–¹æ³•</p>
<p>patchVnodeåšäº†ä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>æ‰¾åˆ°å¯¹åº”çš„çœŸå®<code>dom</code>ï¼Œç§°ä¸º<code>el</code></li>
<li>å¦‚æœéƒ½æœ‰éƒ½æœ‰æ–‡æœ¬èŠ‚ç‚¹ä¸”ä¸ç›¸ç­‰ï¼Œå°†<code>el</code>æ–‡æœ¬èŠ‚ç‚¹è®¾ç½®ä¸º<code>Vnode</code>çš„æ–‡æœ¬èŠ‚ç‚¹</li>
<li>å¦‚æœ<code>oldVnode</code>æœ‰å­èŠ‚ç‚¹è€Œ<code>VNode</code>æ²¡æœ‰ï¼Œåˆ™åˆ é™¤<code>el</code>å­èŠ‚ç‚¹</li>
<li>å¦‚æœ<code>oldVnode</code>æ²¡æœ‰å­èŠ‚ç‚¹è€Œ<code>VNode</code>æœ‰ï¼Œåˆ™å°†<code>VNode</code>çš„å­èŠ‚ç‚¹çœŸå®åŒ–åæ·»åŠ åˆ°<code>el</code></li>
<li>å¦‚æœä¸¤è€…éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ<code>updateChildren</code>å‡½æ•°æ¯”è¾ƒå­èŠ‚ç‚¹</li>
</ul>
<p>updateChildrenä¸»è¦åšäº†ä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>è®¾ç½®æ–°æ—§<code>VNode</code>çš„å¤´å°¾æŒ‡é’ˆ</li>
<li>æ–°æ—§å¤´å°¾æŒ‡é’ˆè¿›è¡Œæ¯”è¾ƒï¼Œå¾ªç¯å‘ä¸­é—´é æ‹¢ï¼Œæ ¹æ®æƒ…å†µè°ƒç”¨<code>patchVnode</code>è¿›è¡Œ<code>patch</code>é‡å¤æµç¨‹ã€è°ƒç”¨<code>createElem</code>åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œä»å“ˆå¸Œè¡¨å¯»æ‰¾ <code>key</code>ä¸€è‡´çš„<code>VNode</code> èŠ‚ç‚¹å†åˆ†æƒ…å†µæ“ä½œ</li>
</ul>
</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/05/31/Vue/diff%E7%AE%97%E6%B3%95/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-axioså°è£…">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/05/27/Vue/vue-axios%E5%B0%81%E8%A3%85/">axioså°è£…</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-05-27
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€axios-ç®€ä»‹"><a href="#ä¸€ã€axios-ç®€ä»‹" class="headerlink" title="ä¸€ã€axios ç®€ä»‹"></a>ä¸€ã€axios ç®€ä»‹</h2><blockquote>
<p><code>axios</code> æ˜¯ä¸€ä¸ªåŸºäº<code>Promise</code>ç”¨äºæµè§ˆå™¨å’Œ <code>nodejs</code> çš„ <code>HTTP</code> å®¢æˆ·ç«¯ï¼Œå®ƒæœ¬èº«å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p>
</blockquote>
<ul>
<li>ä»æµè§ˆå™¨ä¸­åˆ›å»º <code>XMLHttpRequest</code></li>
<li>ä» <code>node.js</code> å‘å‡º <code>http</code> è¯·æ±‚</li>
<li>æ”¯æŒ<code>Promise API</code></li>
<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>
<li>è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®</li>
<li>å–æ¶ˆè¯·æ±‚</li>
<li>è‡ªåŠ¨è½¬æ¢<code>JSON</code>æ•°æ®</li>
<li>å®¢æˆ·ç«¯æ”¯æŒé˜²æ­¢<code>CSRF/XSRF</code></li>
</ul>
<h2 id="äºŒã€axiosåŸºç¡€"><a href="#äºŒã€axiosåŸºç¡€" class="headerlink" title="äºŒã€axiosåŸºç¡€"></a>äºŒã€axiosåŸºç¡€</h2><ul>
<li><code>axios.requestï¼ˆconfigï¼‰</code></li>
<li><code>axios.getï¼ˆurl [ï¼Œconfig]ï¼‰</code></li>
<li><code>axios.deleteï¼ˆurl [ï¼Œconfig]ï¼‰</code></li>
<li><code>axios.headï¼ˆurl [ï¼Œconfig]ï¼‰</code></li>
<li><code>axios.optionsï¼ˆurl [ï¼Œconfig]ï¼‰</code></li>
<li><code>axios.postï¼ˆurl [ï¼Œdata [ï¼Œconfig]]</code>ï¼‰</li>
<li><code>axios.putï¼ˆurl [ï¼Œdata [ï¼Œconfig]]ï¼‰</code></li>
<li><code>axios.patchï¼ˆurl [ï¼Œdata [ï¼Œconfig]]ï¼‰</code></li>
</ul>
<h2 id="ä¸‰ã€æ‰§è¡Œ-GET-è¯·æ±‚"><a href="#ä¸‰ã€æ‰§è¡Œ-GET-è¯·æ±‚" class="headerlink" title="ä¸‰ã€æ‰§è¡Œ GET è¯·æ±‚"></a>ä¸‰ã€æ‰§è¡Œ GET è¯·æ±‚</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// å‘å…·æœ‰æŒ‡å®šIDçš„ç”¨æˆ·å‘å‡ºè¯·æ±‚</span><br><span class="line">axios.get(&#x27;/user?ID=12345&#x27;)</span><br><span class="line">.then(function (res) &#123;</span><br><span class="line">    console.log(res);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">// ä¹Ÿå¯ä»¥é€šè¿‡ params å¯¹è±¡ä¼ é€’å‚æ•°</span><br><span class="line">axios.get(&#x27;/user&#x27;, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">        ID: 12345</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€æ‰§è¡Œ-POST-è¯·æ±‚"><a href="#å››ã€æ‰§è¡Œ-POST-è¯·æ±‚" class="headerlink" title="å››ã€æ‰§è¡Œ POST è¯·æ±‚"></a>å››ã€æ‰§è¡Œ POST è¯·æ±‚</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&#x27;/user&#x27;, &#123;</span><br><span class="line">    userId:&quot;123&quot;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    headers:&#123;</span><br><span class="line">        token:&quot;abc&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.then(function (res) &#123;</span><br><span class="line">    console.log(res);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€é€šè¿‡é…ç½®æ–¹å¼å‘é€è¯·æ±‚"><a href="#äº”ã€é€šè¿‡é…ç½®æ–¹å¼å‘é€è¯·æ±‚" class="headerlink" title="äº”ã€é€šè¿‡é…ç½®æ–¹å¼å‘é€è¯·æ±‚"></a>äº”ã€é€šè¿‡é…ç½®æ–¹å¼å‘é€è¯·æ±‚</h2><blockquote>
<p><code>get</code>è¯·æ±‚æ˜¯å‘é€å‚æ•°ï¼Œåœ¨<code>params</code>ä¸­å®šä¹‰ã€‚è€Œ<code>POST</code>è¯·æ±‚æ˜¯å‘é€<code>request body</code>,éœ€è¦åœ¨<code>data</code>ä¸­å®šä¹‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// get åœ¨paramsä¸­å®šä¹‰</span><br><span class="line">axios(&#123;</span><br><span class="line">    url:&quot;pakage.json&quot;,</span><br><span class="line">    method:&quot;get&quot;,</span><br><span class="line">    params:&#123;</span><br><span class="line">        userId:&quot;123&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    headers:&#123;</span><br><span class="line">        token:&quot;http-test&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).then(res=&gt;&#123;</span><br><span class="line">    console.log(res.data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// post åœ¨dataä¸­å®šä¹‰</span><br><span class="line">axios(&#123;</span><br><span class="line">    url:&quot;pakage.json&quot;,</span><br><span class="line">    method:&quot;post&quot;,</span><br><span class="line">    data:&#123;</span><br><span class="line">        userId:&quot;123&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    headers:&#123;</span><br><span class="line">        token:&quot;http-test&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).then(res=&gt;&#123;</span><br><span class="line">    console.log(res.data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚"><a href="#å…­ã€æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚" class="headerlink" title="å…­ã€æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚"></a>å…­ã€æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function getUserAcount()&#123;</span><br><span class="line">    // è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡</span><br><span class="line">    return axios.get(&quot;/user/1234&quot;);</span><br><span class="line">&#125;</span><br><span class="line">function getUserPermissions()&#123;</span><br><span class="line">    // è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡</span><br><span class="line">    return axios.get(&quot;/user/1234/getUserPermissions&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ä¸€æ¬¡æ€§è¿”å›ä¸¤ä¸ªæ¥å£</span><br><span class="line">axios.all([getUserAccount(),getUserPerssions()]).then(axios.spread((acct, perms) =&gt; &#123;</span><br><span class="line">    // spreadå±•å¼€ä¸¤ä¸ªè¿”å›çš„ç»“æœ</span><br><span class="line">    //ä¸¤ä¸ªè¯·æ±‚ç°å·²å®Œæˆ</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€å…¨å±€æ‹¦æˆª"><a href="#ä¸ƒã€å…¨å±€æ‹¦æˆª" class="headerlink" title="ä¸ƒã€å…¨å±€æ‹¦æˆª"></a>ä¸ƒã€å…¨å±€æ‹¦æˆª</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">    el:&quot;app&quot;,</span><br><span class="line">    data:&#123;</span><br><span class="line">        msg:&quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    // åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªå‡½æ•°</span><br><span class="line">    mounted:function()&#123;</span><br><span class="line">     //æ‹¦æˆªè¯·æ±‚ä¹‹å‰</span><br><span class="line">       axios.interceptors.request.use(config=&gt;&#123;</span><br><span class="line">           //è¿™é‡Œåšä¸€äº›æ‹¦æˆªæ“ä½œ,æ‹¦æˆªç”¨æˆ·çš„è¯·æ±‚ è¯·æ±‚ä¹‹å‰åšä¸€äº›loadingå¤„ç†</span><br><span class="line">           return config;</span><br><span class="line">       &#125;)</span><br><span class="line">       //æ‹¦æˆªå“åº”ä¹‹åå¤„ç†</span><br><span class="line">       axios.interceptors.response.use(response=&gt;&#123;</span><br><span class="line">           //è¿™é‡Œåšä¸€äº›æ‹¦æˆªæ“ä½œ,å“åº”ä»¥ååšä»€ä¹ˆï¼Œåœ¨è¿”å›æ•°æ®</span><br><span class="line">           return response;</span><br><span class="line">       &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    methods: &#123;</span><br><span class="line">        get: function() &#123;</span><br><span class="line">        </span><br><span class="line">        &#125;,</span><br><span class="line">        post:function() &#123;</span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€è¯·æ±‚å°è£…ã€å¼‚å¸¸ç»Ÿä¸€å¤„ç†"><a href="#å…«ã€è¯·æ±‚å°è£…ã€å¼‚å¸¸ç»Ÿä¸€å¤„ç†" class="headerlink" title="å…«ã€è¯·æ±‚å°è£…ã€å¼‚å¸¸ç»Ÿä¸€å¤„ç†"></a>å…«ã€è¯·æ±‚å°è£…ã€å¼‚å¸¸ç»Ÿä¸€å¤„ç†</h2><blockquote>
<p>vueä¸­é‡‡ç”¨axioså¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œé¿å…è¯·æ±‚æ¥å£é‡å¤ä»£ç ï¼Œä»¥åŠå„ç§ç½‘ç»œæƒ…å†µé€ æˆçš„å¼‚å¸¸æƒ…å†µçš„åˆ¤æ–­ï¼Œé‡‡ç”¨axiosè¯·æ±‚å°è£…å’Œå¼‚å¸¸æ‹¦æˆªæ“ä½œ</p>
</blockquote>
<h3 id="8-1-axios-è¯·æ±‚å°è£…"><a href="#8-1-axios-è¯·æ±‚å°è£…" class="headerlink" title="8.1 axios è¯·æ±‚å°è£…"></a>8.1 axios è¯·æ±‚å°è£…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">//  å¼•å…¥axiosæ–‡ä»¶åŒ…</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line">// POST æ–¹æ³•å°è£…  (å‚æ•°å¤„ç†)</span><br><span class="line">export const postRequest = (url, params) =&gt; &#123;</span><br><span class="line">  return axios(&#123;</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    url: url,</span><br><span class="line">    data: params,</span><br><span class="line">    transformRequest: [function (data) &#123;</span><br><span class="line">      let ret = &#x27;&#x27;</span><br><span class="line">      for (let it in data) &#123;</span><br><span class="line">        ret += encodeURIComponent(it) + &#x27;=&#x27; + encodeURIComponent(data[it]) + &#x27;&amp;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">      return ret</span><br><span class="line">    &#125;],</span><br><span class="line">    headers: &#123;</span><br><span class="line">      &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// POST æ–¹æ³•å°è£…  (æ–‡ä»¶ä¸Šä¼ )</span><br><span class="line">export const uploadFileRequest = (url, params) =&gt; &#123;</span><br><span class="line">  return axios(&#123;</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    url: url,</span><br><span class="line">    data: params,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      &#x27;Content-Type&#x27;: &#x27;multipart/form-data&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//  GET æ–¹æ³•å°è£…</span><br><span class="line">export const getRequest = (url) =&gt; &#123;</span><br><span class="line">  return axios(&#123;</span><br><span class="line">    method: &#x27;get&#x27;,</span><br><span class="line">    url: url</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//  PUT æ–¹æ³•å°è£…</span><br><span class="line">export const putRequest = (url, params) =&gt; &#123;</span><br><span class="line">  return axios(&#123;</span><br><span class="line">    method: &#x27;put&#x27;,</span><br><span class="line">    url: url,</span><br><span class="line">    data: params,</span><br><span class="line">    transformRequest: [function (data) &#123;</span><br><span class="line">      let ret = &#x27;&#x27;</span><br><span class="line">      for (let it in data) &#123;</span><br><span class="line">        ret += encodeURIComponent(it) + &#x27;=&#x27; + encodeURIComponent(data[it]) + &#x27;&amp;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">      return ret</span><br><span class="line">    &#125;],</span><br><span class="line">    headers: &#123;</span><br><span class="line">      &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//  DELETE æ–¹æ³•å°è£…</span><br><span class="line">export const deleteRequest = (url) =&gt; &#123;</span><br><span class="line">  return axios(&#123;</span><br><span class="line">    method: &#x27;delete&#x27;,</span><br><span class="line">    url: url</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-2-axiosè¯·æ±‚å¼‚å¸¸ç»Ÿä¸€å¤„ç†"><a href="#8-2-axiosè¯·æ±‚å¼‚å¸¸ç»Ÿä¸€å¤„ç†" class="headerlink" title="8.2 axiosè¯·æ±‚å¼‚å¸¸ç»Ÿä¸€å¤„ç†"></a>8.2 axiosè¯·æ±‚å¼‚å¸¸ç»Ÿä¸€å¤„ç†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">// å¼•å…¥ä¾èµ–åŒ…</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">import &#123;Message&#125; from &#x27;element-ui&#x27;</span><br><span class="line"></span><br><span class="line">//  REQUEST è¯·æ±‚å¼‚å¸¸æ‹¦æˆª</span><br><span class="line">axios.interceptors.request.use(config=&gt; &#123;</span><br><span class="line"> //==========  æ‰€æœ‰è¯·æ±‚ä¹‹å‰éƒ½è¦æ‰§è¡Œçš„æ“ä½œ  ==============</span><br><span class="line">  return config;</span><br><span class="line">&#125;, err=&gt; &#123;</span><br><span class="line"> //==================  é”™è¯¯å¤„ç†  ====================</span><br><span class="line">  Message.error(&#123;message: &#x27;è¯·æ±‚è¶…æ—¶!&#x27;&#125;);</span><br><span class="line">  return Promise.resolve(err);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//  RESPONSE å“åº”å¼‚å¸¸æ‹¦æˆª</span><br><span class="line">axios.interceptors.response.use(data=&gt; &#123;</span><br><span class="line">//==============  æ‰€æœ‰è¯·æ±‚å®Œæˆåéƒ½è¦æ‰§è¡Œçš„æ“ä½œ  ==================</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸€ç§æ–¹å¼</span><br><span class="line"></span><br><span class="line">    // æ ¹æ®è¿”å›çš„codeå€¼æ¥åšä¸åŒçš„å¤„ç†ï¼ˆå’Œåç«¯çº¦å®šï¼‰</span><br><span class="line">    switch (data.code) &#123;</span><br><span class="line">        case &#x27;0&#x27;:</span><br><span class="line">            // exp: ä¿®å¤iPhone 6+ å¾®ä¿¡ç‚¹å‡»è¿”å›å‡ºç°é¡µé¢ç©ºç™½çš„é—®é¢˜</span><br><span class="line">            if (isIOS()) &#123;</span><br><span class="line">                // å¼‚æ­¥ä»¥ä¿è¯æ•°æ®å·²æ¸²æŸ“åˆ°é¡µé¢ä¸Š</span><br><span class="line">                setTimeout(() =&gt; &#123;</span><br><span class="line">                    // é€šè¿‡æ»šåŠ¨å¼ºåˆ¶æµè§ˆå™¨è¿›è¡Œé¡µé¢é‡ç»˜</span><br><span class="line">                    document.body.scrollTop += 1</span><br><span class="line">                &#125;, 0)</span><br><span class="line">            &#125;</span><br><span class="line">            // è¿™ä¸€æ­¥ä¿è¯æ•°æ®è¿”å›ï¼Œå¦‚æœæ²¡æœ‰returnåˆ™ä¼šèµ°æ¥ä¸‹æ¥çš„ä»£ç ï¼Œä¸æ˜¯æœªç™»å½•å°±æ˜¯æŠ¥é”™</span><br><span class="line">            return data</span><br><span class="line"></span><br><span class="line">        // éœ€è¦é‡æ–°ç™»å½•</span><br><span class="line">        case &#x27;SHIRO_E5001&#x27;:</span><br><span class="line">            // å¾®ä¿¡ç”Ÿäº§ç¯å¢ƒä¸‹æˆæƒç™»å½•</span><br><span class="line">            if (isWeChat() &amp;&amp; IS_PRODUCTION) &#123;</span><br><span class="line">                axios.get(apis.common.wechat.authorizeUrl).then((&#123; result &#125;) =&gt; &#123;</span><br><span class="line">                    location.replace(global.decodeURIComponent(result))</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // å¦åˆ™è·³è½¬åˆ°h5ç™»å½•å¹¶å¸¦ä¸Šè·³è½¬è·¯ç”±</span><br><span class="line">                const search = encodeSearchParams(&#123;</span><br><span class="line">                    next: location.href,</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">                location.replace(`/user/login`)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // ä¸æ˜¾ç¤ºæç¤ºæ¶ˆæ¯</span><br><span class="line">            data.description = &#x27;&#x27;</span><br><span class="line">            break</span><br><span class="line"></span><br><span class="line">        default:</span><br><span class="line">    &#125;</span><br><span class="line">    // è‹¥ä¸æ˜¯æ­£ç¡®çš„è¿”å›codeï¼Œä¸”å·²ç»ç™»å½•ï¼Œå°±æŠ›å‡ºé”™è¯¯</span><br><span class="line">    const err = new Error(data.description)</span><br><span class="line"></span><br><span class="line">    err.data = data</span><br><span class="line">    err.response = response</span><br><span class="line"></span><br><span class="line">  // ç¬¬äºŒç§æ–¹å¼ï¼Œä»…å¯¹200å’ŒerrorçŠ¶æ€å¤„ç†</span><br><span class="line">  if (data.status &amp;&amp; data.status == 200 &amp;&amp; data.data.status == &#x27;error&#x27;) &#123;</span><br><span class="line">    Message.error(&#123;message: data.data.msg&#125;);</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  return data;</span><br><span class="line">&#125;, err=&gt; &#123;</span><br><span class="line">//==============  é”™è¯¯å¤„ç†  ====================</span><br><span class="line">   if (err &amp;&amp; err.response) &#123;</span><br><span class="line">        switch (err.response.status) &#123;</span><br><span class="line">            case 400: err.message = &#x27;è¯·æ±‚é”™è¯¯(400)&#x27;; break;</span><br><span class="line">            case 401: err.message = &#x27;æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•(401)&#x27;; break;</span><br><span class="line">            case 403: err.message = &#x27;æ‹’ç»è®¿é—®(403)&#x27;; break;</span><br><span class="line">            case 404: err.message = &#x27;è¯·æ±‚å‡ºé”™(404)&#x27;; break;</span><br><span class="line">            case 408: err.message = &#x27;è¯·æ±‚è¶…æ—¶(408)&#x27;; break;</span><br><span class="line">            case 500: err.message = &#x27;æœåŠ¡å™¨é”™è¯¯(500)&#x27;; break;</span><br><span class="line">            case 501: err.message = &#x27;æœåŠ¡æœªå®ç°(501)&#x27;; break;</span><br><span class="line">            case 502: err.message = &#x27;ç½‘ç»œé”™è¯¯(502)&#x27;; break;</span><br><span class="line">            case 503: err.message = &#x27;æœåŠ¡ä¸å¯ç”¨(503)&#x27;; break;</span><br><span class="line">            case 504: err.message = &#x27;ç½‘ç»œè¶…æ—¶(504)&#x27;; break;</span><br><span class="line">            case 505: err.message = &#x27;HTTPç‰ˆæœ¬ä¸å—æ”¯æŒ(505)&#x27;; break;</span><br><span class="line">            default: err.message = `è¿æ¥å‡ºé”™($&#123;err.response.status&#125;)!`;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        err.message = &#x27;è¿æ¥æœåŠ¡å™¨å¤±è´¥!&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  Message.err( &#123;message: err.message &#125; )</span><br><span class="line">  return Promise.resolve(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¯·æ±‚å‡ºé”™çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯ï¼š<code>Promise.resolve(err)</code>;ï¼Œè€Œä¸æ˜¯<code>Promise.reject(err)</code>;ï¼Œè¿™æ ·æ— è®ºè¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåœ¨æˆåŠŸçš„å›è°ƒä¸­éƒ½èƒ½æ”¶åˆ°é€šçŸ¥</p>
</blockquote>
<h3 id="8-3-vue-é¡¹ç›®ä¸­ä½¿ç”¨è¯¥æ–¹æ³•"><a href="#8-3-vue-é¡¹ç›®ä¸­ä½¿ç”¨è¯¥æ–¹æ³•" class="headerlink" title="8.3 vue é¡¹ç›®ä¸­ä½¿ç”¨è¯¥æ–¹æ³•"></a>8.3 vue é¡¹ç›®ä¸­ä½¿ç”¨è¯¥æ–¹æ³•</h3><blockquote>
<p>åœ¨main.jsä¸­å¯¼å…¥æ‰€æœ‰è¯·æ±‚æ–¹æ³•</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//  å¯¼å…¥æ‰€æœ‰è¯·æ±‚æ–¹æ³•</span><br><span class="line">import &#123;getRequest,postRequest,deleteRequest,putRequest&#125; from &#x27;./utils/api&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å°†è¯·æ±‚æ–¹æ³•æ·»åŠ è‡³ <code>Vue.prototype</code> ä¸Š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//  å‘VUEçš„åŸå‹ä¸Šæ·»åŠ è¯·æ±‚æ–¹æ³•</span><br><span class="line">Vue.prototype.getRequest = getRequest;</span><br><span class="line">Vue.prototype.postRequest = postRequest;</span><br><span class="line">Vue.prototype.deleteRequest = deleteRequest;</span><br><span class="line">Vue.prototype.putRequest = putRequest;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‘é€è¯·æ±‚ï¼ˆè¯·æ±‚æ–¹æ³•çš„è°ƒç”¨ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//  å‘é€ç½‘ç»œè¯·æ±‚</span><br><span class="line">this.postRequest(&#x27;/login&#x27;, &#123;userNameï¼Œpassword&#125;).then(resp=&gt; &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ä¹ã€æ¥å£å°è£…å¤„ç†"><a href="#ä¹ã€æ¥å£å°è£…å¤„ç†" class="headerlink" title="ä¹ã€æ¥å£å°è£…å¤„ç†"></a>ä¹ã€æ¥å£å°è£…å¤„ç†</h2><blockquote>
<p><code>vue</code>ä¸­<code>Axios</code>çš„å°è£…ä¸<code>API</code>æ¥å£çš„ç®¡ç†è¯¦è§£</p>
</blockquote>
<h3 id="9-1-axiosçš„å°è£…"><a href="#9-1-axiosçš„å°è£…" class="headerlink" title="9.1 axiosçš„å°è£…"></a>9.1 axiosçš„å°è£…</h3><blockquote>
<p>åœ¨<code>vue</code>é¡¹ç›®ä¸­ï¼Œå’Œåå°äº¤äº’è·å–æ•°æ®è¿™å—ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ˜¯<code>axios</code>åº“ï¼Œå®ƒæ˜¯åŸºäº<code>promise</code>çš„<code>http</code>åº“ï¼Œå¯è¿è¡Œåœ¨æµè§ˆå™¨ç«¯å’Œ<code>node.js</code>ä¸­ã€‚ä»–æœ‰å¾ˆå¤šä¼˜ç§€çš„ç‰¹æ€§ï¼Œä¾‹å¦‚æ‹¦æˆªè¯·æ±‚å’Œå“åº”ã€å–æ¶ˆè¯·æ±‚ã€è½¬æ¢<code>json</code>ã€å®¢æˆ·ç«¯é˜²å¾¡<code>XSRF</code>ç­‰</p>
</blockquote>
<ul>
<li>ä¸€èˆ¬æˆ‘ä¼šåœ¨é¡¹ç›®çš„<code>src</code>ç›®å½•ä¸­ï¼Œæ–°å»ºä¸€ä¸ª<code>request</code>æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢æ–°å»ºä¸€ä¸ª<code>http.js</code>å’Œä¸€ä¸ª<code>api.js</code>æ–‡ä»¶ã€‚<code>http.js</code>æ–‡ä»¶ç”¨æ¥å°è£…æˆ‘ä»¬çš„<code>axios</code>ï¼Œ<code>api.js</code>ç”¨æ¥ç»Ÿä¸€ç®¡ç†æˆ‘ä»¬çš„æ¥å£</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// åœ¨http.jsä¸­å¼•å…¥axios</span><br><span class="line">import axios from &#x27;axios&#x27;; // å¼•å…¥axios</span><br><span class="line">import QS from &#x27;qs&#x27;; // å¼•å…¥qsæ¨¡å—ï¼Œç”¨æ¥åºåˆ—åŒ–postç±»å‹çš„æ•°æ®ï¼Œåé¢ä¼šæåˆ°</span><br><span class="line">// vantçš„toastæç¤ºæ¡†ç»„ä»¶ï¼Œå¤§å®¶å¯æ ¹æ®è‡ªå·±çš„uiç»„ä»¶æ›´æ”¹ã€‚</span><br><span class="line">import &#123; Toast &#125; from &#x27;vant&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="9-2-ç¯å¢ƒçš„åˆ‡æ¢"><a href="#9-2-ç¯å¢ƒçš„åˆ‡æ¢" class="headerlink" title="9.2 ç¯å¢ƒçš„åˆ‡æ¢"></a>9.2 ç¯å¢ƒçš„åˆ‡æ¢</h3><blockquote>
<p>æˆ‘ä»¬çš„é¡¹ç›®ç¯å¢ƒå¯èƒ½æœ‰å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚æˆ‘ä»¬é€šè¿‡<code>node</code>çš„ç¯å¢ƒå˜é‡æ¥åŒ¹é…æˆ‘ä»¬çš„é»˜è®¤çš„æ¥å£<code>url</code>å‰ç¼€ã€‚<code>axios.defaults.baseURL</code>å¯ä»¥è®¾ç½®<code>axios</code>çš„é»˜è®¤è¯·æ±‚åœ°å€å°±ä¸å¤šè¯´äº†</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// ç¯å¢ƒçš„åˆ‡æ¢</span><br><span class="line">if (process.env.NODE_ENV == &#x27;development&#x27;) &#123; </span><br><span class="line"> axios.defaults.baseURL = &#x27;https://www.baidu.com&#x27;;&#125; </span><br><span class="line">else if (process.env.NODE_ENV == &#x27;debug&#x27;) &#123; </span><br><span class="line"> axios.defaults.baseURL = &#x27;https://www.ceshi.com&#x27;;</span><br><span class="line">&#125; </span><br><span class="line">else if (process.env.NODE_ENV == &#x27;production&#x27;) &#123; </span><br><span class="line"> axios.defaults.baseURL = &#x27;https://www.production.com&#x27;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-3-è®¾ç½®è¯·æ±‚è¶…æ—¶"><a href="#9-3-è®¾ç½®è¯·æ±‚è¶…æ—¶" class="headerlink" title="9.3 è®¾ç½®è¯·æ±‚è¶…æ—¶"></a>9.3 è®¾ç½®è¯·æ±‚è¶…æ—¶</h3><blockquote>
<p>é€šè¿‡<code>axios.defaults.timeout</code>è®¾ç½®é»˜è®¤çš„è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚è¶…è¿‡äº†10sï¼Œå°±ä¼šå‘ŠçŸ¥ç”¨æˆ·å½“å‰è¯·æ±‚è¶…æ—¶ï¼Œè¯·åˆ·æ–°ç­‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.timeout = 10000;</span><br></pre></td></tr></table></figure>

<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post`è¯·æ±‚å¤´çš„è®¾ç½®`post`è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šä¸€ä¸ªè¯·æ±‚å¤´ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œä¸€ä¸ªé»˜è®¤çš„è®¾ç½®ï¼Œå³è®¾ç½®`post`çš„è¯·æ±‚å¤´ä¸º`application/x-www-form-urlencoded;charset=UTF-8</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.headers.post[&#x27;Content-Type&#x27;] = &#x27;application/x-www-form-urlencode</span><br></pre></td></tr></table></figure>

<h3 id="9-4-è¯·æ±‚æ‹¦æˆª"><a href="#9-4-è¯·æ±‚æ‹¦æˆª" class="headerlink" title="9.4 è¯·æ±‚æ‹¦æˆª"></a>9.4 è¯·æ±‚æ‹¦æˆª</h3><blockquote>
<p>æˆ‘ä»¬åœ¨å‘é€è¯·æ±‚å‰å¯ä»¥è¿›è¡Œä¸€ä¸ªè¯·æ±‚çš„æ‹¦æˆªï¼Œä¸ºä»€ä¹ˆè¦æ‹¦æˆªå‘¢ï¼Œæˆ‘ä»¬æ‹¦æˆªè¯·æ±‚æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿæ¯”å¦‚ï¼Œæœ‰äº›è¯·æ±‚æ˜¯éœ€è¦ç”¨æˆ·ç™»å½•ä¹‹åæ‰èƒ½è®¿é—®çš„ï¼Œæˆ–è€…postè¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åºåˆ—åŒ–æˆ‘ä»¬æäº¤çš„æ•°æ®ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯·æ±‚è¢«å‘é€ä¹‹å‰è¿›è¡Œä¸€ä¸ªæ‹¦æˆªï¼Œä»è€Œè¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„æ“ä½œ</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// å…ˆå¯¼å…¥vuex,å› ä¸ºæˆ‘ä»¬è¦ä½¿ç”¨åˆ°é‡Œé¢çš„çŠ¶æ€å¯¹è±¡</span><br><span class="line">// vuexçš„è·¯å¾„æ ¹æ®è‡ªå·±çš„è·¯å¾„å»å†™</span><br><span class="line">import store from &#x27;@/store/index&#x27;;</span><br><span class="line"></span><br><span class="line">// è¯·æ±‚æ‹¦æˆªå™¨axios.interceptors.request.use( </span><br><span class="line"> config =&gt; &#123; </span><br><span class="line"> // æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰åˆ¤æ–­vuexä¸­æ˜¯å¦å­˜åœ¨token </span><br><span class="line"> // å¦‚æœå­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€åœ¨httpè¯·æ±‚çš„headeréƒ½åŠ ä¸Štokenï¼Œè¿™æ ·åå°æ ¹æ®tokenåˆ¤æ–­ä½ çš„ç™»å½•æƒ…å†µ</span><br><span class="line"> // å³ä½¿æœ¬åœ°å­˜åœ¨tokenï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­è¦å¯¹è¿”å›çŠ¶æ€è¿›è¡Œåˆ¤æ–­ </span><br><span class="line"> const token = store.state.token; </span><br><span class="line"> token &amp;&amp; (config.headers.Authorization = token); </span><br><span class="line"> return config; </span><br><span class="line"> &#125;, </span><br><span class="line"> error =&gt; &#123; </span><br><span class="line"> return Promise.error(error); </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸€èˆ¬æ˜¯åœ¨ç™»å½•å®Œæˆä¹‹åï¼Œå°†ç”¨æˆ·çš„<code>token</code>é€šè¿‡<code>localStorage</code>æˆ–è€…<code>cookie</code>å­˜åœ¨æœ¬åœ°ï¼Œç„¶åç”¨æˆ·æ¯æ¬¡åœ¨è¿›å…¥é¡µé¢çš„æ—¶å€™ï¼ˆå³åœ¨<code>main.js</code>ä¸­ï¼‰ï¼Œä¼šé¦–å…ˆä»æœ¬åœ°å­˜å‚¨ä¸­è¯»å–<code>token</code>ï¼Œå¦‚æœ<code>token</code>å­˜åœ¨è¯´æ˜ç”¨æˆ·å·²ç»ç™»é™†è¿‡ï¼Œåˆ™æ›´æ–°vuexä¸­çš„tokençŠ¶æ€ã€‚ç„¶åï¼Œåœ¨æ¯æ¬¡è¯·æ±‚æ¥å£çš„æ—¶å€™ï¼Œéƒ½ä¼šåœ¨è¯·æ±‚çš„<code>header</code>ä¸­æºå¸¦<code>token</code>ï¼Œåå°äººå‘˜å°±å¯ä»¥æ ¹æ®ä½ æºå¸¦çš„<code>token</code>æ¥åˆ¤æ–­ä½ çš„ç™»å½•æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæ²¡æœ‰æºå¸¦ï¼Œåˆ™è¯´æ˜æ²¡æœ‰ç™»å½•è¿‡ã€‚è¿™æ—¶å€™æˆ–è®¸æœ‰äº›å°ä¼™ä¼´ä¼šæœ‰ç–‘é—®äº†ï¼Œå°±æ˜¯æ¯ä¸ªè¯·æ±‚éƒ½æºå¸¦<code>token</code>ï¼Œé‚£ä¹ˆè¦æ˜¯ä¸€ä¸ªé¡µé¢ä¸éœ€è¦ç”¨æˆ·ç™»å½•å°±å¯ä»¥è®¿é—®çš„æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®ï¼Œä½ å‰ç«¯çš„è¯·æ±‚å¯ä»¥æºå¸¦<code>token</code>ï¼Œä½†æ˜¯åå°å¯ä»¥é€‰æ‹©ä¸æ¥æ”¶å•Šï¼</p>
</blockquote>
<h3 id="9-5-å“åº”çš„æ‹¦æˆª"><a href="#9-5-å“åº”çš„æ‹¦æˆª" class="headerlink" title="9.5 å“åº”çš„æ‹¦æˆª"></a>9.5 å“åº”çš„æ‹¦æˆª</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">// å“åº”æ‹¦æˆªå™¨</span><br><span class="line">axios.interceptors.response.use( </span><br><span class="line"> response =&gt; &#123; </span><br><span class="line"> // å¦‚æœè¿”å›çš„çŠ¶æ€ç ä¸º200ï¼Œè¯´æ˜æ¥å£è¯·æ±‚æˆåŠŸï¼Œå¯ä»¥æ­£å¸¸æ‹¿åˆ°æ•°æ® </span><br><span class="line"> // å¦åˆ™çš„è¯æŠ›å‡ºé”™è¯¯</span><br><span class="line"> if (response.status === 200) &#123;  </span><br><span class="line">  return Promise.resolve(response); </span><br><span class="line"> &#125; else &#123;  </span><br><span class="line">  return Promise.reject(response); </span><br><span class="line"> &#125; </span><br><span class="line"> &#125;, </span><br><span class="line"> // æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯2å¼€å¤´çš„çš„æƒ…å†µ</span><br><span class="line"> // è¿™é‡Œå¯ä»¥è·Ÿä½ ä»¬çš„åå°å¼€å‘äººå‘˜åå•†å¥½ç»Ÿä¸€çš„é”™è¯¯çŠ¶æ€ç  </span><br><span class="line"> // ç„¶åæ ¹æ®è¿”å›çš„çŠ¶æ€ç è¿›è¡Œä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ç™»å½•è¿‡æœŸæç¤ºï¼Œé”™è¯¯æç¤ºç­‰ç­‰</span><br><span class="line"> // ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„æ“ä½œï¼Œå…¶ä»–éœ€æ±‚å¯è‡ªè¡Œæ‰©å±•</span><br><span class="line"> error =&gt; &#123;  </span><br><span class="line"> if (error.response.status) &#123;  </span><br><span class="line">  switch (error.response.status) &#123;  </span><br><span class="line">  // 401: æœªç™»å½•</span><br><span class="line">  // æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶æºå¸¦å½“å‰é¡µé¢çš„è·¯å¾„</span><br><span class="line">  // åœ¨ç™»å½•æˆåŠŸåè¿”å›å½“å‰é¡µé¢ï¼Œè¿™ä¸€æ­¥éœ€è¦åœ¨ç™»å½•é¡µæ“ä½œã€‚  </span><br><span class="line">  case 401:   </span><br><span class="line">   router.replace(&#123;   </span><br><span class="line">   path: &#x27;/login&#x27;,   </span><br><span class="line">   query: &#123; </span><br><span class="line">    redirect: router.currentRoute.fullPath </span><br><span class="line">   &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">   break;</span><br><span class="line"></span><br><span class="line">  // 403 tokenè¿‡æœŸ</span><br><span class="line">  // ç™»å½•è¿‡æœŸå¯¹ç”¨æˆ·è¿›è¡Œæç¤º</span><br><span class="line">  // æ¸…é™¤æœ¬åœ°tokenå’Œæ¸…ç©ºvuexä¸­tokenå¯¹è±¡</span><br><span class="line">  // è·³è½¬ç™»å½•é¡µé¢  </span><br><span class="line">  case 403:</span><br><span class="line">   Toast(&#123;</span><br><span class="line">   message: &#x27;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#x27;,</span><br><span class="line">   duration: 1000,</span><br><span class="line">   forbidClick: true</span><br><span class="line">   &#125;);</span><br><span class="line">   // æ¸…é™¤token</span><br><span class="line">   localStorage.removeItem(&#x27;token&#x27;);</span><br><span class="line">   store.commit(&#x27;loginSuccess&#x27;, null);</span><br><span class="line">   // è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶å°†è¦æµè§ˆçš„é¡µé¢fullPathä¼ è¿‡å»ï¼Œç™»å½•æˆåŠŸåè·³è½¬éœ€è¦è®¿é—®çš„é¡µé¢ </span><br><span class="line">   setTimeout(() =&gt; &#123;   </span><br><span class="line">   router.replace(&#123;    </span><br><span class="line">    path: &#x27;/login&#x27;,    </span><br><span class="line">    query: &#123; </span><br><span class="line">    redirect: router.currentRoute.fullPath </span><br><span class="line">    &#125;   </span><br><span class="line">   &#125;);   </span><br><span class="line">   &#125;, 1000);   </span><br><span class="line">   break;</span><br><span class="line"></span><br><span class="line">  // 404è¯·æ±‚ä¸å­˜åœ¨</span><br><span class="line">  case 404:</span><br><span class="line">   Toast(&#123;</span><br><span class="line">   message: &#x27;ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨&#x27;,</span><br><span class="line">   duration: 1500,</span><br><span class="line">   forbidClick: true</span><br><span class="line">   &#125;);</span><br><span class="line">   break;</span><br><span class="line">  // å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º</span><br><span class="line">  default:</span><br><span class="line">   Toast(&#123;</span><br><span class="line">   message: error.response.data.message,</span><br><span class="line">   duration: 1500,</span><br><span class="line">   forbidClick: true</span><br><span class="line">   &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  return Promise.reject(error.response);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å“åº”æ‹¦æˆªå™¨å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„æ•°æ®ï¼Œæˆ‘ä»¬åœ¨æ‹¿åˆ°ä¹‹å‰å¯ä»¥å¯¹ä»–è¿›è¡Œä¸€äº›å¤„ç†ã€‚ä¾‹å¦‚ä¸Šé¢çš„æ€æƒ³ï¼šå¦‚æœåå°è¿”å›çš„çŠ¶æ€ç æ˜¯200ï¼Œåˆ™æ­£å¸¸è¿”å›æ•°æ®ï¼Œå¦åˆ™çš„æ ¹æ®é”™è¯¯çš„çŠ¶æ€ç ç±»å‹è¿›è¡Œä¸€äº›æˆ‘ä»¬éœ€è¦çš„é”™è¯¯ï¼Œå…¶å®è¿™é‡Œä¸»è¦å°±æ˜¯è¿›è¡Œäº†é”™è¯¯çš„ç»Ÿä¸€å¤„ç†å’Œæ²¡ç™»å½•æˆ–ç™»å½•è¿‡æœŸåè°ƒæ•´ç™»å½•é¡µçš„ä¸€ä¸ªæ“ä½œ</p>
</blockquote>
<ul>
<li>è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„<code>Toast()</code>æ–¹æ³•ï¼Œæ˜¯æˆ‘å¼•å…¥çš„<code>vant</code>åº“ä¸­çš„<code>toast</code>è½»æç¤ºç»„ä»¶ï¼Œä½ æ ¹æ®ä½ çš„<code>ui</code>åº“ï¼Œå¯¹åº”ä½¿ç”¨ä½ çš„ä¸€ä¸ªæç¤ºç»„ä»¶</li>
</ul>
<h3 id="9-6-å°è£…getæ–¹æ³•å’Œpostæ–¹æ³•"><a href="#9-6-å°è£…getæ–¹æ³•å’Œpostæ–¹æ³•" class="headerlink" title="9.6 å°è£…getæ–¹æ³•å’Œpostæ–¹æ³•"></a>9.6 å°è£…getæ–¹æ³•å’Œpostæ–¹æ³•</h3><blockquote>
<p>æˆ‘ä»¬å¸¸ç”¨çš„<code>ajax</code>è¯·æ±‚æ–¹æ³•æœ‰<code>get</code>ã€<code>post</code>ã€<code>put</code>ç­‰æ–¹æ³•ã€‚<code>axios</code>å¯¹åº”çš„ä¹Ÿæœ‰å¾ˆå¤šç±»ä¼¼çš„æ–¹æ³•ï¼Œä¸æ¸…æ¥šçš„å¯ä»¥çœ‹ä¸‹æ–‡æ¡£ã€‚ä½†æ˜¯ä¸ºäº†ç®€åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å¯¹å…¶è¿›è¡Œä¸€ä¸ªç®€å•çš„å°è£…ã€‚ä¸‹é¢æˆ‘ä»¬ä¸»è¦å°è£…ä¸¤ä¸ªæ–¹æ³•ï¼š<code>get</code>å’Œ<code>post</code></p>
</blockquote>
<ul>
<li><code>get</code>æ–¹æ³•ï¼šæˆ‘ä»¬é€šè¿‡å®šä¹‰ä¸€ä¸ª<code>get</code>å‡½æ•°ï¼Œ<code>get</code>å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæˆ‘ä»¬è¦è¯·æ±‚çš„<code>url</code>åœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¦æºå¸¦çš„è¯·æ±‚å‚æ•°ã€‚<code>get</code>å‡½æ•°è¿”å›ä¸€ä¸ª<code>promise</code>å¯¹è±¡ï¼Œå½“<code>axios</code>å…¶è¯·æ±‚æˆåŠŸæ—¶<code>resolve</code>æœåŠ¡å™¨è¿”å›å€¼ï¼Œè¯·æ±‚å¤±è´¥æ—¶<code>reject</code>é”™è¯¯å€¼ã€‚æœ€åé€šè¿‡<code>export</code>æŠ›å‡º<code>get</code>å‡½æ•°</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * getæ–¹æ³•ï¼Œå¯¹åº”getè¯·æ±‚</span><br><span class="line"> * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€]</span><br><span class="line"> * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°]</span><br><span class="line"> */</span><br><span class="line">export function get(url, params)&#123; </span><br><span class="line"> return new Promise((resolve, reject) =&gt;&#123; </span><br><span class="line"> axios.get(url, &#123;  </span><br><span class="line">  params: params </span><br><span class="line"> &#125;).then(res =&gt; &#123;</span><br><span class="line">  resolve(res.data);</span><br><span class="line"> &#125;).catch(err =&gt;&#123;</span><br><span class="line">  reject(err.data) </span><br><span class="line"> &#125;) </span><br><span class="line">&#125;);&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>post</code>æ–¹æ³•ï¼šåŸç†åŒ<code>get</code>åŸºæœ¬ä¸€æ ·ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>post</code>æ–¹æ³•å¿…é¡»è¦ä½¿ç”¨å¯¹æäº¤ä»å‚æ•°å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–çš„æ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€šè¿‡<code>node</code>çš„<code>qs</code>æ¨¡å—æ¥åºåˆ—åŒ–æˆ‘ä»¬çš„å‚æ•°ã€‚è¿™ä¸ªå¾ˆé‡è¦ï¼Œå¦‚æœæ²¡æœ‰åºåˆ—åŒ–æ“ä½œï¼Œåå°æ˜¯æ‹¿ä¸åˆ°ä½ æäº¤çš„æ•°æ®çš„</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> * postæ–¹æ³•ï¼Œå¯¹åº”postè¯·æ±‚ </span><br><span class="line"> * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€] </span><br><span class="line"> * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] </span><br><span class="line"> */</span><br><span class="line">export function post(url, params) &#123;</span><br><span class="line"> return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  axios.post(url, QS.stringify(params))</span><br><span class="line"> .then(res =&gt; &#123;</span><br><span class="line">  resolve(res.data);</span><br><span class="line"> &#125;)</span><br><span class="line"> .catch(err =&gt;&#123;</span><br><span class="line">  reject(err.data)</span><br><span class="line"> &#125;)</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>axios.get()</code>æ–¹æ³•å’Œ<code>axios.post()</code>åœ¨æäº¤æ•°æ®æ—¶å‚æ•°çš„ä¹¦å†™æ–¹å¼è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚åŒºåˆ«å°±æ˜¯ï¼Œ<code>get</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª<code>&#123;&#125;</code>ï¼Œç„¶åè¿™ä¸ªå¯¹è±¡çš„<code>params</code>å±æ€§å€¼æ˜¯ä¸€ä¸ªå‚æ•°å¯¹è±¡çš„ã€‚è€Œ<code>post</code>çš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ªå‚æ•°å¯¹è±¡</p>
</blockquote>
<h3 id="9-7-apiçš„ç»Ÿä¸€ç®¡ç†"><a href="#9-7-apiçš„ç»Ÿä¸€ç®¡ç†" class="headerlink" title="9.7 apiçš„ç»Ÿä¸€ç®¡ç†"></a>9.7 apiçš„ç»Ÿä¸€ç®¡ç†</h3><blockquote>
<p>é¦–å…ˆæˆ‘ä»¬åœ¨<code>api.js</code>ä¸­å¼•å…¥æˆ‘ä»¬å°è£…çš„<code>get</code>å’Œ<code>post</code>æ–¹æ³•</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> * apiæ¥å£ç»Ÿä¸€ç®¡ç†</span><br><span class="line"> */</span><br><span class="line">import &#123; get, post &#125; from &#x27;./http&#x27;</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>api.js</code>ä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const apiAddress = param =&gt; post(&#x27;api/v1/users&#x27;,param)</span><br></pre></td></tr></table></figure>

<p>åœ¨æˆ‘ä»¬çš„é¡µé¢ä¸­å¯ä»¥è¿™æ ·è°ƒç”¨æˆ‘ä»¬çš„<code>api</code>æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import &#123; apiAddress &#125; from &#x27;@/request/api&#x27;;// å¯¼å…¥æˆ‘ä»¬çš„apiæ¥å£</span><br><span class="line">export default &#123;  </span><br><span class="line"> name: &#x27;Address&#x27;, </span><br><span class="line"> created () &#123;</span><br><span class="line">  this.onLoad();</span><br><span class="line"> &#125;,</span><br><span class="line"> methods: &#123;   </span><br><span class="line">  // è·å–æ•°æ®   </span><br><span class="line">  onLoad() &#123;</span><br><span class="line">   // è°ƒç”¨apiæ¥å£ï¼Œå¹¶ä¸”æä¾›äº†ä¸¤ä¸ªå‚æ•°    </span><br><span class="line">   apiAddress(&#123;     </span><br><span class="line">    type: 0,     </span><br><span class="line">    sort: 1    </span><br><span class="line">   &#125;).then(res =&gt; &#123;</span><br><span class="line">    // è·å–æ•°æ®æˆåŠŸåçš„å…¶ä»–æ“ä½œ</span><br><span class="line">    â€¦â€¦â€¦â€¦â€¦â€¦    </span><br><span class="line">   &#125;)   </span><br><span class="line">  &#125;  </span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-8-å®Œæ•´å°è£…ä»£ç "><a href="#9-8-å®Œæ•´å°è£…ä»£ç " class="headerlink" title="9.8 å®Œæ•´å°è£…ä»£ç "></a>9.8 å®Œæ•´å°è£…ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">/**axioså°è£…</span><br><span class="line"> * è¯·æ±‚æ‹¦æˆªã€ç›¸åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç†</span><br><span class="line"> */</span><br><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line">import QS from &#x27;qs&#x27;;</span><br><span class="line">import &#123;</span><br><span class="line">	Toast</span><br><span class="line">&#125;</span><br><span class="line">from &#x27;vant&#x27;;</span><br><span class="line">import store from &#x27;../store/index&#x27;</span><br><span class="line"></span><br><span class="line">// ç¯å¢ƒçš„åˆ‡æ¢</span><br><span class="line">if (process.env.NODE_ENV == &#x27;development&#x27;) &#123;</span><br><span class="line">	axios.defaults.baseURL = &#x27;/api&#x27;;</span><br><span class="line">&#125; else if (process.env.NODE_ENV == &#x27;debug&#x27;) &#123;</span><br><span class="line">	axios.defaults.baseURL = &#x27;&#x27;;</span><br><span class="line">&#125; else if (process.env.NODE_ENV == &#x27;production&#x27;) &#123;</span><br><span class="line">	axios.defaults.baseURL = &#x27;http://api.123dailu.com/&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span><br><span class="line">axios.defaults.timeout = 10000;</span><br><span class="line"></span><br><span class="line">// postè¯·æ±‚å¤´</span><br><span class="line">axios.defaults.headers.post[&#x27;Content-Type&#x27;] = &#x27;application/x-www-form-urlencoded;charset=UTF-8&#x27;;</span><br><span class="line"></span><br><span class="line">// è¯·æ±‚æ‹¦æˆªå™¨</span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">config = &gt; &#123;</span><br><span class="line">	// æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰åˆ¤æ–­æ˜¯å¦å­˜åœ¨tokenï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€åœ¨httpè¯·æ±‚çš„headeréƒ½åŠ ä¸Štokenï¼Œä¸ç”¨æ¯æ¬¡è¯·æ±‚éƒ½æ‰‹åŠ¨æ·»åŠ äº†</span><br><span class="line">	// å³ä½¿æœ¬åœ°å­˜åœ¨tokenï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­è¦å¯¹è¿”å›çŠ¶æ€è¿›è¡Œåˆ¤æ–­</span><br><span class="line">	const token = store.state.token;</span><br><span class="line">	token &amp;&amp; (config.headers.Authorization = token);</span><br><span class="line">	return config;</span><br><span class="line">&#125;, error = &gt; &#123;</span><br><span class="line">	return Promise.error(error);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// å“åº”æ‹¦æˆªå™¨</span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">response = &gt; &#123;</span><br><span class="line">	if (response.status === 200) &#123;</span><br><span class="line">		return Promise.resolve(response);</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return Promise.reject(response);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br><span class="line">// æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯200çš„æƒ…å†µ </span><br><span class="line">error = &gt; &#123;</span><br><span class="line">	if (error.response.status) &#123;</span><br><span class="line">		switch (error.response.status) &#123;</span><br><span class="line">			// 401: æœªç™»å½•    </span><br><span class="line">			// æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶æºå¸¦å½“å‰é¡µé¢çš„è·¯å¾„    </span><br><span class="line">			// åœ¨ç™»å½•æˆåŠŸåè¿”å›å½“å‰é¡µé¢ï¼Œè¿™ä¸€æ­¥éœ€è¦åœ¨ç™»å½•é¡µæ“ä½œã€‚    </span><br><span class="line">		case 401:</span><br><span class="line">			router.replace(&#123;</span><br><span class="line">				path: &#x27;/login&#x27;,</span><br><span class="line">				query: &#123;</span><br><span class="line">					redirect: router.currentRoute.fullPath</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">			break;</span><br><span class="line">			// 403 tokenè¿‡æœŸ    </span><br><span class="line">			// ç™»å½•è¿‡æœŸå¯¹ç”¨æˆ·è¿›è¡Œæç¤º    </span><br><span class="line">			// æ¸…é™¤æœ¬åœ°tokenå’Œæ¸…ç©ºvuexä¸­tokenå¯¹è±¡    </span><br><span class="line">			// è·³è½¬ç™»å½•é¡µé¢    </span><br><span class="line">		case 403:</span><br><span class="line">			Toast(&#123;</span><br><span class="line">				message: &#x27;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#x27;,</span><br><span class="line">				duration: 1000,</span><br><span class="line">				forbidClick: true</span><br><span class="line">			&#125;);</span><br><span class="line">			// æ¸…é™¤token     </span><br><span class="line">			localStorage.removeItem(&#x27;token&#x27;);</span><br><span class="line">			store.commit(&#x27;loginSuccess&#x27;, null);</span><br><span class="line">			// è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶å°†è¦æµè§ˆçš„é¡µé¢fullPathä¼ è¿‡å»ï¼Œç™»å½•æˆåŠŸåè·³è½¬éœ€è¦è®¿é—®çš„é¡µé¢</span><br><span class="line">			setTimeout(() = &gt; &#123;</span><br><span class="line">				router.replace(&#123;</span><br><span class="line">					path: &#x27;/login&#x27;,</span><br><span class="line">					query: &#123;</span><br><span class="line">						redirect: router.currentRoute.fullPath</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;, 1000);</span><br><span class="line">			break;</span><br><span class="line">			// 404è¯·æ±‚ä¸å­˜åœ¨    </span><br><span class="line">		case 404:</span><br><span class="line">			Toast(&#123;</span><br><span class="line">				message: &#x27;ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨&#x27;,</span><br><span class="line">				duration: 1500,</span><br><span class="line">				forbidClick: true</span><br><span class="line">			&#125;);</span><br><span class="line">			break;</span><br><span class="line">			// å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º    </span><br><span class="line">		default:</span><br><span class="line">			Toast(&#123;</span><br><span class="line">				message: error.response.data.message,</span><br><span class="line">				duration: 1500,</span><br><span class="line">				forbidClick: true</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		return Promise.reject(error.response);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">/** </span><br><span class="line"> * getæ–¹æ³•ï¼Œå¯¹åº”getè¯·æ±‚</span><br><span class="line"> * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€]</span><br><span class="line"> * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°]</span><br><span class="line"> */</span><br><span class="line">export</span><br><span class="line">function get(url, params) &#123;</span><br><span class="line">	return new Promise((resolve, reject) = &gt; &#123;</span><br><span class="line">		axios.get(url, &#123;</span><br><span class="line">			params: params</span><br><span class="line">		&#125;).then(res = &gt; &#123;</span><br><span class="line">			resolve(res.data);</span><br><span class="line">		&#125;).</span><br><span class="line">		catch (err = &gt; &#123;</span><br><span class="line">			reject(err.data)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line">/** </span><br><span class="line"> * postæ–¹æ³•ï¼Œå¯¹åº”postè¯·æ±‚</span><br><span class="line"> * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€]</span><br><span class="line"> * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°]</span><br><span class="line"> */</span><br><span class="line">export</span><br><span class="line">function post(url, params) &#123;</span><br><span class="line">	return new Promise((resolve, reject) = &gt; &#123;</span><br><span class="line">		axios.post(url, QS.stringify(params)).then(res = &gt; &#123;</span><br><span class="line">			resolve(res.data);</span><br><span class="line">		&#125;).</span><br><span class="line">		catch (err = &gt; &#123;</span><br><span class="line">			reject(err.data)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/05/27/Vue/vue-axios%E5%B0%81%E8%A3%85/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-TCPå’ŒUDPçš„åŒºåˆ«">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/05/13/http/TCP%E5%92%8CUDP%E7%9A%84%E5%8C%BA%E5%88%AB/">TCPå’ŒUDPçš„åŒºåˆ«</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-05-13
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/http/" class="cube-excerpt-tag-link">#http</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h3 id="1-åŸºäºè¿æ¥vsæ— è¿æ¥"><a href="#1-åŸºäºè¿æ¥vsæ— è¿æ¥" class="headerlink" title="1. åŸºäºè¿æ¥vsæ— è¿æ¥"></a><strong>1. åŸºäºè¿æ¥vsæ— è¿æ¥</strong></h3><ul>
<li>TCPæ˜¯é¢å‘è¿æ¥çš„åè®®ã€‚</li>
<li>UDPæ˜¯æ— è¿æ¥çš„åè®®ã€‚UDPæ›´åŠ é€‚åˆæ¶ˆæ¯çš„å¤šæ’­å‘å¸ƒï¼Œä»å•ä¸ªç‚¹å‘å¤šä¸ªç‚¹ä¼ è¾“æ¶ˆæ¯ã€‚</li>
</ul>
<h3 id="2-å¯é æ€§"><a href="#2-å¯é æ€§" class="headerlink" title="2. å¯é æ€§"></a><strong>2. å¯é æ€§</strong></h3><ul>
<li>TCPæä¾›äº¤ä»˜ä¿è¯ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±ï¼Œå°†ä¼šé‡å‘ã€‚</li>
<li>UDPæ˜¯ä¸å¯é çš„ï¼Œä¸æä¾›ä»»ä½•äº¤ä»˜ä¿è¯ã€‚ï¼ˆç½‘æ¸¸å’Œè§†é¢‘çš„ä¸¢åŒ…æƒ…å†µï¼‰</li>
</ul>
<h3 id="3-æœ‰åºæ€§"><a href="#3-æœ‰åºæ€§" class="headerlink" title="3. æœ‰åºæ€§"></a><strong>3. æœ‰åºæ€§</strong></h3><ul>
<li>TCPä¿è¯äº†æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Œå³ä½¿åˆ°è¾¾å®¢æˆ·ç«¯é¡ºåºä¸åŒï¼ŒTCPä¹Ÿä¼šæ’åºã€‚</li>
<li>UDPä¸æä¾›æœ‰åºæ€§ä¿è¯ã€‚</li>
</ul>
<h3 id="4-æ•°æ®è¾¹ç•Œ"><a href="#4-æ•°æ®è¾¹ç•Œ" class="headerlink" title="4. æ•°æ®è¾¹ç•Œ"></a><strong>4. æ•°æ®è¾¹ç•Œ</strong></h3><ul>
<li>TCPä¸ä¿å­˜æ•°æ®è¾¹ç•Œã€‚<br>è™½ç„¶TCPä¹Ÿå°†åœ¨æ”¶é›†æ‰€æœ‰å­—èŠ‚ä¹‹åç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯ï¼Œä½†æ˜¯è¿™äº›ä¿¡æ¯åœ¨ä¼ ç»™ä¼ è¾“ç»™æ¥å—ç«¯ä¹‹å‰å°†å‚¨å­˜åœ¨TCPç¼“å†²åŒºï¼Œä»¥ç¡®ä¿æ›´å¥½çš„ä½¿ç”¨ç½‘ç»œå¸¦å®½ã€‚</li>
<li>UDPä¿è¯ã€‚<br>åœ¨UDPä¸­ï¼Œæ•°æ®åŒ…å•ç‹¬å‘é€çš„ï¼Œåªæœ‰å½“ä»–ä»¬åˆ°è¾¾æ—¶ï¼Œæ‰ä¼šå†æ¬¡é›†æˆã€‚åŒ…æœ‰æ˜ç¡®çš„ç•Œé™æ¥å“ªäº›åŒ…å·²ç»æ”¶åˆ°ï¼Œè¿™æ„å‘³ç€åœ¨æ¶ˆæ¯å‘é€åï¼Œåœ¨æ¥æ”¶å™¨æ¥å£å°†ä¼šæœ‰ä¸€ä¸ªè¯»æ“ä½œï¼Œæ¥ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯ã€‚</li>
</ul>
<h3 id="5-é€Ÿåº¦"><a href="#5-é€Ÿåº¦" class="headerlink" title="5. é€Ÿåº¦"></a><strong>5. é€Ÿåº¦</strong></h3><ul>
<li>TCPé€Ÿåº¦æ…¢</li>
<li>UDPé€Ÿåº¦å¿«ã€‚åº”ç”¨åœ¨åœ¨çº¿è§†é¢‘åª’ä½“ï¼Œç”µè§†å¹¿æ’­å’Œå¤šäººåœ¨çº¿æ¸¸æˆã€‚</li>
</ul>
<h3 id="6-å‘é€æ¶ˆè€—"><a href="#6-å‘é€æ¶ˆè€—" class="headerlink" title="6. å‘é€æ¶ˆè€—"></a><strong>6. å‘é€æ¶ˆè€—</strong></h3><ul>
<li>TCPæ˜¯é‡é‡çº§ã€‚</li>
<li>UDPæ˜¯è½»é‡çº§ã€‚<br>å› ä¸ºUDPä¼ è¾“çš„ä¿¡æ¯ä¸­ä¸æ‰¿æ‹…ä»»ä½•é—´æ¥åˆ›é€ è¿æ¥ï¼Œä¿è¯äº¤è´§æˆ–ç§©åºçš„çš„ä¿¡æ¯ã€‚<br>è¿™ä¹Ÿåæ˜ åœ¨ç”¨äºæŠ¥å¤´å¤§å°ã€‚</li>
</ul>
<h3 id="7-æŠ¥å¤´å¤§å°"><a href="#7-æŠ¥å¤´å¤§å°" class="headerlink" title="7. æŠ¥å¤´å¤§å°"></a><strong>7. æŠ¥å¤´å¤§å°</strong></h3><ul>
<li>TCPå¤´å¤§ã€‚<br>ä¸€ä¸ªTCPæ•°æ®åŒ…æŠ¥å¤´çš„å¤§å°æ˜¯20å­—èŠ‚ã€‚<br>TCPæŠ¥å¤´ä¸­åŒ…å«åºåˆ—å·ï¼ŒACKå·ï¼Œæ•°æ®åç§»é‡ï¼Œä¿ç•™ï¼Œæ§åˆ¶ä½ï¼Œçª—å£ï¼Œç´§æ€¥æŒ‡é’ˆï¼Œå¯é€‰é¡¹ï¼Œå¡«å……é¡¹ï¼Œæ ¡éªŒä½ï¼Œæºç«¯å£å’Œç›®çš„ç«¯å£ã€‚</li>
<li>UDPå¤´å°ã€‚<br>UDPæ•°æ®æŠ¥æŠ¥å¤´æ˜¯8ä¸ªå­—èŠ‚ã€‚<br>è€ŒUDPæŠ¥å¤´åªåŒ…å«é•¿åº¦ï¼Œæºç«¯å£å·ï¼Œç›®çš„ç«¯å£ï¼Œå’Œæ ¡éªŒå’Œã€‚</li>
</ul>
<h3 id="8-æ‹¥å¡æˆ–æµæ§åˆ¶"><a href="#8-æ‹¥å¡æˆ–æµæ§åˆ¶" class="headerlink" title="8. æ‹¥å¡æˆ–æµæ§åˆ¶"></a><strong>8. æ‹¥å¡æˆ–æµæ§åˆ¶</strong></h3><ul>
<li>TCPæœ‰æµé‡æ§åˆ¶ã€‚<br>åœ¨ä»»ä½•ç”¨æˆ·æ•°æ®å¯ä»¥è¢«å‘é€ä¹‹å‰ï¼ŒTCPéœ€è¦ä¸‰æ•°æ®åŒ…æ¥è®¾ç½®ä¸€ä¸ªå¥—æ¥å­—è¿æ¥ã€‚TCPå¤„ç†çš„å¯é æ€§å’Œæ‹¥å¡æ§åˆ¶ã€‚</li>
<li>UDPä¸èƒ½è¿›è¡Œæµé‡æ§åˆ¶ã€‚</li>
</ul>
<h3 id="9-åº”ç”¨"><a href="#9-åº”ç”¨" class="headerlink" title="9. åº”ç”¨"></a><strong>9. åº”ç”¨</strong></h3><ul>
<li>ç”±äºTCPæä¾›å¯é äº¤ä»˜å’Œæœ‰åºæ€§çš„ä¿è¯ï¼Œå®ƒæ˜¯æœ€é€‚åˆéœ€è¦é«˜å¯é å¹¶ä¸”å¯¹ä¼ è¾“æ—¶é—´è¦æ±‚ä¸é«˜çš„åº”ç”¨ã€‚</li>
<li>UDPæ˜¯æ›´é€‚åˆçš„åº”ç”¨ç¨‹åºéœ€è¦å¿«é€Ÿï¼Œé«˜æ•ˆçš„ä¼ è¾“çš„åº”ç”¨ï¼Œå¦‚æ¸¸æˆã€‚</li>
<li>UDPæ˜¯æ— çŠ¶æ€çš„æ€§è´¨ï¼Œåœ¨æœåŠ¡å™¨ç«¯éœ€è¦å¯¹å¤§é‡å®¢æˆ·ç«¯äº§ç”Ÿçš„å°‘é‡è¯·æ±‚è¿›è¡Œåº”ç­”çš„åº”ç”¨ä¸­æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li>
<li>åœ¨å®è·µä¸­ï¼ŒTCPè¢«ç”¨äºé‡‘èé¢†åŸŸï¼Œå¦‚FIXåè®®æ˜¯ä¸€ç§åŸºäºTCPçš„åè®®ï¼Œè€ŒUDPæ˜¯å¤§é‡ä½¿ç”¨åœ¨æ¸¸æˆå’Œå¨±ä¹åœºæ‰€ã€‚</li>
</ul>
<h3 id="10-ä¸Šå±‚ä½¿ç”¨çš„åè®®"><a href="#10-ä¸Šå±‚ä½¿ç”¨çš„åè®®" class="headerlink" title="10.ä¸Šå±‚ä½¿ç”¨çš„åè®®"></a><strong>10.ä¸Šå±‚ä½¿ç”¨çš„åè®®</strong></h3><ul>
<li>åŸºäºTCPåè®®çš„ï¼šTelnetï¼ŒFTPä»¥åŠSMTPåè®®ã€‚</li>
<li>åŸºäºUDPåè®®çš„ï¼šDHCPã€DNSã€SNMPã€TFTPã€BOOTPã€‚</li>
<li></li>
</ul>
<h2 id="ä¸€ã€UDP"><a href="#ä¸€ã€UDP" class="headerlink" title="ä¸€ã€UDP"></a>ä¸€ã€UDP</h2><p>UDPï¼ˆUser Datagram Protocolï¼‰ï¼Œç”¨æˆ·æ•°æ®åŒ…åè®®ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„<strong>é¢å‘æ•°æ®æŠ¥çš„é€šä¿¡åè®®</strong>ï¼Œå³å¯¹åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œä¸åˆå¹¶ï¼Œä¸æ‹†åˆ†ï¼Œåªæ˜¯åœ¨å…¶ä¸Šé¢åŠ ä¸Šé¦–éƒ¨åå°±äº¤ç»™äº†ä¸‹é¢çš„ç½‘ç»œå±‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´æ— è®ºåº”ç”¨å±‚äº¤ç»™<code>UDP</code>å¤šé•¿çš„æŠ¥æ–‡ï¼Œå®ƒç»Ÿç»Ÿå‘é€ï¼Œä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡</p>
<p>è€Œå¯¹æ¥æ”¶æ–¹ï¼Œæ¥åˆ°åç›´æ¥å»é™¤é¦–éƒ¨ï¼Œäº¤ç»™ä¸Šé¢çš„åº”ç”¨å±‚å°±å®Œæˆä»»åŠ¡</p>
<p><code>UDP</code>æŠ¥å¤´åŒ…æ‹¬4ä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µå ç”¨2ä¸ªå­—èŠ‚ï¼ˆå³16ä¸ªäºŒè¿›åˆ¶ä½ï¼‰ï¼Œæ ‡é¢˜çŸ­ï¼Œå¼€é”€å°</p>
<p><img src="https://static.vue-js.com/928e5d20-b393-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>UDP ä¸æä¾›å¤æ‚çš„æ§åˆ¶æœºåˆ¶ï¼Œåˆ©ç”¨ IP æä¾›é¢å‘æ— è¿æ¥çš„é€šä¿¡æœåŠ¡</li>
<li>ä¼ è¾“é€”ä¸­å‡ºç°ä¸¢åŒ…ï¼ŒUDP ä¹Ÿä¸è´Ÿè´£é‡å‘</li>
<li>å½“åŒ…çš„åˆ°è¾¾é¡ºåºå‡ºç°ä¹±åºæ—¶ï¼ŒUDPæ²¡æœ‰çº æ­£çš„åŠŸèƒ½ã€‚</li>
<li>å¹¶ä¸”å®ƒæ˜¯å°†åº”ç”¨ç¨‹åºå‘æ¥çš„æ•°æ®åœ¨æ”¶åˆ°çš„é‚£ä¸€åˆ»ï¼Œç«‹å³æŒ‰ç…§åŸæ ·å‘é€åˆ°ç½‘ç»œä¸Šçš„ä¸€ç§æœºåˆ¶ã€‚å³ä½¿æ˜¯å‡ºç°ç½‘ç»œæ‹¥å µçš„æƒ…å†µï¼ŒUDP ä¹Ÿæ— æ³•è¿›è¡Œæµé‡æ§åˆ¶ç­‰é¿å…ç½‘ç»œæ‹¥å¡è¡Œä¸º</li>
</ul>
<h2 id="äºŒã€TCP"><a href="#äºŒã€TCP" class="headerlink" title="äºŒã€TCP"></a>äºŒã€TCP</h2><p>TCPï¼ˆTransmission Control Protocolï¼‰ï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼Œæ˜¯ä¸€ç§å¯é ã€<strong>é¢å‘å­—èŠ‚æµçš„é€šä¿¡åè®®</strong>ï¼ŒæŠŠä¸Šé¢åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æ•°æ®çœ‹æˆæ— ç»“æ„çš„å­—èŠ‚æµæ¥å‘é€</p>
<p>å¯ä»¥æƒ³è±¡æˆæµæ°´å½¢å¼çš„ï¼Œå‘é€æ–¹TCPä¼šå°†æ•°æ®æ”¾å…¥â€œè“„æ°´æ± â€ï¼ˆç¼“å­˜åŒºï¼‰ï¼Œç­‰åˆ°å¯ä»¥å‘é€çš„æ—¶å€™å°±å‘é€ï¼Œä¸èƒ½å‘é€å°±ç­‰ç€ï¼ŒTCPä¼šæ ¹æ®å½“å‰ç½‘ç»œçš„æ‹¥å¡çŠ¶æ€æ¥ç¡®å®šæ¯ä¸ªæŠ¥æ–‡æ®µçš„å¤§å°</p>
<p><code>TCP</code>æŠ¥æ–‡é¦–éƒ¨æœ‰20ä¸ªå­—èŠ‚ï¼Œé¢å¤–å¼€é”€å¤§</p>
<p><img src="https://static.vue-js.com/a0010d40-b393-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>TCPå……åˆ†åœ°å®ç°äº†æ•°æ®ä¼ è¾“æ—¶å„ç§æ§åˆ¶åŠŸèƒ½ï¼Œå¯ä»¥è¿›è¡Œä¸¢åŒ…æ—¶çš„é‡å‘æ§åˆ¶ï¼Œè¿˜å¯ä»¥å¯¹æ¬¡åºä¹±æ‰çš„åˆ†åŒ…è¿›è¡Œé¡ºåºæ§åˆ¶ã€‚è€Œè¿™äº›åœ¨ UDP ä¸­éƒ½æ²¡æœ‰ã€‚</li>
<li>æ­¤å¤–ï¼ŒTCP ä½œä¸ºä¸€ç§é¢å‘æœ‰è¿æ¥çš„åè®®ï¼Œåªæœ‰åœ¨ç¡®è®¤é€šä¿¡å¯¹ç«¯å­˜åœ¨æ—¶æ‰ä¼šå‘é€æ•°æ®ï¼Œä»è€Œå¯ä»¥æ§åˆ¶é€šä¿¡æµé‡çš„æµªè´¹ã€‚</li>
<li>æ ¹æ® TCP çš„è¿™äº›æœºåˆ¶ï¼Œåœ¨ IP è¿™ç§æ— è¿æ¥çš„ç½‘ç»œä¸Šä¹Ÿèƒ½å¤Ÿå®ç°é«˜å¯é æ€§çš„é€šä¿¡ï¼ˆ ä¸»è¦é€šè¿‡æ£€éªŒå’Œã€åºåˆ—å·ã€ç¡®è®¤åº”ç­”ã€é‡å‘æ§åˆ¶ã€è¿æ¥ç®¡ç†ä»¥åŠçª—å£æ§åˆ¶ç­‰æœºåˆ¶å®ç°ï¼‰</li>
</ul>
<h2 id="ä¸‰ã€åŒºåˆ«"><a href="#ä¸‰ã€åŒºåˆ«" class="headerlink" title="ä¸‰ã€åŒºåˆ«"></a>ä¸‰ã€åŒºåˆ«</h2><p><code>UDP</code>ä¸<code>TCP</code>ä¸¤è€…çš„éƒ½ä½äºä¼ è¾“å±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://static.vue-js.com/a92bda80-b393-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>ä¸¤è€…åŒºåˆ«å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>TCP</th>
<th>UDP</th>
</tr>
</thead>
<tbody><tr>
<td>å¯é æ€§</td>
<td>å¯é </td>
<td>ä¸å¯é </td>
</tr>
<tr>
<td>è¿æ¥æ€§</td>
<td>é¢å‘è¿æ¥</td>
<td>æ— è¿æ¥</td>
</tr>
<tr>
<td>æŠ¥æ–‡</td>
<td>é¢å‘å­—èŠ‚æµ</td>
<td>é¢å‘æŠ¥æ–‡</td>
</tr>
<tr>
<td>æ•ˆç‡</td>
<td>ä¼ è¾“æ•ˆç‡ä½</td>
<td>ä¼ è¾“æ•ˆç‡é«˜</td>
</tr>
<tr>
<td>åŒå…±æ€§</td>
<td>å…¨åŒå·¥</td>
<td>ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤š</td>
</tr>
<tr>
<td>æµé‡æ§åˆ¶</td>
<td>æ»‘åŠ¨çª—å£</td>
<td>æ— </td>
</tr>
<tr>
<td>æ‹¥å¡æ§åˆ¶</td>
<td>æ…¢å¼€å§‹ã€æ‹¥å¡é¿å…ã€å¿«é‡ä¼ ã€å¿«æ¢å¤</td>
<td>æ— </td>
</tr>
<tr>
<td>ä¼ è¾“æ•ˆç‡</td>
<td>æ…¢</td>
<td>å¿«</td>
</tr>
</tbody></table>
<ul>
<li>TCP æ˜¯é¢å‘è¿æ¥çš„åè®®ï¼Œå»ºç«‹è¿æ¥3æ¬¡æ¡æ‰‹ã€æ–­å¼€è¿æ¥å››æ¬¡æŒ¥æ‰‹ï¼ŒUDPæ˜¯é¢å‘æ— è¿æ¥ï¼Œæ•°æ®ä¼ è¾“å‰åä¸è¿æ¥è¿æ¥ï¼Œå‘é€ç«¯åªè´Ÿè´£å°†æ•°æ®å‘é€åˆ°ç½‘ç»œï¼Œæ¥æ”¶ç«¯ä»æ¶ˆæ¯é˜Ÿåˆ—è¯»å–</li>
<li>TCP æä¾›å¯é çš„æœåŠ¡ï¼Œä¼ è¾“è¿‡ç¨‹é‡‡ç”¨æµé‡æ§åˆ¶ã€ç¼–å·ä¸ç¡®è®¤ã€è®¡æ—¶å™¨ç­‰æ‰‹æ®µç¡®ä¿æ•°æ®æ— å·®é”™ï¼Œä¸ä¸¢å¤±ã€‚UDP åˆ™å°½å¯èƒ½ä¼ é€’æ•°æ®ï¼Œä½†ä¸ä¿è¯ä¼ é€’äº¤ä»˜ç»™å¯¹æ–¹</li>
<li>TCP é¢å‘å­—èŠ‚æµï¼Œå°†åº”ç”¨å±‚æŠ¥æ–‡çœ‹æˆä¸€ä¸²æ— ç»“æ„çš„å­—èŠ‚æµï¼Œåˆ†è§£ä¸ºå¤šä¸ªTCPæŠ¥æ–‡æ®µä¼ è¾“åï¼Œåœ¨ç›®çš„ç«™é‡æ–°è£…é…ã€‚UDPåè®®é¢å‘æŠ¥æ–‡ï¼Œä¸æ‹†åˆ†åº”ç”¨å±‚æŠ¥æ–‡ï¼Œåªä¿ç•™æŠ¥æ–‡è¾¹ç•Œï¼Œä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼Œæ¥æ”¶æ–¹å»é™¤æŠ¥æ–‡é¦–éƒ¨åï¼ŒåŸå°ä¸åŠ¨å°†æŠ¥æ–‡äº¤ç»™ä¸Šå±‚åº”ç”¨</li>
<li>TCP åªèƒ½ç‚¹å¯¹ç‚¹å…¨åŒå·¥é€šä¿¡ã€‚UDP æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡</li>
</ul>
<p>ä¸¤è€…åº”ç”¨åœºæ™¯å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://static.vue-js.com/b6cdd800-b393-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒTCP åº”ç”¨åœºæ™¯é€‚ç”¨äºå¯¹æ•ˆç‡è¦æ±‚ä½ï¼Œå¯¹å‡†ç¡®æ€§è¦æ±‚é«˜æˆ–è€…è¦æ±‚æœ‰é“¾æ¥çš„åœºæ™¯ï¼Œè€ŒUDP é€‚ç”¨åœºæ™¯ä¸ºå¯¹æ•ˆç‡è¦æ±‚é«˜ï¼Œå¯¹å‡†ç¡®æ€§è¦æ±‚ä½çš„åœºæ™¯</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/05/13/http/TCP%E5%92%8CUDP%E7%9A%84%E5%8C%BA%E5%88%AB/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-TCP/IPåè®®">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/05/11/http/TCPIP%E5%8D%8F%E8%AE%AE/">TCP/IPåè®®</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-05-11
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/http/" class="cube-excerpt-tag-link">#http</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><p>TCP&#x2F;IPï¼Œ<strong>ä¼ è¾“æ§åˆ¶åè®®</strong>&#x2F;<strong>ç½‘é™…åè®®</strong>ï¼Œæ˜¯æŒ‡èƒ½å¤Ÿåœ¨å¤šä¸ªä¸åŒç½‘ç»œé—´å®ç°ä¿¡æ¯ä¼ è¾“çš„åè®®ç°‡</p>
<ul>
<li>TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰</li>
</ul>
<p>ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®</p>
<ul>
<li>IPï¼ˆç½‘é™…åè®®ï¼‰</li>
</ul>
<p>ç”¨äºå°åŒ…äº¤æ¢æ•°æ®ç½‘ç»œçš„åè®®</p>
<p>TCP&#x2F;IPåè®®ä¸ä»…ä»…æŒ‡çš„æ˜¯<code>TCP</code>å’Œ<code>IP</code>ä¸¤ä¸ªåè®®ï¼Œè€Œæ˜¯æŒ‡ä¸€ä¸ªç”±<code>FTP</code>ã€<code>SMTP</code>ã€<code>TCP</code>ã€<code>UDP</code>ã€<code>IP</code>ç­‰åè®®æ„æˆçš„åè®®ç°‡ï¼Œ</p>
<p>åªæ˜¯å› ä¸ºåœ¨<code>TCP/IP</code>åè®®ä¸­<code>TCP</code>åè®®å’Œ<code>IP</code>åè®®æœ€å…·ä»£è¡¨æ€§ï¼Œæ‰€ä»¥é€šç§°ä¸ºTCP&#x2F;IPåè®®æ—ï¼ˆè‹±è¯­ï¼šTCP&#x2F;IP Protocol Suiteï¼Œæˆ–TCP&#x2F;IP Protocolsï¼‰</p>
<h2 id="äºŒã€åˆ’åˆ†"><a href="#äºŒã€åˆ’åˆ†" class="headerlink" title="äºŒã€åˆ’åˆ†"></a>äºŒã€åˆ’åˆ†</h2><p>TCP&#x2F;IPåè®®æ—æŒ‰å±‚æ¬¡åˆ†åˆ«äº†äº”å±‚ä½“ç³»æˆ–è€…å››å±‚ä½“ç³»</p>
<p>äº”å±‚ä½“ç³»çš„åè®®ç»“æ„æ˜¯ç»¼åˆäº† OSI å’Œ TCP&#x2F;IP ä¼˜ç‚¹çš„ä¸€ç§åè®®ï¼ŒåŒ…æ‹¬åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚</p>
<p>äº”å±‚åè®®çš„ä½“ç³»ç»“æ„åªæ˜¯ä¸ºä»‹ç»ç½‘ç»œåŸç†è€Œè®¾è®¡çš„ï¼Œå®é™…åº”ç”¨è¿˜æ˜¯ TCP&#x2F;IP å››å±‚ä½“ç³»ç»“æ„ï¼ŒåŒ…æ‹¬åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ï¼ˆç½‘é™…äº’è”å±‚ï¼‰ã€ç½‘ç»œæ¥å£å±‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://static.vue-js.com/5bb93610-b647-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h3 id="äº”å±‚ä½“ç³»"><a href="#äº”å±‚ä½“ç³»" class="headerlink" title="äº”å±‚ä½“ç³»"></a>äº”å±‚ä½“ç³»</h3><h4 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h4><p><code>TCP/IP</code> æ¨¡å‹å°† <code>OSI</code>å‚è€ƒæ¨¡å‹ä¸­çš„ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚å’Œåº”ç”¨å±‚çš„åŠŸèƒ½åˆå¹¶åˆ°ä¸€ä¸ªåº”ç”¨å±‚å®ç°ï¼Œé€šè¿‡ä¸åŒçš„åº”ç”¨å±‚åè®®ä¸ºä¸åŒçš„åº”ç”¨æä¾›æœåŠ¡</p>
<p>å¦‚ï¼š<code>FTP</code>ã€<code>Telnet</code>ã€<code>DNS</code>ã€<code>SMTP</code> ç­‰</p>
<h4 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h4><p>è¯¥å±‚å¯¹åº”äº OSI å‚è€ƒæ¨¡å‹çš„ä¼ è¾“å±‚ï¼Œä¸ºä¸Šå±‚å®ä½“æä¾›æºç«¯åˆ°å¯¹ç«¯ä¸»æœºçš„é€šä¿¡åŠŸèƒ½</p>
<p>ä¼ è¾“å±‚å®šä¹‰äº†ä¸¤ä¸ªä¸»è¦åè®®ï¼šä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰å’Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆUDPï¼‰</p>
<p>å…¶ä¸­é¢å‘è¿æ¥çš„ TCP åè®®ä¿è¯äº†æ•°æ®çš„ä¼ è¾“å¯é æ€§ï¼Œé¢å‘æ— è¿æ¥çš„ UDP åè®®èƒ½å¤Ÿå®ç°æ•°æ®åŒ…ç®€å•ã€å¿«é€Ÿåœ°ä¼ è¾“</p>
<h4 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h4><p>è´Ÿè´£ä¸ºåˆ†ç»„ç½‘ç»œä¸­çš„ä¸åŒä¸»æœºæä¾›é€šä¿¡æœåŠ¡ï¼Œå¹¶é€šè¿‡é€‰æ‹©åˆé€‚çš„è·¯ç”±å°†æ•°æ®ä¼ é€’åˆ°ç›®æ ‡ä¸»æœº</p>
<p>åœ¨å‘é€æ•°æ®æ—¶ï¼Œç½‘ç»œå±‚æŠŠè¿è¾“å±‚äº§ç”Ÿçš„æŠ¥æ–‡æ®µæˆ–ç”¨æˆ·æ•°æ®å°è£…æˆåˆ†ç»„æˆ–åŒ…è¿›è¡Œä¼ é€</p>
<h4 id="æ•°æ®é“¾è·¯å±‚"><a href="#æ•°æ®é“¾è·¯å±‚" class="headerlink" title="æ•°æ®é“¾è·¯å±‚"></a><a target="_blank" rel="noopener" href="https://vue3js.cn/interview/http/TCP_IP.html#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"></a>æ•°æ®é“¾è·¯å±‚</h4><p>æ•°æ®é“¾è·¯å±‚åœ¨ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹ä¼ è¾“æ•°æ®æ—¶ï¼Œå°†ç½‘ç»œå±‚äº¤ä¸‹æ¥çš„IPæ•°æ®æŠ¥ç»„è£…æˆå¸§ï¼Œåœ¨ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹ä¹‹é—´çš„é“¾è·¯ä¸Šä¼ é€å¸§</p>
<h4 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h4><p>ä¿æ•°æ®å¯ä»¥åœ¨å„ç§ç‰©ç†åª’ä»‹ä¸Šè¿›è¡Œä¼ è¾“ï¼Œä¸ºæ•°æ®çš„ä¼ è¾“æä¾›å¯é çš„ç¯å¢ƒ</p>
<h3 id="å››å±‚ä½“ç³»"><a href="#å››å±‚ä½“ç³»" class="headerlink" title="å››å±‚ä½“ç³»"></a>å››å±‚ä½“ç³»</h3><p>TCP&#x2F;IP çš„å››å±‚ç»“æ„åˆ™å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>å±‚æ¬¡åç§°</th>
<th>å•ä½</th>
<th>åŠŸ èƒ½</th>
<th>å è®®</th>
</tr>
</thead>
<tbody><tr>
<td>ç½‘ç»œæ¥å£å±‚</td>
<td>å¸§</td>
<td>è´Ÿè´£å®é™…æ•°æ®çš„ä¼ è¾“ï¼Œå¯¹åº”OSIå‚è€ƒæ¨¡å‹çš„ä¸‹ä¸¤å±‚</td>
<td>HDLCï¼ˆé«˜çº§é“¾è·¯æ§åˆ¶åè®®ï¼‰PPPï¼ˆç‚¹å¯¹ç‚¹åè®®ï¼‰ SLIPï¼ˆä¸²è¡Œçº¿è·¯æ¥å£åè®®ï¼‰</td>
</tr>
<tr>
<td>ç½‘ç»œå±‚</td>
<td>æ•°æ®æŠ¥</td>
<td>è´Ÿè´£ç½‘ç»œé—´çš„å¯»å€æ•°æ®ä¼ è¾“ï¼Œå¯¹åº”OSIå‚è€ƒæ¨¡å‹çš„ç¬¬ä¸‰å±‚</td>
<td>IPï¼ˆç½‘é™…åè®®ï¼‰ ICMPï¼ˆç½‘é™…æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰ARPï¼ˆåœ°å€è§£æåè®®ï¼‰ RARPï¼ˆåå‘åœ°å€è§£æåè®®ï¼‰</td>
</tr>
<tr>
<td>ä¼ è¾“å±‚</td>
<td>æŠ¥æ–‡æ®µ</td>
<td>è´Ÿè´£æä¾›å¯é çš„ä¼ è¾“æœåŠ¡ï¼Œå¯¹åº”OSIå‚è€ƒæ¨¡å‹çš„ç¬¬å››å±‚</td>
<td>TCPï¼ˆæ§åˆ¶ä¼ è¾“åè®®ï¼‰ UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰</td>
</tr>
<tr>
<td>åº”ç”¨å±‚</td>
<td></td>
<td>è´Ÿè´£å®ç°ä¸€åˆ‡ä¸åº”ç”¨ç¨‹åºç›¸å…³çš„åŠŸèƒ½ï¼Œå¯¹åº”OSIå‚è€ƒæ¨¡å‹çš„ä¸Šä¸‰å±‚</td>
<td>FTPï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ HTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ DNSï¼ˆåŸŸåæœåŠ¡å™¨åè®®ï¼‰SMTPï¼ˆç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰NFSï¼ˆç½‘ç»œæ–‡ä»¶ç³»ç»Ÿåè®®ï¼‰</td>
</tr>
</tbody></table>
<h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p>OSI å‚è€ƒæ¨¡å‹ä¸ TCP&#x2F;IP å‚è€ƒæ¨¡å‹åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<p>ç›¸åŒç‚¹ï¼š</p>
<ul>
<li>OSI å‚è€ƒæ¨¡å‹ä¸ TCP&#x2F;IP å‚è€ƒæ¨¡å‹éƒ½é‡‡ç”¨äº†å±‚æ¬¡ç»“æ„</li>
<li>éƒ½èƒ½å¤Ÿæä¾›é¢å‘è¿æ¥å’Œæ— è¿æ¥ä¸¤ç§é€šä¿¡æœåŠ¡æœºåˆ¶</li>
</ul>
<p>ä¸åŒç‚¹ï¼š</p>
<ul>
<li>OSI é‡‡ç”¨çš„ä¸ƒå±‚æ¨¡å‹ï¼› TCP&#x2F;IP æ˜¯å››å±‚æˆ–äº”å±‚ç»“æ„</li>
<li>TCP&#x2F;IP å‚è€ƒæ¨¡å‹æ²¡æœ‰å¯¹ç½‘ç»œæ¥å£å±‚è¿›è¡Œç»†åˆ†ï¼Œåªæ˜¯ä¸€äº›æ¦‚å¿µæ€§çš„æè¿°ï¼› OSI å‚è€ƒæ¨¡å‹å¯¹æœåŠ¡å’Œåè®®åšäº†æ˜ç¡®çš„åŒºåˆ†</li>
<li>OSI å‚è€ƒæ¨¡å‹è™½ç„¶ç½‘ç»œåˆ’åˆ†ä¸ºä¸ƒå±‚ï¼Œä½†å®ç°èµ·æ¥è¾ƒå›°éš¾ã€‚TCP&#x2F;IP å‚è€ƒæ¨¡å‹ä½œä¸ºä¸€ç§ç®€åŒ–çš„åˆ†å±‚ç»“æ„æ˜¯å¯ä»¥çš„</li>
<li>TCP&#x2F;IPåè®®å»æ‰è¡¨ç¤ºå±‚å’Œä¼šè¯å±‚çš„åŸå› åœ¨äºä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚éƒ½æ˜¯åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨å®ç°çš„ï¼Œæœ€ç»ˆäº§å‡ºçš„æ˜¯ä¸€ä¸ªåº”ç”¨æ•°æ®åŒ…ï¼Œè€Œåº”ç”¨ç¨‹åºä¹‹é—´æ˜¯å‡ ä¹æ— æ³•å®ç°ä»£ç çš„æŠ½è±¡å…±äº«çš„ï¼Œè¿™ä¹Ÿå°±é€ æˆ <code>OSI</code> è®¾æƒ³ä¸­çš„åº”ç”¨ç¨‹åºç»´åº¦çš„åˆ†å±‚æ˜¯æ— æ³•å®ç°çš„</li>
</ul>
<p>ä¸‰ç§æ¨¡å‹å¯¹åº”å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://static.vue-js.com/3fbff4d0-b647-11eb-ab90-d9ae814b240d.png" alt="img"></p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/05/11/http/TCPIP%E5%8D%8F%E8%AE%AE/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-OSIä¸ƒå±‚æ¨¡å‹">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/05/08/http/OSI%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/">OSIä¸ƒå±‚æ¨¡å‹</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-05-08
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/http/" class="cube-excerpt-tag-link">#http</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><p>OSI ï¼ˆOpen System Interconnectï¼‰æ¨¡å‹å…¨ç§°ä¸ºå¼€æ”¾å¼é€šä¿¡ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹ï¼Œæ˜¯å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ ( ISO ) æå‡ºçš„ä¸€ä¸ªè¯•å›¾ä½¿å„ç§è®¡ç®—æœºåœ¨ä¸–ç•ŒèŒƒå›´å†…äº’è¿ä¸ºç½‘ç»œçš„æ ‡å‡†æ¡†æ¶</p>
<p><code>OSI</code>å°†è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ’åˆ†ä¸ºä¸ƒå±‚ï¼Œæ¯ä¸€å±‚å®ç°å„è‡ªçš„åŠŸèƒ½å’Œåè®®ï¼Œå¹¶å®Œæˆä¸ç›¸é‚»å±‚çš„æ¥å£é€šä¿¡ã€‚å³æ¯ä¸€å±‚æ‰®æ¼”å›ºå®šçš„è§’è‰²ï¼Œäº’ä¸æ‰“æ‰°</p>
<h2 id="äºŒã€åˆ’åˆ†"><a href="#äºŒã€åˆ’åˆ†" class="headerlink" title="äºŒã€åˆ’åˆ†"></a>äºŒã€åˆ’åˆ†</h2><p><code>OSI</code>ä¸»è¦åˆ’åˆ†äº†ä¸ƒå±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://static.vue-js.com/eb1b2170-b61e-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h3 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h3><p>åº”ç”¨å±‚ä½äº OSI å‚è€ƒæ¨¡å‹çš„ç¬¬ä¸ƒå±‚ï¼Œå…¶ä½œç”¨æ˜¯é€šè¿‡åº”ç”¨ç¨‹åºé—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šçš„ç½‘ç»œåº”ç”¨</p>
<p>è¯¥å±‚åè®®å®šä¹‰äº†åº”ç”¨è¿›ç¨‹ä¹‹é—´çš„äº¤äº’è§„åˆ™ï¼Œé€šè¿‡ä¸åŒçš„åº”ç”¨å±‚åè®®ä¸ºä¸åŒçš„ç½‘ç»œåº”ç”¨æä¾›æœåŠ¡ã€‚ä¾‹å¦‚åŸŸåç³»ç»Ÿ <code>DNS</code>ï¼Œæ”¯æŒä¸‡ç»´ç½‘åº”ç”¨çš„ <code>HTTP</code> åè®®ï¼Œç”µå­é‚®ä»¶ç³»ç»Ÿé‡‡ç”¨çš„ <code>SMTP</code>åè®®ç­‰</p>
<p>åœ¨åº”ç”¨å±‚äº¤äº’çš„æ•°æ®å•å…ƒæˆ‘ä»¬ç§°ä¹‹ä¸ºæŠ¥æ–‡</p>
<h3 id="è¡¨ç¤ºå±‚"><a href="#è¡¨ç¤ºå±‚" class="headerlink" title="è¡¨ç¤ºå±‚"></a>è¡¨ç¤ºå±‚</h3><p>è¡¨ç¤ºå±‚çš„ä½œç”¨æ˜¯ä½¿é€šä¿¡çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè§£é‡Šäº¤æ¢æ•°æ®çš„å«ä¹‰ï¼Œå…¶ä½äº <code>OSI</code>å‚è€ƒæ¨¡å‹çš„ç¬¬å…­å±‚ï¼Œå‘ä¸Šä¸ºåº”ç”¨å±‚æä¾›æœåŠ¡ï¼Œå‘ä¸‹æ¥æ”¶æ¥è‡ªä¼šè¯å±‚çš„æœåŠ¡</p>
<p>è¯¥å±‚æä¾›çš„æœåŠ¡ä¸»è¦åŒ…æ‹¬æ•°æ®å‹ç¼©ï¼Œæ•°æ®åŠ å¯†ä»¥åŠæ•°æ®æè¿°ï¼Œä½¿åº”ç”¨ç¨‹åºä¸å¿…æ‹…å¿ƒåœ¨å„å°è®¡ç®—æœºä¸­è¡¨ç¤ºå’Œå­˜å‚¨çš„å†…éƒ¨æ ¼å¼å·®å¼‚</p>
<h3 id="ä¼šè¯å±‚"><a href="#ä¼šè¯å±‚" class="headerlink" title="ä¼šè¯å±‚"></a>ä¼šè¯å±‚</h3><p>ä¼šè¯å±‚å°±æ˜¯è´Ÿè´£å»ºç«‹ã€ç®¡ç†å’Œç»ˆæ­¢è¡¨ç¤ºå±‚å®ä½“ä¹‹é—´çš„é€šä¿¡ä¼šè¯</p>
<p>è¯¥å±‚æä¾›äº†æ•°æ®äº¤æ¢çš„å®šç•Œå’ŒåŒæ­¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬äº†å»ºç«‹æ£€æŸ¥ç‚¹å’Œæ¢å¤æ–¹æ¡ˆçš„æ–¹æ³•</p>
<h3 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h3><p>ä¼ è¾“å±‚çš„ä¸»è¦ä»»åŠ¡æ˜¯ä¸ºä¸¤å°ä¸»æœºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æä¾›æœåŠ¡ï¼Œå¤„ç†æ•°æ®åŒ…é”™è¯¯ã€æ•°æ®åŒ…æ¬¡åºï¼Œä»¥åŠå…¶ä»–ä¸€äº›å…³é”®ä¼ è¾“é—®é¢˜</p>
<p>ä¼ è¾“å±‚å‘é«˜å±‚å±è”½äº†ä¸‹å±‚æ•°æ®é€šä¿¡çš„ç»†èŠ‚ã€‚å› æ­¤ï¼Œå®ƒæ˜¯è®¡ç®—æœºé€šä¿¡ä½“ç³»ç»“æ„ä¸­å…³é”®çš„ä¸€å±‚</p>
<p>å…¶ä¸­ï¼Œä¸»è¦çš„ä¼ è¾“å±‚åè®®æ˜¯<code>TCP</code>å’Œ<code>UDP</code></p>
<h3 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h3><p>ä¸¤å°è®¡ç®—æœºä¹‹é—´ä¼ é€æ•°æ®æ—¶å…¶é€šä¿¡é“¾è·¯å¾€å¾€ä¸æ­¢ä¸€æ¡ï¼Œæ‰€ä¼ è¾“çš„ä¿¡æ¯ç”šè‡³å¯èƒ½ç»è¿‡å¾ˆå¤šé€šä¿¡å­ç½‘</p>
<p>ç½‘ç»œå±‚çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯é€‰æ‹©åˆé€‚çš„ç½‘é—´è·¯ç”±å’Œäº¤æ¢èŠ‚ç‚¹ï¼Œç¡®ä¿æ•°æ®æŒ‰æ—¶æˆåŠŸä¼ é€</p>
<p>åœ¨å‘é€æ•°æ®æ—¶ï¼Œç½‘ç»œå±‚æŠŠä¼ è¾“å±‚äº§ç”Ÿçš„æŠ¥æ–‡æˆ–ç”¨æˆ·æ•°æ®æŠ¥å°è£…æˆåˆ†ç»„å’ŒåŒ…ï¼Œå‘ä¸‹ä¼ è¾“åˆ°æ•°æ®é“¾è·¯å±‚</p>
<p>åœ¨ç½‘ç»œå±‚ä½¿ç”¨çš„åè®®æ˜¯æ— è¿æ¥çš„ç½‘é™…åè®®ï¼ˆInternet Protocolï¼‰å’Œè®¸å¤šè·¯ç”±åè®®ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸æŠŠè¯¥å±‚ç®€å•åœ°ç§°ä¸º IP å±‚</p>
<h3 id="æ•°æ®é“¾è·¯å±‚"><a href="#æ•°æ®é“¾è·¯å±‚" class="headerlink" title="#æ•°æ®é“¾è·¯å±‚"></a><a target="_blank" rel="noopener" href="https://vue3js.cn/interview/http/OSI.html#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">#</a>æ•°æ®é“¾è·¯å±‚</h3><p>æ•°æ®é“¾è·¯å±‚é€šå¸¸ä¹Ÿå«åšé“¾è·¯å±‚ï¼Œåœ¨ç‰©ç†å±‚å’Œç½‘ç»œå±‚ä¹‹é—´ã€‚ä¸¤å°ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼Œæ€»æ˜¯åœ¨ä¸€æ®µä¸€æ®µçš„é“¾è·¯ä¸Šä¼ é€çš„ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨ä¸“é—¨çš„é“¾è·¯å±‚åè®®</p>
<p>åœ¨ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹ä¹‹é—´ä¼ é€æ•°æ®æ—¶ï¼Œæ•°æ®é“¾è·¯å±‚å°†ç½‘ç»œå±‚äº¤ä¸‹æ¥çš„ <code>IP</code>æ•°æ®æŠ¥ç»„è£…æˆå¸§ï¼Œåœ¨ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹é—´çš„é“¾è·¯ä¸Šä¼ é€å¸§</p>
<p>æ¯ä¸€å¸§çš„æ•°æ®å¯ä»¥åˆ†æˆï¼šæŠ¥å¤´<code>head</code>å’Œæ•°æ®<code>data</code>ä¸¤éƒ¨åˆ†:</p>
<ul>
<li>head æ ‡æ˜æ•°æ®å‘é€è€…ã€æ¥å—è€…ã€æ•°æ®ç±»å‹ï¼Œå¦‚ MACåœ°å€</li>
<li>data å­˜å‚¨äº†è®¡ç®—æœºä¹‹é—´äº¤äº’çš„æ•°æ®</li>
</ul>
<p>é€šè¿‡æ§åˆ¶ä¿¡æ¯æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸€ä¸ªå¸§çš„èµ·æ­¢æ¯”ç‰¹ä½ç½®ï¼Œæ­¤å¤–ï¼Œä¹Ÿèƒ½ä½¿æ¥æ”¶ç«¯æ£€æµ‹å‡ºæ‰€æ”¶åˆ°çš„å¸§æœ‰æ— å·®é”™ï¼Œå¦‚æœå‘ç°å·®é”™ï¼Œæ•°æ®é“¾è·¯å±‚èƒ½å¤Ÿç®€å•çš„ä¸¢å¼ƒæ‰è¿™ä¸ªå¸§ï¼Œä»¥é¿å…ç»§ç»­å ç”¨ç½‘ç»œèµ„æº</p>
<h3 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h3><p>ä½œä¸º<code>OSI</code> å‚è€ƒæ¨¡å‹ä¸­æœ€ä½çš„ä¸€å±‚ï¼Œç‰©ç†å±‚çš„ä½œç”¨æ˜¯å®ç°è®¡ç®—æœºèŠ‚ç‚¹ä¹‹é—´æ¯”ç‰¹æµçš„é€æ˜ä¼ é€</p>
<p>è¯¥å±‚çš„ä¸»è¦ä»»åŠ¡æ˜¯ç¡®å®šä¸ä¼ è¾“åª’ä½“çš„æ¥å£çš„ä¸€äº›ç‰¹æ€§ï¼ˆæœºæ¢°ç‰¹æ€§ã€ç”µæ°”ç‰¹æ€§ã€åŠŸèƒ½ç‰¹æ€§ï¼Œè¿‡ç¨‹ç‰¹æ€§ï¼‰</p>
<p>è¯¥å±‚ä¸»è¦æ˜¯å’Œç¡¬ä»¶æœ‰å…³ï¼Œä¸è½¯ä»¶å…³ç³»ä¸å¤§</p>
<h2 id="ä¸‰ã€ä¼ è¾“è¿‡ç¨‹"><a href="#ä¸‰ã€ä¼ è¾“è¿‡ç¨‹" class="headerlink" title="ä¸‰ã€ä¼ è¾“è¿‡ç¨‹"></a>ä¸‰ã€ä¼ è¾“è¿‡ç¨‹</h2><p>æ•°æ®åœ¨å„å±‚ä¹‹é—´çš„ä¼ è¾“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://static.vue-js.com/f3a89d40-b61e-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<ul>
<li>åº”ç”¨å±‚æŠ¥æ–‡è¢«ä¼ é€åˆ°è¿è¾“å±‚</li>
<li>åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œè¿è¾“å±‚æ”¶å–åˆ°æŠ¥æ–‡å¹¶é™„ä¸Šé™„åŠ ä¿¡æ¯ï¼Œè¯¥é¦–éƒ¨å°†è¢«æ¥æ”¶ç«¯çš„è¿è¾“å±‚ä½¿ç”¨</li>
<li>åº”ç”¨å±‚æŠ¥æ–‡å’Œè¿è¾“å±‚é¦–éƒ¨ä¿¡æ¯ä¸€é“æ„æˆäº†è¿è¾“å±‚æŠ¥æ–‡æ®µã€‚é™„åŠ çš„ä¿¡æ¯å¯èƒ½åŒ…æ‹¬ï¼šå…è®¸æ¥æ”¶ç«¯è¿è¾“å±‚å‘ä¸Šå‘é€‚å½“çš„åº”ç”¨ç¨‹åºäº¤ä»˜æŠ¥æ–‡çš„ä¿¡æ¯ä»¥åŠå·®é”™æ£€æµ‹ä½ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯è®©æ¥æ”¶ç«¯èƒ½å¤Ÿåˆ¤æ–­æŠ¥æ–‡ä¸­çš„æ¯”ç‰¹æ˜¯å¦åœ¨é€”ä¸­å·²è¢«æ”¹å˜</li>
<li>è¿è¾“å±‚åˆ™å‘ç½‘ç»œå±‚ä¼ é€’è¯¥æŠ¥æ–‡æ®µï¼Œç½‘ç»œå±‚å¢åŠ äº†å¦‚æºå’Œç›®çš„ç«¯ç³»ç»Ÿåœ°å€ç­‰ç½‘ç»œå±‚é¦–éƒ¨ä¿¡æ¯ï¼Œç”Ÿæˆäº†ç½‘ç»œå±‚æ•°æ®æŠ¥</li>
<li>ç½‘ç»œå±‚æ•°æ®æŠ¥æ¥ä¸‹æ¥è¢«ä¼ é€’ç»™é“¾è·¯å±‚ï¼Œåœ¨æ•°æ®é“¾è·¯å±‚æ•°æ®åŒ…æ·»åŠ å‘é€ç«¯ MAC åœ°å€å’Œæ¥æ”¶ç«¯ MAC åœ°å€åè¢«å°è£…æˆæ•°æ®å¸§</li>
<li>åœ¨ç‰©ç†å±‚æ•°æ®å¸§è¢«å°è£…æˆæ¯”ç‰¹æµï¼Œä¹‹åé€šè¿‡ä¼ è¾“ä»‹è´¨ä¼ é€åˆ°å¯¹ç«¯</li>
<li>å¯¹ç«¯å†ä¸€æ­¥æ­¥è§£å¼€å°è£…ï¼Œè·å–åˆ°ä¼ é€çš„æ•°æ®</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/05/08/http/OSI%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-httpsçš„å®‰å…¨æ€§">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/05/06/http/https%E7%9A%84%E5%AE%89%E5%85%A8%E8%A1%A8%E7%8E%B0%E5%93%AA%E9%87%8C/">httpsçš„å®‰å…¨æ€§</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-05-06
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/http/" class="cube-excerpt-tag-link">#http</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€å®‰å…¨ç‰¹æ€§"><a href="#ä¸€ã€å®‰å…¨ç‰¹æ€§" class="headerlink" title="ä¸€ã€å®‰å…¨ç‰¹æ€§"></a>ä¸€ã€å®‰å…¨ç‰¹æ€§</h2><p>åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°<code>HTTP</code>åœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>é€šä¿¡ä½¿ç”¨æ˜æ–‡ï¼ˆä¸åŠ å¯†ï¼‰ï¼Œå†…å®¹å¯èƒ½è¢«çªƒå¬</li>
<li>ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œå› æ­¤æœ‰å¯èƒ½é­é‡ä¼ªè£…</li>
</ul>
<p>è€Œ<code>HTTPS</code>çš„å‡ºç°æ­£æ˜¯è§£å†³è¿™äº›é—®é¢˜ï¼Œ<code>HTTPS</code>æ˜¯å»ºç«‹åœ¨<code>SSL</code>ä¹‹ä¸Šï¼Œå…¶å®‰å…¨æ€§ç”±<code>SSL</code>æ¥ä¿è¯</p>
<p>åœ¨é‡‡ç”¨<code>SSL</code>åï¼Œ<code>HTTP</code>å°±æ‹¥æœ‰äº†<code>HTTPS</code>çš„åŠ å¯†ã€è¯ä¹¦å’Œå®Œæ•´æ€§ä¿æŠ¤è¿™äº›åŠŸèƒ½</p>
<blockquote>
<p>SSL(Secure Sockets Layer å®‰å…¨å¥—æ¥å­—åè®®),åŠå…¶ç»§ä»»è€…ä¼ è¾“å±‚å®‰å…¨ï¼ˆTransport Layer Securityï¼ŒTLSï¼‰æ˜¯ä¸ºç½‘ç»œé€šä¿¡æä¾›å®‰å…¨åŠæ•°æ®å®Œæ•´æ€§çš„ä¸€ç§å®‰å…¨åè®®</p>
</blockquote>
<p><img src="https://static.vue-js.com/cb559400-b2ff-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h2 id="äºŒã€å¦‚ä½•åš"><a href="#äºŒã€å¦‚ä½•åš" class="headerlink" title="äºŒã€å¦‚ä½•åš"></a>äºŒã€å¦‚ä½•åš</h2><p><code>SSL</code>çš„å®ç°è¿™äº›åŠŸèƒ½ä¸»è¦ä¾èµ–äºä¸‰ç§æ‰‹æ®µï¼š</p>
<ul>
<li>å¯¹ç§°åŠ å¯†ï¼šé‡‡ç”¨åå•†çš„å¯†é’¥å¯¹æ•°æ®åŠ å¯†</li>
<li>éå¯¹ç§°åŠ å¯†ï¼šå®ç°èº«ä»½è®¤è¯å’Œå¯†é’¥åå•†</li>
<li>æ‘˜è¦ç®—æ³•ï¼šéªŒè¯ä¿¡æ¯çš„å®Œæ•´æ€§</li>
<li>æ•°å­—ç­¾åï¼šèº«ä»½éªŒè¯</li>
</ul>
<h3 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h3><p>å¯¹ç§°åŠ å¯†æŒ‡çš„æ˜¯åŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„ç§˜é’¥éƒ½æ˜¯åŒä¸€ä¸ªï¼Œæ˜¯å¯¹ç§°çš„ã€‚åªè¦ä¿è¯äº†å¯†é’¥çš„å®‰å…¨ï¼Œé‚£æ•´ä¸ªé€šä¿¡è¿‡ç¨‹å°±å¯ä»¥è¯´å…·æœ‰äº†æœºå¯†æ€§</p>
<p><img src="https://static.vue-js.com/e3f040f0-b2ff-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h3 id="éå¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯†</h3><p>éå¯¹ç§°åŠ å¯†ï¼Œå­˜åœ¨ä¸¤ä¸ªç§˜é’¥ï¼Œä¸€ä¸ªå«å…¬é’¥ï¼Œä¸€ä¸ªå«ç§é’¥ã€‚ä¸¤ä¸ªç§˜é’¥æ˜¯ä¸åŒçš„ï¼Œå…¬é’¥å¯ä»¥å…¬å¼€ç»™ä»»ä½•äººä½¿ç”¨ï¼Œç§é’¥åˆ™éœ€è¦ä¿å¯†</p>
<p>å…¬é’¥å’Œç§é’¥éƒ½å¯ä»¥ç”¨æ¥åŠ å¯†è§£å¯†ï¼Œä½†å…¬é’¥åŠ å¯†ååªèƒ½ç”¨ç§é’¥è§£ å¯†ï¼Œåè¿‡æ¥ï¼Œç§é’¥åŠ å¯†åä¹Ÿåªèƒ½ç”¨å…¬é’¥è§£å¯†</p>
<p><img src="https://static.vue-js.com/d9603e60-b2ff-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h3 id="æ··åˆåŠ å¯†"><a href="#æ··åˆåŠ å¯†" class="headerlink" title="æ··åˆåŠ å¯†"></a>æ··åˆåŠ å¯†</h3><p>åœ¨<code>HTTPS</code>é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨çš„æ˜¯å¯¹ç§°åŠ å¯†+éå¯¹ç§°åŠ å¯†ï¼Œä¹Ÿå°±æ˜¯æ··åˆåŠ å¯†</p>
<p>åœ¨å¯¹ç§°åŠ å¯†ä¸­è®²åˆ°ï¼Œå¦‚æœèƒ½å¤Ÿä¿è¯äº†å¯†é’¥çš„å®‰å…¨ï¼Œé‚£æ•´ä¸ªé€šä¿¡è¿‡ç¨‹å°±å¯ä»¥è¯´å…·æœ‰äº†æœºå¯†æ€§</p>
<p>è€Œ<code>HTTPS</code>é‡‡ç”¨éå¯¹ç§°åŠ å¯†è§£å†³ç§˜é’¥äº¤æ¢çš„é—®é¢˜</p>
<p>å…·ä½“åšæ³•æ˜¯å‘é€å¯†æ–‡çš„ä¸€æ–¹ä½¿ç”¨å¯¹æ–¹çš„å…¬é’¥è¿›è¡ŒåŠ å¯†å¤„ç†â€œå¯¹ç§°çš„å¯†é’¥â€ï¼Œç„¶åå¯¹æ–¹ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†æ‹¿åˆ°â€œå¯¹ç§°çš„å¯†é’¥â€</p>
<p><img src="https://static.vue-js.com/f375f290-b2ff-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>è¿™æ ·å¯ä»¥ç¡®ä¿äº¤æ¢çš„å¯†é’¥æ˜¯å®‰å…¨çš„å‰æä¸‹ï¼Œä½¿ç”¨å¯¹ç§°åŠ å¯†æ–¹å¼è¿›è¡Œé€šä¿¡</p>
<h4 id="ä¸¾ä¸ªä¾‹å­ï¼š"><a href="#ä¸¾ä¸ªä¾‹å­ï¼š" class="headerlink" title="ä¸¾ä¸ªä¾‹å­ï¼š"></a>ä¸¾ä¸ªä¾‹å­ï¼š</h4><p>ç½‘ç«™ç§˜å¯†ä¿ç®¡ç§é’¥ï¼Œåœ¨ç½‘ä¸Šä»»æ„åˆ†å‘å…¬é’¥ï¼Œä½ æƒ³è¦ç™»å½•ç½‘ç«™åªè¦ç”¨å…¬é’¥åŠ å¯†å°±è¡Œäº†ï¼Œå¯†æ–‡åªèƒ½ç”±ç§é’¥æŒæœ‰è€…æ‰èƒ½è§£å¯†ã€‚è€Œé»‘å®¢å› ä¸ºæ²¡æœ‰ç§é’¥ï¼Œæ‰€ä»¥å°±æ— æ³•ç ´è§£å¯†æ–‡</p>
<p>ä¸Šè¿°çš„æ–¹æ³•è§£å†³äº†æ•°æ®åŠ å¯†ï¼Œåœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ•°æ®æœ‰å¯èƒ½è¢«ç¯¡æ”¹ï¼Œå¹¶ä¸”é»‘å®¢å¯ä»¥ä¼ªé€ èº«ä»½å‘å¸ƒå…¬é’¥ï¼Œå¦‚æœä½ è·å–åˆ°å‡çš„å…¬é’¥ï¼Œé‚£ä¹ˆæ··åˆåŠ å¯†ä¹Ÿå¹¶æ— å¤šå¤§ç”¨å¤„ï¼Œä½ çš„æ•°æ®æ‰”è¢«é»‘å®¢è§£å†³</p>
<p>å› æ­¤ï¼Œåœ¨ä¸Šè¿°åŠ å¯†çš„åŸºç¡€ä¸Šä»éœ€åŠ ä¸Šå®Œæ•´æ€§ã€èº«ä»½éªŒè¯çš„ç‰¹æ€§ï¼Œæ¥å®ç°çœŸæ­£çš„å®‰å…¨ï¼Œå®ç°è¿™ä¸€åŠŸèƒ½åˆ™æ˜¯æ‘˜è¦ç®—æ³•</p>
<h3 id="æ‘˜è¦ç®—æ³•"><a href="#æ‘˜è¦ç®—æ³•" class="headerlink" title="æ‘˜è¦ç®—æ³•"></a>æ‘˜è¦ç®—æ³•</h3><p>å®ç°å®Œæ•´æ€§çš„æ‰‹æ®µä¸»è¦æ˜¯æ‘˜è¦ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„æ•£åˆ—å‡½æ•°ã€å“ˆå¸Œå‡½æ•°</p>
<p>å¯ä»¥ç†è§£æˆä¸€ç§ç‰¹æ®Šçš„å‹ç¼©ç®—æ³•ï¼Œå®ƒèƒ½å¤ŸæŠŠä»»æ„é•¿åº¦çš„æ•°æ®â€œå‹ç¼©â€æˆå›ºå®šé•¿åº¦ã€è€Œä¸”ç‹¬ä¸€æ— äºŒçš„â€œæ‘˜è¦â€å­—ç¬¦ä¸²ï¼Œå°±å¥½åƒæ˜¯ç»™è¿™æ®µæ•°æ®ç”Ÿæˆäº†ä¸€ä¸ªæ•°å­—â€œæŒ‡çº¹â€</p>
<p><img src="https://static.vue-js.com/12798da0-b300-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>æ‘˜è¦ç®—æ³•ä¿è¯äº†â€œæ•°å­—æ‘˜è¦â€å’ŒåŸæ–‡æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦åœ¨åŸæ–‡åé™„ä¸Šå®ƒçš„æ‘˜è¦ï¼Œå°±èƒ½å¤Ÿä¿è¯æ•°æ®çš„å®Œæ•´æ€§</p>
<p>æ¯”å¦‚ï¼Œä½ å‘äº†æ¡æ¶ˆæ¯ï¼šâ€œè½¬è´¦ 1000 å…ƒâ€ï¼Œç„¶åå†åŠ ä¸Šä¸€ä¸ª SHA-2 çš„æ‘˜è¦ã€‚ç½‘ç«™æ”¶åˆ°åä¹Ÿè®¡ç®—ä¸€ä¸‹æ¶ˆæ¯çš„æ‘˜è¦ï¼ŒæŠŠè¿™ä¸¤ä»½â€œæŒ‡çº¹â€åšä¸ªå¯¹æ¯”ï¼Œå¦‚æœä¸€è‡´ï¼Œå°±è¯´æ˜æ¶ˆæ¯æ˜¯å®Œæ•´å¯ä¿¡çš„ï¼Œæ²¡æœ‰è¢«ä¿®æ”¹</p>
<p><img src="https://static.vue-js.com/023790e0-b300-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h3 id="æ•°å­—ç­¾å"><a href="#æ•°å­—ç­¾å" class="headerlink" title="æ•°å­—ç­¾å"></a>æ•°å­—ç­¾å</h3><p>æ•°å­—ç­¾åèƒ½ç¡®å®šæ¶ˆæ¯ç¡®å®æ˜¯ç”±å‘é€æ–¹ç­¾åå¹¶å‘å‡ºæ¥çš„ï¼Œå› ä¸ºåˆ«äººå‡å†’ä¸äº†å‘é€æ–¹çš„ç­¾å</p>
<p>åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯†</p>
<p>ç­¾åå’Œå…¬é’¥ä¸€æ ·å®Œå…¨å…¬å¼€ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å–ã€‚ä½†è¿™ä¸ªç­¾ååªæœ‰ç”¨ç§é’¥å¯¹åº”çš„å…¬é’¥æ‰èƒ½è§£å¼€ï¼Œæ‹¿åˆ°æ‘˜è¦åï¼Œå†æ¯”å¯¹åŸæ–‡éªŒè¯å®Œæ•´æ€§ï¼Œå°±å¯ä»¥åƒç­¾ç½²æ–‡ä»¶ä¸€æ ·è¯æ˜æ¶ˆæ¯ç¡®å®æ˜¯ä½ å‘çš„</p>
<p><img src="https://static.vue-js.com/21aa6880-b300-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>å’Œæ¶ˆæ¯æœ¬èº«ä¸€æ ·ï¼Œå› ä¸ºè°éƒ½å¯ä»¥å‘å¸ƒå…¬é’¥ï¼Œæˆ‘ä»¬è¿˜ç¼ºå°‘é˜²æ­¢é»‘å®¢ä¼ªé€ å…¬é’¥çš„æ‰‹æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ€ä¹ˆåˆ¤æ–­è¿™ä¸ªå…¬é’¥å°±æ˜¯ä½ çš„å…¬é’¥</p>
<p>è¿™æ—¶å€™å°±éœ€è¦ä¸€ä¸ªç¬¬ä¸‰æ–¹ï¼Œå°±æ˜¯è¯ä¹¦éªŒè¯æœºæ„</p>
<h3 id="CAéªŒè¯æœºæ„"><a href="#CAéªŒè¯æœºæ„" class="headerlink" title="CAéªŒè¯æœºæ„"></a>CAéªŒè¯æœºæ„</h3><p>æ•°å­—è¯ä¹¦è®¤è¯æœºæ„å¤„äºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åŒæ–¹éƒ½å¯ä¿¡èµ–çš„ç¬¬ä¸‰æ–¹æœºæ„çš„ç«‹åœº</p>
<p>CA å¯¹å…¬é’¥çš„ç­¾åè®¤è¯è¦æ±‚åŒ…æ‹¬åºåˆ—å·ã€ç”¨é€”ã€é¢å‘è€…ã€æœ‰æ•ˆæ—¶é—´ç­‰ç­‰ï¼ŒæŠŠè¿™äº›æ‰“æˆä¸€ä¸ªåŒ…å†ç­¾åï¼Œå®Œæ•´åœ°è¯æ˜å…¬é’¥å…³è”çš„å„ç§ä¿¡æ¯ï¼Œå½¢æˆâ€œæ•°å­—è¯ä¹¦â€</p>
<p>æµç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://static.vue-js.com/395648a0-b300-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<ul>
<li>æœåŠ¡å™¨çš„è¿è¥äººå‘˜å‘æ•°å­—è¯ä¹¦è®¤è¯æœºæ„æå‡ºå…¬å¼€å¯†é’¥çš„ç”³è¯·</li>
<li>æ•°å­—è¯ä¹¦è®¤è¯æœºæ„åœ¨åˆ¤æ˜æå‡ºç”³è¯·è€…çš„èº«ä»½ä¹‹åï¼Œä¼šå¯¹å·²ç”³è¯·çš„å…¬å¼€å¯†é’¥åšæ•°å­—ç­¾å</li>
<li>ç„¶ååˆ†é…è¿™ä¸ªå·²ç­¾åçš„å…¬å¼€å¯†é’¥ï¼Œå¹¶å°†è¯¥å…¬å¼€å¯†é’¥æ”¾å…¥å…¬é’¥è¯ä¹¦åç»‘å®šåœ¨ä¸€èµ·</li>
<li>æœåŠ¡å™¨ä¼šå°†è¿™ä»½ç”±æ•°å­—è¯ä¹¦è®¤è¯æœºæ„é¢å‘çš„æ•°å­—è¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä»¥è¿›è¡Œéå¯¹ç§°åŠ å¯†æ–¹å¼é€šä¿¡</li>
</ul>
<p>æ¥åˆ°è¯ä¹¦çš„å®¢æˆ·ç«¯å¯ä½¿ç”¨æ•°å­—è¯ä¹¦è®¤è¯æœºæ„çš„å…¬å¼€å¯†é’¥ï¼Œå¯¹é‚£å¼ è¯ä¹¦ä¸Šçš„æ•°å­—ç­¾åè¿›è¡ŒéªŒè¯ï¼Œä¸€æ—¦éªŒè¯é€šè¿‡ï¼Œåˆ™è¯æ˜ï¼š</p>
<ul>
<li>è®¤è¯æœåŠ¡å™¨çš„å…¬å¼€å¯†é’¥çš„æ˜¯çœŸå®æœ‰æ•ˆçš„æ•°å­—è¯ä¹¦è®¤è¯æœºæ„</li>
<li>æœåŠ¡å™¨çš„å…¬å¼€å¯†é’¥æ˜¯å€¼å¾—ä¿¡èµ–çš„</li>
</ul>
<h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>HTTPS</code>ä¸<code>HTTP</code>è™½ç„¶åªå·®ä¸€ä¸ª<code>SSL</code>ï¼Œä½†æ˜¯é€šä¿¡å®‰å…¨å¾—åˆ°äº†å¤§å¤§çš„ä¿éšœï¼Œé€šä¿¡çš„å››å¤§ç‰¹æ€§éƒ½ä»¥è§£å†³ï¼Œè§£å†³æ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>æœºå¯†æ€§ï¼šæ··åˆç®—æ³•</li>
<li>å®Œæ•´æ€§ï¼šæ‘˜è¦ç®—æ³•</li>
<li>èº«ä»½è®¤è¯ï¼šæ•°å­—ç­¾å</li>
<li>ä¸å¯å¦å®šï¼šæ•°å­—ç­¾å</li>
</ul>
<p>åŒæ—¶å¼•å…¥ç¬¬ä¸‰æ–¹è¯ä¹¦æœºæ„ï¼Œç¡®ä¿å…¬å¼€ç§˜é’¥çš„å®‰å…¨æ€§</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/05/06/http/https%E7%9A%84%E5%AE%89%E5%85%A8%E8%A1%A8%E7%8E%B0%E5%93%AA%E9%87%8C/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-DNSåè®®">
    <header class="cube-excerpt-header">
        <h1><a href="/2018/04/25/DNS%E5%8D%8F%E8%AE%AE/">DNSåè®®</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2018-04-25
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/http/" class="cube-excerpt-tag-link">#http</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><p>DNSï¼ˆDomain Names Systemï¼‰ï¼ŒåŸŸåç³»ç»Ÿï¼Œæ˜¯äº’è”ç½‘ä¸€é¡¹æœåŠ¡ï¼Œæ˜¯è¿›è¡ŒåŸŸåå’Œä¸ä¹‹ç›¸å¯¹åº”çš„ IP åœ°å€è¿›è¡Œè½¬æ¢çš„æœåŠ¡å™¨</p>
<p>ç®€å•æ¥è®²ï¼Œ<code>DNS</code>ç›¸å½“äºä¸€ä¸ªç¿»è¯‘å®˜ï¼Œè´Ÿè´£å°†åŸŸåç¿»è¯‘æˆ<code>ip</code>åœ°å€</p>
<ul>
<li>IP åœ°å€ï¼šä¸€é•¿ä¸²èƒ½å¤Ÿå”¯ä¸€åœ°æ ‡è®°ç½‘ç»œä¸Šçš„è®¡ç®—æœºçš„æ•°å­—</li>
<li>åŸŸåï¼šæ˜¯ç”±ä¸€ä¸²ç”¨ç‚¹åˆ†éš”çš„åå­—ç»„æˆçš„ Internet ä¸ŠæŸä¸€å°è®¡ç®—æœºæˆ–è®¡ç®—æœºç»„çš„åç§°ï¼Œç”¨äºåœ¨æ•°æ®ä¼ è¾“æ—¶å¯¹è®¡ç®—æœºçš„å®šä½æ ‡è¯†</li>
</ul>
<p><img src="https://static.vue-js.com/965a03a0-b78f-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h2 id="äºŒã€åŸŸå"><a href="#äºŒã€åŸŸå" class="headerlink" title="äºŒã€åŸŸå"></a>äºŒã€åŸŸå</h2><p>åŸŸåæ˜¯ä¸€ä¸ªå…·æœ‰å±‚æ¬¡çš„ç»“æ„ï¼Œä»ä¸Šåˆ°ä¸‹ä¸€æ¬¡ä¸ºæ ¹åŸŸåã€é¡¶çº§åŸŸåã€äºŒçº§åŸŸåã€ä¸‰çº§åŸŸåâ€¦</p>
<p><img src="https://static.vue-js.com/9f112780-b78f-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>ä¾‹å¦‚<code>www.xxx.com</code>ï¼Œ<code>www</code>ä¸ºä¸‰çº§åŸŸåã€<code>xxx</code>ä¸ºäºŒçº§åŸŸåã€<code>com</code>ä¸ºé¡¶çº§åŸŸåï¼Œç³»ç»Ÿä¸ºç”¨æˆ·åšäº†å…¼å®¹ï¼ŒåŸŸåæœ«å°¾çš„æ ¹åŸŸå<code>.</code>ä¸€èˆ¬ä¸éœ€è¦è¾“å…¥</p>
<p>åœ¨åŸŸåçš„æ¯ä¸€å±‚éƒ½ä¼šæœ‰ä¸€ä¸ªåŸŸåæœåŠ¡å™¨ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://static.vue-js.com/f40e0090-b7a4-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ç”µè„‘é»˜è®¤çš„æœ¬åœ°åŸŸåæœåŠ¡å™¨</p>
<h2 id="ä¸‰ã€æŸ¥è¯¢æ–¹å¼"><a href="#ä¸‰ã€æŸ¥è¯¢æ–¹å¼" class="headerlink" title="ä¸‰ã€æŸ¥è¯¢æ–¹å¼"></a>ä¸‰ã€æŸ¥è¯¢æ–¹å¼</h2><p>DNS æŸ¥è¯¢çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>é€’å½’æŸ¥è¯¢ï¼šå¦‚æœ A è¯·æ±‚ Bï¼Œé‚£ä¹ˆ B ä½œä¸ºè¯·æ±‚çš„æ¥æ”¶è€…ä¸€å®šè¦ç»™ A æƒ³è¦çš„ç­”æ¡ˆ</li>
</ul>
<p><img src="https://static.vue-js.com/a73be9e0-b78f-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<ul>
<li>è¿­ä»£æŸ¥è¯¢ï¼šå¦‚æœæ¥æ”¶è€… B æ²¡æœ‰è¯·æ±‚è€… A æ‰€éœ€è¦çš„å‡†ç¡®å†…å®¹ï¼Œæ¥æ”¶è€… B å°†å‘Šè¯‰è¯·æ±‚è€… Aï¼Œå¦‚ä½•å»è·å¾—è¿™ä¸ªå†…å®¹ï¼Œä½†æ˜¯è‡ªå·±å¹¶ä¸å»å‘å‡ºè¯·æ±‚</li>
</ul>
<p><img src="https://static.vue-js.com/b023e1c0-b78f-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h2 id="å››ã€åŸŸåç¼“å­˜"><a href="#å››ã€åŸŸåç¼“å­˜" class="headerlink" title="å››ã€åŸŸåç¼“å­˜"></a>å››ã€åŸŸåç¼“å­˜</h2><p>åœ¨åŸŸåæœåŠ¡å™¨è§£æçš„æ—¶å€™ï¼Œä½¿ç”¨ç¼“å­˜ä¿å­˜åŸŸåå’Œ<code>IP</code>åœ°å€çš„æ˜ å°„</p>
<p>è®¡ç®—æœºä¸­<code>DNS</code>çš„è®°å½•ä¹Ÿåˆ†æˆäº†ä¸¤ç§ç¼“å­˜æ–¹å¼ï¼š</p>
<ul>
<li>æµè§ˆå™¨ç¼“å­˜ï¼šæµè§ˆå™¨åœ¨è·å–ç½‘ç«™åŸŸåçš„å®é™… IP åœ°å€åä¼šå¯¹å…¶è¿›è¡Œç¼“å­˜ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚çš„æŸè€—</li>
<li>æ“ä½œç³»ç»Ÿç¼“å­˜ï¼šæ“ä½œç³»ç»Ÿçš„ç¼“å­˜å…¶å®æ˜¯ç”¨æˆ·è‡ªå·±é…ç½®çš„ <code>hosts</code> æ–‡ä»¶</li>
</ul>
<h2 id="äº”ã€æŸ¥è¯¢è¿‡ç¨‹"><a href="#äº”ã€æŸ¥è¯¢è¿‡ç¨‹" class="headerlink" title="äº”ã€æŸ¥è¯¢è¿‡ç¨‹"></a>äº”ã€æŸ¥è¯¢è¿‡ç¨‹</h2><p>è§£æåŸŸåçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>é¦–å…ˆæœç´¢æµè§ˆå™¨çš„ DNS ç¼“å­˜ï¼Œç¼“å­˜ä¸­ç»´æŠ¤ä¸€å¼ åŸŸåä¸ IP åœ°å€çš„å¯¹åº”è¡¨</li>
<li>è‹¥æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™ç»§ç»­æœç´¢æ“ä½œç³»ç»Ÿçš„ DNS ç¼“å­˜</li>
<li>è‹¥ä»ç„¶æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æ“ä½œç³»ç»Ÿå°†åŸŸåå‘é€è‡³æœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨é‡‡ç”¨é€’å½’æŸ¥è¯¢è‡ªå·±çš„ DNS ç¼“å­˜ï¼ŒæŸ¥æ‰¾æˆåŠŸåˆ™è¿”å›ç»“æœ</li>
<li>è‹¥æœ¬åœ°åŸŸåæœåŠ¡å™¨çš„ DNS ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘ä¸Šçº§åŸŸåæœåŠ¡å™¨è¿›è¡Œè¿­ä»£æŸ¥è¯¢<ul>
<li>é¦–å…ˆæœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œæ ¹åŸŸåæœåŠ¡å™¨è¿”å›é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€ç»™æœ¬åœ°æœåŠ¡å™¨</li>
<li>æœ¬åœ°åŸŸåæœåŠ¡å™¨æ‹¿åˆ°è¿™ä¸ªé¡¶çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€åï¼Œå°±å‘å…¶å‘èµ·è¯·æ±‚ï¼Œè·å–æƒé™åŸŸåæœåŠ¡å™¨çš„åœ°å€</li>
<li>æœ¬åœ°åŸŸåæœåŠ¡å™¨æ ¹æ®æƒé™åŸŸåæœåŠ¡å™¨çš„åœ°å€å‘å…¶å‘èµ·è¯·æ±‚ï¼Œæœ€ç»ˆå¾—åˆ°è¯¥åŸŸåå¯¹åº”çš„ IP åœ°å€</li>
</ul>
</li>
<li>æœ¬åœ°åŸŸåæœåŠ¡å™¨å°†å¾—åˆ°çš„ IP åœ°å€è¿”å›ç»™æ“ä½œç³»ç»Ÿï¼ŒåŒæ—¶è‡ªå·±å°† IP åœ°å€ç¼“å­˜èµ·æ¥</li>
<li>æ“ä½œç³»ç»Ÿå°† IP åœ°å€è¿”å›ç»™æµè§ˆå™¨ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå°† IP åœ°å€ç¼“å­˜èµ·</li>
<li>è‡³æ­¤ï¼Œæµè§ˆå™¨å°±å¾—åˆ°äº†åŸŸåå¯¹åº”çš„ IP åœ°å€ï¼Œå¹¶å°† IP åœ°å€ç¼“å­˜èµ·</li>
</ul>
<p>æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://static.vue-js.com/bec3c740-b78f-11eb-ab90-d9ae814b240d.png" alt="img"></p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2018/04/25/DNS%E5%8D%8F%E8%AE%AE/">Read More</a>
    </footer>
</div>



<ul class="cube-pagination cube-pagination-9">
    
    <li class="cube-pagination-prev">
        <a href="/page/15/">Â« Prev</a>
    </li>
    
    
        
                <li class="cube-pagination-index">
                    <a href="/">1</a>
                </li>
                <li class="cube-pagination-ellipses">
                    <span>...</span>
                </li>
            
                
                <li class="cube-pagination-index">
                    <a href="/page/15">15</a>
                </li>
                
            
                
                <li class="cube-pagination-index disabled">
                    <span>16</span>
                </li>
                
            
                
                <li class="cube-pagination-index">
                    <a href="/page/17">17</a>
                </li>
                
            
                <li class="cube-pagination-ellipses">
                    <span>...</span>
                </li>
                <li class="cube-pagination-index">
                    <a href="/page/19">19</a>
                </li>
        
    

    
    <li class="cube-pagination-next">
        <a href="/page/17/">Next Â»</a>
    </li>
    
</ul>

<!--å…¶ä»–ç»„ä»¶åç»­æ·»åŠ -->
        </div>
        <div class="cube-right">
            

<div class="cube-search cube-sidebar" id="cube-search">
    <div class="search-container">
        <input type="text" placeholder="Search" class="cube-search-input" id="cube-search-input">
        <i class="cube-icon cube-icon-search cube-search-submit" aria-hidden="true"></i>
    </div>
    <!-- TODO é€šè¿‡ç»™windowèµ‹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé€šè¿‡è„šæœ¬èµ‹å€¼ -->
</div>
<script>
    (function (window) {
        'use strict';
        window.searchModule = {}
        window.searchModule.JSONUrl = '/content.json'
        window.searchModule.rootUrl = '/'
    })(window)
</script>
<div class="cube-search-form">
    <div class="cube-search-control">
        <input type="text" placeholder="Search" class="search-input">
        <a class="close-button">
            <i class="cube-icon cube-close" aria-hidden="true"></i>
        </a>
    </div>
    <div class="cube-search-result"></div>
</div>


<div class="cube-author cube-sidebar" id="cube-author">
    
    
    <span>John Doe</span>
    
    
    <div class="count">
        <a class="count articles"><span>186</span>Article</a>
        <a class="count tags"><span>35</span>Tags</a>
        <a class="count categories"><span>23</span>Categories</a>
    </div>
</div>



<div class="cube-music cube-sidebar" id="cube-music">
    <div class="cube-player aplayer" id="cube-player"></div>
</div>
<script>
    (function (window) {
        window.musicModule = {}
        window.musicModule.musicConfig = '{"narrow":false,"autoplay":false,"showlrc":3,"theme":"#b7daff","mutex":true,"mode":"circulation","preload":"auto","listmaxheight":"513px","music":[{"title":"Dear friends","author":"TRIPLANE","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/TRIPLANE - Dear friends.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Dear friends - TRIPLANE.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/TRIPLANE - Dear friends.jpg"},{"title":"Butter-Fly","author":"å’Œç”°å…‰å¸","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³) - å’Œç”°å…‰å¸.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).jpg"},{"title":"å®µé—‡èŠ±ç«","author":"è‘‰æœˆã‚†ã‚‰","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/å®µé—‡èŠ±ç« - è‘‰æœˆã‚†ã‚‰.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.jpg"}]}'
        window.musicModule.lrcConfig = {
            open: 'Open Lyrics',
            close: 'Close Lyrics'
        }
    })(window)
</script>



<div class="cube-recent-posts cube-sidebar" id="cube-recent-posts">
    <div class="title">
        <a>Recent Posts</a>
    </div>
    <ul class="list">
        
        
        <li>
            <!-- TODO å¦‚æœæ–‡ç« è¦æ˜¾ç¤ºå›¾ç‰‡ï¼Œé‚£ä¹ˆåœ¨front-matterä¸Šæ·»åŠ previewå±æ€§(url or path) -->
            
            <div class="normal">
                <p class="index first">
                    <span>1</span>
                </p>
                <p class="title">
                    <a href="/2022/08/25/Js%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="å˜é‡ç±»å‹">å˜é‡ç±»å‹</a>
                </p>
            </div>
            
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>2</span>
                </p>
                <p class="title">
                    <a href="/2022/07/15/bug/echarts%E5%9B%BE%E6%A0%87%E8%87%AA%E9%80%82%E5%BA%94%E6%96%B9%E6%B3%95/" title="echartså›¾æ ‡è‡ªé€‚åº”æ–¹æ³•">echartså›¾æ ‡è‡ªé€‚åº”æ–¹æ³•</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>3</span>
                </p>
                <p class="title">
                    <a href="/2022/07/15/bug/a01/" title="æµè§ˆå™¨å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹">æµè§ˆå™¨å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>4</span>
                </p>
                <p class="title">
                    <a href="/2022/06/09/html+css+js+ts/3-js%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C%E5%AE%9E%E4%BE%8B/" title="js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹">js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>5</span>
                </p>
                <p class="title">
                    <a href="/2022/05/28/html+css+js+ts/1-%E9%9F%B3%E8%A7%86%E9%A2%91/" title="html-åŸç”ŸéŸ³è§†é¢‘">html-åŸç”ŸéŸ³è§†é¢‘</a>
                </p>
            </div>
        </li>
        
        
    </ul>
</div>



<div class="cube-categories cube-sidebar" id="cube-categories">
    <div class="title">
        <a href="/categories">Categories</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/categories/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/React/">#React</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">#æ•°æ®å¯è§†åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">#æ¶æ„æ¨¡å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%9F%B3%E8%A7%86%E9%A2%91/">#éŸ³è§†é¢‘</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%97%AE%E9%A2%98/">#é—®é¢˜</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/">#åç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">#å‰ç«¯å·¥ç¨‹åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B7%A5%E5%85%B7/">#å·¥å…·</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">#å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">#æ•°æ®åº“</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/liunx/">#liunx</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-tagcloud cube-sidebar" id="cube-tagcloud">
    <div class="title">
        <a href="/tags">Tagcloud</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/tags/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vue/">#vue</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/React/">#React</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Redux/">#Redux</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/echart/">#echart</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vue3/">#vue3</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/react/">#react</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/html/">#html</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/xml/">#xml</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/css/">#css</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Promise/">#Promise</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/es6/">#es6</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/typescript/">#typescript</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/async-await/">#async/await</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nodejs/">#nodejs</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/python/">#python</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/glup/">#glup</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/webpack/">#webpack</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/git/">#git</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Mock/">#Mock</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/eslint/">#eslint</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/RESTful/">#RESTful</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/hexo/">#hexo</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/vs-code/">#vs code</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E4%BC%98%E5%8C%96/">#ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mongodb/">#mongodb</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/mysql/">#mysql</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nginx/">#nginx</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-links cube-sidebar" id="cube-links">
    <div class="title">
        <a>Links</a>
    </div>
    <ul class="list">
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/GitHub.png">
            
            <a href="https://github.com/ZEROKISEKI" target="_blank">GitHub</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/Coding.png">
            
            <a href="https://coding.net/u/SORA1" target="_blank">Coding</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/SF.png">
            
            <a href="https://segmentfault.com/u/aonosora" target="_blank">SFç¤¾åŒº</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/å¼€å‘è€…å¤´æ¡.png">
            
            <a href="https://toutiao.io/u/148070" target="_blank">å¼€å‘è€…å¤´æ¡</a>
        </li>
        
    </ul>
</div>



<div class="cube-friend-links cube-sidebar" id="cube-friend-links">
    <div class="title">
        <a>Friend Links</a>
    </div>
    <ul class="list">
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/micblo.png">
            <a href="https://blog.micblo.com/" target="_blank">ç½—å¤§ä½¬</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/DIYgod.jpg">
            <a href="https://www.anotherhome.net/" target="_blank">DIYgod</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="/images/friend_links.jpg ">
            <a href="https://aonosora.com/" target="_blank">å’ªè¥¿è¥¿ã®éƒ¨è½æ ¼</a>
        </li>
        
    </ul>
</div>


        </div>
    </div>
</div>
<footer class="cube-footer">
    
Â© 2017 John Doe

<br>
Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
</footer>
<!-- inject:script -->
<script src="/js/script.js"></script>
<!-- endinject -->
<div class="cube-loading out"></div>
</body>
</html>