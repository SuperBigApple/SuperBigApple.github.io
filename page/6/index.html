<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="John Doe">
    
    
    
    
    
    
    <title>Hexo</title>
    <!-- inject:style -->
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <!-- endinject -->
    <style>
        .cube-loading {
            top: 0;
            position: fixed;
            width: 100%;
            height: 100%;
            background: url('/images/lg/loading.gif') no-repeat center center;
            background-color: rgba(0,0,0,.7);
        }

        .cube-loading.out {
            display: none;
        }

        .cube-loading:before {
            display: block;
            content: 'Loading';
            position: relative;
            width: 100%;
            top: 50%;
            right: -50%;
            color: #fff;
        }

        @media(max-width: 768px) {
            .cube-loading:before {
                font-size: 1.2em;
                transform: translate(-24px,20px);
                -webkit-transform: translate(-24px,20px);
                -o-transform: translate(-24px,20px);
                -ms-transform: translate(-24px,20px);
            }
        }

        @media(min-width: 768px) {
            .cube-loading:before {

            }
        }
    </style>
    
<meta name="generator" content="Hexo 6.2.0"></head>
<body>
<div class="cube-body">
    <nav id="cube-top-memu" class="cube-menu">
    <ul class="cube-menu-collapse">
        
        <li>
            <i class="cube-icon cube-icon-home" aria-hidden="true"></i>
            <a href="/">é¦–é¡µ</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-archive" aria-hidden="true"></i>
            <a href="/archives">å½’æ¡£</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-categories" aria-hidden="true"></i>
            <a href="/categories">åˆ†ç±»</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-tags" aria-hidden="true"></i>
            <a href="/tags">æ ‡ç­¾</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-about" aria-hidden="true"></i>
            <a href="/about-me">å…³äºæˆ‘</a>
        </li>
        
    </ul>
</nav>
<nav class="cube-side-menu" id="cube-side-menu">
    <ul class="cube-menu-list">
        
        <li>
            <a class="lrc-control">Open Lyrics</a>
        </li>
        
        <li>
            <a class="scroll-to-top">Top</a>
        </li>
    </ul>
</nav>
    <header class="cube-header" id="cube-header">
    <img src=" https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2 " alt="å¤´éƒ¨èƒŒæ™¯å›¾ç‰‡">
    
    <div class="cube-type">
        <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
        <span class="cube-typed-cursor">|</span>
    </div>
    
</header>

    <style>
        nav.cube-menu:before {
            content: '';
            visibility: hidden;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 44px;
        
            filter: blur(5px);
            -webkit-filter: blur(5px);
        
            z-index: -1;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-repeat: no-repeat;
            background-position: center -356px;
            background-size: cover;
            background-color: transparent;
        }

        header.cube-background.cube-header-background {
            visibility: hidden;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-position: center -400px;
        }
    </style>
    <header class="cube-background cube-header-background">
        
        <div class="cube-type">
            <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
            <span class="cube-typed-cursor">|</span>
        </div>
        
    </header>
    <div class="load-header-background"></div>
    <script>
        (function (window) {

            window.headerModule = {}
            window.headerModule.image = {
                width: '2000',
                height: '1414'
            }

        })(window)
    </script>
    
    <div class="cube-content">
        <div class="cube-left">
            
<div class="cube-excerpt" id="cube-excerpt-webpackdllé¢„ç¼–è¯‘æé«˜webpackæ‰“åŒ…é€Ÿåº¦">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/10/21/webpack/webpackdll%E9%A2%84%E7%BC%96%E8%AF%91%E6%8F%90%E9%AB%98webpack%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6/">webpackdllé¢„ç¼–è¯‘æé«˜webpackæ‰“åŒ…é€Ÿåº¦</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-10-21
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <blockquote>
<p>åšå®¢é“¾æ¥ <a target="_blank" rel="noopener" href="http://blog.poetries.top/2018/11/23/webpack-dll">http://blog.poetries.top/2018/11/23/webpack-dll</a></p>
</blockquote>
<h2 id="ä¸€ã€webpackçš„dllåŠŸèƒ½"><a href="#ä¸€ã€webpackçš„dllåŠŸèƒ½" class="headerlink" title="ä¸€ã€webpackçš„dllåŠŸèƒ½"></a>ä¸€ã€webpackçš„dllåŠŸèƒ½</h2><blockquote>
<p>åŸºäº<code>webpack3</code>æ„å»º</p>
</blockquote>
<h3 id="1-1-dllä»‹ç»"><a href="#1-1-dllä»‹ç»" class="headerlink" title="1.1 dllä»‹ç»"></a>1.1 dllä»‹ç»</h3><blockquote>
<p>æˆ‘ä»¬æ„å»ºå‰ç«¯é¡¹ç›®çš„æ—¶å€™ï¼Œå¾€å¾€å¸Œæœ›ç¬¬ä¸‰æ–¹åº“ï¼ˆ<code>vendors</code>ï¼‰å’Œè‡ªå·±å†™çš„ä»£ç å¯ä»¥åˆ†å¼€æ‰“åŒ…ï¼Œå› ä¸ºç¬¬ä¸‰æ–¹åº“å¾€å¾€ä¸éœ€è¦ç»å¸¸æ‰“åŒ…æ›´æ–°ã€‚å¯¹æ­¤<code>Webpack</code>çš„æ–‡æ¡£å»ºè®®ç”¨<code>CommonsChunkPlugin</code>æ¥å•ç‹¬æ‰“åŒ…ç¬¬ä¸‰æ–¹åº“</p>
</blockquote>
<ul>
<li>æˆ‘ä»¬è¿™é‡Œçš„<code>dll.js</code> æ˜¯æå‰æ‰“åŒ…å¥½äº†çš„ï¼Œè€Œä¸æ˜¯åœ¨æ¯æ¬¡<code>build</code>çš„æ—¶å€™å»æ‰“åŒ…è¾“å‡ºçš„ï¼›è¿™æ ·æ‰èƒ½åšåˆ°ä¾èµ–åŒ…ä¸€æ¬¡æ„å»ºï¼Œæ— é™æ¬¡ä½¿ç”¨</li>
<li><code>webpack</code>è¾“å‡ºçš„æ–‡ä»¶åéƒ½å¸¦æœ‰<code>hash</code>å€¼ï¼› è€Œç”¨<code>dll</code>æ„å»ºåè¾“å‡ºçš„æ–‡ä»¶åæ˜¯å›ºå®šçš„</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">  vendor: [&quot;jquery&quot;, &quot;other-lib&quot;],</span><br><span class="line">  app: &quot;./entry&quot;</span><br><span class="line">&#125;</span><br><span class="line">new CommonsChunkPlugin(&#123;</span><br><span class="line">  name: &quot;vendor&quot;,</span><br><span class="line"></span><br><span class="line">  // filename: &quot;vendor.js&quot;</span><br><span class="line">  // (Give the chunk a different name)</span><br><span class="line"></span><br><span class="line">  minChunks: Infinity,</span><br><span class="line">  // (with more entries, this ensures that no other module</span><br><span class="line">  //  goes into the vendor chunk)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é€šå¸¸ä¸ºäº†å¯¹æŠ—ç¼“å­˜ï¼Œæˆ‘ä»¬ä¼šç»™å”®å‡ºæ–‡ä»¶çš„æ–‡ä»¶åä¸­åŠ å…¥<code>hash</code>çš„åç¼€â€”â€”ä½†æ˜¯â€”â€”æˆ‘ä»¬ç¼–è¾‘äº†<code>app</code>éƒ¨åˆ†çš„ä»£ç åï¼Œé‡æ–°æ‰“åŒ…ï¼Œå‘ç°<code>vendor</code>çš„<code>hash</code>ä¹Ÿå˜åŒ–äº†</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/639.png" alt="img"></p>
<blockquote>
<p>è¿™ä¹ˆä¸€æ¥ï¼Œæ„å‘³ç€æ¯æ¬¡å‘å¸ƒç‰ˆæœ¬çš„æ—¶å€™ï¼Œvendorä»£ç éƒ½è¦åˆ·æ–°ï¼Œå³ä½¿æˆ‘å¹¶æ²¡æœ‰ä¿®æ”¹å…¶ä¸­çš„ä»£ç ã€‚è¿™æ ·å¹¶ä¸ç¬¦åˆæˆ‘ä»¬åˆ†å¼€æ‰“åŒ…çš„åˆè¡·</p>
</blockquote>
<ul>
<li><code>Dll</code>æ˜¯<code>Webpack</code>æœ€è¿‘æ–°åŠ çš„åŠŸèƒ½</li>
<li><code>Dll</code>è¿™ä¸ªæ¦‚å¿µåº”è¯¥æ˜¯å€Ÿé‰´äº†<code>Windows</code>ç³»ç»Ÿçš„<code>dll</code>ã€‚ä¸€ä¸ª<code>dll</code>åŒ…ï¼Œå°±æ˜¯ä¸€ä¸ªçº¯çº¯çš„ä¾èµ–åº“ï¼Œå®ƒæœ¬èº«ä¸èƒ½è¿è¡Œï¼Œæ˜¯ç”¨æ¥ç»™ä½ çš„<code>app</code>å¼•ç”¨çš„</li>
<li>æ‰“åŒ…<code>dll</code>çš„æ—¶å€™ï¼Œ<code>Webpack</code>ä¼šå°†æ‰€æœ‰åŒ…å«çš„åº“åšä¸€ä¸ªç´¢å¼•ï¼Œå†™åœ¨ä¸€ä¸ª<code>manifest</code>æ–‡ä»¶ä¸­ï¼Œè€Œå¼•ç”¨<code>dll</code>çš„ä»£ç ï¼ˆ<code>dll user</code>ï¼‰åœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œåªéœ€è¦è¯»å–è¿™ä¸ª<code>manifest</code>æ–‡ä»¶ï¼Œå°±å¯ä»¥äº†ã€‚</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong></p>
<ul>
<li><code>Dll</code>æ‰“åŒ…ä»¥åæ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œåªè¦å…¶åŒ…å«çš„åº“æ²¡æœ‰å¢å‡ã€å‡çº§ï¼Œ<code>hash</code>ä¹Ÿä¸ä¼šå˜åŒ–ï¼Œå› æ­¤çº¿ä¸Šçš„<code>dll</code>ä»£ç ä¸éœ€è¦éšç€ç‰ˆæœ¬å‘å¸ƒé¢‘ç¹æ›´æ–°</li>
<li><code>App</code>éƒ¨åˆ†ä»£ç ä¿®æ”¹åï¼Œåªéœ€è¦ç¼–è¯‘<code>app</code>éƒ¨åˆ†çš„ä»£ç ï¼Œ<code>dll</code>éƒ¨åˆ†ï¼Œåªè¦åŒ…å«çš„åº“æ²¡æœ‰å¢å‡ã€å‡çº§ï¼Œå°±ä¸éœ€è¦é‡æ–°æ‰“åŒ…ã€‚è¿™æ ·ä¹Ÿå¤§å¤§æé«˜äº†æ¯æ¬¡ç¼–è¯‘çš„é€Ÿåº¦</li>
<li>å‡è®¾ä½ æœ‰å¤šä¸ªé¡¹ç›®ï¼Œä½¿ç”¨äº†ç›¸åŒçš„ä¸€äº›ä¾èµ–åº“ï¼Œå®ƒä»¬å°±å¯ä»¥å…±ç”¨ä¸€ä¸ª<code>dll</code></li>
</ul>
<h3 id="1-2-dllä½¿ç”¨"><a href="#1-2-dllä½¿ç”¨" class="headerlink" title="1.2 dllä½¿ç”¨"></a>1.2 dllä½¿ç”¨</h3><blockquote>
<p>é¦–å…ˆè¦å…ˆå»ºç«‹ä¸€ä¸ª<code>dll</code>çš„é…ç½®æ–‡ä»¶ï¼Œ<code>entry</code>åªåŒ…å«ç¬¬ä¸‰æ–¹åº“</p>
</blockquote>
<p><strong>ç¬¬ä¸€æ­¥ï¼šæ–°å»ºwebpack.dll.conf.js</strong></p>
<ul>
<li><code>webpack.DllPlugin</code>çš„é€‰é¡¹ä¸­ï¼Œ<code>path</code>æ˜¯<code>manifest</code>æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ï¼›<code>name</code>æ˜¯<code>dll</code>æš´éœ²çš„å¯¹è±¡åï¼Œè¦è·Ÿ<code>output.library</code>ä¿æŒä¸€è‡´</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// build/webpack.dll.conf.js</span><br><span class="line"></span><br><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    // æŠŠè¿™äº›èµ„æºæ‰“åŒ…æˆdllï¼Œæé«˜ç¼–è¯‘é€Ÿåº¦</span><br><span class="line">    react: [&#x27;react&#x27;,&#x27;react-router-dom&#x27;,&#x27;redux&#x27;,&#x27;redux-immutable&#x27;,&#x27;immutable&#x27;,&#x27;react-redux&#x27;,&#x27;react-router&#x27;,&#x27;redux-logger&#x27;,&#x27;redux-thunk&#x27;,&#x27;styled-components&#x27;],</span><br><span class="line">    ui: [&#x27;antd-mobile&#x27;,&#x27;antd&#x27;],</span><br><span class="line">    others: [&#x27;react-icons&#x27;,&#x27;axios&#x27;,&#x27;clipboard&#x27;,&#x27;humps&#x27;,&#x27;lodash&#x27;,&#x27;md5&#x27;,&#x27;moment&#x27;,&#x27;normalizr&#x27;]</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &quot;../dist/static/js&quot;),</span><br><span class="line">    filename: `[name].dll.js`,</span><br><span class="line">    library: &#x27;[name]_library&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line"> ...Object.keys([&#x27;react&#x27;,&#x27;ui&#x27;,&#x27;others&#x27;]).map(name =&gt; &#123;</span><br><span class="line">      return new webpack.DllReferencePlugin(&#123;</span><br><span class="line">        context: &#x27;.&#x27;,</span><br><span class="line">        manifest: require(`../static/$&#123;name&#125;.manifest.json`),</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;),</span><br><span class="line">    new webpack.optimize.UglifyJsPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬äºŒæ­¥ï¼šåŠ ä¸€ä¸ªå‘½ä»¤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// package.json</span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;dll&quot;: &quot;webpack --config config/webpack.dll.conf.js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰§è¡Œ<code>npm run dll</code></p>
</blockquote>
<ul>
<li>è¿è¡Œ<code>Webpack</code>ï¼Œä¼šè¾“å‡ºä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªæ˜¯æ‰“åŒ…å¥½çš„<code>vendor.js</code>ï¼Œä¸€ä¸ªå°±æ˜¯<code>manifest.json</code>ï¼Œé•¿è¿™æ ·</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;vendor_ac51ba426d4f259b8b18&quot;,</span><br><span class="line">  &quot;content&quot;: &#123;</span><br><span class="line">    &quot;./node_modules/antd/dist/antd.js&quot;: 1,</span><br><span class="line">    &quot;./node_modules/react/react.js&quot;: 2,</span><br><span class="line">    &quot;./node_modules/react/lib/React.js&quot;: 3,</span><br><span class="line">    &quot;./node_modules/react/node_modules/object-assign/index.js&quot;: 4,</span><br><span class="line">    &quot;./node_modules/react/lib/ReactChildren.js&quot;: 5,</span><br><span class="line">    &quot;./node_modules/react/lib/PooledClass.js&quot;: 6,</span><br><span class="line">    &quot;./node_modules/react/lib/reactProdInvariant.js&quot;: 7,</span><br><span class="line">    &quot;./node_modules/fbjs/lib/invariant.js&quot;: 8,</span><br><span class="line">    &quot;./node_modules/react/lib/ReactElement.js&quot;: 9,</span><br><span class="line">    </span><br><span class="line">    ............</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>Webpack</code>å°†æ¯ä¸ªåº“éƒ½è¿›è¡Œäº†ç¼–å·ç´¢å¼•ï¼Œä¹‹åçš„<code>dll user</code>å¯ä»¥è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œç›´æ¥ç”¨<code>id</code>æ¥å¼•ç”¨</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/640.png" alt="img"></p>
<p><strong>ç¬¬ä¸‰æ­¥ï¼š åœ¨pluginsä¸­å¢åŠ é…ç½®</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// build/webpack.prod.conf.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">   plugins: [</span><br><span class="line">        new webpack.DllReferencePlugin(&#123;</span><br><span class="line">          manifest: require(&#x27;../dll/react-manifest.json&#x27;)</span><br><span class="line">        &#125;),</span><br><span class="line">        new webpack.DllReferencePlugin(&#123;</span><br><span class="line">          manifest: require(&#x27;../dll/ui-manifest.json&#x27;)</span><br><span class="line">        &#125;),</span><br><span class="line">        new webpack.DllReferencePlugin(&#123;</span><br><span class="line">          manifest: require(&#x27;../dll/others-manifest.json&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å†æ¬¡æ‰§è¡Œ<code>npm run build</code></p>
</blockquote>
<p>ä¹‹å‰<br><img src="https://poetries1.gitee.io/img-repo/2019/10/641.png" alt="img"></p>
<p>ä¹‹å<br><img src="https://poetries1.gitee.io/img-repo/2019/10/642.png" alt="img"></p>
<h2 id="äºŒã€happypack-å¤šçº¿ç¨‹æ‰“åŒ…"><a href="#äºŒã€happypack-å¤šçº¿ç¨‹æ‰“åŒ…" class="headerlink" title="äºŒã€happypack å¤šçº¿ç¨‹æ‰“åŒ…"></a>äºŒã€happypack å¤šçº¿ç¨‹æ‰“åŒ…</h2><blockquote>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œjsæ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œä½†<code>node</code>ä¸æ˜¯ã€‚åˆ©ç”¨<code>node</code>æä¾›çš„å¤šçº¿ç¨‹ç¯å¢ƒï¼Œ<code>happypack</code>æ˜¯å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…çš„ã€‚åŸºæœ¬ä¸Šæ‰“å¼€å®˜ç½‘çœ‹äº†ä¸€ä¸‹readmeå°±å¯ä»¥é…ç½®äº†ï¼Œç‰¹åˆ«æ˜¯æˆ‘åªé’ˆå¯¹jsçš„ç¼–è¯‘è¿›è¡Œä¼˜åŒ–ï¼Œé…ç½®è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/happypack">https://www.npmjs.com/package/happypack</a></p>
<ul>
<li><code>happyPack</code>æŠŠæ‰€æœ‰ä¸²è¡Œçš„ä¸œè¥¿å¹¶è¡Œå¤„ç†,ä½¿å¾—<code>loader</code>å¹¶è¡Œå¤„ç†ï¼Œè¾ƒå°‘æ–‡ä»¶å¤„ç†æ—¶é—´</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// build/webpack.prod.conf.js</span><br><span class="line"></span><br><span class="line">// @file: webpack.config.js</span><br><span class="line">const HappyPack = require(&#x27;happypack&#x27;);</span><br><span class="line"> </span><br><span class="line">exports.module = &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: /.js$/,</span><br><span class="line">      // 1) replace your original list of loaders with &quot;happypack/loader&quot;:</span><br><span class="line">      // loaders: [ &#x27;babel-loader?presets[]=es2015&#x27; ],</span><br><span class="line">      use: &#x27;happypack/loader&#x27;,</span><br><span class="line">      include: [ /* ... */ ],</span><br><span class="line">      exclude: [ /* ... */ ]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">     // 2) create the plugin:</span><br><span class="line">    new HappyPack(&#123;</span><br><span class="line">        // 3) re-add the loaders you replaced above in #1:</span><br><span class="line">        loaders: [ &#x27;babel-loader?presets[]=es2015&#x27; ]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶çš„ç¼–è¯‘æ—¶é—´ä¹Ÿå‡å°äº†ä¸€äº›</p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/643.png" alt="img"></p>
<blockquote>
<p>æ›´å¤šè¯¦æƒ… <a target="_blank" rel="noopener" href="http://blog.poetries.top/2018/11/21/webpack-review/#6-1-%E5%88%86%E6%9E%90%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C">http://blog.poetries.top/2018/11/21/webpack-review/#6-1-%E5%88%86%E6%9E%90%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C</a></p>
</blockquote>
<h2 id="ä¸‰ã€æ›´å¤šå‚è€ƒ"><a href="#ä¸‰ã€æ›´å¤šå‚è€ƒ" class="headerlink" title="ä¸‰ã€æ›´å¤šå‚è€ƒ"></a>ä¸‰ã€æ›´å¤šå‚è€ƒ</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.jeffjade.com/2017/08/06/124-webpack-packge-optimization-for-volume/">Webpack æ‰“åŒ…ä¼˜åŒ–ä¹‹ä½“ç§¯ç¯‡</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jeffjade.com/2017/08/12/125-webpack-package-optimization-for-speed/">Webpack æ‰“åŒ…ä¼˜åŒ–ä¹‹é€Ÿåº¦ç¯‡</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007104372">é¢„æ‰“åŒ…Dllï¼Œå®ç°webpackéŸ³é€Ÿç¼–è¯‘</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5a4f031b518825733e6040c0">åˆ©ç”¨DllPluginåˆ†å‰²ä½ çš„ç¬¬ä¸‰æ–¹åº“</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/p2227/p2227.github.io/issues/21">æé«˜webpackçš„æ‰“åŒ…é€Ÿåº¦ï¼šhappypackå’Œdllæ‰“åŒ…</a></li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/10/21/webpack/webpackdll%E9%A2%84%E7%BC%96%E8%AF%91%E6%8F%90%E9%AB%98webpack%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpack-analyzer">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/10/20/webpack/webpack-bundle-analyzer/">webpack-analyzer</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-10-20
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ analyzer åˆ†æé¡¹ç›®ç¼–è¯‘åçš„æ–‡ä»¶ç»„æˆï¼Œä»¥ä¾¿è¿›è¡ŒåŠ è½½é€Ÿåº¦ä¼˜åŒ–ã€‚</p>
<p>1.é¦–å…ˆå®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-bundle-analyzer --save-dev</span><br></pre></td></tr></table></figure>
<p>2.ç„¶ååœ¨ vue.config.js ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<p>const BundleAnalyzerPlugin &#x3D; require(â€˜webpack-bundle-analyzerâ€™).BundleAnalyzerPlugin;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        new BundleAnalyzerPlugin(&#123;</span><br><span class="line">                    //  å¯ä»¥æ˜¯`server`ï¼Œ`static`æˆ–`disabled`ã€‚</span><br><span class="line">                    //  åœ¨`server`æ¨¡å¼ä¸‹ï¼Œåˆ†æå™¨å°†å¯åŠ¨HTTPæœåŠ¡å™¨æ¥æ˜¾ç¤ºè½¯ä»¶åŒ…æŠ¥å‘Šã€‚</span><br><span class="line">                    //  åœ¨â€œé™æ€â€æ¨¡å¼ä¸‹ï¼Œä¼šç”Ÿæˆå¸¦æœ‰æŠ¥å‘Šçš„å•ä¸ªHTMLæ–‡ä»¶ã€‚</span><br><span class="line">                    //  åœ¨`disabled`æ¨¡å¼ä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶æ¥å°†`generateStatsFile`è®¾ç½®ä¸º`true`æ¥ç”ŸæˆWebpack Stats JSONæ–‡ä»¶ã€‚</span><br><span class="line">                    analyzerMode: &#x27;server&#x27;,</span><br><span class="line">                    //  å°†åœ¨â€œæœåŠ¡å™¨â€æ¨¡å¼ä¸‹ä½¿ç”¨çš„ä¸»æœºå¯åŠ¨HTTPæœåŠ¡å™¨ã€‚</span><br><span class="line">                    analyzerHost: &#x27;127.0.0.1&#x27;,</span><br><span class="line">                    //  å°†åœ¨â€œæœåŠ¡å™¨â€æ¨¡å¼ä¸‹ä½¿ç”¨çš„ç«¯å£å¯åŠ¨HTTPæœåŠ¡å™¨ã€‚</span><br><span class="line">                    analyzerPort: 8888, </span><br><span class="line">                    //  è·¯å¾„æ†ç»‘ï¼Œå°†åœ¨`static`æ¨¡å¼ä¸‹ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶ã€‚</span><br><span class="line">                    //  ç›¸å¯¹äºæ†ç»‘è¾“å‡ºç›®å½•ã€‚</span><br><span class="line">                    reportFilename: &#x27;report.html&#x27;,</span><br><span class="line">                    //  æ¨¡å—å¤§å°é»˜è®¤æ˜¾ç¤ºåœ¨æŠ¥å‘Šä¸­ã€‚</span><br><span class="line">                    //  åº”è¯¥æ˜¯`stat`ï¼Œ`parsed`æˆ–è€…`gzip`ä¸­çš„ä¸€ä¸ªã€‚</span><br><span class="line">                    //  æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§â€œå®šä¹‰â€ä¸€èŠ‚ã€‚</span><br><span class="line">                    defaultSizes: &#x27;parsed&#x27;,</span><br><span class="line">                    //  åœ¨é»˜è®¤æµè§ˆå™¨ä¸­è‡ªåŠ¨æ‰“å¼€æŠ¥å‘Š</span><br><span class="line">                    openAnalyzer: true,</span><br><span class="line">                    //  å¦‚æœä¸ºtrueï¼Œåˆ™Webpack Stats JSONæ–‡ä»¶å°†åœ¨bundleè¾“å‡ºç›®å½•ä¸­ç”Ÿæˆ</span><br><span class="line">                    generateStatsFile: false, </span><br><span class="line">                    //  å¦‚æœ`generateStatsFile`ä¸º`true`ï¼Œå°†ä¼šç”ŸæˆWebpack Stats JSONæ–‡ä»¶çš„åå­—ã€‚</span><br><span class="line">                    //  ç›¸å¯¹äºæ†ç»‘è¾“å‡ºç›®å½•ã€‚</span><br><span class="line">                    statsFilename: &#x27;stats.json&#x27;,</span><br><span class="line">                    //  stats.toJsonï¼ˆï¼‰æ–¹æ³•çš„é€‰é¡¹ã€‚</span><br><span class="line">                    //  ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`sourceï¼šfalse`é€‰é¡¹æ’é™¤ç»Ÿè®¡æ–‡ä»¶ä¸­æ¨¡å—çš„æ¥æºã€‚</span><br><span class="line">                    //  åœ¨è¿™é‡ŒæŸ¥çœ‹æ›´å¤šé€‰é¡¹ï¼šhttpsï¼š  //github.com/webpack/webpack/blob/webpack-1/lib/Stats.js#L21</span><br><span class="line">                    statsOptions: null,</span><br><span class="line">                    logLevel: &#x27;info&#x27; // æ—¥å¿—çº§åˆ«ã€‚å¯ä»¥æ˜¯&#x27;ä¿¡æ¯&#x27;ï¼Œ&#x27;è­¦å‘Š&#x27;ï¼Œ&#x27;é”™è¯¯&#x27;æˆ–&#x27;æ²‰é»˜&#x27;ã€‚</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>3.ä½¿ç”¨</p>
<p>npm run serve â€“report<br>npm run build â€“report</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/10/20/webpack/webpack-bundle-analyzer/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpack4ä¸webpack5çš„åŒºåˆ«">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/10/14/webpack/webpack4-webpack5%E7%9A%84%E5%8C%BA%E5%88%AB/">webpack4ä¸webpack5çš„åŒºåˆ«</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-10-14
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h1 id="Webpack5-å…³æ³¨ä¸‹é¢å†…å®¹ï¼š"><a href="#Webpack5-å…³æ³¨ä¸‹é¢å†…å®¹ï¼š" class="headerlink" title="Webpack5 å…³æ³¨ä¸‹é¢å†…å®¹ï¼š"></a>Webpack5 å…³æ³¨ä¸‹é¢å†…å®¹ï¼š</h1><p>é€šè¿‡æŒä¹…ç¼“å­˜æé«˜æ„å»ºæ€§èƒ½.</p>
<p>ä½¿ç”¨æ›´å¥½çš„ç®—æ³•å’Œé»˜è®¤å€¼æ¥æ”¹å–„é•¿æœŸç¼“å­˜.</p>
<p>é€šè¿‡æ›´å¥½çš„æ ‘æ‘‡å’Œä»£ç ç”Ÿæˆæ¥æ”¹å–„æ†ç»‘åŒ…å¤§å°.</p>
<p>æ¸…é™¤å¤„äºæ€ªå¼‚çŠ¶æ€çš„å†…éƒ¨ç»“æ„ï¼ŒåŒæ—¶åœ¨ v4 ä¸­å®ç°åŠŸèƒ½è€Œä¸å¼•å…¥ä»»ä½•é‡å¤§æ›´æ”¹.</p>
<p>ä¸‹è½½:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack@5 webpack-cli -D</span><br></pre></td></tr></table></figure>
<h2 id="ä¸€ã€å‹ç¼©ä»£ç "><a href="#ä¸€ã€å‹ç¼©ä»£ç " class="headerlink" title="ä¸€ã€å‹ç¼©ä»£ç "></a>ä¸€ã€å‹ç¼©ä»£ç </h2><p>1.webpack4</p>
<p>webpack4 ä¸Šéœ€è¦ä¸‹è½½å®‰è£… terser-webpack-plugin æ’ä»¶ï¼Œå¹¶ä¸”éœ€è¦ä»¥ä¸‹é…ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const TerserPlugin = require(&#x27;terser-webpack-plugin&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123; </span><br><span class="line">// ...other config</span><br><span class="line">optimization: &#123;</span><br><span class="line">  minimize: !isDev,</span><br><span class="line">  minimizer: [</span><br><span class="line">    new TerserPlugin(&#123;</span><br><span class="line">      extractComments: false, </span><br><span class="line">      terserOptions: &#123; </span><br><span class="line">        compress: &#123; </span><br><span class="line">          pure_funcs: [&#x27;console.log&#x27;] </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;) ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p> 2.webpack5<br>å†…éƒ¨æœ¬èº«å°±è‡ªå¸¦ js å‹ç¼©åŠŸèƒ½ï¼Œä»–å†…ç½®äº† terser-webpack-plugin æ’ä»¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†ä¸‹è½½å®‰è£…ã€‚è€Œä¸”åœ¨ mode&#x3D;â€œproductionâ€ çš„æ—¶å€™ä¼šè‡ªåŠ¨å¼€å¯ js å‹ç¼©åŠŸèƒ½ã€‚</p>
<p>å¦‚æœä½ è¦åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œå°±ç”¨ä¸‹é¢ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.jsä¸­</span><br><span class="line">module.exports = &#123;</span><br><span class="line">   optimization: &#123;</span><br><span class="line">     usedExports: true, //åªå¯¼å‡ºè¢«ä½¿ç”¨çš„æ¨¡å—</span><br><span class="line">     minimize : true // å¯åŠ¨å‹ç¼©</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€webpack-ç¼“å­˜"><a href="#äºŒã€webpack-ç¼“å­˜" class="headerlink" title="äºŒã€webpack ç¼“å­˜"></a>äºŒã€webpack ç¼“å­˜</h2><p>1.webpack4 ç¼“å­˜é…ç½®<br>npm install hard-source-webpack-plugin -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const HardSourceWebpackPlugin = require(&#x27;hard-source-webpack-plugin&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">plugins: [</span><br><span class="line">  // å…¶å®ƒ plugin...</span><br><span class="line">  new HardSourceWebpackPlugin(),</span><br><span class="line">] &#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>webpack5 ç¼“å­˜é…ç½®</li>
</ol>
<p>webpack5 å†…éƒ¨å†…ç½®äº† cache ç¼“å­˜æœºåˆ¶ã€‚ç›´æ¥é…ç½®å³å¯ã€‚</p>
<p>cache ä¼šåœ¨å¼€å‘æ¨¡å¼ä¸‹è¢«è®¾ç½®æˆ typeï¼š memory è€Œä¸”ä¼šåœ¨ç”Ÿäº§æ¨¡å¼æŠŠcache ç»™ç¦ç”¨æ‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js</span><br><span class="line">module.exports= &#123;</span><br><span class="line">  // ä½¿ç”¨æŒä¹…åŒ–ç¼“å­˜</span><br><span class="line">  cache: &#123;</span><br><span class="line">    type: &#x27;filesystem&#x27;ï¼Œ</span><br><span class="line">    cacheDirectory: path.join(__dirname, &#x27;node_modules/.cac/webpack&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>type çš„å¯é€‰å€¼ä¸ºï¼š memory ä½¿ç”¨å†…å®¹ç¼“å­˜ï¼Œfilesystem ä½¿ç”¨æ–‡ä»¶ç¼“å­˜ã€‚</p>
<h2 id="ä¸‰ã€å¯åŠ¨æœåŠ¡çš„å·®åˆ«"><a href="#ä¸‰ã€å¯åŠ¨æœåŠ¡çš„å·®åˆ«" class="headerlink" title="ä¸‰ã€å¯åŠ¨æœåŠ¡çš„å·®åˆ«"></a>ä¸‰ã€å¯åŠ¨æœåŠ¡çš„å·®åˆ«</h2><p>1.webpack4 å¯åŠ¨æœåŠ¡</p>
<p>é€šè¿‡ webpack-dev-server å¯åŠ¨æœåŠ¡</p>
<p>2.webpack5 å¯åŠ¨æœåŠ¡</p>
<p>å†…ç½®ä½¿ç”¨ webpack serve å¯åŠ¨ï¼Œä½†æ˜¯ä»–çš„æ—¥å¿—ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½åŠ éƒ½å–œæ¬¢ç”¨ webpack-dev-server ä¼˜åŒ–ã€‚</p>
<h2 id="å››ã€devtoolçš„å·®åˆ«"><a href="#å››ã€devtoolçš„å·®åˆ«" class="headerlink" title="å››ã€devtoolçš„å·®åˆ«"></a>å››ã€devtoolçš„å·®åˆ«</h2><p>ourceMapéœ€è¦åœ¨ webpack.config.jsé‡Œé¢ç›´æ¥é…ç½® devtool å°±å¯ä»¥å®ç°äº†ã€‚è€Œ devtoolæœ‰å¾ˆå¤šä¸ªé€‰é¡¹å€¼ï¼Œä¸åŒçš„é€‰é¡¹å€¼ï¼Œä¸åŒçš„é€‰é¡¹äº§ç”Ÿçš„ .map æ–‡ä»¶ä¸åŒï¼Œæ‰“åŒ…é€Ÿåº¦ä¸åŒã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨å¼€å‘ç¯å¢ƒé…ç½®ç”¨â€œcheap-eval-module-source-mapâ€ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒç”¨â€˜noneâ€™ã€‚</p>
<p>devtoolåœ¨webpack4å’Œwebpack5ä¸Šä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„</p>
<p>v4: devtool: â€˜cheap-eval-module-source-mapâ€™</p>
<p>v5: devtool: â€˜eval-cheap-module-source-mapâ€™</p>
<h2 id="äº”ã€è‡ªåŠ¨åˆ é™¤-Node-js-Polyfills"><a href="#äº”ã€è‡ªåŠ¨åˆ é™¤-Node-js-Polyfills" class="headerlink" title="äº”ã€è‡ªåŠ¨åˆ é™¤ Node.js Polyfills"></a>äº”ã€è‡ªåŠ¨åˆ é™¤ Node.js Polyfills</h2><p>æ—©æœŸï¼Œwebpack çš„ç›®æ ‡æ˜¯å…è®¸åœ¨æµè§ˆå™¨ä¸­è¿è¡Œå¤§å¤šæ•° node.js æ¨¡å—ï¼Œä½†æ˜¯æ¨¡å—æ ¼å±€å‘ç”Ÿäº†å˜åŒ–ï¼Œè®¸å¤šæ¨¡å—ç”¨é€”ç°åœ¨ä¸»è¦æ˜¯ä¸ºå‰ç«¯ç›®çš„è€Œç¼–å†™çš„ã€‚webpack &lt;&#x3D; 4 é™„å¸¦äº†è®¸å¤š node.js æ ¸å¿ƒæ¨¡å—çš„ polyfillï¼Œä¸€æ—¦æ¨¡å—ä½¿ç”¨ä»»ä½•æ ¸å¿ƒæ¨¡å—ï¼ˆå³ crypto æ¨¡å—ï¼‰ï¼Œè¿™äº›æ¨¡å—å°±ä¼šè‡ªåŠ¨åº”ç”¨ã€‚</p>
<p>å°½ç®¡è¿™ä½¿ä½¿ç”¨ä¸º node.js ç¼–å†™çš„æ¨¡å—å˜å¾—å®¹æ˜“ï¼Œä½†å®ƒä¼šå°†è¿™äº›å·¨å¤§çš„ polyfill æ·»åŠ åˆ°åŒ…ä¸­ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™äº› polyfill æ˜¯ä¸å¿…è¦çš„ã€‚</p>
<p>webpack 5 ä¼šè‡ªåŠ¨åœæ­¢å¡«å……è¿™äº›æ ¸å¿ƒæ¨¡å—ï¼Œå¹¶ä¸“æ³¨äºä¸å‰ç«¯å…¼å®¹çš„æ¨¡å—ã€‚</p>
<p>è¿ç§»ï¼š</p>
<p>å°½å¯èƒ½å°è¯•ä½¿ç”¨ä¸å‰ç«¯å…¼å®¹çš„æ¨¡å—ã€‚</p>
<p>å¯ä»¥ä¸º node.js æ ¸å¿ƒæ¨¡å—æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ª polyfillã€‚é”™è¯¯æ¶ˆæ¯å°†æç¤ºå¦‚ä½•å®ç°è¯¥ç›®æ ‡ã€‚</p>
<h2 id="å…­ã€Chunk-å’Œ-Chunk-ID"><a href="#å…­ã€Chunk-å’Œ-Chunk-ID" class="headerlink" title="å…­ã€Chunk å’Œ  Chunk ID"></a>å…­ã€Chunk å’Œ  Chunk ID</h2><p>æ·»åŠ äº†ç”¨äºé•¿æœŸç¼“å­˜çš„æ–°ç®—æ³•ã€‚åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹é»˜è®¤æƒ…å†µä¸‹å¯ç”¨è¿™äº›åŠŸèƒ½ã€‚</p>
<p>ä½ å¯ä»¥ä¸ç”¨ä½¿ç”¨ import(&#x2F;* webpackChunkName: â€œnameâ€ *&#x2F; â€œmoduleâ€) åœ¨å¼€å‘ç¯å¢ƒæ¥ä¸º chunk å‘½åï¼Œç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯æœ‰å¿…è¦çš„</p>
<p>webpack å†…éƒ¨æœ‰ chunk å‘½åè§„åˆ™ï¼Œä¸å†æ˜¯ä»¥ id(0, 1, 2)å‘½åäº†</p>
<h2 id="ä¸ƒã€Tree-Shaking"><a href="#ä¸ƒã€Tree-Shaking" class="headerlink" title="ä¸ƒã€Tree Shaking"></a>ä¸ƒã€Tree Shaking</h2><p>æœæˆ‘ä»¬çš„é¡¹ç›®ä¸­å¼•å…¥äº† lodash åŒ…ï¼Œä½†æ˜¯æˆ‘åªæœ‰äº†å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚å…¶ä»–æ²¡æœ‰ç”¨åˆ°çš„æ–¹æ³•æ˜¯ä¸æ˜¯å†—ä½™çš„ï¼Ÿæ­¤æ—¶ tree-shaking å°±å¯ä»¥æŠŠæ²¡æœ‰ç”¨çš„é‚£äº›ä¸œè¥¿å‰”é™¤æ‰ï¼Œæ¥å¤§å¤§å‡å°‘æœ€ç»ˆçš„bundleä½“ç§¯ã€‚</p>
<p>usedExports : true, æ ‡è®°æ²¡æœ‰ç”¨çš„å¶å­<br>minimize: true, æ‘‡æ‰é‚£äº›æ²¡æœ‰ç”¨çš„å¶å­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.jsä¸­</span><br><span class="line"></span><br><span class="line"> module.exports = &#123;</span><br><span class="line"></span><br><span class="line">    optimization: &#123;</span><br><span class="line"></span><br><span class="line">      usedExports: true, //åªå¯¼å‡ºè¢«ä½¿ç”¨çš„æ¨¡å—</span><br><span class="line"></span><br><span class="line">      minimize : true // å¯åŠ¨å‹ç¼©</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å¯ä»¥å¤„ç†commonjsçš„tree shaking</p>
<h2 id="å…«ã€é»˜è®¤å€¼"><a href="#å…«ã€é»˜è®¤å€¼" class="headerlink" title="å…«ã€é»˜è®¤å€¼"></a>å…«ã€é»˜è®¤å€¼</h2><p>entry: â€œ.&#x2F;src&#x2F;index.js</p>
<p>output.path: path.resolve(__dirname, â€œdistâ€)</p>
<p>output.filename: â€œ[name].jsâ€</p>
<h2 id="ä¹ã€Caching"><a href="#ä¹ã€Caching" class="headerlink" title="ä¹ã€Caching"></a>ä¹ã€Caching</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// é…ç½®ç¼“å­˜</span><br><span class="line">cache: &#123;</span><br><span class="line">  // ç£ç›˜å­˜å‚¨</span><br><span class="line">  type: &quot;filesystem&quot;,</span><br><span class="line">  buildDependencies: &#123;</span><br><span class="line">    // å½“é…ç½®ä¿®æ”¹æ—¶ï¼Œç¼“å­˜å¤±æ•ˆ</span><br><span class="line">    config: [__filename]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åã€SplitChunk"><a href="#åã€SplitChunk" class="headerlink" title="åã€SplitChunk"></a>åã€SplitChunk</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// webpack4</span><br><span class="line">minSize: 30000;</span><br><span class="line"></span><br><span class="line">// webpack5</span><br><span class="line">minSize: &#123;</span><br><span class="line">  javascript: 30000,</span><br><span class="line">  style: 50000,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/10/14/webpack/webpack4-webpack5%E7%9A%84%E5%8C%BA%E5%88%AB/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpackä¼˜åŒ–å‰ç«¯æ€§èƒ½">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/10/09/webpack/webpack%20%E4%BC%98%E5%8C%96%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD/">webpackä¼˜åŒ–å‰ç«¯æ€§èƒ½</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-10-09
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€èƒŒæ™¯"><a href="#ä¸€ã€èƒŒæ™¯" class="headerlink" title="ä¸€ã€èƒŒæ™¯"></a>ä¸€ã€èƒŒæ™¯</h2><p>éšç€å‰ç«¯çš„é¡¹ç›®é€æ¸æ‰©å¤§ï¼Œå¿…ç„¶ä¼šå¸¦æ¥çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ€§èƒ½</p>
<p>å°¤å…¶åœ¨å¤§å‹å¤æ‚çš„é¡¹ç›®ä¸­ï¼Œå‰ç«¯ä¸šåŠ¡å¯èƒ½å› ä¸ºä¸€ä¸ªå°å°çš„æ•°æ®ä¾èµ–ï¼Œå¯¼è‡´æ•´ä¸ªé¡µé¢å¡é¡¿ç”šè‡³å¥”æºƒ</p>
<p>ä¸€èˆ¬é¡¹ç›®åœ¨å®Œæˆåï¼Œä¼šé€šè¿‡<code>webpack</code>è¿›è¡Œæ‰“åŒ…ï¼Œåˆ©ç”¨<code>webpack</code>å¯¹å‰ç«¯é¡¹ç›®æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªååˆ†é‡è¦çš„ç¯èŠ‚</p>
<h2 id="äºŒã€å¦‚ä½•ä¼˜åŒ–"><a href="#äºŒã€å¦‚ä½•ä¼˜åŒ–" class="headerlink" title="äºŒã€å¦‚ä½•ä¼˜åŒ–"></a>äºŒã€å¦‚ä½•ä¼˜åŒ–</h2><p>é€šè¿‡<code>webpack</code>ä¼˜åŒ–å‰ç«¯çš„æ‰‹æ®µæœ‰ï¼š</p>
<ul>
<li>JSä»£ç å‹ç¼©</li>
<li>CSSä»£ç å‹ç¼©</li>
<li>Htmlæ–‡ä»¶ä»£ç å‹ç¼©</li>
<li>æ–‡ä»¶å¤§å°å‹ç¼©</li>
<li>å›¾ç‰‡å‹ç¼©</li>
<li>Tree Shaking</li>
<li>ä»£ç åˆ†ç¦»</li>
<li>å†…è” chunk</li>
</ul>
<h3 id="JSä»£ç å‹ç¼©"><a href="#JSä»£ç å‹ç¼©" class="headerlink" title="JSä»£ç å‹ç¼©"></a>JSä»£ç å‹ç¼©</h3><p><code>terser</code>æ˜¯ä¸€ä¸ª<code>JavaScript</code>çš„è§£é‡Šã€ç»è‚‰æœºã€å‹ç¼©æœºçš„å·¥å…·é›†ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å‹ç¼©ã€ä¸‘åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œè®©<code>bundle</code>æ›´å°</p>
<p>åœ¨<code>production</code>æ¨¡å¼ä¸‹ï¼Œ<code>webpack</code> é»˜è®¤å°±æ˜¯ä½¿ç”¨ <code>TerserPlugin</code> æ¥å¤„ç†æˆ‘ä»¬çš„ä»£ç çš„ã€‚å¦‚æœæƒ³è¦è‡ªå®šä¹‰é…ç½®å®ƒï¼Œé…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;terser-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minimizer</span>: [</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(&#123;</span><br><span class="line">                <span class="attr">parallel</span>: <span class="literal">true</span> <span class="comment">// ç”µè„‘cpuæ ¸æ•°-1</span></span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å±æ€§ä»‹ç»å¦‚ä¸‹ï¼š</p>
<ul>
<li>extractCommentsï¼šé»˜è®¤å€¼ä¸ºtrueï¼Œè¡¨ç¤ºä¼šå°†æ³¨é‡ŠæŠ½å–åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œå¼€å‘é˜¶æ®µï¼Œæˆ‘ä»¬å¯è®¾ç½®ä¸º false ï¼Œä¸ä¿ç•™æ³¨é‡Š</li>
<li>parallelï¼šä½¿ç”¨å¤šè¿›ç¨‹å¹¶å‘è¿è¡Œæé«˜æ„å»ºçš„é€Ÿåº¦ï¼Œé»˜è®¤å€¼æ˜¯trueï¼Œå¹¶å‘è¿è¡Œçš„é»˜è®¤æ•°é‡ï¼š os.cpus().length - 1</li>
<li>terserOptionsï¼šè®¾ç½®æˆ‘ä»¬çš„terserç›¸å…³çš„é…ç½®ï¼š</li>
<li>compressï¼šè®¾ç½®å‹ç¼©ç›¸å…³çš„é€‰é¡¹ï¼Œmangleï¼šè®¾ç½®ä¸‘åŒ–ç›¸å…³çš„é€‰é¡¹ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºtrue</li>
<li>mangleï¼šè®¾ç½®ä¸‘åŒ–ç›¸å…³çš„é€‰é¡¹ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºtrue</li>
<li>toplevelï¼šåº•å±‚å˜é‡æ˜¯å¦è¿›è¡Œè½¬æ¢</li>
<li>keep_classnamesï¼šä¿ç•™ç±»çš„åç§°</li>
<li>keep_fnamesï¼šä¿ç•™å‡½æ•°çš„åç§°</li>
</ul>
<h3 id="CSSä»£ç å‹ç¼©"><a href="#CSSä»£ç å‹ç¼©" class="headerlink" title="CSSä»£ç å‹ç¼©"></a>CSSä»£ç å‹ç¼©</h3><p><code>CSS</code>å‹ç¼©é€šå¸¸æ˜¯å»é™¤æ— ç”¨çš„ç©ºæ ¼ç­‰ï¼Œå› ä¸ºå¾ˆéš¾å»ä¿®æ”¹é€‰æ‹©å™¨ã€å±æ€§çš„åç§°ã€å€¼ç­‰</p>
<p>CSSçš„å‹ç¼©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ä¸ªæ’ä»¶ï¼š<code>css-minimizer-webpack-plugin</code></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-minimizer-webpack-plugin -D</span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;css-minimizer-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minimizer</span>: [</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(&#123;</span><br><span class="line">                <span class="attr">parallel</span>: <span class="literal">true</span></span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Htmlæ–‡ä»¶ä»£ç å‹ç¼©"><a href="#Htmlæ–‡ä»¶ä»£ç å‹ç¼©" class="headerlink" title="Htmlæ–‡ä»¶ä»£ç å‹ç¼©"></a>Htmlæ–‡ä»¶ä»£ç å‹ç¼©</h3><p>ä½¿ç”¨<code>HtmlWebpackPlugin</code>æ’ä»¶æ¥ç”Ÿæˆ<code>HTML</code>çš„æ¨¡æ¿æ—¶å€™ï¼Œé€šè¿‡é…ç½®å±æ€§<code>minify</code>è¿›è¡Œ<code>html</code>ä¼˜åŒ–</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">plugin</span>:[</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlwebpackPlugin</span>(&#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="attr">minify</span>:&#123;</span><br><span class="line">                <span class="attr">minifyCSS</span>:<span class="literal">false</span>, <span class="comment">// æ˜¯å¦å‹ç¼©css</span></span><br><span class="line">                <span class="attr">collapseWhitespace</span>:<span class="literal">false</span>, <span class="comment">// æ˜¯å¦æŠ˜å ç©ºæ ¼</span></span><br><span class="line">                <span class="attr">removeComments</span>:<span class="literal">true</span> <span class="comment">// æ˜¯å¦ç§»é™¤æ³¨é‡Š</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è®¾ç½®äº†<code>minify</code>ï¼Œå®é™…ä¼šä½¿ç”¨å¦ä¸€ä¸ªæ’ä»¶<code>html-minifier-terser</code></p>
<h3 id="æ–‡ä»¶å¤§å°å‹ç¼©"><a href="#æ–‡ä»¶å¤§å°å‹ç¼©" class="headerlink" title="æ–‡ä»¶å¤§å°å‹ç¼©"></a>æ–‡ä»¶å¤§å°å‹ç¼©</h3><p>å¯¹æ–‡ä»¶çš„å¤§å°è¿›è¡Œå‹ç¼©ï¼Œå‡å°‘<code>http</code>ä¼ è¾“è¿‡ç¨‹ä¸­å®½å¸¦çš„æŸè€—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install compression-webpack-plugin -D</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">ComepressionPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">test</span>:<span class="regexp">/\.(css|js)$/</span>,  <span class="comment">// å“ªäº›æ–‡ä»¶éœ€è¦å‹ç¼©</span></span><br><span class="line">    <span class="attr">threshold</span>:<span class="number">500</span>, <span class="comment">// è®¾ç½®æ–‡ä»¶å¤šå¤§å¼€å§‹å‹ç¼©</span></span><br><span class="line">    <span class="attr">minRatio</span>:<span class="number">0.7</span>, <span class="comment">// è‡³å°‘å‹ç¼©çš„æ¯”ä¾‹</span></span><br><span class="line">    <span class="attr">algorithm</span>:<span class="string">&quot;gzip&quot;</span>, <span class="comment">// é‡‡ç”¨çš„å‹ç¼©ç®—æ³•</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="å›¾ç‰‡å‹ç¼©"><a href="#å›¾ç‰‡å‹ç¼©" class="headerlink" title="å›¾ç‰‡å‹ç¼©"></a>å›¾ç‰‡å‹ç¼©</h3><p>ä¸€èˆ¬æ¥è¯´åœ¨æ‰“åŒ…ä¹‹åï¼Œä¸€äº›å›¾ç‰‡æ–‡ä»¶çš„å¤§å°æ˜¯è¿œè¿œè¦æ¯” <code>js</code> æˆ–è€… <code>css</code> æ–‡ä»¶è¦æ¥çš„å¤§ï¼Œæ‰€ä»¥å›¾ç‰‡å‹ç¼©è¾ƒä¸ºé‡è¦</p>
<p>é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">      <span class="attr">use</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;[name]_[hash].[ext]&#x27;</span>,</span><br><span class="line">            <span class="attr">outputPath</span>: <span class="string">&#x27;images/&#x27;</span>,</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;image-webpack-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="comment">// å‹ç¼© jpeg çš„é…ç½®</span></span><br><span class="line">            <span class="attr">mozjpeg</span>: &#123;</span><br><span class="line">              <span class="attr">progressive</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="attr">quality</span>: <span class="number">65</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// ä½¿ç”¨ imagemin**-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­</span></span><br><span class="line">            <span class="attr">optipng</span>: &#123;</span><br><span class="line">              <span class="attr">enabled</span>: <span class="literal">false</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// ä½¿ç”¨ imagemin-pngquant å‹ç¼© png</span></span><br><span class="line">            <span class="attr">pngquant</span>: &#123;</span><br><span class="line">              <span class="attr">quality</span>: <span class="string">&#x27;65-90&#x27;</span>,</span><br><span class="line">              <span class="attr">speed</span>: <span class="number">4</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// å‹ç¼© gif çš„é…ç½®</span></span><br><span class="line">            <span class="attr">gifsicle</span>: &#123;</span><br><span class="line">              <span class="attr">interlaced</span>: <span class="literal">false</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼</span></span><br><span class="line">            <span class="attr">webp</span>: &#123;</span><br><span class="line">              <span class="attr">quality</span>: <span class="number">75</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h3><p><code>Tree Shaking</code> æ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œåœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºæ¶ˆé™¤æ­»ä»£ç ï¼Œä¾èµ–äº<code>ES Module</code>çš„é™æ€è¯­æ³•åˆ†æï¼ˆä¸æ‰§è¡Œä»»ä½•çš„ä»£ç ï¼Œå¯ä»¥æ˜ç¡®çŸ¥é“æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼‰</p>
<p>åœ¨<code>webpack</code>å®ç°<code>Trss shaking</code>æœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ¡ˆï¼š</p>
<ul>
<li>usedExportsï¼šé€šè¿‡æ ‡è®°æŸäº›å‡½æ•°æ˜¯å¦è¢«ä½¿ç”¨ï¼Œä¹‹åé€šè¿‡Terseræ¥è¿›è¡Œä¼˜åŒ–çš„</li>
<li>sideEffectsï¼šè·³è¿‡æ•´ä¸ªæ¨¡å—&#x2F;æ–‡ä»¶ï¼Œç›´æ¥æŸ¥çœ‹è¯¥æ–‡ä»¶æ˜¯å¦æœ‰å‰¯ä½œç”¨</li>
</ul>
<p>ä¸¤ç§ä¸åŒçš„é…ç½®æ–¹æ¡ˆï¼Œ æœ‰ä¸åŒçš„æ•ˆæœ</p>
<h4 id="usedExports"><a href="#usedExports" class="headerlink" title="usedExports"></a>usedExports</h4><p>é…ç½®æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦å°†<code>usedExports</code>è®¾ä¸º<code>true</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">optimization</span>:&#123;</span><br><span class="line">        usedExports</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä¹‹åï¼Œæ²¡è¢«ç”¨ä¸Šçš„ä»£ç åœ¨<code>webpack</code>æ‰“åŒ…ä¸­ä¼šåŠ å…¥<code>unused harmony export mul</code>æ³¨é‡Šï¼Œç”¨æ¥å‘ŠçŸ¥ <code>Terser</code> åœ¨ä¼˜åŒ–æ—¶ï¼Œå¯ä»¥åˆ é™¤æ‰è¿™æ®µä»£ç </p>
<p>å¦‚ä¸‹é¢<code>sum</code>å‡½æ•°æ²¡è¢«ç”¨åˆ°ï¼Œ<code>webpack</code>æ‰“åŒ…ä¼šæ·»åŠ æ³¨é‡Šï¼Œ<code>terser</code>åœ¨ä¼˜åŒ–æ—¶ï¼Œåˆ™å°†è¯¥å‡½æ•°å»æ‰</p>
<p><img src="https://static.vue-js.com/21b2e200-aee4-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h4 id="sideEffects"><a href="#sideEffects" class="headerlink" title="sideEffects"></a>sideEffects</h4><p><code>sideEffects</code>ç”¨äºå‘ŠçŸ¥<code>webpack compiler</code>å“ªäº›æ¨¡å—æ—¶æœ‰å‰¯ä½œç”¨ï¼Œé…ç½®æ–¹æ³•æ˜¯åœ¨<code>package.json</code>ä¸­è®¾ç½®<code>sideEffects</code>å±æ€§</p>
<p>å¦‚æœ<code>sideEffects</code>è®¾ç½®ä¸ºfalseï¼Œå°±æ˜¯å‘ŠçŸ¥<code>webpack</code>å¯ä»¥å®‰å…¨çš„åˆ é™¤æœªç”¨åˆ°çš„<code>exports</code></p>
<p>å¦‚æœæœ‰äº›æ–‡ä»¶éœ€è¦ä¿ç•™ï¼Œå¯ä»¥è®¾ç½®ä¸ºæ•°ç»„çš„å½¢å¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;sideEffecis&quot;</span>:[</span><br><span class="line">    <span class="string">&quot;./src/util/format.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;*.css&quot;</span> <span class="comment">// æ‰€æœ‰çš„cssæ–‡ä»¶</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°éƒ½æ˜¯å…³äº<code>javascript</code>çš„<code>tree shaking</code>ï¼Œ<code>css</code>åŒæ ·ä¹Ÿèƒ½å¤Ÿå®ç°<code>tree shaking</code></p>
<h4 id="css-tree-shaking"><a href="#css-tree-shaking" class="headerlink" title="css tree shaking"></a>css tree shaking</h4><p><code>css</code>è¿›è¡Œ<code>tree shaking</code>ä¼˜åŒ–å¯ä»¥å®‰è£…<code>PurgeCss</code>æ’ä»¶</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install purgecss-plugin-webpack -D</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">PurgeCssPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;purgecss-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">PurgeCssPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">path</span>:glob.<span class="title function_">sync</span>(<span class="string">`<span class="subst">$&#123;path.resolve(<span class="string">&#x27;./src&#x27;</span>)&#125;</span>/**/*`</span>), &#123;<span class="attr">nodir</span>:<span class="literal">true</span>&#125;<span class="comment">// srcé‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">            <span class="attr">satelist</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="attr">standard</span>:[<span class="string">&quot;html&quot;</span>]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>pathsï¼šè¡¨ç¤ºè¦æ£€æµ‹å“ªäº›ç›®å½•ä¸‹çš„å†…å®¹éœ€è¦è¢«åˆ†æï¼Œé…åˆä½¿ç”¨glob</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPurgecssä¼šå°†æˆ‘ä»¬çš„htmlæ ‡ç­¾çš„æ ·å¼ç§»é™¤æ‰ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›ä¿ç•™ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªsafelistçš„å±æ€§</li>
</ul>
<h3 id="ä»£ç åˆ†ç¦»"><a href="#ä»£ç åˆ†ç¦»" class="headerlink" title="ä»£ç åˆ†ç¦»"></a>ä»£ç åˆ†ç¦»</h3><p>å°†ä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„<code>bundle</code>ä¸­ï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥æŒ‰éœ€åŠ è½½ï¼Œæˆ–è€…å¹¶è¡ŒåŠ è½½è¿™äº›æ–‡ä»¶</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„<code>JavaScript</code>ä»£ç ï¼ˆä¸šåŠ¡ä»£ç ã€ç¬¬ä¸‰æ–¹ä¾èµ–ã€æš‚æ—¶æ²¡æœ‰ç”¨åˆ°çš„æ¨¡å—ï¼‰åœ¨é¦–é¡µå…¨éƒ¨éƒ½åŠ è½½ï¼Œå°±ä¼šå½±å“é¦–é¡µçš„åŠ è½½é€Ÿåº¦</p>
<p>ä»£ç åˆ†ç¦»å¯ä»¥åˆ†å‡ºå‡ºæ›´å°çš„<code>bundle</code>ï¼Œä»¥åŠæ§åˆ¶èµ„æºåŠ è½½ä¼˜å…ˆçº§ï¼Œæä¾›ä»£ç çš„åŠ è½½æ€§èƒ½</p>
<p>è¿™é‡Œé€šè¿‡<code>splitChunksPlugin</code>æ¥å®ç°ï¼Œè¯¥æ’ä»¶<code>webpack</code>å·²ç»é»˜è®¤å®‰è£…å’Œé›†æˆï¼Œåªéœ€è¦é…ç½®å³å¯</p>
<p>é»˜è®¤é…ç½®ä¸­ï¼Œchunksä»…ä»…é’ˆå¯¹äºå¼‚æ­¥ï¼ˆasyncï¼‰è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸ºinitialæˆ–è€…all</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">optimization</span>:&#123;</span><br><span class="line">        <span class="attr">splitChunks</span>:&#123;</span><br><span class="line">            <span class="attr">chunks</span>:<span class="string">&quot;all&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>splitChunks</code>ä¸»è¦å±æ€§æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>Chunksï¼Œå¯¹åŒæ­¥ä»£ç è¿˜æ˜¯å¼‚æ­¥ä»£ç è¿›è¡Œå¤„ç†</li>
<li>minSizeï¼š æ‹†åˆ†åŒ…çš„å¤§å°, è‡³å°‘ä¸ºminSizeï¼Œå¦‚ä½•åŒ…çš„å¤§å°ä¸è¶…è¿‡minSizeï¼Œè¿™ä¸ªåŒ…ä¸ä¼šæ‹†åˆ†</li>
<li>maxSizeï¼š å°†å¤§äºmaxSizeçš„åŒ…ï¼Œæ‹†åˆ†ä¸ºä¸å°äºminSizeçš„åŒ…</li>
<li>minChunksï¼šè¢«å¼•å…¥çš„æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯1</li>
</ul>
<h3 id="å†…è”chunk"><a href="#å†…è”chunk" class="headerlink" title="å†…è”chunk"></a>å†…è”chunk</h3><p>å¯ä»¥é€šè¿‡<code>InlineChunkHtmlPlugin</code>æ’ä»¶å°†ä¸€äº›<code>chunk</code>çš„æ¨¡å—å†…è”åˆ°<code>html</code>ï¼Œå¦‚<code>runtime</code>çš„ä»£ç ï¼ˆå¯¹æ¨¡å—è¿›è¡Œè§£æã€åŠ è½½ã€æ¨¡å—ä¿¡æ¯ç›¸å…³çš„ä»£ç ï¼‰ï¼Œä»£ç é‡å¹¶ä¸å¤§ï¼Œä½†æ˜¯å¿…é¡»åŠ è½½çš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">InlineChunkHtmlPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;react-dev-utils/InlineChunkHtmlPlugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">plugin</span>:[</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">InlineChunkHtmlPlugin</span>(<span class="title class_">HtmlWebpackPlugin</span>,[<span class="regexp">/runtime.+\.js/</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h3><p>å…³äº<code>webpack</code>å¯¹å‰ç«¯æ€§èƒ½çš„ä¼˜åŒ–ï¼Œå¯ä»¥é€šè¿‡æ–‡ä»¶ä½“ç§¯å¤§å°å…¥æ‰‹ï¼Œå…¶æ¬¡è¿˜å¯é€šè¿‡åˆ†åŒ…çš„å½¢å¼ã€å‡å°‘httpè¯·æ±‚æ¬¡æ•°ç­‰æ–¹å¼ï¼Œå®ç°å¯¹å‰ç«¯æ€§èƒ½çš„ä¼˜åŒ–</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/10/09/webpack/webpack%20%E4%BC%98%E5%8C%96%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpackæ€§èƒ½ä¼˜åŒ–">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/10/04/webpack/webpack%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">webpackæ€§èƒ½ä¼˜åŒ–</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-10-04
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h1 id="æå‡æ„å»ºæ€§èƒ½"><a href="#æå‡æ„å»ºæ€§èƒ½" class="headerlink" title="æå‡æ„å»ºæ€§èƒ½"></a>æå‡æ„å»ºæ€§èƒ½</h1><p>æ¾„æ¸…ï¼šæœ‰æ—¶å€™æˆ‘ä»¬ä¼šç¬¼ç»Ÿçš„è¯´webpackçš„æ€§èƒ½æå‡ï¼Œå®é™…ä¸Šwebpackçš„æ€§èƒ½æå‡å¯ä»¥åˆ†ä¸ºä¸¤ç±»  ç¬¬ä¸€ç±»æ˜¯é€šè¿‡webpackæ¥æå‡æˆ‘ä»¬é¡¹ç›®æ€§èƒ½  å¦‚ï¼šç½‘ç«™çš„é¦–å±åˆ°è¾¾æ—¶é—´ï¼Œè¿™ä¸ªä¼˜åŒ–çš„å—ç›Šè€…æ˜¯cç«¯çš„ç”¨æˆ·  ï¼Œ2.æå‡webpackçš„æ„å»ºç¼–è¯‘æ€§èƒ½ï¼Œå¦‚ï¼šæé«˜æ‰“åŒ…é€Ÿåº¦ï¼Œé™ä½æ‰“åŒ…æ—¶é—´ï¼Œè¿™ä¸ªä¼˜åŒ–çš„å—ç›Šè€…æ˜¯æˆ‘ä»¬çš„å¼€å‘äººå‘˜ã€‚   æœ¬ç« è®²çš„æ˜¯ç¬¬äºŒç§<br>æŠŠå®˜ç½‘ä¸Šæå‡ºçš„webpack5 æå‡æ„å»ºæ€§èƒ½çš„ç‚¹  åˆ—ï¼š<br><strong>æ³¨æ„ï¼š</strong>  webpack æ¯ä¸ªç‰ˆæœ¬çš„ä¼˜åŒ–ç‚¹éƒ½æ˜¯ä¸ä¸€æ ·çš„<br>é€šç”¨ç¯å¢ƒï¼šè¿™äº›ä¼˜åŒ–æ—¢é€‚ç”¨äºå¼€å‘åŒ–å¢ƒä¹Ÿé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚<br>å¼€å‘ç¯å¢ƒï¼š<br>ç”Ÿäº§ç¯å¢ƒï¼š</p>
<h3 id="é€šç”¨ç¯å¢ƒ"><a href="#é€šç”¨ç¯å¢ƒ" class="headerlink" title="é€šç”¨ç¯å¢ƒ"></a><strong>é€šç”¨ç¯å¢ƒ</strong></h3><p>æ— è®ºä½ æ˜¯åœ¨ å¼€å‘ç¯å¢ƒ è¿˜æ˜¯åœ¨ ç”Ÿäº§ç¯å¢ƒ ä¸‹è¿è¡Œæ„å»ºè„šæœ¬ï¼Œä»¥ä¸‹æœ€ä½³å®è·µéƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>1ã€æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬<br>ä½¿ç”¨æœ€æ–°çš„ webpack ç‰ˆæœ¬ã€‚æˆ‘ä»¬ä¼šç»å¸¸è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚webpack çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬æ˜¯ï¼š<br>å°† Node.js æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿæœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå°†ä½ çš„ package ç®¡ç†å·¥å…·ï¼ˆä¾‹å¦‚ npm æˆ–è€… yarn ï¼‰æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿæœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚è¾ƒæ–°çš„ç‰ˆæœ¬èƒ½å¤Ÿå»ºç«‹æ›´é«˜æ•ˆçš„æ¨¡å—æ ‘ä»¥åŠæé«˜è§£æé€Ÿåº¦ã€‚</p>
<p>2ã€loader<br>å°† loader åº”ç”¨äºæœ€å°‘æ•°é‡çš„å¿…è¦æ¨¡å—ã€‚è€Œéå¦‚ä¸‹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> //...</span><br><span class="line"> module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">  &#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    loader: &#x27;babel-loader&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line"> ],</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä½¿ç”¨ include å­—æ®µï¼Œä»…å°† loader åº”ç”¨åœ¨å®é™…éœ€è¦å°†å…¶è½¬æ¢çš„æ¨¡å—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> //...</span><br><span class="line"> module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">  &#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    include: path.resolve(__dirname, &#x27;src&#x27;),</span><br><span class="line">    loader: &#x27;babel-loader&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line"> ],</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>3ã€å¼•å¯¼(bootstrap)<br>æ¯ä¸ªé¢å¤–çš„ loader&#x2F;plugin éƒ½æœ‰å…¶å¯åŠ¨æ—¶é—´ã€‚å°½é‡å°‘åœ°ä½¿ç”¨å·¥å…·ã€‚</p>
<p>4ã€è§£æ<br>ä»¥ä¸‹æ­¥éª¤å¯ä»¥æé«˜è§£æé€Ÿåº¦ï¼š<br>å‡å°‘ resolve.modules , resolve.extensions , resolve.mainFiles ,resolve.descriptionFiles ä¸­æ¡ç›®æ•°é‡ï¼Œå› ä¸ºä»–ä»¬ä¼šå¢åŠ æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ã€‚</p>
<p>å¦‚æœä½ ä¸ä½¿ç”¨ symlinksï¼ˆä¾‹å¦‚ npm link æˆ–è€… yarn link ï¼‰ï¼Œå¯ä»¥è®¾ç½®resolve.symlinks: false ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨è‡ªå®šä¹‰ resolve plugin è§„åˆ™ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®š context ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥è®¾ç½® resolve.cacheWithContext: false ã€‚</p>
<p>5ã€å°å³æ˜¯å¿«(smaller &#x3D; faster)<br>å‡å°‘ç¼–è¯‘ç»“æœçš„æ•´ä½“å¤§å°ï¼Œä»¥æé«˜æ„å»ºæ€§èƒ½ã€‚å°½é‡ä¿æŒ chunk ä½“ç§¯å°ã€‚ä½¿ç”¨æ•°é‡æ›´å°‘&#x2F;ä½“ç§¯æ›´å°çš„ libraryã€‚</p>
<p>åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ SplitChunksPlugin ã€‚<br>åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ SplitChunksPlugin ï¼Œå¹¶å¼€å¯ async æ¨¡å¼ã€‚<br>ç§»é™¤æœªå¼•ç”¨ä»£ç ã€‚<br>åªç¼–è¯‘ä½ å½“å‰æ­£åœ¨å¼€å‘çš„é‚£äº›ä»£ç ã€‚</p>
<p>6ã€æŒä¹…åŒ–ç¼“å­˜<br>åœ¨ webpack é…ç½®ä¸­ä½¿ç”¨ cache é€‰é¡¹ã€‚ä½¿ç”¨ package.json ä¸­çš„ â€œpostinstallâ€æ¸…é™¤ç¼“å­˜ç›®å½•ã€‚<br>å°† cache ç±»å‹è®¾ç½®ä¸ºå†…å­˜æˆ–è€…æ–‡ä»¶ç³»ç»Ÿã€‚ memory é€‰é¡¹å¾ˆç®€å•ï¼Œå®ƒå‘Šè¯‰ webpackåœ¨å†…å­˜ä¸­å­˜å‚¨ç¼“å­˜ï¼Œä¸å…è®¸é¢å¤–çš„é…ç½®ï¼š<br>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> //...</span><br><span class="line"> cache: &#123;</span><br><span class="line">  type: &#x27;memory&#x27;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>7ã€è‡ªå®šä¹‰ plugin&#x2F;loader<br>å¯¹å®ƒä»¬è¿›è¡Œæ¦‚è¦åˆ†æï¼Œä»¥å…åœ¨æ­¤å¤„å¼•å…¥æ€§èƒ½é—®é¢˜ã€‚<br>8ã€dll<br>ä½¿ç”¨ DllPlugin ä¸ºæ›´æ”¹ä¸é¢‘ç¹çš„ä»£ç ç”Ÿæˆå•ç‹¬çš„ç¼–è¯‘ç»“æœã€‚è¿™å¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„ç¼–è¯‘é€Ÿåº¦ï¼Œå°½ç®¡å®ƒå¢åŠ äº†æ„å»ºè¿‡ç¨‹çš„å¤æ‚åº¦ã€‚</p>
<p>webpack.all.config.js  é…ç½®å…³äºdllç›¸å…³çš„å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">	mode:&#x27;production&#x27;   // åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹é¢å»åšäº‹æƒ…</span><br><span class="line">	entry:&#123;</span><br><span class="line">		jquery:[&#x27;jquery&#x27;],</span><br><span class="line">	&#125;,  //æ³¨æ„ï¼šè¿™ä¸ªentryä¸æ˜¯é…ç½®æœ¬åœ°çš„åŒ…ï¼Œè€Œæ˜¯è¦é…ç½®æˆ‘ä»¬åœ¨node_modulesé‡Œé¢å®‰è£…çš„ç¬¬ä¸‰æ–¹çš„åŒ…</span><br><span class="line">	output:&#123;</span><br><span class="line">		filename:&#x27;[name].js&#x27;     // [name]  å–åˆ°çš„æ˜¯æœ¬èº«çš„jqueryçš„chunkçš„åå­—</span><br><span class="line">		path:path.resolve(__dirname,&#x27;dll&#x27;),</span><br><span class="line">		library:&#x27;[name]_[hash]&#x27;    // æŠŠä»–å¯¼å‡ºä¸€ä¸ªåº“    ç»™è¿™ä¸ªåŒ…èµ·äº†ä¸€ä¸ªåå­—ï¼Œæ‰“ä»–å¯¼å‡ºä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åŒ…ã€‚</span><br><span class="line">	&#125;,</span><br><span class="line">	plugins:[</span><br><span class="line">		new webpack.DllPlugin(&#123;</span><br><span class="line">			name:&#x27;[name]_[hash]&#x27;,     //åå­—å’Œä¸Šé¢libraryå–çš„åå­—æ˜¯ä¸€æ ·çš„</span><br><span class="line">			path:path.resolve(__dirname,&#x27;dll/manifest.json&#x27;)      // æŠŠä¸€ä¸ªmanifestçš„æ–‡ä»¶ç»™ç”Ÿæˆå‡ºæ¥</span><br><span class="line">		&#125;)</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">package.json</span><br><span class="line">&#123;</span><br><span class="line">	&quot;scripts&quot;:&#123;</span><br><span class="line">		&quot;all&quot;:&quot;webpack --config ./webpack.dll.config.js&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">webpack.config.js</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">plugins:[</span><br><span class="line">	new webpack.DllReferencePlugin(&#123;</span><br><span class="line">		manifest:path.resolve(__dirname,&#x27;./all/manifest.json&#x27;)     // å®ƒçš„å€¼å°±æ˜¯åˆšåˆšç”Ÿæˆçš„manifest</span><br><span class="line">	&#125;)    //å’Œåˆšæ‰çš„DllPluginåšäº†ä¸€ä¸ªå‘¼åº”</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>ä»…ä»…æ˜¯æé«˜äº†æ„å»ºé€Ÿåº¦  å¦‚æœæƒ³æŠŠjqueryæ”¾åˆ°é¡µé¢ä¸Šæ˜¾ç¤ºçš„è¯è¿˜æ˜¯æœ‰äº›é—®é¢˜çš„ã€‚   è¿˜éœ€è¦å¯¹dllæ–‡ä»¶è¿›è¡Œä¸€æ¬¡æ‰“åŒ…   å¯ä»¥ä½¿ç”¨æ’ä»¶æ¥å®Œæˆ<br>npm install add-asset-html-webpack-plugin -D<br>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const AddAssetHtmlPlugin = require(&#x27;add-asset-html-webpack-plugin&#x27;)</span><br><span class="line">plugins:[</span><br><span class="line">	new AddAssetHtmlPlugin(&#123;</span><br><span class="line">		filepath:path.resolve(__dirname,&#x27;./dll/jquery.js&#x27;),</span><br><span class="line">		publicPath:&#x27;./&#x27;</span><br><span class="line">	&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å¤§å°æœ‰å³è¾¹å›æ¥ä¹‹å‰çš„å¤§å°ï¼Œä½†æ˜¯jqueryä¼šå•ç‹¬åšæˆä¸€ä¸ªæ–‡ä»¶æ‰“å‡ºæ¥ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åœ¨æœ€åçš„æ—¶å€™åœ¨åšä¸€æ¬¡æ‰“åŒ…ï¼Œä¹‹å‰æ‰“åŒ…çš„æ—¶å€™å¯ä»¥ä½¿ç”¨dllè¿™ä¸ªæ‰€è°“çš„linkï¼Œå®æ—¶ä¸Šä»–è¿˜æ˜¯é€šè¿‡linkå»åŠ è½½çš„æˆ‘ä»¬çš„jquery.jsæ–‡ä»¶</p>
<p>9ã€worker æ± (worker pool)<br>thread-loader å¯ä»¥å°†éå¸¸æ¶ˆè€—èµ„æºçš„ loader åˆ†æµç»™ä¸€ä¸ª worker poolã€‚</p>
<p>è¯¥æ€ä¹ˆå»æµ‹è¯•worker pool  ï¼Œå®šä¹‰ï¼šå®ƒçš„å®ç°åŸç†å°±æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠä»–å®šä¹‰åœ¨å…¶ä»–çš„loaderå‰é¢ç„¶åæŠŠå…¶ä»–çš„loaderæ”¾åœ¨å¦å¤–ä¸€ä¸ªworker poolçš„æ± é‡Œé¢å»è¿è¡Œæ¥æé«˜æˆ‘ä»¬çš„æ‰“åŒ…é€Ÿåº¦ï¼Œå…¶å®å°±æ˜¯æŠŠä»–æ”¾åˆ°å¦å¤–ä¸€ä¸ªcpuå»è¿è¡Œäº†ï¼Œæ¥åˆ©ç”¨æˆ‘ä»¬ç”µè„‘çš„cpuã€‚<br>npm install thread-loader -D</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">module:&#123;</span><br><span class="line">	rules:[</span><br><span class="line">		&#123;</span><br><span class="line">			test:/\.js$/,</span><br><span class="line">			exclude:/node_modules/,</span><br><span class="line">			use:[</span><br><span class="line">				&#123;</span><br><span class="line">					loader:&#x27;babel-loader&#x27;   //é—®äº†æé«˜Babel-loaderçš„æ‰“åŒ…é€Ÿåº¦å¯ä»¥æŠŠä»–æ”¾åœ¨ worker poolé‡Œè¿è¡Œï¼ˆå¯ä»¥åœ¨å•ç‹¬çš„cpué‡Œå»è¿è¡Œï¼‰</span><br><span class="line">				options:&#123;</span><br><span class="line">					presets:[&#x27;@babel/preset-env&#x27;]   //è¿™æ ·ä»–å°±å¯ä»¥è§£ææˆ‘ä»¬jsé‡Œé¢çš„ä¸€äº›es6çš„ä»£ç äº†</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;  // thread-loaderå¯åŠ¨éœ€è¦å¤§æ¦‚è€—è´¹600msçš„æ—¶é—´ï¼ˆæœ‰å¼€é”€ï¼‰ï¼Œè¿™ä¸ªloaderå¯¹è€—æ—¶éå¸¸æ‰“çš„loaderæœ‰æ„ä¹‰ã€‚</span><br><span class="line">					loader:&#x27;thread-loader&#x27;,</span><br><span class="line">					options:&#123;</span><br><span class="line">						workers:2    // cpuçš„æ•°é‡</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸è¦ä½¿ç”¨å¤ªå¤šçš„ workerï¼Œå› ä¸º Node.js çš„ runtime å’Œ loader éƒ½æœ‰å¯åŠ¨å¼€é”€ã€‚æœ€å°åŒ– worker å’Œ mainprocess(ä¸»è¿›ç¨‹) ä¹‹é—´çš„æ¨¡å—ä¼ è¾“ã€‚è¿›ç¨‹é—´é€šè®¯(IPC,inter process communication)æ˜¯éå¸¸æ¶ˆè€—èµ„æºçš„ã€‚</p>
<p>10ã€Progress plugin<br>å°† ProgressPlugin ä» webpack ä¸­åˆ é™¤ï¼Œå¯ä»¥ç¼©çŸ­æ„å»ºæ—¶é—´ã€‚è¯·æ³¨æ„ï¼Œ<br>ProgressPlugin å¯èƒ½ä¸ä¼šä¸ºå¿«é€Ÿæ„å»ºæä¾›å¤ªå¤šä»·å€¼ï¼Œå› æ­¤ï¼Œè¯·æƒè¡¡åˆ©å¼Šå†ä½¿ç”¨ã€‚</p>
<h3 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a><strong>å¼€å‘ç¯å¢ƒ</strong></h3><p>1ã€ä»£ç å‹ç¼©<br>Webpack é»˜è®¤ä½¿ç”¨çš„æ˜¯ TerserWebpackPluginï¼Œé»˜è®¤å¼€å¯äº†å¤šè¿›ç¨‹å’Œç¼“å­˜ï¼Œæ„å»ºæ—¶ï¼Œä½ çš„é¡¹ç›®ä¸­å¯ä»¥çœ‹åˆ° terser çš„ç¼“å­˜æ–‡ä»¶ node_modules&#x2F;.cache&#x2F;terser-webpack-pluginã€‚<br>2ã€æŠ½ç¦»å…¬å…±ä»£ç <br>ä¸»è¦æ˜¯é…ç½® optimazation.splitChunks<br>&#x2F;&#x2F;webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">optimization: &#123;</span><br><span class="line">		 runtimeChunk: &#123;</span><br><span class="line">            name: &#x27;manifest&#x27;</span><br><span class="line">        &#125;ï¼Œ</span><br><span class="line">        splitChunks: &#123;//åˆ†å‰²ä»£ç å—</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">                vendor: &#123;</span><br><span class="line">                    //ç¬¬ä¸‰æ–¹ä¾èµ–</span><br><span class="line">                    priority: 1, //è®¾ç½®ä¼˜å…ˆçº§ï¼Œé¦–å…ˆæŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—</span><br><span class="line">                    name: &#x27;vendor&#x27;,</span><br><span class="line">                    test: /node_modules/,</span><br><span class="line">                    chunks: &#x27;initial&#x27;,</span><br><span class="line">                    minSize: 0,</span><br><span class="line">                    minChunks: 1 //æœ€å°‘å¼•å…¥äº†1æ¬¡</span><br><span class="line">                &#125;,</span><br><span class="line">                //ç¼“å­˜ç»„</span><br><span class="line">                common: &#123;</span><br><span class="line">                    //å…¬å…±æ¨¡å—</span><br><span class="line">                    chunks: &#x27;initial&#x27;,</span><br><span class="line">                    name: &#x27;common&#x27;,</span><br><span class="line">                    minSize: 100, //å¤§å°è¶…è¿‡100ä¸ªå­—èŠ‚</span><br><span class="line">                    minChunks: 3 //æœ€å°‘å¼•å…¥äº†3æ¬¡</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p>ä»¥ä¸‹æ­¥éª¤å¯¹äº å¼€å‘ç¯å¢ƒ ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚<br>1ã€å¢é‡ç¼–è¯‘<br>ä½¿ç”¨ webpack çš„ watch mode(ç›‘å¬æ¨¡å¼)ã€‚è€Œä¸ä½¿ç”¨å…¶ä»–å·¥å…·æ¥ watch æ–‡ä»¶å’Œè°ƒç”¨webpack ã€‚å†…ç½®çš„ watch mode ä¼šè®°å½•æ—¶é—´æˆ³å¹¶å°†æ­¤ä¿¡æ¯ä¼ é€’ç»™ compilation ä»¥ä½¿ç¼“å­˜å¤±æ•ˆã€‚</p>
<p>åœ¨æŸäº›é…ç½®ç¯å¢ƒä¸­ï¼Œwatch mode ä¼šå›é€€åˆ° poll mode(è½®è¯¢æ¨¡å¼)ã€‚ç›‘å¬è®¸å¤šæ–‡ä»¶ä¼šå¯¼è‡´ CPU å¤§é‡è´Ÿè½½ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ watchOptions.poll æ¥å¢åŠ è½®è¯¢çš„é—´éš”æ—¶é—´ã€‚</p>
<p>2ã€åœ¨å†…å­˜ä¸­ç¼–è¯‘<br>ä¸‹é¢å‡ ä¸ªå·¥å…·é€šè¿‡åœ¨å†…å­˜ä¸­ï¼ˆè€Œä¸æ˜¯å†™å…¥ç£ç›˜ï¼‰ç¼–è¯‘å’Œ serve èµ„æºæ¥æé«˜æ€§èƒ½ï¼š</p>
<p>webpack-dev-server<br>webpack-hot-middleware<br>webpack-dev-middleware<br>3ã€stats.toJson åŠ é€Ÿ<br>webpack 4 é»˜è®¤ä½¿ç”¨ stats.toJson() è¾“å‡ºå¤§é‡æ•°æ®ã€‚é™¤éåœ¨å¢é‡æ­¥éª¤ä¸­åšå¿…è¦çš„ç»Ÿè®¡ï¼Œå¦åˆ™è¯·é¿å…è·å– stats å¯¹è±¡çš„éƒ¨åˆ†å†…å®¹ã€‚ webpack-dev-server åœ¨ v3.1.3 ä»¥åçš„ç‰ˆæœ¬ï¼ŒåŒ…å«ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¿®å¤ï¼Œå³æœ€å°åŒ–æ¯ä¸ªå¢é‡æ„å»ºæ­¥éª¤ä¸­ï¼Œä» stats å¯¹è±¡è·å–çš„æ•°æ®é‡ã€‚</p>
<p>4ã€Devtool<br>éœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒçš„ devtool è®¾ç½®ï¼Œä¼šå¯¼è‡´æ€§èƒ½å·®å¼‚ã€‚</p>
<p>â€œevalâ€ å…·æœ‰æœ€å¥½çš„æ€§èƒ½ï¼Œä½†å¹¶ä¸èƒ½å¸®åŠ©ä½ è½¬è¯‘ä»£ç ã€‚<br>å¦‚æœä½ èƒ½æ¥å—ç¨å·®ä¸€äº›çš„ map è´¨é‡ï¼Œå¯ä»¥ä½¿ç”¨ cheap-source-map å˜ä½“é…ç½®æ¥æé«˜æ€§èƒ½<br>ä½¿ç”¨ eval-source-map å˜ä½“é…ç½®è¿›è¡Œå¢é‡ç¼–è¯‘ã€‚</p>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ€ä½³é€‰æ‹©æ˜¯ eval-cheap-module-source-map ã€‚</p>
<p>5ã€é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ‰ä¼šç”¨åˆ°çš„å·¥å…·<br>æŸäº› utility, plugin å’Œ loader éƒ½åªç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨TerserPlugin æ¥ minify(å‹ç¼©) å’Œ mangle(æ··æ·†ç ´å) ä»£ç æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚é€šå¸¸åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œåº”è¯¥æ’é™¤ä»¥ä¸‹è¿™äº›å·¥å…·ï¼š</p>
<p>TerserPlugin<br>[fullhash] &#x2F; [chunkhash] &#x2F; [contenthash]<br>AggressiveSplittingPlugin<br>AggressiveMergingPlugin<br>ModuleConcatenationPlugin</p>
<p>6ã€æœ€å°åŒ– entry chunk<br>Webpack åªä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è¾“å‡ºå·²ç»æ›´æ–°çš„ chunkã€‚æŸäº›é…ç½®é€‰é¡¹ï¼ˆHMR,output.chunkFilename çš„ [name] &#x2F; [chunkhash]&#x2F;[contenthash] ï¼Œ[fullhash] ï¼‰æ¥è¯´ï¼Œé™¤äº†å¯¹å·²ç»æ›´æ–°çš„ chunk æ— æ•ˆä¹‹å¤–ï¼Œå¯¹äº entry chunk ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚<br>ç¡®ä¿åœ¨ç”Ÿæˆ entry chunk æ—¶ï¼Œå°½é‡å‡å°‘å…¶ä½“ç§¯ä»¥æé«˜æ€§èƒ½ã€‚ä¸‹é¢çš„é…ç½®ä¸ºè¿è¡Œæ—¶ä»£ç åˆ›å»ºäº†ä¸€ä¸ªé¢å¤–çš„ chunkï¼Œæ‰€ä»¥å®ƒçš„ç”Ÿæˆä»£ä»·è¾ƒä½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> // ...</span><br><span class="line"> optimization: &#123;</span><br><span class="line">  runtimeChunk: true,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>7ã€é¿å…é¢å¤–çš„ä¼˜åŒ–æ­¥éª¤<br>Webpack é€šè¿‡æ‰§è¡Œé¢å¤–çš„ç®—æ³•ä»»åŠ¡ï¼Œæ¥ä¼˜åŒ–è¾“å‡ºç»“æœçš„ä½“ç§¯å’ŒåŠ è½½æ€§èƒ½ã€‚è¿™äº›ä¼˜åŒ–é€‚ç”¨äºå°å‹ä»£ç åº“ï¼Œä½†æ˜¯åœ¨å¤§å‹ä»£ç åº“ä¸­å´éå¸¸è€—è´¹æ€§èƒ½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> // ...</span><br><span class="line"> optimization: &#123;</span><br><span class="line">  removeAvailableModules: false,</span><br><span class="line">  removeEmptyChunks: false,</span><br><span class="line">  splitChunks: false,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>8ã€è¾“å‡ºç»“æœä¸æºå¸¦è·¯å¾„ä¿¡æ¯<br>Webpack ä¼šåœ¨è¾“å‡ºçš„ bundle ä¸­ç”Ÿæˆè·¯å¾„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œåœ¨æ‰“åŒ…æ•°åƒä¸ªæ¨¡å—çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¼šå¯¼è‡´é€ æˆåƒåœ¾å›æ”¶æ€§èƒ½å‹åŠ›ã€‚åœ¨ options.output.pathinfo è®¾ç½®ä¸­å…³é—­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> // ...</span><br><span class="line"> output: &#123;</span><br><span class="line">  pathinfo: false,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>9ã€Node.js ç‰ˆæœ¬ 8.9.10-9.11.1<br>Node.js v8.9.10 - v9.11.1 ä¸­çš„ ES2015 Map å’Œ Set å®ç°ï¼Œå­˜åœ¨ æ€§èƒ½å›é€€ã€‚Webpack å¤§é‡åœ°ä½¿ç”¨è¿™äº›æ•°æ®ç»“æ„ï¼Œå› æ­¤è¿™æ¬¡å›é€€ä¹Ÿä¼šå½±å“ç¼–è¯‘æ—¶é—´ã€‚<br>ä¹‹å‰å’Œä¹‹åçš„ Node.js ç‰ˆæœ¬ä¸å—å½±å“ã€‚</p>
<p>10ã€TypeScript loader<br>ä½ å¯ä»¥ä¸º loader ä¼ å…¥ transpileOnly é€‰é¡¹ï¼Œä»¥ç¼©çŸ­ä½¿ç”¨ ts-loader æ—¶çš„æ„å»ºæ—¶é—´ã€‚ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œä¼šå…³é—­ç±»å‹æ£€æŸ¥ã€‚å¦‚æœè¦å†æ¬¡å¼€å¯ç±»å‹æ£€æŸ¥ï¼Œè¯·ä½¿ç”¨<br>ForkTsCheckerWebpackPlugin ã€‚ä½¿ç”¨æ­¤æ’ä»¶ä¼šå°†æ£€æŸ¥è¿‡ç¨‹ç§»è‡³å•ç‹¬çš„è¿›ç¨‹ï¼Œå¯ä»¥åŠ å¿« TypeScript çš„ç±»å‹æ£€æŸ¥å’Œ ESLint æ’å…¥çš„é€Ÿåº¦ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> // ...</span><br><span class="line"> test: /\.tsx?$/,</span><br><span class="line"> use: [</span><br><span class="line"> &#123;</span><br><span class="line">   loader: &#x27;ts-loader&#x27;,</span><br><span class="line">   options: &#123;</span><br><span class="line">    transpileOnly: true,</span><br><span class="line">  &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line">],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>11.é¢„è·å–ï¼Œé¢„åŠ è½½</p>
<p>12.CDN</p>
<p>13.Tree Shaking</p>
<p>14.postCSS</p>
<p>15.gzipå‹ç¼©</p>
<p>16.InlineChunkHtmlPlugin</p>
<p>17.webpack-bundle-analyzer</p>
<h3 id="ç”Ÿäº§ç¯å¢ƒ"><a href="#ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒ"></a><strong>ç”Ÿäº§ç¯å¢ƒ</strong></h3><p>ä»¥ä¸‹æ­¥éª¤å¯¹äº ç”Ÿäº§ç¯å¢ƒ ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚<br>Source Maps<br>source map ç›¸å½“æ¶ˆè€—èµ„æºã€‚ä½ çœŸçš„éœ€è¦å®ƒä»¬ï¼Ÿ</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/10/04/webpack/webpack%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpack çƒ­åŠ è½½åŸç†">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/09/30/webpack/webpack%20%E7%83%AD%E5%8A%A0%E8%BD%BD%E5%8E%9F%E7%90%86/">webpack çƒ­åŠ è½½åŸç†</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-09-30
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h3 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h3><p><code>HMR</code>å…¨ç§° <code>Hot Module Replacement</code>ï¼Œå¯ä»¥ç†è§£ä¸ºæ¨¡å—çƒ­æ›¿æ¢ï¼ŒæŒ‡åœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢ã€æ·»åŠ ã€åˆ é™¤æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åˆ·æ–°æ•´ä¸ªåº”ç”¨</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨åº”ç”¨è¿è¡Œè¿‡ç¨‹ä¸­ä¿®æ”¹äº†æŸä¸ªæ¨¡å—ï¼Œé€šè¿‡è‡ªåŠ¨åˆ·æ–°ä¼šå¯¼è‡´æ•´ä¸ªåº”ç”¨çš„æ•´ä½“åˆ·æ–°ï¼Œé‚£é¡µé¢ä¸­çš„çŠ¶æ€ä¿¡æ¯éƒ½ä¼šä¸¢å¤±</p>
<p>å¦‚æœä½¿ç”¨çš„æ˜¯ <code>HMR</code>ï¼Œå°±å¯ä»¥å®ç°åªå°†ä¿®æ”¹çš„æ¨¡å—å®æ—¶æ›¿æ¢è‡³åº”ç”¨ä¸­ï¼Œä¸å¿…å®Œå…¨åˆ·æ–°æ•´ä¸ªåº”ç”¨</p>
<p>åœ¨<code>webpack</code>ä¸­é…ç½®å¼€å¯çƒ­æ¨¡å—ä¹Ÿéå¸¸çš„ç®€å•ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯ HMR ç‰¹æ€§</span></span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span></span><br><span class="line">    <span class="comment">// hotOnly: true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸Šè¿°è¿™ç§é…ç½®ï¼Œå¦‚æœæˆ‘ä»¬ä¿®æ”¹å¹¶ä¿å­˜<code>css</code>æ–‡ä»¶ï¼Œç¡®å®èƒ½å¤Ÿä»¥ä¸åˆ·æ–°çš„å½¢å¼æ›´æ–°åˆ°é¡µé¢ä¸­</p>
<p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹å¹¶ä¿å­˜<code>js</code>æ–‡ä»¶ä¹‹åï¼Œé¡µé¢ä¾æ—§è‡ªåŠ¨åˆ·æ–°äº†ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰è§¦å‘çƒ­æ¨¡å—</p>
<p>æ‰€ä»¥ï¼Œ<code>HMR</code>å¹¶ä¸åƒ <code>Webpack</code> çš„å…¶ä»–ç‰¹æ€§ä¸€æ ·å¯ä»¥å¼€ç®±å³ç”¨ï¼Œéœ€è¦æœ‰ä¸€äº›é¢å¤–çš„æ“ä½œ</p>
<p>æˆ‘ä»¬éœ€è¦å»æŒ‡å®šå“ªäº›æ¨¡å—å‘ç”Ÿæ›´æ–°æ—¶è¿›è¡Œ<code>HRM</code>ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="variable language_">module</span>.<span class="property">hot</span>)&#123;</span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./util.js&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;util.jsæ›´æ–°äº†&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å®ç°åŸç†"><a href="#äºŒã€å®ç°åŸç†" class="headerlink" title="äºŒã€å®ç°åŸç†"></a>äºŒã€å®ç°åŸç†</h2><p>é¦–å…ˆæ¥çœ‹çœ‹ä¸€å¼ å›¾ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://static.vue-js.com/adc05780-acd4-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<ul>
<li>Webpack Compileï¼šå°† JS æºä»£ç ç¼–è¯‘æˆ bundle.js</li>
<li>HMR Serverï¼šç”¨æ¥å°†çƒ­æ›´æ–°çš„æ–‡ä»¶è¾“å‡ºç»™ HMR Runtime</li>
<li>Bundle Serverï¼šé™æ€èµ„æºæ–‡ä»¶æœåŠ¡å™¨ï¼Œæä¾›æ–‡ä»¶è®¿é—®è·¯å¾„</li>
<li>HMR Runtimeï¼šsocketæœåŠ¡å™¨ï¼Œä¼šè¢«æ³¨å…¥åˆ°æµè§ˆå™¨ï¼Œæ›´æ–°æ–‡ä»¶çš„å˜åŒ–</li>
<li>bundle.jsï¼šæ„å»ºè¾“å‡ºçš„æ–‡ä»¶</li>
<li>åœ¨HMR Runtime å’Œ HMR Serverä¹‹é—´å»ºç«‹ websocketï¼Œå³å›¾ä¸Š4å·çº¿ï¼Œç”¨äºå®æ—¶æ›´æ–°æ–‡ä»¶å˜åŒ–</li>
</ul>
<p>ä¸Šé¢å›¾ä¸­ï¼Œå¯ä»¥åˆ†æˆä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>å¯åŠ¨é˜¶æ®µä¸ºä¸Šå›¾ 1 - 2 - A - B</li>
</ul>
<p>åœ¨ç¼–å†™æœªç»è¿‡<code>webpack</code>æ‰“åŒ…çš„æºä»£ç åï¼Œ<code>Webpack Compile</code> å°†æºä»£ç å’Œ <code>HMR Runtime</code> ä¸€èµ·ç¼–è¯‘æˆ <code>bundle</code>æ–‡ä»¶ï¼Œä¼ è¾“ç»™<code>Bundle Server</code> é™æ€èµ„æºæœåŠ¡å™¨</p>
<ul>
<li>æ›´æ–°é˜¶æ®µä¸ºä¸Šå›¾ 1 - 2 - 3 - 4</li>
</ul>
<p>å½“æŸä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ¨¡å—å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>webpack</code>ç›‘å¬åˆ°æ–‡ä»¶å˜åŒ–å¯¹æ–‡ä»¶é‡æ–°ç¼–è¯‘æ‰“åŒ…ï¼Œç¼–è¯‘ç”Ÿæˆå”¯ä¸€çš„<code>hash</code>å€¼ï¼Œè¿™ä¸ª<code>hash</code>å€¼ç”¨æ¥ä½œä¸ºä¸‹ä¸€æ¬¡çƒ­æ›´æ–°çš„æ ‡è¯†</p>
<p>æ ¹æ®å˜åŒ–çš„å†…å®¹ç”Ÿæˆä¸¤ä¸ªè¡¥ä¸æ–‡ä»¶ï¼š<code>manifest</code>ï¼ˆåŒ…å«äº† <code>hash</code> å’Œ <code>chundId</code>ï¼Œç”¨æ¥è¯´æ˜å˜åŒ–çš„å†…å®¹ï¼‰å’Œ<code>chunk.js</code> æ¨¡å—</p>
<p>ç”±äº<code>socket</code>æœåŠ¡å™¨åœ¨<code>HMR Runtime</code> å’Œ <code>HMR Server</code>ä¹‹é—´å»ºç«‹ <code>websocket</code>é“¾æ¥ï¼Œå½“æ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šå‘æµè§ˆå™¨æ¨é€ä¸€æ¡æ¶ˆæ¯ï¼Œæ¶ˆæ¯åŒ…å«æ–‡ä»¶æ”¹åŠ¨åç”Ÿæˆçš„<code>hash</code>å€¼ï¼Œå¦‚ä¸‹å›¾çš„<code>h</code>å±æ€§ï¼Œä½œä¸ºä¸‹ä¸€æ¬¡çƒ­æ›´ç»†çš„æ ‡è¯†</p>
<p><img src="https://static.vue-js.com/05a0edf0-ad4a-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>åœ¨æµè§ˆå™¨æ¥å—åˆ°è¿™æ¡æ¶ˆæ¯ä¹‹å‰ï¼Œæµè§ˆå™¨å·²ç»åœ¨ä¸Šä¸€æ¬¡<code>socket</code> æ¶ˆæ¯ä¸­å·²ç»è®°ä½äº†æ­¤æ—¶çš„<code>hash</code> æ ‡è¯†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ª <code>ajax</code> å»æœåŠ¡ç«¯è¯·æ±‚è·å–åˆ°å˜åŒ–å†…å®¹çš„ <code>manifest</code> æ–‡ä»¶</p>
<p><code>mainfest</code>æ–‡ä»¶åŒ…å«é‡æ–°<code>build</code>ç”Ÿæˆçš„<code>hash</code>å€¼ï¼Œä»¥åŠå˜åŒ–çš„æ¨¡å—ï¼Œå¯¹åº”ä¸Šå›¾çš„<code>c</code>å±æ€§</p>
<p>æµè§ˆå™¨æ ¹æ® <code>manifest</code> æ–‡ä»¶è·å–æ¨¡å—å˜åŒ–çš„å†…å®¹ï¼Œä»è€Œè§¦å‘<code>render</code>æµç¨‹ï¼Œå®ç°å±€éƒ¨æ¨¡å—æ›´æ–°</p>
<p><img src="https://static.vue-js.com/0e7b7850-ad4a-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p>å…³äº<code>webpack</code>çƒ­æ¨¡å—æ›´æ–°çš„æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ul>
<li>é€šè¿‡<code>webpack-dev-server</code>åˆ›å»ºä¸¤ä¸ªæœåŠ¡å™¨ï¼šæä¾›é™æ€èµ„æºçš„æœåŠ¡ï¼ˆexpressï¼‰å’ŒSocketæœåŠ¡</li>
<li>express server è´Ÿè´£ç›´æ¥æä¾›é™æ€èµ„æºçš„æœåŠ¡ï¼ˆæ‰“åŒ…åçš„èµ„æºç›´æ¥è¢«æµè§ˆå™¨è¯·æ±‚å’Œè§£æï¼‰</li>
<li>socket server æ˜¯ä¸€ä¸ª websocket çš„é•¿è¿æ¥ï¼ŒåŒæ–¹å¯ä»¥é€šä¿¡</li>
<li>å½“ socket server ç›‘å¬åˆ°å¯¹åº”çš„æ¨¡å—å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶.jsonï¼ˆmanifestæ–‡ä»¶ï¼‰å’Œ.jsæ–‡ä»¶ï¼ˆupdate chunkï¼‰</li>
<li>é€šè¿‡é•¿è¿æ¥ï¼Œsocket server å¯ä»¥ç›´æ¥å°†è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸»åŠ¨å‘é€ç»™å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰</li>
<li>æµè§ˆå™¨æ‹¿åˆ°ä¸¤ä¸ªæ–°çš„æ–‡ä»¶åï¼Œé€šè¿‡HMR runtimeæœºåˆ¶ï¼ŒåŠ è½½è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”é’ˆå¯¹ä¿®æ”¹çš„æ¨¡å—è¿›è¡Œæ›´æ–°</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/09/30/webpack/webpack%20%E7%83%AD%E5%8A%A0%E8%BD%BD%E5%8E%9F%E7%90%86/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpack (PWA)">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/09/26/webpack/webpack%20%E6%B8%90%E8%BF%9B%E5%BC%8F%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8FPWA/">webpack (PWA)</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-09-26
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
                <a href="/tags/%E5%89%8D%E7%AB%AF/" class="cube-excerpt-tag-link">#å‰ç«¯</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <p>å¤šä¸ªç‹¬ç«‹çš„æ„å»ºå¯ä»¥ç»„æˆä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œè¿™äº›ç‹¬ç«‹çš„æ„å»ºä¹‹é—´ä¸åº”è¯¥å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå› æ­¤å¯ä»¥å•ç‹¬å¼€å‘å’Œéƒ¨ç½²å®ƒä»¬ã€‚<br>è¿™é€šå¸¸è¢«ç§°ä½œå¾®å‰ç«¯ï¼Œä½†å¹¶ä¸ä»…é™äºæ­¤ã€‚<br>Webpack5 æ¨¡å—è”é‚¦å¯ä»¥è®© Webpack è¾¾åˆ°äº†çº¿ä¸Š Runtime çš„æ•ˆæœï¼Œè®©ä»£ç ç›´æ¥åœ¨é¡¹ç›®é—´åˆ©ç”¨ CDN ç›´æ¥å…±äº«ï¼Œä¸å†éœ€è¦æœ¬åœ°å®‰è£… Npm åŒ…ã€æ„å»ºå†å‘å¸ƒäº†ï¼<br>æˆ‘ä»¬çŸ¥é“ Webpack å¯ä»¥é€šè¿‡ DLL æˆ–è€… Externals åšä»£ç å…±äº«æ—¶ Common Chunkï¼Œä½†ä¸åŒåº”ç”¨å’Œé¡¹ç›®é—´è¿™ä¸ªä»»åŠ¡å°±å˜å¾—å›°éš¾äº†ï¼Œæˆ‘ä»¬å‡ ä¹æ— æ³•åœ¨é¡¹ç›®ä¹‹é—´åšåˆ°æŒ‰éœ€çƒ­æ’æ‹”ã€‚</p>
<p>æ—©æœŸNPMæ–¹å¼å…±äº«æ¨¡å—   ä»£ç çš„å…±äº«æ˜¯å°†ä¾èµ–ä½œä¸ºlibraryå®‰è£…åˆ°æˆ‘ä»¬çš„é¡¹ç›®é‡Œè¿›è¡Œwebpackæ‰“åŒ…å¹¶ä¸”æ„å»ºä¸Šçº¿<br>å¯¹äºé¡¹ç›® Home ä¸ Searchï¼Œéœ€è¦å…±äº«ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œæœ€å¸¸è§çš„åŠæ³•å°±æ˜¯å°†å…¶æŠ½æˆé€šç”¨ä¾èµ–å¹¶åˆ†åˆ«å®‰è£…åœ¨å„è‡ªé¡¹ç›®ä¸­ã€‚è™½ç„¶ Monorepo å¯ä»¥ä¸€å®šç¨‹åº¦è§£å†³é‡å¤å®‰è£…å’Œä¿®æ”¹å›°éš¾çš„é—®é¢˜ï¼Œä½†ä¾ç„¶éœ€è¦èµ°æœ¬åœ°ç¼–è¯‘ã€‚</p>
<p>çœŸæ­£ Runtime çš„æ–¹å¼å¯èƒ½æ˜¯ UMD æ–¹å¼å…±äº«ä»£ç æ¨¡å—ï¼Œå³å°†æ¨¡å—ç”¨ Webpack UMDæ¨¡å¼æ‰“åŒ…ï¼Œå¹¶è¾“å‡ºåˆ°å…¶ä»–é¡¹ç›®ä¸­ã€‚è¿™æ˜¯éå¸¸æ™®éçš„æ¨¡å—å…±äº«æ–¹å¼ï¼š<br>å¯¹äºé¡¹ç›® Home ä¸ Searchï¼Œç›´æ¥åˆ©ç”¨ UMD åŒ…å¤ç”¨ä¸€ä¸ªæ¨¡å—ã€‚ä½†è¿™ç§æŠ€æœ¯æ–¹æ¡ˆé—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯åŒ…ä½“ç§¯æ— æ³•è¾¾åˆ°æœ¬åœ°ç¼–è¯‘æ—¶çš„ä¼˜åŒ–æ•ˆæœï¼Œä¸”åº“ä¹‹é—´å®¹æ˜“å†²çªã€‚</p>
<p>å¾®å‰ç«¯ï¼šmicro-frontends (MFE) ä¹Ÿæ˜¯æœ€è¿‘æ¯”è¾ƒç«çš„æ¨¡å—å…±äº«ç®¡ç†æ–¹å¼ï¼Œå¾®å‰ç«¯å°±æ˜¯è¦è§£å†³å¤šé¡¹ç›®å¹¶å­˜é—®é¢˜ï¼Œå¤šé¡¹ç›®å¹¶å­˜çš„æœ€å¤§é—®é¢˜å°±æ˜¯æ¨¡å—å…±äº«ï¼Œæ¨¡å—ä¹‹é—´æ˜¯ä¸èƒ½æœ‰å†²çªã€‚  å¯¹äºå¾®å‰ç«¯æˆ‘ä»¬è¿˜è¦è€ƒè™‘æ ·å¼å†²çªï¼Œå£°æ˜å‘¨æœŸç®¡ç†å†²çªç­‰é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆä¸è€ƒè™‘è¿™äº›   æƒ³æŠŠé—®é¢˜èšç„¦åœ¨èµ„æºåŠ è½½çš„æ–¹å¼ä¸Š   å¾®å‰ç«¯ä¸€èˆ¬æœ‰ä¸¤ç§æ‰“åŒ…æ–¹å¼ï¼š1.å­åº”ç”¨ç‹¬ç«‹æ‰“åŒ…ï¼Œæ¨¡å—å®ç°è§£è€¦ï¼Œä½†è¿™ç§æ–¹å¼æ— æ³•æŠ½å–å…¬å…±çš„ä¾èµ–ï¼Œ2.æ•´ä½“åº”ç”¨æ‰“ä¸€ä¸ªæ‰“åŒ… å¾ˆå¥½çš„è§£å†³æˆ‘ä»¬ä¸Šé¢ç¬¬ä¸€ç§æ–¹å¼çš„é—®é¢˜ï¼Œä½†æ˜¯æ‰“åŒ…æ•ˆç‡é€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ã€‚ä¸å…·å¤‡æ°´å¹³çš„æ‰©å±•èƒ½åŠ›ã€‚<br>ç”±äºå¾®å‰ç«¯è¿˜è¦è€ƒè™‘æ ·å¼å†²çªã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ‰€ä»¥æœ¬æ–‡åªèšç„¦åœ¨èµ„æºåŠ è½½æ–¹å¼ä¸Šã€‚å¾®å‰ç«¯ä¸€èˆ¬æœ‰ä¸¤ç§æ‰“åŒ…æ–¹å¼ï¼š</p>
<ol>
<li>å­åº”ç”¨ç‹¬ç«‹æ‰“åŒ…ï¼Œæ¨¡å—æ›´è§£è€¦ï¼Œä½†æ— æ³•æŠ½å–å…¬å…±ä¾èµ–ç­‰ã€‚</li>
<li>æ•´ä½“åº”ç”¨ä¸€èµ·æ‰“åŒ…ï¼Œå¾ˆå¥½è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œä½†æ‰“åŒ…é€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ï¼Œä¸å…·å¤‡æ°´å¹³æ‰©å±•èƒ½åŠ›ã€‚</li>
</ol>
<p>ç»ˆäºæåˆ°æœ¬æ–‡çš„ä¸»è§’äº†ï¼Œæ¨¡å—è”é‚¦æ–¹å¼ä½œä¸º Webpack5 å†…ç½®æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€çš„ FederatedModuleï¼š<br>è¿™ä¸ªæ–¹æ¡ˆæ˜¯ç›´æ¥å°†ä¸€ä¸ªåº”ç”¨çš„åŒ…åº”ç”¨äºå¦ä¸€ä¸ªåº”ç”¨ï¼ŒåŒæ—¶å…·å¤‡æ•´ä½“åº”ç”¨ä¸€èµ·æ‰“åŒ…çš„å…¬å…±ä¾èµ–æŠ½å–èƒ½åŠ›ã€‚  æ¯”å¦‚ï¼šæˆ‘ä»¬ç›´æ¥å¯ä»¥åœ¨Searchåº”ç”¨é‡Œç›´æ¥ä½¿ç”¨å·²ç»å‘å¸ƒåˆ°çº¿ä¸Šçš„Homeåº”ç”¨çš„ç»„ä»¶ã€‚</p>
<p><strong>åº”ç”¨æ¡ˆä¾‹</strong><br>æœ¬æ¡ˆä¾‹æ¨¡æ‹Ÿä¸‰ä¸ªåº”ç”¨ï¼š Nav ã€ Search åŠ Home ã€‚æ¯ä¸ªåº”ç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œåˆé€šè¿‡æ¨¡å—é‚¦è”ç³»åˆ°äº†ä¸€èµ·ã€‚<br>æ¯”å¦‚Homeéœ€è¦ä½¿ç”¨Navç»„ä»¶å…±äº«å‡ºæ¥çš„headerï¼ŒSearchå¯èƒ½è¦ä½¿ç”¨Headerå’ŒHomeç»„ä»¶æ„å»ºå‡ºæ¥çš„HomeListã€‚<br>æ¨¡å—è”é‚¦å°†ä»–ä»¬å…±äº«çš„æ¨¡å—æš´éœ²å‡ºæ¥è¿›è¡Œå¼•ç”¨ã€‚<br>1ã€Nav å¯¼èˆª<br>src&#x2F;header.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const Header = () =&gt; &#123;</span><br><span class="line"> const header = document.createElement(&#x27;h1&#x27;)</span><br><span class="line"> header.textContent = &#x27;å…¬å…±å¤´éƒ¨å†…å®¹&#x27;</span><br><span class="line"> return header</span><br><span class="line">&#125;</span><br><span class="line">export default Header</span><br></pre></td></tr></table></figure>
<p>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import Header from &#x27;./Header&#x27;</span><br><span class="line">const div = document.createElement(&#x27;div&#x27;)</span><br><span class="line">div.appendChild(Header())</span><br><span class="line">document.body.appendChild(div)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   // æ¨¡å—è”é‚¦åå­—</span><br><span class="line">   name: &#x27;nav&#x27;,</span><br><span class="line">   // å¤–éƒ¨è®¿é—®çš„èµ„æºåå­—</span><br><span class="line">   filename: &#x27;remoteEntry.js&#x27;,</span><br><span class="line">   // å¼•ç”¨çš„å¤–éƒ¨èµ„æºåˆ—è¡¨</span><br><span class="line">   remotes: &#123;&#125;,</span><br><span class="line">   // æš´éœ²ç»™å¤–éƒ¨èµ„æºåˆ—è¡¨</span><br><span class="line">   exposes: &#123;</span><br><span class="line">    &#x27;./Header&#x27;: &#x27;./src/Header.js&#x27;,   // æš´éœ² Headerç»„ä»¶  keyï¼šå¯ä»¥å®šä¹‰æˆ./Header è¿™ä¸ª./Headerå¹¶ä¸ä»£è¡¨æ˜¯æˆ‘å½“å‰å¼•ç”¨ä¸‹çš„æŸä¸ªè·¯å¾„   è€Œæ˜¯å°†æ¥åœ¨åˆ«äººç”¨çš„æ—¶å€™åŸºäºè¿™ä¸ªè·¯å¾„æ¥æ‹¼æ¥urlï¼Œå€¼æ˜¯æ­£çœŸçš„æˆ‘ä»¬æœ¬åœ°é¡¹ç›®çš„åº”ç”¨</span><br><span class="line">  &#125;,</span><br><span class="line">   // å…±äº«æ¨¡å—ï¼Œå¦‚lodash</span><br><span class="line">   shared: &#123;&#125;,   // å¦‚æœæˆ‘ä»¬çš„ headeræ¨¡å—é‡Œæœ‰å…±äº«çš„ç¬¬ä¸‰æ–¹æ¨¡å—æ¯”å¦‚ï¼šlodashç­‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–æ”¾åˆ°è¿™é‡Œåœ¨æ‰“åŒ…çš„æ—¶å€™å¯ä»¥æŠŠç¬¬ä¸‰æ–¹çš„å…±äº«çš„æ¨¡å—æ‰“åˆ°å•ç‹¬çš„ä¸€ä¸ªåŒ…é‡Œã€‚</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3003</span><br></pre></td></tr></table></figure>

<p>2ã€Home é¦–é¡µ<br>src&#x2F;HomeList</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const HomeList = (num) =&gt; &#123;</span><br><span class="line"> let str = &#x27;&lt;ul&gt;&#x27;</span><br><span class="line"> for (let i = 0; i &lt; num; i++) &#123;</span><br><span class="line">  str += &#x27;&lt;li&gt;item &#x27; + i + &#x27;&lt;/li&gt;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"> str += &#x27;&lt;/ul&gt;&#x27;</span><br><span class="line"> return str</span><br><span class="line">&#125;</span><br><span class="line">export default HomeList</span><br></pre></td></tr></table></figure>
<p>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import HomeList from &#x27;./HomeList&#x27;</span><br><span class="line">remotes: &#123;</span><br><span class="line">    nav</span><br><span class="line">	(&#x27;nav/Header&#x27;)ï¼šremotes: &#123; nav &#125;Header    exposes: &#123;./Header&#x27;:&#x27;&#x27;&#125;</span><br><span class="line">import(&#x27;nav/Header&#x27;).then((Header) =&gt; &#123;  //å¼•ç”¨æ¨¡å—è”é‚¦çš„ç»„ä»¶  è¿™æ ·å¯¼å…¥åˆ«äººç»„ä»¶çš„æ—¶å€™éœ€è¦é€šè¿‡å¼‚æ­¥çš„æ–¹å¼å› ä¸º ç½‘ç»œå…±äº«æˆ–è€…æ˜¯æ¨¡å—è½½å…¥ æ˜¯ç”±å»¶è¿Ÿçš„ï¼Œæ‰€ä»¥è¦é€šè¿‡promiseçš„æ–¹å¼ï¼ˆå¼‚æ­¥æ¨¡å—åŠ è½½çš„å½¢å¼ï¼‰å»å¼•ç”¨å®ƒã€‚</span><br><span class="line"> const body = document.createElement(&#x27;div&#x27;)</span><br><span class="line"> body.appendChild(Header.default())</span><br><span class="line"> document.body.appendChild(body)</span><br><span class="line"> document.body.innerHTML += HomeList(5)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   name: &quot;home&quot;,</span><br><span class="line">   filename: &quot;remoteEntry.js&quot;,</span><br><span class="line">   remotes: &#123;</span><br><span class="line">    nav: &quot;nav@http://localhost:3003/remoteEntry.js&quot;,    // å¼•ç”¨ç¬¬ä¸‰æ–¹æˆ–åˆ«äººå†™å¥½çš„åº”ç”¨çš„è·¯å¾„ã€‚è¿œç«¯çš„æœåŠ¡è·¯å¾„</span><br><span class="line">  &#125;,</span><br><span class="line">   exposes: &#123;</span><br><span class="line">    &#x27;./HomeList&#x27;: &#x27;./src/HomeList.js&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line">   shared: &#123;&#125;,</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3001</span><br></pre></td></tr></table></figure>

<p>3ã€search æœç´¢<br>src&#x2F;index</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Promise.all([import(&#x27;nav/Header&#x27;), import(&#x27;home/HomeList&#x27;)])</span><br><span class="line">.then(([&#123;</span><br><span class="line">  default: Header</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  default: HomeList</span><br><span class="line">&#125;]) =&gt; &#123;</span><br><span class="line">  document.body.appendChild(Header())</span><br><span class="line">  document.body.innerHTML += HomeList(4)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   name: &#x27;search&#x27;,</span><br><span class="line">   filename: &#x27;remoteEntry.js&#x27;,</span><br><span class="line">   remotes: &#123;</span><br><span class="line">    nav: &quot;nav@http://localhost:3003/remoteEntry.js&quot;,</span><br><span class="line">    home: &quot;home@http://localhost:3001/remoteEntry.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">   exposes: &#123;&#125;,</span><br><span class="line">   shared: &#123;&#125;,</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3002</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/09/26/webpack/webpack%20%E6%B8%90%E8%BF%9B%E5%BC%8F%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8FPWA/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpack loader-pluginåŒºåˆ«ï¼Œè‡ªå®šä¹‰">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/09/22/webpack/webpack%20loader-plugin%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E7%BC%96%E5%86%99/">webpack loader-pluginåŒºåˆ«ï¼Œè‡ªå®šä¹‰</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-09-22
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€åŒºåˆ«"><a href="#ä¸€ã€åŒºåˆ«" class="headerlink" title="ä¸€ã€åŒºåˆ«"></a>ä¸€ã€åŒºåˆ«</h2><p>å‰é¢ä¸¤èŠ‚æˆ‘ä»¬æœ‰æåˆ°<code>Loader</code>ä¸<code>Plugin</code>å¯¹åº”çš„æ¦‚å¿µï¼Œå…ˆæ¥å›é¡¾ä¸‹</p>
<ul>
<li>loader æ˜¯æ–‡ä»¶åŠ è½½å™¨ï¼Œèƒ½å¤ŸåŠ è½½èµ„æºæ–‡ä»¶ï¼Œå¹¶å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œä¸€äº›å¤„ç†ï¼Œè¯¸å¦‚ç¼–è¯‘ã€å‹ç¼©ç­‰ï¼Œæœ€ç»ˆä¸€èµ·æ‰“åŒ…åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­</li>
<li>plugin èµ‹äºˆäº† webpack å„ç§çµæ´»çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ‰“åŒ…ä¼˜åŒ–ã€èµ„æºç®¡ç†ã€ç¯å¢ƒå˜é‡æ³¨å…¥ç­‰ï¼Œç›®çš„æ˜¯è§£å†³ loader æ— æ³•å®ç°çš„å…¶ä»–äº‹</li>
</ul>
<p>ä»æ•´ä¸ªè¿è¡Œæ—¶æœºä¸Šæ¥çœ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://static.vue-js.com/9a04ec40-a7c2-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸¤è€…åœ¨è¿è¡Œæ—¶æœºä¸Šçš„åŒºåˆ«ï¼š</p>
<ul>
<li>loader è¿è¡Œåœ¨æ‰“åŒ…æ–‡ä»¶ä¹‹å‰</li>
<li>plugins åœ¨æ•´ä¸ªç¼–è¯‘å‘¨æœŸéƒ½èµ·ä½œç”¨</li>
</ul>
<p>åœ¨<code>Webpack</code> è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼Œ<code>Plugin</code> å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡<code>Webpack</code>æä¾›çš„ <code>API</code>æ”¹å˜è¾“å‡ºç»“æœ</p>
<p>å¯¹äº<code>loader</code>ï¼Œå®è´¨æ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œå°†Aæ–‡ä»¶è¿›è¡Œç¼–è¯‘å½¢æˆBæ–‡ä»¶ï¼Œæ“ä½œçš„æ˜¯æ–‡ä»¶ï¼Œæ¯”å¦‚å°†<code>A.scss</code>æˆ–<code>A.less</code>è½¬å˜ä¸º<code>B.css</code>ï¼Œå•çº¯çš„æ–‡ä»¶è½¬æ¢è¿‡ç¨‹</p>
<h2 id="äºŒã€ç¼–å†™loader"><a href="#äºŒã€ç¼–å†™loader" class="headerlink" title="äºŒã€ç¼–å†™loader"></a>äºŒã€ç¼–å†™loader</h2><p>åœ¨ç¼–å†™ <code>loader</code> å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ <code>loader</code> çš„æœ¬è´¨</p>
<p>å…¶æœ¬è´¨ä¸ºå‡½æ•°ï¼Œå‡½æ•°ä¸­çš„ <code>this</code> ä½œä¸ºä¸Šä¸‹æ–‡ä¼šè¢« <code>webpack</code> å¡«å……ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½å°† <code>loader</code>è®¾ä¸ºä¸€ä¸ªç®­å¤´å‡½æ•°</p>
<p>å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä¸º <code>webpack</code> ä¼ é€’ç»™ <code>loader</code> çš„æ–‡ä»¶æºå†…å®¹</p>
<p>å‡½æ•°ä¸­ <code>this</code> æ˜¯ç”± <code>webpack</code> æä¾›çš„å¯¹è±¡ï¼Œèƒ½å¤Ÿè·å–å½“å‰ <code>loader</code> æ‰€éœ€è¦çš„å„ç§ä¿¡æ¯</p>
<p>å‡½æ•°ä¸­æœ‰å¼‚æ­¥æ“ä½œæˆ–åŒæ­¥æ“ä½œï¼Œå¼‚æ­¥æ“ä½œé€šè¿‡ <code>this.callback</code> è¿”å›ï¼Œè¿”å›å€¼è¦æ±‚ä¸º <code>string</code> æˆ–è€… <code>Buffer</code></p>
<p>ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œsourceä¸ºwebpackä¼ é€’ç»™loaderçš„æ–‡ä»¶æºå†…å®¹</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span>(<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> content = <span class="title function_">doSomeThing2JsString</span>(source);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœ loader é…ç½®äº† options å¯¹è±¡ï¼Œé‚£ä¹ˆthis.queryå°†æŒ‡å‘ options</span></span><br><span class="line">    <span class="keyword">const</span> options = <span class="variable language_">this</span>.<span class="property">query</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯ä»¥ç”¨ä½œè§£æå…¶ä»–æ¨¡å—è·¯å¾„çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;this.context&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * this.callback å‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">     * errorï¼šError | nullï¼Œå½“ loader å‡ºé”™æ—¶å‘å¤–æŠ›å‡ºä¸€ä¸ª error</span></span><br><span class="line"><span class="comment">     * contentï¼šString | Bufferï¼Œç»è¿‡ loader ç¼–è¯‘åéœ€è¦å¯¼å‡ºçš„å†…å®¹</span></span><br><span class="line"><span class="comment">     * sourceMapï¼šä¸ºæ–¹ä¾¿è°ƒè¯•ç”Ÿæˆçš„ç¼–è¯‘åå†…å®¹çš„ source map</span></span><br><span class="line"><span class="comment">     * astï¼šæœ¬æ¬¡ç¼–è¯‘ç”Ÿæˆçš„ AST é™æ€è¯­æ³•æ ‘ï¼Œä¹‹åæ‰§è¡Œçš„ loader å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ª ASTï¼Œè¿›è€Œçœå»é‡å¤ç”Ÿæˆ AST çš„è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">callback</span>(<span class="literal">null</span>, content); <span class="comment">// å¼‚æ­¥</span></span><br><span class="line">    <span class="keyword">return</span> content; <span class="comment">// åŒæ­¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬åœ¨ç¼–å†™<code>loader</code>çš„è¿‡ç¨‹ä¸­ï¼Œä¿æŒåŠŸèƒ½å•ä¸€ï¼Œé¿å…åšå¤šç§åŠŸèƒ½</p>
<p>å¦‚<code>less</code>æ–‡ä»¶è½¬æ¢æˆ <code>css</code>æ–‡ä»¶ä¹Ÿä¸æ˜¯ä¸€æ­¥åˆ°ä½ï¼Œè€Œæ˜¯ <code>less-loader</code>ã€<code>css-loader</code>ã€<code>style-loader</code>å‡ ä¸ª <code>loader</code>çš„é“¾å¼è°ƒç”¨æ‰èƒ½å®Œæˆè½¬æ¢</p>
<h2 id="ä¸‰ã€ç¼–å†™plugin"><a href="#ä¸‰ã€ç¼–å†™plugin" class="headerlink" title="ä¸‰ã€ç¼–å†™plugin"></a>ä¸‰ã€ç¼–å†™plugin</h2><p>ç”±äº<code>webpack</code>åŸºäºå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œåœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼Œæ’ä»¶é€šè¿‡ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œå°±å¯ä»¥åœ¨ç‰¹å®šçš„é˜¶æ®µæ‰§è¡Œè‡ªå·±çš„æ’ä»¶ä»»åŠ¡</p>
<p>åœ¨ä¹‹å‰ä¹Ÿäº†è§£è¿‡ï¼Œ<code>webpack</code>ç¼–è¯‘ä¼šåˆ›å»ºä¸¤ä¸ªæ ¸å¿ƒå¯¹è±¡ï¼š</p>
<ul>
<li>compilerï¼šåŒ…å«äº† webpack ç¯å¢ƒçš„æ‰€æœ‰çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ optionsï¼Œloader å’Œ pluginï¼Œå’Œ webpack æ•´ä¸ªç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é’©å­</li>
<li>compilationï¼šä½œä¸º plugin å†…ç½®äº‹ä»¶å›è°ƒå‡½æ•°çš„å‚æ•°ï¼ŒåŒ…å«äº†å½“å‰çš„æ¨¡å—èµ„æºã€ç¼–è¯‘ç”Ÿæˆèµ„æºã€å˜åŒ–çš„æ–‡ä»¶ä»¥åŠè¢«è·Ÿè¸ªä¾èµ–çš„çŠ¶æ€ä¿¡æ¯ã€‚å½“æ£€æµ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œä¸€æ¬¡æ–°çš„ Compilation å°†è¢«åˆ›å»º</li>
</ul>
<p>å¦‚æœè‡ªå·±è¦å®ç°<code>plugin</code>ï¼Œä¹Ÿéœ€è¦éµå¾ªä¸€å®šçš„è§„èŒƒï¼š</p>
<ul>
<li>æ’ä»¶å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–è€…æ˜¯ä¸€ä¸ªåŒ…å« <code>apply</code> æ–¹æ³•çš„å¯¹è±¡ï¼Œè¿™æ ·æ‰èƒ½è®¿é—®<code>compiler</code>å®ä¾‹</li>
<li>ä¼ ç»™æ¯ä¸ªæ’ä»¶çš„ <code>compiler</code> å’Œ <code>compilation</code> å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤ä¸å»ºè®®ä¿®æ”¹</li>
<li>å¼‚æ­¥çš„äº‹ä»¶éœ€è¦åœ¨æ’ä»¶å¤„ç†å®Œä»»åŠ¡æ—¶è°ƒç”¨å›è°ƒå‡½æ•°é€šçŸ¥ <code>Webpack</code> è¿›å…¥ä¸‹ä¸€ä¸ªæµç¨‹ï¼Œä¸ç„¶ä¼šå¡ä½</li>
</ul>
<p>å®ç°<code>plugin</code>çš„æ¨¡æ¿å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPlugin</span> &#123;</span><br><span class="line">    <span class="comment">// Webpack ä¼šè°ƒç”¨ MyPlugin å®ä¾‹çš„ apply æ–¹æ³•ç»™æ’ä»¶å®ä¾‹ä¼ å…¥ compiler å¯¹è±¡</span></span><br><span class="line">  apply (compiler) &#123;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°åˆé€‚çš„äº‹ä»¶é’©å­ï¼Œå®ç°è‡ªå·±çš„æ’ä»¶åŠŸèƒ½</span></span><br><span class="line">    compiler.<span class="property">hooks</span>.<span class="property">emit</span>.<span class="title function_">tap</span>(<span class="string">&#x27;MyPlugin&#x27;</span>, <span class="function"><span class="params">compilation</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// compilation: å½“å‰æ‰“åŒ…æ„å»ºæµç¨‹çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(compilation);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// do something...</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>emit</code> äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä»£è¡¨æºæ–‡ä»¶çš„è½¬æ¢å’Œç»„è£…å·²ç»å®Œæˆï¼Œå¯ä»¥è¯»å–åˆ°æœ€ç»ˆå°†è¾“å‡ºçš„èµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–ï¼Œå¹¶ä¸”å¯ä»¥ä¿®æ”¹è¾“å‡ºèµ„æºçš„å†…å®¹</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/09/22/webpack/webpack%20loader-plugin%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E7%BC%96%E5%86%99/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue-ç»„ä»¶é€šä¿¡">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/09/19/Vue/vue-%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/">vue-ç»„ä»¶é€šä¿¡</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-09-19
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€ç»„ä»¶é—´é€šä¿¡çš„æ¦‚å¿µ"><a href="#ä¸€ã€ç»„ä»¶é—´é€šä¿¡çš„æ¦‚å¿µ" class="headerlink" title="ä¸€ã€ç»„ä»¶é—´é€šä¿¡çš„æ¦‚å¿µ"></a>ä¸€ã€ç»„ä»¶é—´é€šä¿¡çš„æ¦‚å¿µ</h2><p>å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬æŠŠ<strong>ç»„ä»¶é—´é€šä¿¡</strong>è¿™ä¸ªè¯è¿›è¡Œæ‹†åˆ†</p>
<ul>
<li>ç»„ä»¶</li>
<li>é€šä¿¡</li>
</ul>
<p>éƒ½çŸ¥é“ç»„ä»¶æ˜¯<code>vue</code>æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œ<code>vue</code>ä¸­æ¯ä¸€ä¸ª<code>.vue</code>æˆ‘ä»¬éƒ½å¯ä»¥è§†ä¹‹ä¸ºä¸€ä¸ªç»„ä»¶é€šä¿¡æŒ‡çš„æ˜¯å‘é€è€…é€šè¿‡æŸç§åª’ä½“ä»¥æŸç§æ ¼å¼æ¥ä¼ é€’ä¿¡æ¯åˆ°æ”¶ä¿¡è€…ä»¥è¾¾åˆ°æŸä¸ªç›®çš„ã€‚å¹¿ä¹‰ä¸Šï¼Œä»»ä½•ä¿¡æ¯çš„äº¤é€šéƒ½æ˜¯é€šä¿¡<strong>ç»„ä»¶é—´é€šä¿¡</strong>å³æŒ‡ç»„ä»¶(<code>.vue</code>)é€šè¿‡æŸç§æ–¹å¼æ¥ä¼ é€’ä¿¡æ¯ä»¥è¾¾åˆ°æŸä¸ªç›®çš„ä¸¾ä¸ªæ —å­æˆ‘ä»¬åœ¨ä½¿ç”¨<code>UI</code>æ¡†æ¶ä¸­çš„<code>table</code>ç»„ä»¶ï¼Œå¯èƒ½ä¼šå¾€<code>table</code>ç»„ä»¶ä¸­ä¼ å…¥æŸäº›æ•°æ®ï¼Œè¿™ä¸ªæœ¬è´¨å°±å½¢æˆäº†ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</p>
<h2 id="äºŒã€ç»„ä»¶é—´é€šä¿¡è§£å†³äº†ä»€ä¹ˆ"><a href="#äºŒã€ç»„ä»¶é—´é€šä¿¡è§£å†³äº†ä»€ä¹ˆ" class="headerlink" title="äºŒã€ç»„ä»¶é—´é€šä¿¡è§£å†³äº†ä»€ä¹ˆ"></a>äºŒã€ç»„ä»¶é—´é€šä¿¡è§£å†³äº†ä»€ä¹ˆ</h2><p>é€šä¿¡çš„æœ¬è´¨æ˜¯ä¿¡æ¯åŒæ­¥ï¼Œå…±äº«å›åˆ°<code>vue</code>ä¸­ï¼Œæ¯ä¸ªç»„ä»¶ä¹‹é—´çš„éƒ½æœ‰ç‹¬è‡ªçš„ä½œç”¨åŸŸï¼Œç»„ä»¶é—´çš„æ•°æ®æ˜¯æ— æ³•å…±äº«çš„ä½†å®é™…å¼€å‘å·¥ä½œä¸­æˆ‘ä»¬å¸¸å¸¸éœ€è¦è®©ç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯ç»„ä»¶é€šä¿¡çš„ç›®çš„è¦è®©å®ƒä»¬äº’ç›¸ä¹‹é—´èƒ½è¿›è¡Œé€šè®¯ï¼Œè¿™æ ·æ‰èƒ½æ„æˆä¸€ä¸ªæœ‰æœºçš„å®Œæ•´ç³»ç»Ÿ</p>
<h2 id="äºŒã€ç»„ä»¶é—´é€šä¿¡çš„åˆ†ç±»"><a href="#äºŒã€ç»„ä»¶é—´é€šä¿¡çš„åˆ†ç±»" class="headerlink" title="äºŒã€ç»„ä»¶é—´é€šä¿¡çš„åˆ†ç±»"></a>äºŒã€ç»„ä»¶é—´é€šä¿¡çš„åˆ†ç±»</h2><p>ç»„ä»¶é—´é€šä¿¡çš„åˆ†ç±»å¯ä»¥åˆ†æˆä»¥ä¸‹</p>
<ul>
<li>çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</li>
<li>å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡</li>
<li>ç¥–å­™ä¸åä»£ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</li>
<li>éå…³ç³»ç»„ä»¶é—´ä¹‹é—´çš„é€šä¿¡</li>
</ul>
<p>å…³ç³»å›¾:</p>
<p><img src="https://static.vue-js.com/85b92400-3aca-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h2 id="ä¸‰ã€ç»„ä»¶é—´é€šä¿¡çš„æ–¹æ¡ˆ"><a href="#ä¸‰ã€ç»„ä»¶é—´é€šä¿¡çš„æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€ç»„ä»¶é—´é€šä¿¡çš„æ–¹æ¡ˆ"></a>ä¸‰ã€ç»„ä»¶é—´é€šä¿¡çš„æ–¹æ¡ˆ</h2><p>æ•´ç†<code>vue</code>ä¸­8ç§å¸¸è§„çš„é€šä¿¡æ–¹æ¡ˆ</p>
<ol>
<li>é€šè¿‡ props ä¼ é€’</li>
<li>é€šè¿‡ $emit è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</li>
<li>ä½¿ç”¨ ref</li>
<li>EventBus</li>
<li>$parent æˆ–$root</li>
<li>attrs ä¸ listeners</li>
<li>Provide ä¸ Inject</li>
<li>Vuex</li>
</ol>
<h3 id="propsä¼ é€’æ•°æ®"><a href="#propsä¼ é€’æ•°æ®" class="headerlink" title="propsä¼ é€’æ•°æ®"></a>propsä¼ é€’æ•°æ®</h3><p><img src="https://static.vue-js.com/8f80a670-3aca-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šçˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶</li>
<li>å­ç»„ä»¶è®¾ç½®<code>props</code>å±æ€§ï¼Œå®šä¹‰æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‚æ•°</li>
<li>çˆ¶ç»„ä»¶åœ¨ä½¿ç”¨å­ç»„ä»¶æ ‡ç­¾ä¸­é€šè¿‡å­—é¢é‡æ¥ä¼ é€’å€¼</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Children.vue</span><br><span class="line">props:&#123;  </span><br><span class="line">    // å­—ç¬¦ä¸²å½¢å¼  </span><br><span class="line"> name:String // æ¥æ”¶çš„ç±»å‹å‚æ•°  </span><br><span class="line">    // å¯¹è±¡å½¢å¼  </span><br><span class="line">    age:&#123;    </span><br><span class="line">        type:Number, // æ¥æ”¶çš„ç±»å‹ä¸ºæ•°å€¼  </span><br><span class="line">        defaule:18,  // é»˜è®¤å€¼ä¸º18  </span><br><span class="line">       require:true // ageå±æ€§å¿…é¡»ä¼ é€’  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p><code>Father.vue</code>ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Children</span> name=<span class="string">&quot;jack&quot;</span> age=<span class="number">18</span> /&gt;  </span><br></pre></td></tr></table></figure>

<h3 id="emit-è§¦å‘è‡ªå®šä¹‰äº‹ä»¶"><a href="#emit-è§¦å‘è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="$emit è§¦å‘è‡ªå®šä¹‰äº‹ä»¶"></a>$emit è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</h3><ul>
<li>é€‚ç”¨åœºæ™¯ï¼šå­ç»„ä»¶ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶</li>
<li>å­ç»„ä»¶é€šè¿‡<code>$emitè§¦å‘</code>è‡ªå®šä¹‰äº‹ä»¶ï¼Œ<code>$emit</code>ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¼ é€’çš„æ•°å€¼</li>
<li>çˆ¶ç»„ä»¶ç»‘å®šç›‘å¬å™¨è·å–åˆ°å­ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‚æ•°</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Chilfen.vue</span><br><span class="line">this.$emit(&#x27;add&#x27;, good)  </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Father.vue</span><br><span class="line">&lt;Children @add=&quot;cartAdd($event)&quot; /&gt;  </span><br></pre></td></tr></table></figure>

<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><ul>
<li>çˆ¶ç»„ä»¶åœ¨ä½¿ç”¨å­ç»„ä»¶çš„æ—¶å€™è®¾ç½®<code>ref</code></li>
<li>çˆ¶ç»„ä»¶é€šè¿‡è®¾ç½®å­ç»„ä»¶<code>ref</code>æ¥è·å–æ•°æ®</li>
</ul>
<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Children</span> ref=<span class="string">&quot;foo&quot;</span> /&gt;  </span><br><span class="line">  </span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">foo</span>  <span class="comment">// è·å–å­ç»„ä»¶å®ä¾‹ï¼Œé€šè¿‡å­ç»„ä»¶å®ä¾‹æˆ‘ä»¬å°±èƒ½æ‹¿åˆ°å¯¹åº”çš„æ•°æ®  </span></span><br></pre></td></tr></table></figure>

<h3 id="EventBus"><a href="#EventBus" class="headerlink" title="EventBus"></a>EventBus</h3><ul>
<li>ä½¿ç”¨åœºæ™¯ï¼šå…„å¼Ÿç»„ä»¶ä¼ å€¼</li>
<li>åˆ›å»ºä¸€ä¸ªä¸­å¤®äº‹ä»¶æ€»çº¿<code>EventBus</code></li>
<li>å…„å¼Ÿç»„ä»¶é€šè¿‡<code>$emit</code>è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œ<code>$emit</code>ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¼ é€’çš„æ•°å€¼</li>
<li>å¦ä¸€ä¸ªå…„å¼Ÿç»„ä»¶é€šè¿‡<code>$on</code>ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Bus.js</span><br><span class="line">// åˆ›å»ºä¸€ä¸ªä¸­å¤®æ—¶é—´æ€»çº¿ç±»  </span><br><span class="line">class Bus &#123;  </span><br><span class="line">  constructor() &#123;  </span><br><span class="line">    this.callbacks = &#123;&#125;;   // å­˜æ”¾äº‹ä»¶çš„åå­—  </span><br><span class="line">  &#125;  </span><br><span class="line">  $on(name, fn) &#123;  </span><br><span class="line">    this.callbacks[name] = this.callbacks[name] || [];  </span><br><span class="line">    this.callbacks[name].push(fn);  </span><br><span class="line">  &#125;  </span><br><span class="line">  $emit(name, args) &#123;  </span><br><span class="line">    if (this.callbacks[name]) &#123;  </span><br><span class="line">      this.callbacks[name].forEach((cb) =&gt; cb(args));  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">// main.js  </span><br><span class="line">Vue.prototype.$bus = new Bus() // å°†$busæŒ‚è½½åˆ°vueå®ä¾‹çš„åŸå‹ä¸Š  </span><br><span class="line">// å¦ä¸€ç§æ–¹å¼  </span><br><span class="line">Vue.prototype.$bus = new Vue() // Vueå·²ç»å®ç°äº†Busçš„åŠŸèƒ½  </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Children1.vue</span><br><span class="line">this.$bus.$emit(&#x27;foo&#x27;)  </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Children2.vue</span><br><span class="line">this.$bus.$on(&#x27;foo&#x27;, this.handle)  </span><br></pre></td></tr></table></figure>

<h3 id="parent-æˆ–-root"><a href="#parent-æˆ–-root" class="headerlink" title="$parent æˆ–$ root"></a>$parent æˆ–$ root</h3><ul>
<li>é€šè¿‡å…±åŒç¥–è¾ˆ<code>$parent</code>æˆ–è€…<code>$root</code>æ­å»ºé€šä¿¡æ¡¥è¿</li>
</ul>
<p>å…„å¼Ÿç»„ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$parent.on(&#x27;add&#x27;,this.add)</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ä¸ªå…„å¼Ÿç»„ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$parent.emit(&#x27;add&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="attrs-ä¸-listeners"><a href="#attrs-ä¸-listeners" class="headerlink" title="$attrs ä¸$ listeners"></a>$attrs ä¸$ listeners</h3><ul>
<li>é€‚ç”¨åœºæ™¯ï¼šç¥–å…ˆä¼ é€’æ•°æ®ç»™å­å­™</li>
<li>è®¾ç½®æ‰¹é‡å‘ä¸‹ä¼ å±æ€§<code>$attrs</code>å’Œ <code>$listeners</code></li>
<li>åŒ…å«äº†çˆ¶çº§ä½œç”¨åŸŸä¸­ä¸ä½œä¸º <code>prop</code> è¢«è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š ( class å’Œ style é™¤å¤–)ã€‚</li>
<li>å¯ä»¥é€šè¿‡ <code>v-bind=&quot;$attrs&quot;</code> ä¼ â¼Šå†…éƒ¨ç»„ä»¶</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»™Grandsonéš”ä»£ä¼ å€¼ï¼Œcommunication/index.vue  </span></span><br><span class="line">&lt;<span class="title class_">Child2</span> msg=<span class="string">&quot;lalala&quot;</span> @some-event=<span class="string">&quot;onSomeEvent&quot;</span>&gt;&lt;/<span class="title class_">Child2</span>&gt;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Child2åšå±•å¼€  </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Grandson</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span> <span class="attr">v-on</span>=<span class="string">&quot;$listeners&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Grandson</span>&gt;</span></span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Grandsonä½¿â½¤  </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;some-event&#x27;, &#x27;msg from grandson&#x27;)&quot;</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">&#123;&#123;msg&#125;&#125;  </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>  </span><br></pre></td></tr></table></figure>

<h3 id="provide-ä¸-inject"><a href="#provide-ä¸-inject" class="headerlink" title="provide ä¸ inject"></a>provide ä¸ inject</h3><ul>
<li>åœ¨ç¥–å…ˆç»„ä»¶å®šä¹‰<code>provide</code>å±æ€§ï¼Œè¿”å›ä¼ é€’çš„å€¼</li>
<li>åœ¨åä»£ç»„ä»¶é€šè¿‡<code>inject</code>æ¥æ”¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼</li>
</ul>
<p>ç¥–å…ˆç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">provide</span>(<span class="params"></span>)&#123;  </span><br><span class="line">    <span class="keyword">return</span> &#123;  </span><br><span class="line">        <span class="attr">foo</span>:<span class="string">&#x27;foo&#x27;</span>  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>åä»£ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject</span>:[<span class="string">&#x27;foo&#x27;</span>] <span class="comment">// è·å–åˆ°ç¥–å…ˆç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼  </span></span><br></pre></td></tr></table></figure>

<h3 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h3><ul>
<li>é€‚ç”¨åœºæ™¯: å¤æ‚å…³ç³»çš„ç»„ä»¶æ•°æ®ä¼ é€’</li>
<li><code>Vuex</code>ä½œç”¨ç›¸å½“äºä¸€ä¸ªç”¨æ¥å­˜å‚¨å…±äº«å˜é‡çš„å®¹å™¨ <img src="https://static.vue-js.com/fa207cd0-3aca-11eb-ab90-d9ae814b240d.png" alt="img"></li>
<li><code>state</code>ç”¨æ¥å­˜æ”¾å…±äº«å˜é‡çš„åœ°æ–¹</li>
<li><code>getter</code>ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ª<code>getter</code>æ´¾ç”ŸçŠ¶æ€ï¼Œ(ç›¸å½“äº<code>store</code>ä¸­çš„è®¡ç®—å±æ€§ï¼‰ï¼Œç”¨æ¥è·å¾—å…±äº«å˜é‡çš„å€¼</li>
<li><code>mutations</code>ç”¨æ¥å­˜æ”¾ä¿®æ”¹<code>state</code>çš„æ–¹æ³•ã€‚</li>
<li><code>actions</code>ä¹Ÿæ˜¯ç”¨æ¥å­˜æ”¾ä¿®æ”¹stateçš„æ–¹æ³•ï¼Œä¸è¿‡<code>action</code>æ˜¯åœ¨<code>mutations</code>çš„åŸºç¡€ä¸Šè¿›è¡Œã€‚å¸¸ç”¨æ¥åšä¸€äº›å¼‚æ­¥æ“ä½œ</li>
</ul>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul>
<li>çˆ¶å­å…³ç³»çš„ç»„ä»¶æ•°æ®ä¼ é€’é€‰æ‹© <code>props</code> ä¸ <code>$emit</code>è¿›è¡Œä¼ é€’ï¼Œä¹Ÿå¯é€‰æ‹©<code>ref</code></li>
<li>å…„å¼Ÿå…³ç³»çš„ç»„ä»¶æ•°æ®ä¼ é€’å¯é€‰æ‹©<code>$bus</code>ï¼Œå…¶æ¬¡å¯ä»¥é€‰æ‹©<code>$parent</code>è¿›è¡Œä¼ é€’</li>
<li>ç¥–å…ˆä¸åä»£ç»„ä»¶æ•°æ®ä¼ é€’å¯é€‰æ‹©<code>attrs</code>ä¸<code>listeners</code>æˆ–è€… <code>Provide</code>ä¸ <code>Inject</code></li>
<li>å¤æ‚å…³ç³»çš„ç»„ä»¶æ•°æ®ä¼ é€’å¯ä»¥é€šè¿‡<code>vuex</code>å­˜æ”¾å…±äº«çš„å˜é‡</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/09/19/Vue/vue-%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-webpack loader-plugin">
    <header class="cube-excerpt-header">
        <h1><a href="/2020/09/17/webpack/webpack%20loader-plugin/">webpack loader-plugin</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2020-09-17
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/webpack/" class="cube-excerpt-tag-link">#webpack</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h1 id="ä¸€ã€loader"><a href="#ä¸€ã€loader" class="headerlink" title="ä¸€ã€loader"></a>ä¸€ã€loader</h1><p>å¯¹äºwebpackï¼Œä¸€åˆ‡çš†æ¨¡å—ã€‚webpack åªèƒ½ç†è§£ JavaScript å’Œ JSON æ–‡ä»¶ï¼Œå…¶ä»–ç±»å‹&#x2F;åç¼€çš„æ–‡ä»¶éƒ½éœ€è¦ç»è¿‡ loader å¤„ç†ï¼Œå°†å®ƒä»¬è½¬æ¢ä¸ºjså¯è¯†åˆ«çš„æœ‰æ•ˆæ¨¡å— (webpack å¤©ç”Ÿæ”¯æŒ ECMAScriptã€CommonJSã€èµ„æºæ¨¡å—ç­‰æ¨¡å—ç±»å‹)ã€‚loaderå¯ä»¥åšè¯­è¨€ç¿»è¯‘(æ¯”å¦‚å°†æ–‡ä»¶ä» TypeScript è½¬æ¢ä¸º JavaScript) æˆ–æ ¼å¼è½¬æ¢(å°†å†…è”å›¾åƒè½¬æ¢ä¸º data URL)è¿˜æœ‰æ ·å¼ç¼–è¯‘(å…è®¸ç›´æ¥åœ¨ JavaScript æ¨¡å—ä¸­ import CSSæ–‡ä»¶)ã€‚</p>
<h2 id="1-loaderæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-loaderæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.loaderæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.loaderæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ¯ä¸ª loader æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ªå¯¼å‡ºä¸ºå‡½æ•°çš„ JavaScript æ¨¡å—ã€‚loader runner ä¼šè°ƒç”¨æ­¤å‡½æ•°ï¼Œå°†èµ„æºæ–‡ä»¶æˆ–è€…ä¸Šä¸€ä¸ª loader äº§ç”Ÿçš„ç»“æœä¼ è¿›å»ï¼Œç»è¿‡ç¼–è¯‘è½¬æ¢æŠŠå¤„ç†ç»“æœå†è¾“å‡ºå»ï¼ˆå¦‚æœåé¢è¿˜æœ‰ loader å°±ä¼ ç»™ä¸‹ä¸€ä¸ªï¼‰ã€‚å‡½æ•°ä¸­çš„ this ä½œä¸ºä¸Šä¸‹æ–‡ä¼šè¢« webpack å¡«å……ï¼Œå¹¶ä¸” loader runner ä¸­åŒ…å«ä¸€äº›å®ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ loader è°ƒç”¨æ–¹å¼å˜ä¸ºå¼‚æ­¥ï¼Œæˆ–è€…è·å– query å‚æ•°ã€‚<br>ç®€è¨€ä¹‹ loader å°±æ˜¯æ¨¡å—è½¬æ¢å™¨ã€‚æœ‰ç‚¹åƒ Vue çš„è¿‡æ»¤å™¨ã€‚<br>loaderä»ä¸‹åˆ°ä¸Šåœ°å–å€¼(evaluate)&#x2F;æ‰§è¡Œ(execute)ï¼Œä¹Ÿå°±æ˜¯æ˜¯ä»åå¾€å‰æ‰§è¡Œã€‚</p>
<h2 id="2-æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä»–ä»¬æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿ"><a href="#2-æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä»–ä»¬æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿ" class="headerlink" title="2. æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä»–ä»¬æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿ"></a>2. æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä»–ä»¬æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿ</h2><p>â— source-map-loaderï¼šåŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•<br>â— image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶<br>â— eslint-loaderï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç </p>
<p>æ–‡ä»¶<br>url-loader ä¸ file-loader ç±»ä¼¼ï¼Œä½†å½“æ–‡ä»¶ size å°äºè®¾ç½®çš„ limit å€¼ï¼Œä¼šè¿”å› data URL<br>file-loader å°†æ–‡ä»¶ä¿å­˜è‡³è¾“å‡ºæ–‡ä»¶å¤¹ä¸­å¹¶è¿”å› URL (é»˜è®¤æ˜¯æ˜¯ç»å¯¹è·¯å¾„ï¼Œå¯ä»¥ outputPath å’Œ publicPath é€šè¿‡é…ç½®æˆç›¸å¯¹è·¯å¾„)<br>è¯­æ³•è½¬æ¢<br>babel-loader ä½¿ç”¨ Babel åŠ è½½ ES2015+ ä»£ç å¹¶å°†å…¶è½¬æ¢ä¸º ES5<br>ts-loader åƒåŠ è½½ JavaScript ä¸€æ ·åŠ è½½ TypeScript 2.0+<br>æ ·å¼<br>style-loader å°†æ ·å¼æ¨¡å—å¯¼å‡ºçš„å†…å®¹ä»¥å¾€ <head> ä¸­æ³¨å…¥å¤šä¸ª <style> çš„å½¢å¼ï¼Œæ·»åŠ åˆ° DOM ä¸­<br>css-loader åŠ è½½ CSS æ–‡ä»¶å¹¶è§£æ @import çš„ CSS æ–‡ä»¶ï¼Œå°† url() å¤„ç†æˆ require() è¯·æ±‚ï¼Œæœ€ç»ˆè¿”å› CSS ä»£ç <br>less-loader åŠ è½½å¹¶ç¼–è¯‘ LESS æ–‡ä»¶<br>sass-loader åŠ è½½å¹¶ç¼–è¯‘ SASS&#x2F;SCSS æ–‡ä»¶<br>postcss-loader ä½¿ç”¨ PostCSS åŠ è½½å¹¶è½¬æ¢ CSS&#x2F;SSS æ–‡ä»¶<br>stylus-loader åŠ è½½å¹¶ç¼–è¯‘ Stylus æ–‡ä»¶<br>æ¡†æ¶<br>vue-loader åŠ è½½å¹¶ç¼–è¯‘</p>
<h2 id="3-åœ¨configæ–‡ä»¶é…ç½®"><a href="#3-åœ¨configæ–‡ä»¶é…ç½®" class="headerlink" title="3. åœ¨configæ–‡ä»¶é…ç½®"></a>3. åœ¨configæ–‡ä»¶é…ç½®</h2><p>åœ¨ module.rules é…ç½®è½¬æ¢è§„åˆ™æ—¶ï¼Œæœ‰ä¸¤ä¸ªå¿…é€‰å±æ€§ test å’Œ useã€‚<br>åƒè¿™æ · module: { rules: [{ test: &#x2F;.txt$&#x2F;, use: â€˜raw-loaderâ€™ }] }<br>ä¼šå‘Šè¯‰ webpack ç¼–è¯‘å™¨(compiler) ï¼Œå½“ç¢°åˆ°ã€Œåœ¨ require()&#x2F;import è¯­å¥ä¸­è¢«è§£æä¸º â€˜.txtâ€™ çš„è·¯å¾„ã€æ—¶ï¼Œåœ¨ä½ å¯¹å®ƒæ‰“åŒ…ä¹‹å‰ï¼Œå…ˆç”¨ raw-loader è½¬æ¢ä¸€ä¸‹(é¢„å¤„ç†)ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.vue$/,</span><br><span class="line">        use: [&#x27;a-loader&#x27;, &#x27;b-loader&#x27;, &#x27;c-loader&#x27;], // ä»å³åˆ°å·¦ï¼Œc-loader -&gt; b-loader -&gt; a-loader</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.css$/, // testå±æ€§ï¼Œè§„å®šå“ªäº›æ–‡ä»¶ä¼šè¢«è½¬æ¢</span><br><span class="line">        use: [ // useå±æ€§ï¼Œåœ¨è¿›è¡Œè½¬æ¢æ—¶ï¼Œåº”ç”¨å“ªäº› loader</span><br><span class="line">          &#123; loader: &#x27;style-loader&#x27; &#125;, </span><br><span class="line">          &#123;</span><br><span class="line">            loader: &#x27;css-loader&#x27;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              modules: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123; loader: &#x27;sass-loader&#x27; &#125; </span><br><span class="line">        ] // ä»ä¸‹åˆ°ä¸Šï¼Œsass-loader -&gt; css-loader -&gt; style-loader</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-loader-çš„æ‰§è¡Œé¡ºåº"><a href="#4-loader-çš„æ‰§è¡Œé¡ºåº" class="headerlink" title="4. loader çš„æ‰§è¡Œé¡ºåº"></a>4. loader çš„æ‰§è¡Œé¡ºåº</h2><p>æ¯ä¸ª Loader çš„åŠŸèƒ½éƒ½åº”æ˜¯å•ä¸€è€Œä¸“æ³¨çš„ï¼Œè¿™æ ·ä¸ä»…ä¾¿äºç»´æŠ¤ï¼Œè¿˜èƒ½è®©å®ƒä»¬åœ¨æ›´å¤šåœºæ™¯ä¸­è¢«ä¸²è”åº”ç”¨ã€‚å› æ­¤ Loader é€šå¸¸æ˜¯ç»„åˆä½¿ç”¨çš„ã€‚é“¾å¼è°ƒç”¨ä¸€ç»„ loader æ—¶ (æ— è®ºæ˜¯æ¨¡å—è§„åˆ™é…ç½®è¿˜æ˜¯å†…è”æ–¹å¼)ï¼Œå®ƒä»¬ä¼šæŒ‰ç…§ç›¸åçš„é¡ºåºæ‰§è¡Œã€‚å³ä»å³åˆ°å·¦(æˆ–ä»ä¸‹åˆ°ä¸Š)ï¼Œä¾æ¬¡å°†å‰ä¸€ä¸ª loader è½¬æ¢åçš„ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ª loaderã€‚ç›´åˆ°æœ€åä¸€ä¸ª loader è¿”å› webpack æ‰€æœŸæœ›çš„ JavaScriptã€‚æœ‰ç‚¹åƒ Promise çš„ thenã€‚<br>loader å¯ä»¥ç”¨ String æˆ– Buffer çš„å½¢å¼ä¼ é€’å®ƒçš„å¤„ç†ç»“æœï¼Œcomplier ä¼šæŠŠå®ƒä»¬åœ¨ loader ä¹‹é—´ç›¸äº’è½¬æ¢ã€‚æœ€ç»ˆç»“æœä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ª loader ä¼šè¿”å›ä¸€æˆ–ä¸¤ä¸ªå€¼ï¼šç¬¬ä¸€ä¸ªæ˜¯ä»£è¡¨æ¨¡å—çš„ JavaScript æºç çš„ String æˆ–è€… Bufferï¼ˆè¿™ä¸ªç»“æœä¼šäº¤ç»™ webpack çš„ requireï¼Œå› æ­¤ä¸€å®šæ˜¯ä¸€æ®µå¯æ‰§è¡Œçš„ node æ¨¡å—çš„ JS è„šæœ¬[ç”¨å­—ç¬¦ä¸²å­˜å‚¨çš„]ï¼‰ï¼›ç¬¬äºŒä¸ªæ˜¯å¯é€‰çš„ SourceMap (æ ¼å¼ä¸º JSON å¯¹è±¡)ã€‚</p>
<p>ä¸€ç»„ loader çš„æ‰§è¡Œæœ‰ä¸¤ä¸ªé˜¶æ®µï¼šPitching é˜¶æ®µ å’Œ Normal é˜¶æ®µï¼Œç±»ä¼¼äºjsä¸­çš„äº‹ä»¶æ•è·ã€å†’æ³¡ã€‚<br>webpack çš„ loader-runner ä¼šæŒ‰æ­£åº(ä»å·¦åˆ°å³) require æ¯ä¸ª loaderï¼ŒæŠŠè¿™ä¸ª loader çš„æ¨¡å—å¯¼å‡ºå‡½æ•° å’Œ pitchå‡½æ•°éƒ½å­˜åˆ° loaderContext å¯¹è±¡ä¸Šï¼Œç„¶åæ‰§è¡Œè¯¥ loader çš„ pitch æ–¹æ³•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼›å¦‚æœä¸€ç»„ loader çš„ pitch éƒ½æ²¡æœ‰è¿”å›å€¼ï¼Œå°±å¼€å§‹ Normalé˜¶æ®µï¼šåå‘(ä»å³åˆ°å·¦)æ‰§è¡Œ loader çš„å¯¼å‡ºå‡½æ•°ï¼Œä¾æ¬¡è¿›è¡Œæ¨¡å—æºç çš„è½¬æ¢ï¼Œç›´åˆ°æ‹¿åˆ°æœ€åçš„å¤„ç†ç»“æœï¼›ä½†æ˜¯å½“ Pitching é˜¶æ®µæŸä¸ª loader çš„ pitch æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆå°±ä¼šè·³è¿‡å‰©ä½™æœªè¯»å–çš„ loaderï¼Œç›´æ¥è¿›å…¥æ‰§è¡Œ loader çš„ç¯èŠ‚ã€‚ä»å‰ä¸€ä¸ª require çš„ loader å¼€å§‹æ‰§è¡Œï¼Œpitch çš„è¿”å›å€¼å³æ˜¯ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚é™¤äº† pitch æœ‰è¿”å›çš„é‚£ä¸ª loaderï¼Œå€’åºæ‰§è¡Œå·²ç» require çš„æ¯ä¸ª loaderã€‚<br>åŸç†å¯å‚è€ƒï¼šæµ…æ webpack æ‰“åŒ…æµç¨‹(åŸç†) äºŒ ä¹‹ã€æ‰§è¡Œ loader é˜¶æ®µï¼Œåˆå§‹åŒ–æ¨¡å— moduleï¼Œå¹¶ç”¨ loader å€’åºè½¬è¯‘ã€‘éƒ¨åˆ†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">  rules: [&#123; test:/\.vue$/, use: [&#x27;a-loader&#x27;, &#x27;b-loader&#x27;, &#x27;c-loader&#x27;] &#125;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®ä»¥ä¸Šé…ç½®ï¼Œ*.vueæ–‡ä»¶åœ¨ loader å¤„ç†é˜¶æ®µå°†ç»å†ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">|- a-loader `pitch` æ–¹æ³•</span><br><span class="line">  |- b-loader `pitch` æ–¹æ³•</span><br><span class="line">    |- c-loader `pitch` æ–¹æ³•</span><br><span class="line">      |- ä»¥æ¨¡å—ä¾èµ–çš„å½¢å¼å³ import/require() è·å–èµ„æºå†…å®¹</span><br><span class="line">    |- c-loader normal æ‰§è¡Œ</span><br><span class="line">  |- b-loader normal æ‰§è¡Œ</span><br><span class="line">|- a-loader normal æ‰§è¡Œ</span><br></pre></td></tr></table></figure>
<p>|- a-loader normal æ‰§è¡Œ<br>å¦‚æœ b-loader çš„ pitch æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œç›´æ¥è·³è¿‡ c-loader è¿›å…¥ loader æ‰§è¡Œé˜¶æ®µï¼Œå¹¶ä¸” b-loader ä¹Ÿä¸ä¼šæ‰§è¡Œã€‚æ•´ä¸ªè¿‡ç¨‹å°±ä¼šå˜æˆè¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|- a-loader `pitch` æ–¹æ³•</span><br><span class="line">  |- b-loader `pitch` æ–¹æ³• (æœ‰è¿”å›ç»“æœï¼Œåˆ™è·³è¿‡åé¢æœª require çš„ loaderï¼Œç›´æ¥è¿›å…¥ loader æ‰§è¡Œé˜¶æ®µ)</span><br><span class="line">|- a-loader normal æ‰§è¡Œ (ä¼ å…¥å‚æ•°æ˜¯ b-loader pitch çš„è¿”å›å€¼)</span><br></pre></td></tr></table></figure>
<p>å›¾è§£loaderï¼š<br><img src="http://hghqz.vip/webpack/loader.jpg" alt="loaderå›¾è§£" title="loaderå›¾è§£"><br>loader å¯ä»¥åˆ©ç”¨ pitch é˜¶æ®µæ¥åšä»€ä¹ˆï¼Ÿ<br>Pitch æ–¹æ³•æ˜¯ä»€ä¹ˆï¼šæ¯ä¸ª loader å¯ä»¥æŒ‚è½½ä¸€ä¸ª pitch å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸»è¦ç”¨äºåˆ©ç”¨ module çš„ request æ¥æå‰åšä¸€äº›æ‹¦æˆªå¤„ç†çš„å·¥ä½œï¼ˆåé¢ä¼šä¸¾ä¾‹è¯´æ˜ï¼‰ï¼Œå¹¶ä¸å®é™…å¤„ç†æ¨¡å—å†…å®¹ã€‚<br>äº‹å®ä¸Šå¾ˆå¤š loader å¹¶æœªå®šä¹‰ pitchï¼Œä¸€èˆ¬å®šä¹‰äº† pitch å°±æ˜¯æŸäº›æƒ…å†µè¦è¿”å›ä¸œè¥¿ã€‚<br>è¯¦æƒ…è¯·çœ‹ Pitching Loaderã€‚</p>
<p>å½“ä¸€ç»„ loader è¢«é“¾å¼è°ƒç”¨ï¼Œåƒä¸Šé¢çš„ä¾‹å­ï¼Œæ­£å¸¸æƒ…å†µåªæœ‰æœ€åä¸€ä¸ªc-loaderèƒ½è·å¾—èµ„æºæ–‡ä»¶(èµ·å§‹ loader åªæœ‰ä¸€ä¸ªå…¥å‚ï¼šèµ„æºæ–‡ä»¶çš„å†…å®¹)ï¼Œb-loaderæ‹¿åˆ°çš„æ˜¯c-loaderå¤„ç†ç»“æœï¼Œä¸­é—´å¦‚æœå†å¤šå‡ ä¸ª loader ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªèƒ½æ‹¿åˆ°ä¸Šä¸€ä¸ªä¼ æ¥çš„å€¼ï¼Œå¤„ç†å¥½å†ä¼ é€’ç»™ä¸‹ä¸€ä¸ªã€‚ç›´åˆ°ç¬¬ä¸€ä¸ªa-loaderè¿”å›æœ€ç»ˆç»“æœã€‚<br>å°½ç®¡ loaders å¸¸è¢«ä¸²è”ä½¿ç”¨ï¼Œä½†å®ƒä»¬çš„åŠŸèƒ½ä»æ—§æ˜¯å•ä¸€å¹¶ç‹¬ç«‹çš„ï¼Œä¸”åªå…³å¿ƒè‡ªå·±çš„è¾“å…¥å’Œè¾“å‡ºã€‚å°±åƒå·¥å‚æµæ°´çº¿ï¼Œä¸€ä¸ªåŒºåŸŸçš„å·¥äºº&#x2F;æœºå™¨åªå¹²ä¸€ç§ç±»å‹çš„æ´»ã€‚æ‰€ä»¥åˆç†æ­é…å¹¶é…ç½®æ­£ç¡®çš„é¡ºåºæ‰èƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p>
<p>å®ƒåªæƒ³è¦ request åé¢çš„ å…ƒæ•°æ®(è°ƒç”¨ loaderæ—¶ä¼ å…¥çš„ç¬¬ä¸‰ä¸ªå‚æ•° metadata)ã€‚<br>ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æŠŠä¸¤ä¸ªç”¨æ¥åšæœ€åå¤„ç†çš„ loader ä¸²èµ·æ¥ï¼Œæ¯”å¦‚ style-loader å’Œ css-loaderã€‚<br>ä½† style-loader å¹¶ä¸éœ€è¦ css-loader çš„ç»“æœï¼Œå®ƒåªéœ€è¦ request åçš„å…ƒæ•°æ®ã€‚</p>
<h1 id="äºŒã€plugin"><a href="#äºŒã€plugin" class="headerlink" title="äºŒã€plugin"></a>äºŒã€plugin</h1><p>pluginæ˜¯ä»€ä¹ˆï¼Ÿ<br>pluginæ˜¯æ’ä»¶çš„æ„æ€ï¼Œé€šå¸¸æ˜¯ç”¨äºå¯¹æŸä¸ªç°æœ‰çš„æ¶æ„è¿›è¡Œæ‰©å±•<br>webpackä¸­çš„pluginï¼Œå°±æ˜¯å¯¹webpackç°æœ‰åŠŸèƒ½çš„å„ç§æ‰©å±•ï¼Œæ¯”å¦‚æ‰“åŒ…ä¼˜åŒ–ã€æ–‡ä»¶å‹ç¼©ç­‰ç­‰</p>
<p>loaderå’Œpluginçš„åŒºåˆ«<br>loaderä¸»è¦ç”¨äºåŠ è½½&#x2F;è½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠ è½½&#x2F;è½¬æ¢å™¨<br>pluginæ˜¯æ’ä»¶ï¼Œå®ƒæ˜¯å¯¹webpackæœ¬èº«çš„æ‰©å±•ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ‰©å±•å™¨</p>
<p>pluginçš„ä½¿ç”¨è¿‡ç¨‹<br>æ­¥éª¤ä¸€ï¼šé€šè¿‡npmå®‰è£…éœ€è¦ä½¿ç”¨çš„pluginsï¼ˆæŸäº›webpackå·²ç»å†…ç½®çš„æ’ä»¶ä¸éœ€è¦å®‰è£…ï¼‰<br>æ­¥éª¤äºŒï¼šåœ¨webpack.config.jsä¸­çš„pluginsé…ç½®æ’ä»¶</p>
<h2 id="1-æ˜¯ä»€ä¹ˆ"><a href="#1-æ˜¯ä»€ä¹ˆ" class="headerlink" title="1.æ˜¯ä»€ä¹ˆ"></a>1.æ˜¯ä»€ä¹ˆ</h2><p>Pluginï¼ˆPlug-inï¼‰æ˜¯ä¸€ç§è®¡ç®—æœºåº”ç”¨ç¨‹åºï¼Œå®ƒå’Œä¸»åº”ç”¨ç¨‹åºäº’ç›¸äº¤äº’ï¼Œä»¥æä¾›ç‰¹å®šçš„åŠŸèƒ½</p>
<p>æ˜¯ä¸€ç§éµå¾ªä¸€å®šè§„èŒƒçš„åº”ç”¨ç¨‹åºæ¥å£ç¼–å†™å‡ºæ¥çš„ç¨‹åºï¼Œåªèƒ½è¿è¡Œåœ¨ç¨‹åºè§„å®šçš„ç³»ç»Ÿä¸‹ï¼Œå› ä¸ºå…¶éœ€è¦è°ƒç”¨åŸçº¯å‡€ç³»ç»Ÿæä¾›çš„å‡½æ•°åº“æˆ–è€…æ•°æ®</p>
<p>webpackä¸­çš„pluginä¹Ÿæ˜¯å¦‚æ­¤ï¼Œpluginèµ‹äºˆå…¶å„ç§çµæ´»çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ‰“åŒ…ä¼˜åŒ–ã€èµ„æºç®¡ç†ã€ç¯å¢ƒå˜é‡æ³¨å…¥ç­‰ï¼Œå®ƒä»¬ä¼šè¿è¡Œåœ¨ webpack çš„ä¸åŒé˜¶æ®µï¼ˆé’©å­ &#x2F; ç”Ÿå‘½å‘¨æœŸï¼‰ï¼Œè´¯ç©¿äº†webpackæ•´ä¸ªç¼–è¯‘å‘¨æœŸ<br><img src="http://hghqz.vip/webpack/webpack%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.jpg" alt="webpackå£°æ˜å‘¨æœŸ" title="webpackå£°æ˜å‘¨æœŸ"></p>
<p>å…³äºæ•´ä¸ªç¼–è¯‘ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæœ‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">entry-option ï¼šåˆå§‹åŒ– option</span><br><span class="line">run</span><br><span class="line">compileï¼šçœŸæ­£å¼€å§‹çš„ç¼–è¯‘ï¼Œåœ¨åˆ›å»º compilation å¯¹è±¡ä¹‹å‰</span><br><span class="line">compilation ï¼šç”Ÿæˆå¥½äº† compilation å¯¹è±¡</span><br><span class="line">make ä» entry å¼€å§‹é€’å½’åˆ†æä¾èµ–ï¼Œå‡†å¤‡å¯¹æ¯ä¸ªæ¨¡å—è¿›è¡Œ build</span><br><span class="line">after-compileï¼šç¼–è¯‘ build è¿‡ç¨‹ç»“æŸ</span><br><span class="line">emit ï¼šåœ¨å°†å†…å­˜ä¸­ assets å†…å®¹å†™åˆ°ç£ç›˜æ–‡ä»¶å¤¹ä¹‹å‰</span><br><span class="line">after-emit ï¼šåœ¨å°†å†…å­˜ä¸­ assets å†…å®¹å†™åˆ°ç£ç›˜æ–‡ä»¶å¤¹ä¹‹å</span><br><span class="line">doneï¼šå®Œæˆæ‰€æœ‰çš„ç¼–è¯‘è¿‡ç¨‹</span><br><span class="line">failedï¼šç¼–è¯‘å¤±è´¥çš„æ—¶å€™</span><br></pre></td></tr></table></figure>

<h2 id="2-å¸¸è§çš„Plugin"><a href="#2-å¸¸è§çš„Plugin" class="headerlink" title="2. å¸¸è§çš„Plugin"></a>2. å¸¸è§çš„Plugin</h2><p><img src="http://hghqz.vip/webpack/%E5%B8%B8%E8%A7%81plugin.jpg" alt="å¸¸è§plugin" title="å¸¸è§plugin"></p>
<h2 id="3-æ˜¯å¦å†™è¿‡Loaderå’ŒPluginï¼Ÿæè¿°ä¸€ä¸‹ç¼–å†™loaderæˆ–pluginçš„æ€è·¯ï¼Ÿ"><a href="#3-æ˜¯å¦å†™è¿‡Loaderå’ŒPluginï¼Ÿæè¿°ä¸€ä¸‹ç¼–å†™loaderæˆ–pluginçš„æ€è·¯ï¼Ÿ" class="headerlink" title="3. æ˜¯å¦å†™è¿‡Loaderå’ŒPluginï¼Ÿæè¿°ä¸€ä¸‹ç¼–å†™loaderæˆ–pluginçš„æ€è·¯ï¼Ÿ"></a>3. æ˜¯å¦å†™è¿‡Loaderå’ŒPluginï¼Ÿæè¿°ä¸€ä¸‹ç¼–å†™loaderæˆ–pluginçš„æ€è·¯ï¼Ÿ</h2><p>Loaderåƒä¸€ä¸ªâ€ç¿»è¯‘å®˜â€æŠŠè¯»åˆ°çš„æºæ–‡ä»¶å†…å®¹è½¬ä¹‰æˆæ–°çš„æ–‡ä»¶å†…å®¹ï¼Œå¹¶ä¸”æ¯ä¸ªLoaderé€šè¿‡é“¾å¼æ“ä½œï¼Œå°†æºæ–‡ä»¶ä¸€æ­¥æ­¥ç¿»è¯‘æˆæƒ³è¦çš„æ ·å­ã€‚<br>ç¼–å†™Loaderæ—¶è¦éµå¾ªå•ä¸€åŸåˆ™ï¼Œæ¯ä¸ªLoaderåªåšä¸€ç§â€è½¬ä¹‰â€å·¥ä½œã€‚ æ¯ä¸ªLoaderçš„æ‹¿åˆ°çš„æ˜¯æºæ–‡ä»¶å†…å®¹ï¼ˆsourceï¼‰ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼çš„æ–¹å¼å°†å¤„ç†åçš„å†…å®¹è¾“å‡ºï¼Œä¹Ÿå¯ä»¥è°ƒç”¨this.callback()æ–¹æ³•ï¼Œå°†å†…å®¹è¿”å›ç»™webpackã€‚ è¿˜å¯ä»¥é€šè¿‡ this.async()ç”Ÿæˆä¸€ä¸ªcallbackå‡½æ•°ï¼Œå†ç”¨è¿™ä¸ªcallbackå°†å¤„ç†åçš„å†…å®¹è¾“å‡ºå‡ºå»ã€‚ æ­¤å¤–webpackè¿˜ä¸ºå¼€å‘è€…å‡†å¤‡äº†å¼€å‘loaderçš„å·¥å…·å‡½æ•°é›†â€”â€”loader-utilsã€‚<br>ç›¸å¯¹äºLoaderè€Œè¨€ï¼ŒPluginçš„ç¼–å†™å°±çµæ´»äº†è®¸å¤šã€‚ webpackåœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚</p>
<h2 id="4-Loaderå’ŒPluginçš„ä¸åŒï¼Ÿ"><a href="#4-Loaderå’ŒPluginçš„ä¸åŒï¼Ÿ" class="headerlink" title="4. Loaderå’ŒPluginçš„ä¸åŒï¼Ÿ"></a>4. Loaderå’ŒPluginçš„ä¸åŒï¼Ÿ</h2><p>ä¸åŒçš„ä½œç”¨<br>â— Loaderç›´è¯‘ä¸ºâ€åŠ è½½å™¨â€ã€‚Webpackå°†ä¸€åˆ‡æ–‡ä»¶è§†ä¸ºæ¨¡å—ï¼Œä½†æ˜¯webpackåŸç”Ÿæ˜¯åªèƒ½è§£æjsæ–‡ä»¶ï¼Œå¦‚æœæƒ³å°†å…¶ä»–æ–‡ä»¶ä¹Ÿæ‰“åŒ…çš„è¯ï¼Œå°±ä¼šç”¨åˆ°loaderã€‚ æ‰€ä»¥Loaderçš„ä½œç”¨æ˜¯è®©webpackæ‹¥æœ‰äº†åŠ è½½å’Œè§£æéJavaScriptæ–‡ä»¶çš„èƒ½åŠ›ã€‚<br>â— Pluginç›´è¯‘ä¸ºâ€æ’ä»¶â€ã€‚Pluginå¯ä»¥æ‰©å±•webpackçš„åŠŸèƒ½ï¼Œè®©webpackå…·æœ‰æ›´å¤šçš„çµæ´»æ€§ã€‚ åœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚<br>ä¸åŒçš„ç”¨æ³•</p>
<ol>
<li>Loaderåœ¨module.rulesä¸­é…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä½œä¸ºæ¨¡å—çš„è§£æè§„åˆ™è€Œå­˜åœ¨ã€‚ ç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªObjectï¼Œé‡Œé¢æè¿°äº†å¯¹äºä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ï¼ˆtestï¼‰ï¼Œä½¿ç”¨ä»€ä¹ˆåŠ è½½(loader)å’Œä½¿ç”¨çš„å‚æ•°ï¼ˆoptionsï¼‰</li>
<li>Pluginåœ¨pluginsä¸­å•ç‹¬é…ç½®ã€‚ ç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªpluginçš„å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚</li>
</ol>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2020/09/17/webpack/webpack%20loader-plugin/">Read More</a>
    </footer>
</div>



<ul class="cube-pagination cube-pagination-9">
    
    <li class="cube-pagination-prev">
        <a href="/page/5/">Â« Prev</a>
    </li>
    
    
        
                <li class="cube-pagination-index">
                    <a href="/">1</a>
                </li>
                <li class="cube-pagination-ellipses">
                    <span>...</span>
                </li>
            
                
                <li class="cube-pagination-index">
                    <a href="/page/5">5</a>
                </li>
                
            
                
                <li class="cube-pagination-index disabled">
                    <span>6</span>
                </li>
                
            
                
                <li class="cube-pagination-index">
                    <a href="/page/7">7</a>
                </li>
                
            
                <li class="cube-pagination-ellipses">
                    <span>...</span>
                </li>
                <li class="cube-pagination-index">
                    <a href="/page/19">19</a>
                </li>
        
    

    
    <li class="cube-pagination-next">
        <a href="/page/7/">Next Â»</a>
    </li>
    
</ul>

<!--å…¶ä»–ç»„ä»¶åç»­æ·»åŠ -->
        </div>
        <div class="cube-right">
            

<div class="cube-search cube-sidebar" id="cube-search">
    <div class="search-container">
        <input type="text" placeholder="Search" class="cube-search-input" id="cube-search-input">
        <i class="cube-icon cube-icon-search cube-search-submit" aria-hidden="true"></i>
    </div>
    <!-- TODO é€šè¿‡ç»™windowèµ‹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé€šè¿‡è„šæœ¬èµ‹å€¼ -->
</div>
<script>
    (function (window) {
        'use strict';
        window.searchModule = {}
        window.searchModule.JSONUrl = '/content.json'
        window.searchModule.rootUrl = '/'
    })(window)
</script>
<div class="cube-search-form">
    <div class="cube-search-control">
        <input type="text" placeholder="Search" class="search-input">
        <a class="close-button">
            <i class="cube-icon cube-close" aria-hidden="true"></i>
        </a>
    </div>
    <div class="cube-search-result"></div>
</div>


<div class="cube-author cube-sidebar" id="cube-author">
    
    
    <span>John Doe</span>
    
    
    <div class="count">
        <a class="count articles"><span>186</span>Article</a>
        <a class="count tags"><span>35</span>Tags</a>
        <a class="count categories"><span>23</span>Categories</a>
    </div>
</div>



<div class="cube-music cube-sidebar" id="cube-music">
    <div class="cube-player aplayer" id="cube-player"></div>
</div>
<script>
    (function (window) {
        window.musicModule = {}
        window.musicModule.musicConfig = '{"narrow":false,"autoplay":false,"showlrc":3,"theme":"#b7daff","mutex":true,"mode":"circulation","preload":"auto","listmaxheight":"513px","music":[{"title":"Dear friends","author":"TRIPLANE","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/TRIPLANE - Dear friends.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Dear friends - TRIPLANE.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/TRIPLANE - Dear friends.jpg"},{"title":"Butter-Fly","author":"å’Œç”°å…‰å¸","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³) - å’Œç”°å…‰å¸.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).jpg"},{"title":"å®µé—‡èŠ±ç«","author":"è‘‰æœˆã‚†ã‚‰","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/å®µé—‡èŠ±ç« - è‘‰æœˆã‚†ã‚‰.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.jpg"}]}'
        window.musicModule.lrcConfig = {
            open: 'Open Lyrics',
            close: 'Close Lyrics'
        }
    })(window)
</script>



<div class="cube-recent-posts cube-sidebar" id="cube-recent-posts">
    <div class="title">
        <a>Recent Posts</a>
    </div>
    <ul class="list">
        
        
        <li>
            <!-- TODO å¦‚æœæ–‡ç« è¦æ˜¾ç¤ºå›¾ç‰‡ï¼Œé‚£ä¹ˆåœ¨front-matterä¸Šæ·»åŠ previewå±æ€§(url or path) -->
            
            <div class="normal">
                <p class="index first">
                    <span>1</span>
                </p>
                <p class="title">
                    <a href="/2022/08/25/Js%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="å˜é‡ç±»å‹">å˜é‡ç±»å‹</a>
                </p>
            </div>
            
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>2</span>
                </p>
                <p class="title">
                    <a href="/2022/06/09/html+css+js+ts/3-js%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C%E5%AE%9E%E4%BE%8B/" title="js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹">js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>3</span>
                </p>
                <p class="title">
                    <a href="/2022/05/28/html+css+js+ts/1-%E9%9F%B3%E8%A7%86%E9%A2%91/" title="html-åŸç”ŸéŸ³è§†é¢‘">html-åŸç”ŸéŸ³è§†é¢‘</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>4</span>
                </p>
                <p class="title">
                    <a href="/2022/04/25/http/DNS%E5%8D%8F%E8%AE%AE/" title="DNSåè®®">DNSåè®®</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>5</span>
                </p>
                <p class="title">
                    <a href="/2022/04/17/html+css+js+ts/4-%E8%A3%85%E9%A5%B0%E5%99%A8/" title="ES6 è£…é¥°å™¨">ES6 è£…é¥°å™¨</a>
                </p>
            </div>
        </li>
        
        
    </ul>
</div>



<div class="cube-categories cube-sidebar" id="cube-categories">
    <div class="title">
        <a href="/categories">Categories</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/categories/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/React/">#React</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">#æ•°æ®å¯è§†åŒ–</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">#æ¶æ„æ¨¡å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%9F%B3%E8%A7%86%E9%A2%91/">#éŸ³è§†é¢‘</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%97%AE%E9%A2%98/">#é—®é¢˜</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/">#åç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">#å‰ç«¯å·¥ç¨‹åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B7%A5%E5%85%B7/">#å·¥å…·</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">#å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">#æ•°æ®åº“</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/liunx/">#liunx</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-tagcloud cube-sidebar" id="cube-tagcloud">
    <div class="title">
        <a href="/tags">Tagcloud</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/tags/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vue/">#vue</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/React/">#React</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Redux/">#Redux</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/echart/">#echart</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vue3/">#vue3</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/react/">#react</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/html/">#html</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/xml/">#xml</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/css/">#css</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Promise/">#Promise</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/es6/">#es6</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/typescript/">#typescript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/async-await/">#async/await</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nodejs/">#nodejs</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/python/">#python</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/glup/">#glup</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/webpack/">#webpack</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/git/">#git</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Mock/">#Mock</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/eslint/">#eslint</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/RESTful/">#RESTful</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/hexo/">#hexo</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vs-code/">#vs code</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E4%BC%98%E5%8C%96/">#ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mongodb/">#mongodb</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mysql/">#mysql</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nginx/">#nginx</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-links cube-sidebar" id="cube-links">
    <div class="title">
        <a>Links</a>
    </div>
    <ul class="list">
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/GitHub.png">
            
            <a href="https://github.com/ZEROKISEKI" target="_blank">GitHub</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/Coding.png">
            
            <a href="https://coding.net/u/SORA1" target="_blank">Coding</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/SF.png">
            
            <a href="https://segmentfault.com/u/aonosora" target="_blank">SFç¤¾åŒº</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/å¼€å‘è€…å¤´æ¡.png">
            
            <a href="https://toutiao.io/u/148070" target="_blank">å¼€å‘è€…å¤´æ¡</a>
        </li>
        
    </ul>
</div>



<div class="cube-friend-links cube-sidebar" id="cube-friend-links">
    <div class="title">
        <a>Friend Links</a>
    </div>
    <ul class="list">
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/micblo.png">
            <a href="https://blog.micblo.com/" target="_blank">ç½—å¤§ä½¬</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/DIYgod.jpg">
            <a href="https://www.anotherhome.net/" target="_blank">DIYgod</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="/images/friend_links.jpg ">
            <a href="https://aonosora.com/" target="_blank">å’ªè¥¿è¥¿ã®éƒ¨è½æ ¼</a>
        </li>
        
    </ul>
</div>


        </div>
    </div>
</div>
<footer class="cube-footer">
    
Â© 2017 John Doe

<br>
Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
</footer>
<!-- inject:script -->
<script src="/js/script.js"></script>
<!-- endinject -->
<div class="cube-loading out"></div>
</body>
</html>