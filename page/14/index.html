<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/14/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Vue/vue-æ ¸å¿ƒçŸ¥è¯†" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/07/31/Vue/vue-%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/" class="article-date">
  <time class="dt-published" datetime="2018-07-31T01:18:38.000Z" itemprop="datePublished">2018-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/31/Vue/vue-%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/">vue-æ ¸å¿ƒçŸ¥è¯†æ€»ç»“</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ä¸€ã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-å±æ€§propså‡ ç§å†™æ³•"><a href="#ä¸€ã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-å±æ€§propså‡ ç§å†™æ³•" class="headerlink" title="ä¸€ã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-å±æ€§propså‡ ç§å†™æ³•"></a>ä¸€ã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-å±æ€§propså‡ ç§å†™æ³•</h2><blockquote>
<p>æˆ‘ä»¬çš„å¼€å‘éƒ½æ˜¯å›´ç»•ç€<code>options</code>æ¥çš„</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/1.png" alt="img"></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/2.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    name: &#123;&#123; name &#125;&#125;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    type: &#123;&#123; type &#125;&#125;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    list: &#123;&#123; list &#125;&#125;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    isVisible: &#123;&#123; isVisible &#125;&#125;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;button @click=&quot;handleClick&quot;&gt;change type&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;PropsDemo&quot;,</span><br><span class="line">  // inheritAttrs: false,</span><br><span class="line">  // è¿™ç§å†™æ³•ä¸åˆ©äºåæœŸç»´æŠ¤</span><br><span class="line">  // props: [&#x27;name&#x27;, &#x27;type&#x27;, &#x27;list&#x27;, &#x27;isVisible&#x27;],</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: String,</span><br><span class="line">    type: &#123;</span><br><span class="line">      validator: function(value) &#123;</span><br><span class="line">        // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª</span><br><span class="line">        return [&quot;success&quot;, &quot;warning&quot;, &quot;danger&quot;].includes(value);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    list: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è·å–</span><br><span class="line">      default: () =&gt; []</span><br><span class="line">    &#125;,</span><br><span class="line">    isVisible: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    &#125;,</span><br><span class="line">    onChange: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleClick() &#123;</span><br><span class="line">      // ä¸è¦è¿™ä¹ˆåšã€ä¸è¦è¿™ä¹ˆåšã€ä¸è¦è¿™ä¹ˆåš</span><br><span class="line">      // this.type = &quot;warning&quot;;</span><br><span class="line"></span><br><span class="line">      // å¯ä»¥ï¼Œè¿˜å¯ä»¥æ›´å¥½</span><br><span class="line">      this.onChange(this.type === &quot;success&quot; ? &quot;warning&quot; : &quot;success&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// ç”¨æ³•</span><br><span class="line">&lt;Props</span><br><span class="line">  name=&quot;Hello Vueï¼&quot; // åŸç”Ÿå±æ€§</span><br><span class="line">  :type=&quot;type&quot;</span><br><span class="line">  :is-visible=&quot;false&quot;</span><br><span class="line">  :on-change=&quot;handlePropChange&quot;</span><br><span class="line">  title=&quot;å±æ€§Demo&quot; // åŸç”Ÿå±æ€§</span><br><span class="line">  class=&quot;test1&quot; // åŸç”Ÿå±æ€§</span><br><span class="line">  :class=&quot;[&#x27;test2&#x27;]&quot;</span><br><span class="line">  :style=&quot;&#123; marginTop: &#x27;20px&#x27; &#125;&quot;</span><br><span class="line">  style=&quot;margin-top: 10px&quot; // åŸç”Ÿå±æ€§</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-äº‹ä»¶"><a href="#äºŒã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-äº‹ä»¶" class="headerlink" title="äºŒã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-äº‹ä»¶"></a>äºŒã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-äº‹ä»¶</h2><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/3.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    name: &#123;&#123; name || &quot;--&quot; &#125;&#125;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;input :value=&quot;name&quot; @change=&quot;handleChange&quot; /&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;div @click=&quot;handleDivClick&quot;&gt;</span><br><span class="line">      &lt;button @click=&quot;handleClick&quot;&gt;é‡ç½®æˆåŠŸ&lt;/button&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">      &lt;button @click.stop=&quot;handleClick&quot;&gt;é‡ç½®å¤±è´¥&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;EventDemo&quot;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: String</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange(e) &#123;</span><br><span class="line">      this.$emit(&quot;change&quot;, e.target.value);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleDivClick() &#123;</span><br><span class="line">      this.$emit(&quot;change&quot;, &quot;&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleClick(e) &#123;</span><br><span class="line">      // éƒ½ä¼šå¤±è´¥</span><br><span class="line">      //e.stopPropagation();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-æ’æ§½"><a href="#ä¸‰ã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-æ’æ§½" class="headerlink" title="ä¸‰ã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-æ’æ§½"></a>ä¸‰ã€ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µ-æ’æ§½</h2><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/4.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"> &lt;a-tab-pane key=&quot;slot&quot; tab=&quot;æ’æ§½&quot;&gt;</span><br><span class="line">    &lt;h2&gt;2.6 æ–°è¯­æ³•&lt;/h2&gt;</span><br><span class="line">    &lt;SlotDemo&gt;</span><br><span class="line">      &lt;p&gt;default slot&lt;/p&gt;</span><br><span class="line">      &lt;template v-slot:title&gt;</span><br><span class="line">        &lt;p&gt;title slot1&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;title slot2&lt;/p&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:item=&quot;props&quot;&gt;</span><br><span class="line">        &lt;p&gt;item slot-scope &#123;&#123; props &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/SlotDemo&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;h2&gt;è€è¯­æ³•&lt;/h2&gt;</span><br><span class="line">    &lt;SlotDemo&gt;</span><br><span class="line">      &lt;p&gt;default slot&lt;/p&gt;</span><br><span class="line">      &lt;p slot=&quot;title&quot;&gt;title slot1&lt;/p&gt;</span><br><span class="line">      &lt;p slot=&quot;title&quot;&gt;title slot2&lt;/p&gt;</span><br><span class="line">      &lt;p slot=&quot;item&quot; slot-scope=&quot;props&quot;&gt;item slot-scope &#123;&#123; props &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/SlotDemo&gt;</span><br><span class="line">&lt;/a-tab-pane&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Slot from &quot;./Slot&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    SlotDemo: Slot</span><br><span class="line">  &#125;,</span><br><span class="line">  data: () =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;&quot;,</span><br><span class="line">      type: &quot;success&quot;,</span><br><span class="line">      bigPropsName: &quot;Hello world!&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- Slot.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">    &lt;slot name=&quot;title&quot; /&gt;</span><br><span class="line">    &lt;slot name=&quot;item&quot; v-bind=&quot;&#123; value: &#x27;vue&#x27; &#125;&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;SlotDemo&quot;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/5.png" alt="img"></p>
<p><strong>å¤§å±æ€§ä¾‹å­</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--å­ç»„ä»¶ bigProps.vue--&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; name &#125;&#125;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;button @click=&quot;handleChange&quot;&gt;change name&lt;/button&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;!-- &#123;&#123; slotDefault &#125;&#125; --&gt;</span><br><span class="line">    &lt;VNodes :vnodes=&quot;slotDefault&quot; /&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;VNodes :vnodes=&quot;slotTitle&quot; /&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;VNodes :vnodes=&quot;slotScopeItem(&#123; value: &#x27;vue&#x27; &#125;)&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;BigProps&quot;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    VNodes: &#123;</span><br><span class="line">      functional: true,</span><br><span class="line">      render: (h, ctx) =&gt; ctx.props.vnodes</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: String,</span><br><span class="line">    onChange: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    slotDefault: Array,</span><br><span class="line">    slotTitle: Array,</span><br><span class="line">    slotScopeItem: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange() &#123;</span><br><span class="line">      this.onChange(&quot;Hello vue!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!--çˆ¶ç»„ä»¶è°ƒç”¨--&gt;</span><br><span class="line">&lt;a-tab-pane key=&quot;bigProps&quot; tab=&quot;å¤§å±æ€§&quot;&gt;</span><br><span class="line">    &lt;BigProps</span><br><span class="line">      :name=&quot;bigPropsName&quot;</span><br><span class="line">      :on-change=&quot;handleBigPropChange&quot;</span><br><span class="line">      :slot-default=&quot;getDefault()&quot;</span><br><span class="line">      :slot-title=&quot;getTitle()&quot;</span><br><span class="line">      :slot-scope-item=&quot;getItem&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/a-tab-pane&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€åŒå‘ç»‘å®šå’Œå•é¡¹æ•°æ®æµå¹¶ä¸å†²çª"><a href="#å››ã€åŒå‘ç»‘å®šå’Œå•é¡¹æ•°æ®æµå¹¶ä¸å†²çª" class="headerlink" title="å››ã€åŒå‘ç»‘å®šå’Œå•é¡¹æ•°æ®æµå¹¶ä¸å†²çª"></a>å››ã€åŒå‘ç»‘å®šå’Œå•é¡¹æ•°æ®æµå¹¶ä¸å†²çª</h2><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/6.png" alt="img"></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/7.png" alt="img"></p>
<h2 id="äº”ã€å¦‚ä½•è§¦å‘ç»„ä»¶çš„æ›´æ–°"><a href="#äº”ã€å¦‚ä½•è§¦å‘ç»„ä»¶çš„æ›´æ–°" class="headerlink" title="äº”ã€å¦‚ä½•è§¦å‘ç»„ä»¶çš„æ›´æ–°"></a>äº”ã€å¦‚ä½•è§¦å‘ç»„ä»¶çš„æ›´æ–°</h2><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/8.png" alt="img"></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/9.png" alt="img"></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/11.png" alt="img"></p>
<h2 id="å…­ã€åˆç†åº”ç”¨è®¡ç®—å±æ€§å’Œç›‘å¬å™¨"><a href="#å…­ã€åˆç†åº”ç”¨è®¡ç®—å±æ€§å’Œç›‘å¬å™¨" class="headerlink" title="å…­ã€åˆç†åº”ç”¨è®¡ç®—å±æ€§å’Œç›‘å¬å™¨"></a>å…­ã€åˆç†åº”ç”¨è®¡ç®—å±æ€§å’Œç›‘å¬å™¨</h2><h3 id="6-1-è®¡ç®—å±æ€§Computed"><a href="#6-1-è®¡ç®—å±æ€§Computed" class="headerlink" title="6.1 è®¡ç®—å±æ€§Computed"></a>6.1 è®¡ç®—å±æ€§Computed</h3><ul>
<li>å‡å°‘æ¨¡æ¿ä¸­çš„è®¡ç®—é€»è¾‘</li>
<li>æ•°æ®ç¼“å­˜</li>
<li>ä¾èµ–å›ºå®šçš„æ•°æ®ç±»å‹ï¼ˆå“åº”å¼æ•°æ®ï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;Reversed message1: &quot;&#123;&#123; reversedMessage1 &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Reversed message2: &quot;&#123;&#123; reversedMessage2() &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; now &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;() =&gt; $forceUpdate()&quot;&gt;forceUpdate&lt;/button&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;input v-model=&quot;message&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;hello vue&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // è®¡ç®—å±æ€§çš„ getter</span><br><span class="line">    reversedMessage1: function() &#123;</span><br><span class="line">      console.log(&quot;æ‰§è¡ŒreversedMessage1&quot;);</span><br><span class="line">      return this.message</span><br><span class="line">        .split(&quot;&quot;)</span><br><span class="line">        .reverse()</span><br><span class="line">        .join(&quot;&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    now: function() &#123;</span><br><span class="line">      return Date.now();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    reversedMessage2: function() &#123;</span><br><span class="line">      console.log(&quot;æ‰§è¡ŒreversedMessage2&quot;);</span><br><span class="line">      return this.message</span><br><span class="line">        .split(&quot;&quot;)</span><br><span class="line">        .reverse()</span><br><span class="line">        .join(&quot;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-ç›‘å¬watcher"><a href="#6-2-ç›‘å¬watcher" class="headerlink" title="6.2 ç›‘å¬watcher"></a>6.2 ç›‘å¬watcher</h3><ul>
<li>æ›´åŠ çµæ´»é€šç”¨</li>
<li><code>watcher</code>å¯ä»¥æ‰§è¡Œä»»ä½•é€»è¾‘ï¼ŒåŒ…æ‹¬å‡½æ•°èŠ‚æµã€ajaxå¼‚æ­¥è·å–æ•°æ®</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; $data &#125;&#125;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;button @click=&quot;() =&gt; (a += 1)&quot;&gt;a+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data: function() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      a: 1,</span><br><span class="line">      b: &#123; c: 2, d: 3 &#125;,</span><br><span class="line">      e: &#123;</span><br><span class="line">        f: &#123;</span><br><span class="line">          g: 4</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      h: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    a: function(val, oldVal) &#123;</span><br><span class="line">      this.b.c += 1;</span><br><span class="line">      console.log(&quot;new: %s, old: %s&quot;, val, oldVal);</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;b.c&quot;: function(val, oldVal) &#123;</span><br><span class="line">      this.b.d += 1;</span><br><span class="line">      console.log(&quot;new: %s, old: %s&quot;, val, oldVal);</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;b.d&quot;: function(val, oldVal) &#123;</span><br><span class="line">      this.e.f.g += 1;</span><br><span class="line">      console.log(&quot;new: %s, old: %s&quot;, val, oldVal);</span><br><span class="line">    &#125;,</span><br><span class="line">    e: &#123;</span><br><span class="line">      handler: function(val, oldVal) &#123;</span><br><span class="line">        this.h.push(&quot;ğŸ˜„&quot;);</span><br><span class="line">        console.log(&quot;new: %s, old: %s&quot;, val, oldVal);</span><br><span class="line">      &#125;,</span><br><span class="line">      deep: true</span><br><span class="line">    &#125;,</span><br><span class="line">    h(val, oldVal) &#123;</span><br><span class="line">      console.log(&quot;new: %s, old: %s&quot;, val, oldVal);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>watcherä¸­ä½¿ç”¨èŠ‚æµ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; fullName &#125;&#125;</span><br><span class="line"></span><br><span class="line">    &lt;div&gt;firstName: &lt;input v-model=&quot;firstName&quot; /&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;lastName: &lt;input v-model=&quot;lastName&quot; /&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data: function() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      firstName: &quot;Foo&quot;,</span><br><span class="line">      lastName: &quot;Bar&quot;,</span><br><span class="line">      fullName: &quot;Foo Bar&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    firstName: function(val) &#123;</span><br><span class="line">      clearTimeout(this.firstTimeout);</span><br><span class="line">      this.firstTimeout = setTimeout(() =&gt; &#123;</span><br><span class="line">        this.fullName = val + &quot; &quot; + this.lastName;</span><br><span class="line">      &#125;, 500);</span><br><span class="line">    &#125;,</span><br><span class="line">    lastName: function(val) &#123;</span><br><span class="line">      clearTimeout(this.lastTimeout);</span><br><span class="line">      this.lastTimeout = setTimeout(() =&gt; &#123;</span><br><span class="line">        this.fullName = this.firstName + &quot; &quot; + val;</span><br><span class="line">      &#125;, 500);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-computed-vs-watcher"><a href="#6-3-computed-vs-watcher" class="headerlink" title="6.3 computed vs watcher"></a>6.3 computed vs watcher</h3><ul>
<li><code>computed</code> èƒ½åšçš„ï¼Œ<code>watcher</code> éƒ½å¯ä»¥åšï¼Œåä¹‹ä¸è¡Œ</li>
<li>èƒ½ç”¨computedçš„å°½é‡ä½¿ç”¨<code>computed</code></li>
</ul>
<h2 id="ä¸ƒã€ç”Ÿå‘½å‘¨æœŸçš„åº”ç”¨åœºæ™¯å’Œå‡½æ•°å¼ç»„ä»¶"><a href="#ä¸ƒã€ç”Ÿå‘½å‘¨æœŸçš„åº”ç”¨åœºæ™¯å’Œå‡½æ•°å¼ç»„ä»¶" class="headerlink" title="ä¸ƒã€ç”Ÿå‘½å‘¨æœŸçš„åº”ç”¨åœºæ™¯å’Œå‡½æ•°å¼ç»„ä»¶"></a>ä¸ƒã€ç”Ÿå‘½å‘¨æœŸçš„åº”ç”¨åœºæ™¯å’Œå‡½æ•°å¼ç»„ä»¶</h2><h3 id="7-1-ç”Ÿå‘½å‘¨æœŸ"><a href="#7-1-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="7.1 ç”Ÿå‘½å‘¨æœŸ"></a>7.1 ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/12.png" alt="img"></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/13.png" alt="img"></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/14.png" alt="img"></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/15.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; log(&quot;render&quot;) &#125;&#125;</span><br><span class="line">    &#123;&#123; now &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;start = !start&quot;&gt;&#123;&#123; start ? &quot;åœæ­¢&quot; : &quot;å¼€å§‹&quot; &#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import moment from &quot;moment&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data: function() &#123;</span><br><span class="line">    console.log(&quot;data&quot;);</span><br><span class="line">    this.moment = moment;</span><br><span class="line">    this.log = window.console.log;</span><br><span class="line">    return &#123;</span><br><span class="line">      now: moment(new Date()).format(&quot;YYYY-MM-DD HH:mm:ss&quot;),</span><br><span class="line">      start: false</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    start() &#123;</span><br><span class="line">      this.startClock();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeCreate() &#123;</span><br><span class="line">    console.log(&quot;beforeCreate&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log(&quot;created&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeMount() &#123;</span><br><span class="line">    console.log(&quot;beforeMount&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(&quot;mounted&quot;);</span><br><span class="line">    this.startClock();</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeUpdate() &#123;</span><br><span class="line">    console.log(&quot;beforeUpdate&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  updated() &#123;</span><br><span class="line">    console.log(&quot;updated&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy() &#123;</span><br><span class="line">    console.log(&quot;beforeDestroy&quot;);</span><br><span class="line">    clearInterval(this.clockInterval);</span><br><span class="line">  &#125;,</span><br><span class="line">  destroyed() &#123;</span><br><span class="line">    console.log(&quot;destroyed&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    startClock() &#123;</span><br><span class="line">      clearInterval(this.clockInterval);</span><br><span class="line">      if (this.start) &#123;</span><br><span class="line">        this.clockInterval = setInterval(() =&gt; &#123;</span><br><span class="line">          this.now = moment(new Date()).format(&quot;YYYY-MM-DD HH:mm:ss&quot;);</span><br><span class="line">        &#125;, 1000);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰“å°é¡ºåº <code>beforeCreate - data - created - beforeMount - render - mounted</code></p>
</blockquote>
<h3 id="7-2-å‡½æ•°å¼ç»„ä»¶"><a href="#7-2-å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="7.2 å‡½æ•°å¼ç»„ä»¶"></a>7.2 å‡½æ•°å¼ç»„ä»¶</h3><ul>
<li><code>functionalï¼štrue</code></li>
<li>æ— çŠ¶æ€ã€æ— å®ä¾‹ã€æ²¡æœ‰<code>this</code>ä¸Šä¸‹æ–‡ã€æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">// TempVar.js</span><br><span class="line">export default &#123;</span><br><span class="line">  functional: true,</span><br><span class="line">  render: (h, ctx) =&gt; &#123;</span><br><span class="line">    return ctx.scopedSlots.default &amp;&amp; ctx.scopedSlots.default(ctx.props || &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">// Functional.vue</span><br><span class="line">&lt;template functional&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; props &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">// ä½¿ç”¨</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;a-tabs&gt;</span><br><span class="line">      &lt;a-tab-pane key=&quot;Functional&quot; tab=&quot;å‡½æ•°å¼ç»„ä»¶&quot;&gt;</span><br><span class="line">        &lt;Functional :name=&quot;name&quot; /&gt;</span><br><span class="line">        &lt;TempVar</span><br><span class="line">          :var1=&quot;`hello $&#123;name&#125;`&quot;</span><br><span class="line">          :var2=&quot;destroyClock ? &#x27;hello vue&#x27; : &#x27;hello world&#x27;&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;template v-slot=&quot;&#123; var1, var2 &#125;&quot;&gt;</span><br><span class="line">            &#123;&#123; var1 &#125;&#125;</span><br><span class="line">            &#123;&#123; var2 &#125;&#125;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/TempVar&gt;</span><br><span class="line">      &lt;/a-tab-pane&gt;</span><br><span class="line">    &lt;/a-tabs&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Functional from &quot;./Functional&quot;;</span><br><span class="line">import TempVar from &quot;./TempVar&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Functional,</span><br><span class="line">    TempVar</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      destroyClock: false,</span><br><span class="line">      name: &quot;vue&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€VueæŒ‡ä»¤"><a href="#å…«ã€VueæŒ‡ä»¤" class="headerlink" title="å…«ã€VueæŒ‡ä»¤"></a>å…«ã€VueæŒ‡ä»¤</h2><h3 id="8-1-å†…ç½®æŒ‡ä»¤"><a href="#8-1-å†…ç½®æŒ‡ä»¤" class="headerlink" title="8.1 å†…ç½®æŒ‡ä»¤"></a>8.1 å†…ç½®æŒ‡ä»¤</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/16.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;v-text&lt;/h2&gt;</span><br><span class="line">    &lt;div v-text=&quot;&#x27;hello vue&#x27;&quot;&gt;hello world&lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;v-html&lt;/h2&gt;</span><br><span class="line">    &lt;div v-html=&quot;&#x27;&lt;span style=&amp;quot;color: red&amp;quot;&gt;hello vue&lt;/span&gt;&#x27;&quot;&gt;</span><br><span class="line">      hello world</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;v-show&lt;/h2&gt;</span><br><span class="line">    &lt;div v-show=&quot;show&quot;&gt;hello vue&lt;/div&gt;</span><br><span class="line">    &lt;button @click=&quot;show = !show&quot;&gt;change show&lt;/button&gt;</span><br><span class="line">    &lt;h2&gt;v-if v-esle-if v-else&lt;/h2&gt;</span><br><span class="line">    &lt;div v-if=&quot;number === 1&quot;&gt;hello vue &#123;&#123; number &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;number === 2&quot;&gt;hello world &#123;&#123; number &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div v-else&gt;hello geektime &#123;&#123; number &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;v-for v-bind&lt;/h2&gt;</span><br><span class="line">    &lt;div v-for=&quot;num in [1, 2, 3]&quot; v-bind:key=&quot;num&quot;&gt;hello vue &#123;&#123; num &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;v-on&lt;/h2&gt;</span><br><span class="line">    &lt;button v-on:click=&quot;number = number + 1&quot;&gt;number++&lt;/button&gt;</span><br><span class="line">    &lt;h2&gt;v-model&lt;/h2&gt;</span><br><span class="line">    &lt;input v-model=&quot;message&quot; /&gt;</span><br><span class="line">    &lt;h2&gt;v-pre&lt;/h2&gt;</span><br><span class="line">    &lt;div v-pre&gt;&#123;&#123; this will not be compiled &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;v-once&lt;/h2&gt;</span><br><span class="line">    &lt;div v-once&gt;</span><br><span class="line">      &#123;&#123; number &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data: function() &#123;</span><br><span class="line">    this.log = window.console.log;</span><br><span class="line">    return &#123;</span><br><span class="line">      show: true,</span><br><span class="line">      number: 1,</span><br><span class="line">      message: &quot;hello&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="8-2-è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#8-2-è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="8.2 è‡ªå®šä¹‰æŒ‡ä»¤"></a>8.2 è‡ªå®šä¹‰æŒ‡ä»¤</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/17.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;show = !show&quot;&gt;</span><br><span class="line">      é”€æ¯</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;button v-if=&quot;show&quot; v-append-text=&quot;`hello $&#123;number&#125;`&quot; @click=&quot;number++&quot;&gt;</span><br><span class="line">      æŒ‰é’®</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  directives: &#123;</span><br><span class="line">    appendText: &#123;</span><br><span class="line">      bind() &#123;</span><br><span class="line">        console.log(&quot;bind&quot;);</span><br><span class="line">      &#125;,</span><br><span class="line">      inserted(el, binding) &#123;</span><br><span class="line">        el.appendChild(document.createTextNode(binding.value));</span><br><span class="line">        console.log(&quot;inserted&quot;, el, binding);</span><br><span class="line">      &#125;,</span><br><span class="line">      update() &#123;</span><br><span class="line">        console.log(&quot;update&quot;);</span><br><span class="line">      &#125;,</span><br><span class="line">      componentUpdated(el, binding) &#123;</span><br><span class="line">        el.removeChild(el.childNodes[el.childNodes.length - 1]);</span><br><span class="line">        el.appendChild(document.createTextNode(binding.value));</span><br><span class="line">        console.log(&quot;componentUpdated&quot;);</span><br><span class="line">      &#125;,</span><br><span class="line">      unbind() &#123;</span><br><span class="line">        console.log(&quot;unbind&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      number: 1,</span><br><span class="line">      show: true</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ä¹ã€templateå’Œjsx"><a href="#ä¹ã€templateå’Œjsx" class="headerlink" title="ä¹ã€templateå’Œjsx"></a>ä¹ã€templateå’Œjsx</h2><h3 id="9-1-JSX-VS-template"><a href="#9-1-JSX-VS-template" class="headerlink" title="9.1 JSX VS template"></a>9.1 JSX VS template</h3><p><strong>Template</strong></p>
<ul>
<li>å­¦ä¹ æˆæœ¬ä½</li>
<li>å¤§é‡å†…ç½®æŒ‡ä»¤ç®€åŒ–å¼€å‘</li>
<li>ç»„ä»¶ä½œç”¨åŸŸcss</li>
<li>ä½†çµæ´»æ€§ä½</li>
</ul>
<p><strong>JSX</strong></p>
<ul>
<li>æ€»ä½“ä¸Šå¾ˆçµæ´»</li>
</ul>
<h3 id="9-2-ä»¥ä¸‹æ˜¯jsxå†™æ³•"><a href="#9-2-ä»¥ä¸‹æ˜¯jsxå†™æ³•" class="headerlink" title="9.2 ä»¥ä¸‹æ˜¯jsxå†™æ³•"></a>9.2 ä»¥ä¸‹æ˜¯jsxå†™æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br></pre></td><td class="code"><pre><span class="line">// index.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Props from &quot;./Props&quot;;</span><br><span class="line">import Event from &quot;./Event&quot;;</span><br><span class="line">import Slot from &quot;./Slot&quot;;</span><br><span class="line">import BigProps from &quot;./BigProps&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Props,</span><br><span class="line">    Event,</span><br><span class="line">    SlotDemo: Slot,</span><br><span class="line">    BigProps</span><br><span class="line">  &#125;,</span><br><span class="line">  data: () =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;&quot;,</span><br><span class="line">      type: &quot;success&quot;,</span><br><span class="line">      bigPropsName: &quot;Hello world!&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handlePropChange(val) &#123;</span><br><span class="line">      this.type = val;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleEventChange(val) &#123;</span><br><span class="line">      this.name = val;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleBigPropChange(val) &#123;</span><br><span class="line">      this.bigPropsName = val;</span><br><span class="line">    &#125;,</span><br><span class="line">    getDefault() &#123;</span><br><span class="line">      return [&lt;p&gt;default slot&lt;/p&gt;];</span><br><span class="line">    &#125;,</span><br><span class="line">    getTitle() &#123;</span><br><span class="line">      return [&lt;p&gt;title slot1&lt;/p&gt;, &lt;p&gt;title slot2&lt;/p&gt;];</span><br><span class="line">    &#125;,</span><br><span class="line">    getItem(props) &#123;</span><br><span class="line">      return [&lt;p&gt;&#123;`item slot-scope $&#123;JSON.stringify(props)&#125;`&#125;&lt;/p&gt;];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123;</span><br><span class="line">      type,</span><br><span class="line">      handlePropChange,</span><br><span class="line">      name,</span><br><span class="line">      handleEventChange,</span><br><span class="line">      bigPropsName,</span><br><span class="line">      getDefault,</span><br><span class="line">      getTitle,</span><br><span class="line">      getItem,</span><br><span class="line">      handleBigPropChange</span><br><span class="line">    &#125; = this;</span><br><span class="line">    const slotDemoProps = &#123;</span><br><span class="line">      scopedSlots: &#123;</span><br><span class="line">        item(props) &#123;</span><br><span class="line">          return `item slot-scope $&#123;JSON.stringify(props)&#125;`;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      props: &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    const bigProps = &#123;</span><br><span class="line">      props: &#123;</span><br><span class="line">        onChange: handleBigPropChange</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;a-tabs&gt;</span><br><span class="line">          &lt;a-tab-pane key=&quot;props&quot; tab=&quot;å±æ€§&quot;&gt;</span><br><span class="line">            &lt;Props</span><br><span class="line">              name=&quot;Hello Vueï¼&quot;</span><br><span class="line">              type=&#123;type&#125;</span><br><span class="line">              isVisible=&#123;false&#125;</span><br><span class="line">              &#123;...&#123; props: &#123; onChange: handlePropChange &#125; &#125;&#125;</span><br><span class="line">              title=&quot;å±æ€§Demo&quot;</span><br><span class="line">              class=&quot;test1&quot;</span><br><span class="line">              class=&#123;[&quot;test1&quot;, &quot;test2&quot;]&#125;</span><br><span class="line">              style=&#123;&#123; marginTop: &quot;10px&quot; &#125;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/a-tab-pane&gt;</span><br><span class="line">          &lt;a-tab-pane key=&quot;event&quot; tab=&quot;äº‹ä»¶&quot;&gt;</span><br><span class="line">            &lt;Event name=&#123;name&#125; onChange=&#123;handleEventChange&#125; /&gt;</span><br><span class="line">          &lt;/a-tab-pane&gt;</span><br><span class="line">          &lt;a-tab-pane key=&quot;slot&quot; tab=&quot;æ’æ§½&quot;&gt;</span><br><span class="line">            &lt;SlotDemo &#123;...slotDemoProps&#125;&gt;</span><br><span class="line">              &lt;p&gt;default slot&lt;/p&gt;</span><br><span class="line">              &lt;p slot=&quot;title&quot;&gt;title slot1&lt;/p&gt;</span><br><span class="line">              &lt;p slot=&quot;title&quot;&gt;title slot2&lt;/p&gt;</span><br><span class="line">            &lt;/SlotDemo&gt;</span><br><span class="line">          &lt;/a-tab-pane&gt;</span><br><span class="line">          &lt;a-tab-pane key=&quot;bigProps&quot; tab=&quot;å¤§å±æ€§&quot;&gt;</span><br><span class="line">            &lt;BigProps</span><br><span class="line">              name=&#123;bigPropsName&#125;</span><br><span class="line">              &#123;...bigProps&#125;</span><br><span class="line">              slotDefault=&#123;getDefault()&#125;</span><br><span class="line">              slotTitle=&#123;getTitle()&#125;</span><br><span class="line">              slotScopeItem=&#123;getItem&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/a-tab-pane&gt;</span><br><span class="line">        &lt;/a-tabs&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// bigProps</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;BigProps&quot;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    VNodes: &#123;</span><br><span class="line">      functional: true,</span><br><span class="line">      render: (h, ctx) =&gt; ctx.props.vnodes</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: String,</span><br><span class="line">    onChange: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    slotDefault: Array,</span><br><span class="line">    slotTitle: Array,</span><br><span class="line">    slotScopeItem: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange() &#123;</span><br><span class="line">      this.onChange(&quot;Hello vue!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; name, handleChange, slotDefault, slotTitle, slotScopeItem &#125; = this;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;name&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;button onClick=&#123;handleChange&#125;&gt;change name&lt;/button&gt;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &#123;slotDefault&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &#123;slotTitle&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &#123;slotScopeItem(&#123; value: &quot;vue&quot; &#125;)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// Events.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;EventDemo&quot;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: String</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange(e) &#123;</span><br><span class="line">      this.$emit(&quot;change&quot;, e.target.value);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleDivClick() &#123;</span><br><span class="line">      this.$emit(&quot;change&quot;, &quot;&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleClick(e, stop) &#123;</span><br><span class="line">      console.log(&quot;stop&quot;, stop);</span><br><span class="line">      if (stop) &#123;</span><br><span class="line">        e.stopPropagation();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; name, handleChange, handleDivClick, handleClick &#125; = this;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        name: &#123;name || &quot;--&quot;&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;input value=&#123;name&#125; onChange=&#123;handleChange&#125; /&gt;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;div onClick=&#123;handleDivClick&#125;&gt;</span><br><span class="line">          &lt;button onClick=&#123;handleClick&#125;&gt;é‡ç½®æˆåŠŸ&lt;/button&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">          &lt;button onClick=&#123;e =&gt; handleClick(e, true)&#125;&gt;é‡ç½®å¤±è´¥&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// Props.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;PropsDemo&quot;,</span><br><span class="line">  // inheritAttrs: false,</span><br><span class="line">  // props: [&#x27;name&#x27;, &#x27;type&#x27;, &#x27;list&#x27;, &#x27;isVisible&#x27;],</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: String,</span><br><span class="line">    type: &#123;</span><br><span class="line">      validator: function(value) &#123;</span><br><span class="line">        // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª</span><br><span class="line">        return [&quot;success&quot;, &quot;warning&quot;, &quot;danger&quot;].includes(value);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    list: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è·å–</span><br><span class="line">      default: () =&gt; []</span><br><span class="line">    &#125;,</span><br><span class="line">    isVisible: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    &#125;,</span><br><span class="line">    onChange: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleClick() &#123;</span><br><span class="line">      // ä¸è¦è¿™ä¹ˆåšã€ä¸è¦è¿™ä¹ˆåšã€ä¸è¦è¿™ä¹ˆåš</span><br><span class="line">      //this.type = &quot;warning&quot;;</span><br><span class="line"></span><br><span class="line">      // å¯ä»¥ï¼Œè¿˜å¯ä»¥æ›´å¥½</span><br><span class="line">      this.onChange(this.type === &quot;success&quot; ? &quot;warning&quot; : &quot;success&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; name, type, list, isVisible, handleClick &#125; = this;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        name: &#123;name&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        type: &#123;type&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        list: &#123;list&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        isVisible: &#123;isVisible&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;button onClick=&#123;handleClick&#125;&gt;change type&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// Slot</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;SlotDemo&quot;,</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; $scopedSlots &#125; = this;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;$scopedSlots.default()&#125;</span><br><span class="line">        &#123;$scopedSlots.title()&#125;</span><br><span class="line">        &#123;$scopedSlots.item(&#123; value: &quot;vue&quot; &#125;)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="åã€ä¸ºä»€ä¹ˆéœ€è¦vuex"><a href="#åã€ä¸ºä»€ä¹ˆéœ€è¦vuex" class="headerlink" title="åã€ä¸ºä»€ä¹ˆéœ€è¦vuex"></a>åã€ä¸ºä»€ä¹ˆéœ€è¦vuex</h2><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/19.png" alt="img"></p>
<p><strong>Vuexè¿è¡Œæœºåˆ¶</strong></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/20.png" alt="img"></p>
<p><strong>åŸºæœ¬ä¾‹å­</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    count: 0,</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    increment(state) &#123;</span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    increment(&#123;commit&#125;) &#123;</span><br><span class="line">      setTimeout(()=&gt;&#123;</span><br><span class="line">        // state.count++ // ä¸è¦å¯¹stateè¿›è¡Œæ›´æ”¹æ“ä½œï¼Œåº”è¯¥é€šè¿‡commitäº¤ç»™mutationså»å¤„ç†</span><br><span class="line">        commit(&#x27;increment&#x27;)</span><br><span class="line">      &#125;, 3000)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    doubleCount(state) &#123;</span><br><span class="line">      return state.count * 2</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  store,</span><br><span class="line">  render: h =&gt; h(App),</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br><span class="line">// App.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &#123;&#123;count&#125;&#125;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &#123;&#123;$store.getters.doubleCount&#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;$store.commit(&#x27;increment&#x27;)&quot;&gt;count++&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;$store.dispatch(&#x27;increment&#x27;)&quot;&gt;count++&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;app&#x27;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    count() &#123;</span><br><span class="line">      return this.$store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="åä¸€ã€vuexæ ¸å¿ƒæ¦‚å¿µå’Œåº•å±‚åŸç†"><a href="#åä¸€ã€vuexæ ¸å¿ƒæ¦‚å¿µå’Œåº•å±‚åŸç†" class="headerlink" title="åä¸€ã€vuexæ ¸å¿ƒæ¦‚å¿µå’Œåº•å±‚åŸç†"></a>åä¸€ã€vuexæ ¸å¿ƒæ¦‚å¿µå’Œåº•å±‚åŸç†</h2><h3 id="11-1-æ ¸å¿ƒæ¦‚å¿µ"><a href="#11-1-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="11.1 æ ¸å¿ƒæ¦‚å¿µ"></a>11.1 æ ¸å¿ƒæ¦‚å¿µ</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/23.png" alt="img"></p>
<h3 id="11-2-åº•å±‚åŸç†"><a href="#11-2-åº•å±‚åŸç†" class="headerlink" title="11.2 åº•å±‚åŸç†"></a>11.2 åº•å±‚åŸç†</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/22.png" alt="img"></p>
<p><strong>ç®€åŒ–ç‰ˆæœ¬çš„vuex</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">const Store = function Store (options = &#123;&#125;) &#123;</span><br><span class="line">  const &#123;state = &#123;&#125;, mutations=&#123;&#125;&#125; = options</span><br><span class="line">  </span><br><span class="line">  // æŠŠstateè¿›è¡Œå“åº”å¼å’Œvueå†™æ³•ä¸€æ ·</span><br><span class="line">  this._vm = new Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">      $$state: state</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  this._mutations = mutations</span><br><span class="line">&#125;</span><br><span class="line">Store.prototype.commit = function(type, payload)&#123;</span><br><span class="line">  if(this._mutations[type]) &#123;</span><br><span class="line">    this._mutations[type](this.state, payload)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Object.defineProperties(Store.prototype, &#123; </span><br><span class="line">  // å½“æˆ‘ä»¬å–å€¼ å¦‚ $store.getter.countçš„æ—¶å€™å°±ä¼šè§¦å‘è¿™é‡Œ</span><br><span class="line">  state: &#123; </span><br><span class="line">    get: function()&#123;</span><br><span class="line">      return this._vm._data.$$state</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">export default &#123;Store&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åäºŒã€vuexæœ€ä½³å®è·µ"><a href="#åäºŒã€vuexæœ€ä½³å®è·µ" class="headerlink" title="åäºŒã€vuexæœ€ä½³å®è·µ"></a>åäºŒã€vuexæœ€ä½³å®è·µ</h2><h3 id="12-1-æ ¸å¿ƒæ¦‚å¿µ"><a href="#12-1-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="12.1 æ ¸å¿ƒæ¦‚å¿µ"></a>12.1 æ ¸å¿ƒæ¦‚å¿µ</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/23.png" alt="img"></p>
<h3 id="12-2-ä½¿ç”¨å¸¸é‡ä»£æ›¿Mutationäº‹ä»¶ç±»å‹"><a href="#12-2-ä½¿ç”¨å¸¸é‡ä»£æ›¿Mutationäº‹ä»¶ç±»å‹" class="headerlink" title="12.2 ä½¿ç”¨å¸¸é‡ä»£æ›¿Mutationäº‹ä»¶ç±»å‹"></a>12.2 ä½¿ç”¨å¸¸é‡ä»£æ›¿Mutationäº‹ä»¶ç±»å‹</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/24.png" alt="img"></p>
<h3 id="12-3-å‘½åç©ºé—´"><a href="#12-3-å‘½åç©ºé—´" class="headerlink" title="12.3 å‘½åç©ºé—´"></a>12.3 å‘½åç©ºé—´</h3><blockquote>
<p>å¯¹æ‰€æœ‰æ¨¡å—å¼€å¯å‘½åç©ºé—´</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/25.png" alt="img"></p>
<h3 id="12-4-å®è·µä¾‹å­"><a href="#12-4-å®è·µä¾‹å­" class="headerlink" title="12.4 å®è·µä¾‹å­"></a>12.4 å®è·µä¾‹å­</h3><blockquote>
<p>DEMOåœ°å€ <a target="_blank" rel="noopener" href="https://github.com/poetries/vuex-demo">https://github.com/poetries/vuex-demo</a></p>
</blockquote>
<h2 id="åä¸‰ã€vue-routerä½¿ç”¨åœºæ™¯"><a href="#åä¸‰ã€vue-routerä½¿ç”¨åœºæ™¯" class="headerlink" title="åä¸‰ã€vue-routerä½¿ç”¨åœºæ™¯"></a>åä¸‰ã€vue-routerä½¿ç”¨åœºæ™¯</h2><h3 id="13-1-è§£å†³çš„é—®é¢˜"><a href="#13-1-è§£å†³çš„é—®é¢˜" class="headerlink" title="13.1 è§£å†³çš„é—®é¢˜"></a>13.1 è§£å†³çš„é—®é¢˜</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/26.png" alt="img"></p>
<h3 id="13-2-ä½¿ç”¨æ–¹å¼"><a href="#13-2-ä½¿ç”¨æ–¹å¼" class="headerlink" title="13.2 ä½¿ç”¨æ–¹å¼"></a>13.2 ä½¿ç”¨æ–¹å¼</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/vue/27.png" alt="img"></p>
<h3 id="13-3-ä¾‹å­"><a href="#13-3-ä¾‹å­" class="headerlink" title="13.3 ä¾‹å­"></a>13.3 ä¾‹å­</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">// main.js</span><br><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import VueRouter from &#x27;vue-router&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import routes from &#x27;./routes&#x27;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">  mode: &#x27;history&#x27;,</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  render: h =&gt; h(App),</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br><span class="line">// App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2&gt;router demo&lt;/h2&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;app&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-family: &#x27;Avenir&#x27;, Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: #2c3e50;</span><br><span class="line">  margin-top: 60px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">// routes.js</span><br><span class="line">import RouterDemo from &#x27;./components/RouterDemo&#x27;</span><br><span class="line">import RouterChildrenDemo from &#x27;./components/RouterChildrenDemo&#x27;</span><br><span class="line"></span><br><span class="line">const routes = [</span><br><span class="line">  &#123; path: &#x27;/foo&#x27;, component: RouterDemo, name: &#x27;1&#x27; &#125;,</span><br><span class="line">  &#123; path: &#x27;/bar&#x27;, component: RouterDemo, name: &#x27;2&#x27; &#125;,</span><br><span class="line">  // å½“ /user/:id åŒ¹é…æˆåŠŸï¼Œ</span><br><span class="line">  // RouterDemo ä¼šè¢«æ¸²æŸ“åœ¨ App çš„ &lt;router-view /&gt; ä¸­</span><br><span class="line">  &#123; path: &#x27;/user/:id&#x27;, </span><br><span class="line">    component: RouterDemo, </span><br><span class="line">    name: &#x27;3&#x27;,</span><br><span class="line">    props: true,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        // å½“ /user/:id/profile åŒ¹é…æˆåŠŸï¼Œ</span><br><span class="line">        // RouterChildrenDemo ä¼šè¢«æ¸²æŸ“åœ¨ RouterDemo çš„ &lt;router-view/&gt; ä¸­</span><br><span class="line">        path: &#x27;profile&#x27;,</span><br><span class="line">        component: RouterChildrenDemo,</span><br><span class="line">        name: &#x27;3-1&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        // å½“ /user/:id/posts åŒ¹é…æˆåŠŸ</span><br><span class="line">        // RouterChildrenDemo ä¼šè¢«æ¸²æŸ“åœ¨ RouterDemo çš„ &lt;router-view/&gt; ä¸­</span><br><span class="line">        path: &#x27;posts&#x27;,</span><br><span class="line">        component: RouterChildrenDemo</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; path: &#x27;/a&#x27;, redirect: &#x27;/bar&#x27; &#125;,</span><br><span class="line">  &#123; path: &#x27;*&#x27;, component: RouterDemo, name: &#x27;404&#x27; &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">export default routes</span><br></pre></td></tr></table></figure>

<h2 id="åå››ã€è·¯ç”±çš„ç±»å‹åŠåº•å±‚åŸç†"><a href="#åå››ã€è·¯ç”±çš„ç±»å‹åŠåº•å±‚åŸç†" class="headerlink" title="åå››ã€è·¯ç”±çš„ç±»å‹åŠåº•å±‚åŸç†"></a>åå››ã€è·¯ç”±çš„ç±»å‹åŠåº•å±‚åŸç†</h2><p><strong>è·¯ç”±çš„ç±»å‹</strong></p>
<ul>
<li><code>Hash</code>æ¨¡å¼ï¼šæ— æ³•ä½¿ç”¨é”šç‚¹å®šä½</li>
<li><code>History</code>æ¨¡å¼ï¼šéœ€è¦åç«¯é…åˆï¼ŒIE9ä¸å…¼å®¹ï¼Œå¯ä»¥ä½¿ç”¨å¼ºåˆ¶åˆ·æ–°å¤„ç†</li>
</ul>
<p><strong>åŸç†</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/07/31/Vue/vue-%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/" data-id="cl7icg7dd011hugunbdf2allw" data-title="vue-æ ¸å¿ƒçŸ¥è¯†æ€»ç»“" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue/vueå’ŒReactçš„åŒºåˆ«" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/07/28/Vue/vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/" class="article-date">
  <time class="dt-published" datetime="2018-07-28T02:46:19.000Z" itemprop="datePublished">2018-07-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/28/Vue/vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/">vueå’Œreactçš„åŒºåˆ«</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>vueå’Œreactæ˜¯å½“å‰æœ€ç«çš„ä¸¤ä¸ªå‰ç«¯æ¡†æ¶ï¼Œvueçš„å‘å±•å¾ˆå¿«ï¼Œä½†æ˜¯ç›®å‰æ¥è¯´ï¼Œreactçš„ç”Ÿæ€ç³»ç»Ÿä¼šæ›´å¼ºå¤§ï¼Œä¸–ç•Œä¸Šä½¿ç”¨è¿™ä¸ªæ¡†æ¶çš„äººä¹Ÿå¾ˆå¤šã€‚å¦å¤–ï¼Œreactæ˜¯facebookå®˜æ–¹ç»´æŠ¤çš„ï¼Œè€Œvueæ˜¯å°¤é›¨æºªæœ¬äººç»´æŠ¤çš„ã€‚å¹¶ä¸”åœ¨å…¶ä»–å‘¨è¾¹åº“ï¼Œå¦‚reactçš„react-rouerå’Œreduxï¼Œæ˜¯reactç¤¾åŒºåœ¨ç»´æŠ¤çš„ã€‚è€Œvueçš„vuexå’Œvue-routeréƒ½æ˜¯å°¤é›¨æºªåœ¨ç»´æŠ¤çš„ã€‚</p>
<p>1ã€éƒ½åœ¨ä½¿ç”¨Virtual DOMï¼Œ</p>
<p>å½“ç„¶ï¼Œä¸å¾—ä¸è¯´ï¼Œvueçš„è™šæ‹ŸDOMä¸€å®šæ˜¯ä»reactè¿™é‡Œæ¨¡ä»¿çš„ï¼Œä½†æ˜¯å¥½çš„ä¸œè¥¿å°±æ˜¯éœ€è¦è¢«æ¨¡ä»¿çš„ï¼Œè€Œæ²¡æœ‰å¿…è¦é‡å¤çš„é€ è½®å­ï¼Œæ‰€ä»¥æ²¡æ¯›ç—…ã€‚ä½¿ç”¨è™šæ‹ŸDOMçš„å¥½å¤„å°±å¾ˆå¤šäº†ï¼Œæ¯”å¦‚é€šè¿‡è™šæ‹ŸDOMç»“åˆdiffç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°è§£å†³DOMæ“ä½œçš„æ€§èƒ½é—®é¢˜ï¼Œå³ç”Ÿæˆè™šæ‹ŸDOMçš„æ—¶é—´+diffç®—æ³•æ—¶é—´+patchæ—¶é—´&lt;ä¿®æ”¹DOMçœä¸‹æ¥çš„æ—¶é—´ï¼Œå½“ç„¶ï¼Œå¦‚æœæŸä¸€å¤©DOMæ“ä½œå¾ˆå¿«ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜äº†ã€‚reactå¯èƒ½å°±ä¼šè¢«å…¶ä»–æ¡†æ¶å–ä»£äº†ã€‚å¦å¤–ï¼Œä½¿ç”¨è™šæ‹ŸDOMï¼Œå¯ä»¥ä½¿å¾—JavaScriptçš„åº”ç”¨ä¸ä»…ä»…å±€é™äºç½‘é¡µï¼Œè¿˜å¯ä»¥æ˜¯iosã€å®‰å“ç­‰ï¼Œå› ä¸ºåœ¨reactä¸­æ²¡æœ‰ç”¨åˆ°htmlï¼Œç”¨åˆ°çš„æ—¶jsxï¼Œè™šæ‹Ÿdomï¼Œæœ€åç”Ÿæˆçš„å¯ä»¥æ˜¯ç”¨åœ¨ç½‘é¡µä¸Šçš„htmlï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨åœ¨å®‰å“å’Œiosçš„æ§ä»¶ï¼Œæ‰€ä»¥ï¼Œreact-nativeçš„å¤§ç«ä¹Ÿå°±å¯æƒ³è€ŒçŸ¥äº†ã€‚ã€</p>
<p>2ã€éƒ½æä¾›äº†å“åº”å¼ï¼ˆReactiveï¼‰å’Œç»„ä»¶åŒ–ï¼ˆComposableï¼‰çš„è§†å›¾ç»„ä»¶ã€‚</p>
<p>reactå’Œvueä¸­çš„ç»„ä»¶éƒ½æ˜¯æ ¸å¿ƒï¼Œæ˜¯æ•´ä¸ªæ¡†æ¶çš„çµé­‚ï¼Œä¹‹å‰æˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯ä»¥é¡µé¢ä¸ºåŸºæœ¬å•ä½çš„ï¼Œä½†æ˜¯å´ä¸çŸ¥é“ç»„ä»¶çš„å¥½å¤„ã€‚</p>
<p>é¦–å…ˆé€šè¿‡ç»„ä»¶åŒ–ä»¥åï¼Œè¿™ä¸ªç»„ä»¶å°±æ˜¯å¯å¤ç”¨çš„äº†ï¼Œæ¯”å¦‚å¦‚æœä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å†™ä¸€ä¸ªç½‘ç«™ï¼Œå¦‚æœæ ‡é¢˜å’Œç»“å°¾éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£æˆ‘ä»¬å¯èƒ½ä¼šä¸æ–­çš„å¤åˆ¶ã€ç²˜è´´ï¼Œä½†æ˜¯å‘¢ï¼Œå¦‚æœä½¿ç”¨äº†ç»„ä»¶åŒ–çš„æ€æƒ³ï¼Œåªéœ€è¦å†™å¥½ç»„ä»¶ï¼Œç„¶ååœ¨éœ€è¦çš„åœ°æ–¹æ’å…¥ç»„ä»¶å³å¯ã€‚</p>
<p>åˆæ¯”å¦‚vueä¸­çš„å•æ–‡ä»¶ç»„ä»¶ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªç»„ä»¶ï¼Œå°±çŸ¥é“æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Œå¹¶ä¸”csså’Œjséƒ½å¯ä»¥å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œcssé€šè¿‡å±æ€§scopedå¯ä»¥é˜²æ­¢cssçš„ç±»åæ±¡æŸ“ã€‚è€Œå¯¹äºtemplateä¹Ÿå¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒé‡å¤çš„é—®é¢˜ã€‚</p>
<p>åŸºäºreactçš„UIåº“ant.designï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥è°ƒç”¨è¿™äº›ç»„ä»¶ï¼Œå¤§å¤§åœ°åŠ å¿«äº†å‰ç«¯å¼€å‘çš„é€Ÿåº¦å’Œæ•ˆç‡ï¼Œæ‰€ä»¥ï¼Œç»„ä»¶çš„ä½¿ç”¨ï¼Œç»å¯¹æ˜¯å‰ç«¯çš„ä¸€å°æ­¥ï¼Œå†å²çš„ä¸€å¤§æ­¥ã€‚</p>
<p>3ã€éƒ½å°†æ³¨æ„åŠ›é›†ä¸­ä¿æŒåœ¨æ ¸å¿ƒåº“ï¼Œè€Œå°†å…¶ä»–åŠŸèƒ½å¦‚è·¯ç”±å’Œå…¨å±€çŠ¶æ€ç®¡ç†äº¤ç»™ç›¸å…³çš„åº“ã€‚</p>
<p>å³vueå’Œreactéƒ½æ˜¯ä¸“æ³¨äºè§†å›¾çš„æ¡†æ¶ï¼Œåªæ˜¯åœ¨å±€éƒ¨åŒºåŸŸï¼Œvueæä¾›äº†åŒå‘æ•°æ®ç»‘å®šï¼Œè¿™æ ·æ›´æœ‰åˆ©äºæˆ‘ä»¬å¤„ç†è¡¨å•ç­‰é—®é¢˜ï¼Œè€Œreactåœ¨è¿™æ–¹é¢å°±æœ‰äº†ä¸€å®šçš„åŠ£åŠ¿ã€‚ã€‚</p>
<p>è€Œå¦‚æœå¸Œæœ›åšå¤§å‹çš„é¡¹ç›®ï¼Œå¯¹äºvueæ¥è¯´ï¼Œå°±å¯ä»¥ä½¿ç”¨vue-routerï¼Œæ¥æ„å»ºå¤§å‹ç½‘ç«™çš„è·¯ç”±ï¼›çŠ¶æ€å¤æ‚ï¼Œä¸å¥½ç®¡äº†ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨vuexï¼›æ‰€ä»¥ï¼Œè¿™ä¹Ÿå°±æ˜¯å®˜ç½‘æ‰€è¯´çš„æ¸è¿›å¼çš„æ¡†æ¶äº†ã€‚åŒæ ·çš„ï¼Œreactä¹Ÿæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ï¼ŒåŒ…æ‹¬react-routerå’Œreduxï¼Œæ–¹ä¾¿æˆ‘ä»¬æ„å»ºå¤§å‹åº”ç”¨ã€‚åªæ˜¯å‰è€…çš„å‘¨è¾¹åº“æ˜¯ç”±å°¤é›¨æºªç»´æŠ¤ï¼Œåè€…æ˜¯ç”±reactåºå¤§çš„ç¤¾åŒºç»´æŠ¤çš„ã€‚</p>
<p>4ã€vueæ¯”reactæ›´å®¹æ˜“ä¸Šæ‰‹ã€‚</p>
<p>è¿™ä¸€ç‚¹æ˜¯æ¯‹åº¸ç½®ç–‘çš„ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå› ä¸ºå¯¹äºvueï¼Œæ— è®ºä½ æ˜¯ä½¿ç”¨webpackè¿˜æ˜¯broserifyï¼Œvue-cliéƒ½å¯ä»¥å¾ˆå¥½åœ°æ»¡è¶³ä½ çš„å¼€å‘ä»»åŠ¡ã€‚</p>
<p>å­¦ä¹ vueï¼Œæˆ‘ä»¬åªéœ€è¦æŒæ¡ä¸­çº§çš„htmlã€cssã€jså³å¯ï¼Œåœ¨headä¸­å¼•å…¥ä¸€ä¸ªvue.jsåº“ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚å¹¶ä¸”å¯¹äºæ•°æ®åŒå‘ç»‘å®šã€æŒ‡å®šç­‰éƒ½å¯ä»¥å¾ˆå¥½åœ°ä½“ç°ã€‚</p>
<p>ä½†æ˜¯reactçš„å­¦ä¹ ä¼šæ›´åŠ å¤æ‚ä¸€äº›ï¼Œreactéœ€è¦æœ‰ES6çš„åŸºç¡€ï¼Œå› ä¸ºreactç»„ä»¶çš„åˆ›å»ºå¤šæ˜¯ä½¿ç”¨es6çš„classæ¥åˆ›å»ºçš„ï¼Œæ‰€ä»¥ä¼šæ›´åŠ éº»çƒ¦ä¸€äº›ï¼Œå¹¶ä¸”å¯¹äºJSXè¯­æ³•ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬çš„ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬è¯´vueæ›´å®¹æ˜“ä¸Šæ‰‹ã€‚</p>
<p>5ã€æ€§èƒ½éƒ½å¾ˆå¥½ã€‚</p>
<p>vueå’Œreactéƒ½é‡‡ç”¨äº†è™šæ‹ŸDOMçš„æ–¹å¼ï¼Œæ‰€ä»¥åœ¨æ€§èƒ½æ–¹é¢æ˜¯éå¸¸åœ°æ¥è¿‘çš„ï¼Œè¿™ä¸ªæ— éœ€å¤šè¯´ï¼Œ</p>
<p>6ã€vueçš„ä¼˜åŒ–åšçš„è¦æ¯”reactå¥½ä¸€äº›ã€‚</p>
<p>åœ¨Reactåº”ç”¨ä¸­ï¼Œå½“æŸä¸ªç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šä»¥è¯¥ç»„ä»¶ä¸ºæ ¹ï¼Œé‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶å­æ ‘ã€‚å¦‚è¦é¿å…ä¸å¿…è¦çš„å­ç»„ä»¶çš„é‡æ¸²æŸ“ï¼Œä½ éœ€è¦åœ¨æ‰€æœ‰å¯èƒ½çš„åœ°æ–¹ä½¿ç”¨PureComponentï¼Œæˆ–æ˜¯æ‰‹åŠ¨å®ç°shouldComponentUpdateæ–¹æ³•ã€‚åŒæ—¶ä½ å¯èƒ½ä¼šéœ€è¦ä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„æ¥ä½¿å¾—ä½ çš„ç»„ä»¶æ›´å®¹æ˜“è¢«ä¼˜åŒ–ã€‚ç„¶è€Œï¼Œä½¿ç”¨PureComponentå’ŒshouldComponentUpdateæ—¶ï¼Œéœ€è¦ä¿è¯è¯¥ç»„ä»¶çš„æ•´ä¸ªå­æ ‘çš„æ¸²æŸ“è¾“å‡ºéƒ½æ˜¯ç”±è¯¥ç»„ä»¶çš„propsæ‰€å†³å®šçš„ã€‚å¦‚æœä¸ç¬¦åˆè¿™ä¸ªæƒ…å†µï¼Œé‚£ä¹ˆæ­¤ç±»ä¼˜åŒ–å°±ä¼šå¯¼è‡´éš¾ä»¥å¯Ÿè§‰çš„æ¸²æŸ“ç»“æœä¸ä¸€è‡´ã€‚è¿™ä½¿å¾—Reactä¸­çš„ç»„ä»¶ä¼˜åŒ–ä¼´éšç€ç›¸å½“çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚</p>
<p>è€Œåœ¨åšvueç›¸å…³çš„é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å»æ“å¿ƒæ˜¯å¦ä¼šäº§ç”Ÿä¸å¿…è¦çš„ç»„ä»¶æ¸²æŸ“ï¼Œå› ä¸ºvueå·²ç»æŠŠè¿™äº›éº»çƒ¦çš„ä¸œè¥¿å¾ˆå¥½çš„è§£å†³äº†ã€‚</p>
<p>7ã€vueå’ŒreactåŒæ ·éƒ½æ”¯æŒæœ¬åœ°æ¸²æŸ“ã€‚</p>
<p>React Nativeèƒ½ä½¿ä½ ç”¨ç›¸åŒçš„ç»„ä»¶æ¨¡å‹ç¼–å†™æœ‰æœ¬åœ°æ¸²æŸ“èƒ½åŠ›çš„APPï¼ˆiOSå’ŒAndroidï¼‰ã€‚èƒ½åŒæ—¶è·¨å¤šå¹³å°å¼€å‘ï¼Œå¯¹å¼€å‘è€…æ˜¯éå¸¸æ£’çš„ã€‚ç›¸åº”åœ°ï¼ŒVueå’ŒWeexä¼šè¿›è¡Œå®˜æ–¹åˆä½œï¼ŒWeexæ˜¯é˜¿é‡Œçš„è·¨å¹³å°ç”¨æˆ·ç•Œé¢å¼€å‘æ¡†æ¶ï¼ŒWeexçš„JavaScriptæ¡†æ¶è¿è¡Œæ—¶ç”¨çš„å°±æ˜¯Vueã€‚è¿™æ„å‘³ç€åœ¨Weexçš„å¸®åŠ©ä¸‹ï¼Œä½ ä½¿ç”¨Vueè¯­æ³•å¼€å‘çš„ç»„ä»¶ä¸ä»…ä»…å¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨ç«¯ï¼Œè¿˜èƒ½è¢«ç”¨äºå¼€å‘iOSå’ŒAndroidä¸Šçš„åŸç”Ÿåº”ç”¨ã€‚</p>
<p>ä¸€å¥è¯ï¼šä½ å†™çš„ç»„ä»¶ä¸ä»…å¯ä»¥è·‘åœ¨æµè§ˆå™¨çš„ç½‘é¡µä¸Šï¼Œä¹Ÿå¯ä»¥æ³¡åœ¨å®‰å“å’Œiosçš„appé‡Œã€‚</p>
<p>8ã€reactæ›´ä¸ºç¹è£ã€‚</p>
<p>reactç¤¾åŒºè¿˜æ˜¯éå¸¸ç¹è£çš„ï¼Œæ‰€ä»¥åœ¨çŸ¥ååº¦æ–¹é¢reactä¹Ÿæ˜¯æ›´èƒœä¸€ç­¹ï¼Œä½¿ç”¨reactå’Œreact-nativeçš„å¼€å‘äººå‘˜è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œè¿™ä¹Ÿæ˜¯vueéœ€è¦å­¦ä¹ å’Œè¿›æ­¥çš„åœ°æ–¹ã€‚</p>
<p>9ã€vueå†™èµ·æ¥æ›´åŠ æµç•…ã€æ–¹ä¾¿ï¼Œreactè¯­æ³•æ›´ç®€å•ã€æ‰©å±•æ›´å¼ºå¤§ã€‚</p>
<p>åœ¨è¿™ä¸€æ–¹é¢ï¼Œreactå’Œvueçš„å‡ºå‘ç‚¹ä¼¼ä¹æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢vueçš„å†™æ³•ã€‚æ¯”å¦‚ï¼Œå¯¹äºåˆ—è¡¨å¾ªç¯ï¼Œä½¿ç”¨vueï¼Œç›´æ¥åœ¨æ ‡ç­¾ä¸Šå†™v-forå³å¯ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥å¾ªç¯äº†ï¼Œè€Œreactéœ€è¦é€šè¿‡ä¸€ä¸ªæ•°ç»„çš„mapï¼Œç„¶ååœ¨returnï¼Œåœ¨å½¢å¼ä¸Šæ¥è¯´ï¼Œvueçš„å†™æ³•è¿˜æ˜¯æ›´åŠ èˆ’æœä¸€ç‚¹ã€‚å¦å¤–ï¼Œç”±äºvueå±€éƒ¨çš„æ•°æ®åŒå‘ç»‘å®šï¼Œæ‰€ä»¥vueåœ¨å¤„ç†è¡¨å•è¿™ä¸€å—ä¹Ÿæ˜¯æ¸¸åˆƒæœ‰ä½™ï¼Œéå¸¸æ–¹ä¾¿ï¼Œè€Œreactä»…ä»…æ˜¯å¤„ç†ä¸€ä¸ªè¡¨å•ï¼Œå°±éœ€è¦æ·»åŠ å¾ˆå¤šæ— å…³çš„ä»£ç ï¼Œè¿™ä¸ªè¿˜æ˜¯éå¸¸åˆ«æ‰­çš„ã€‚</p>
<p>å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œvueæä¾›äº†æ›´å¤šçš„apiï¼Œå¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼Œä½†æ˜¯ï¼Œè¿™ä¹Ÿä½“ç°äº†reactçš„ä¼˜ç‚¹ï¼Œå³éå¸¸ç®€å•ï¼Œæä¾›çš„apiå¾ˆå°‘ï¼Œå®ƒåªå¸®æˆ‘ä»¬åšäº†è™šæ‹ŸDOMçš„å·¥ä½œï¼Œå…¶ä»–çš„äº‹æƒ…å¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„å‘æŒ¥ï¼Œæ‰€ä»¥ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œreactè¿˜æ˜¯æ›´åŠ ç®€å•ä¸€äº›çš„ã€‚</p>
<p>10ã€vueçš„æ–‡æ¡£æ›´åŠ å¥½ã€‚</p>
<p>è™½ç„¶reactä¹Ÿæœ‰ä¸­æ–‡æ–‡æ¡£ï¼Œä½†æ˜¯vueçš„æ–‡æ¡£æ›´æ–°çš„æ›´é¢‘ç¹ï¼Œå¹¶ä¸”å†™çš„å¾ˆå¥½ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å­¦ä¹ ã€‚æ¯•ç«Ÿå¤§ä½¬æ˜¯ä¸­å›½çš„ï¼Œè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæ¨èåˆå­¦è€…å­¦ä¹ ã€ä½¿ç”¨ã€‚</p>
<p>11ã€æ— è®ºæ˜¯vueè¿˜æ˜¯reactæˆ‘ä»¬éƒ½ä¸éœ€è¦è§¦ç¢°DOMã€‚</p>
<p>å°±è¿™ä¸¤è€…è€Œè¨€ï¼Œæˆ‘ä»¬éƒ½å…³å¿ƒè™šæ‹ŸDOMï¼Œè€Œä¸ç”¨å»è§¦ç¢°DOMï¼Œè¿™äº›éƒ½æ˜¯vueå¸®åŠ©æˆ‘ä»¬å¤„ç†å¥½çš„äº†ã€‚å› ä¸ºdomçš„æ“ä½œæ˜¯è´¹æ—¶çš„ï¼Œæ‰€ä»¥é€šè¿‡vueï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™äº›é—®é¢˜ï¼Œå°½å¯èƒ½å°‘çš„å‡å°‘DOMã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†vueæˆ–è€…æ˜¯reactï¼ŒjqueryåŸºæœ¬ä¸Šå°±æ˜¯ä¸éœ€è¦çš„äº†ã€‚å¦‚æœçœŸçš„éœ€è¦ï¼Œçœ‹çœ‹åˆ°åº•å“ªé‡Œåšçš„ä¸å¯¹</p>
<p>12ã€vueå¯¹äºäº‹ä»¶çš„æ¸…é™¤ä¼˜äºreactã€‚</p>
<p>åœ¨vueä¸­ï¼Œäº‹ä»¶ç»‘å®šä¹‹åï¼Œå¯ä»¥åœ¨ç»„ä»¶é”€æ¯çš„åŒæ—¶äº‹ä»¶æ¥è§¦ç»‘å®šï¼Œæ— éœ€æˆ‘ä»¬è‡ªå·±å»æ‰‹åŠ¨æ¸…é™¤ï¼›è€Œreactå´ä¸æ˜¯è¿™æ ·çš„ï¼Œreactéœ€è¦æˆ‘ä»¬åœ¨componentDidMountçš„æ—¶å€™ç»‘å®šï¼Œåœ¨componentWillUnMountçš„æ—¶å€™æ¥è§¦ç»‘å®šï¼Œå¦åˆ™ä¼šå‡ºç°é—®é¢˜ï¼Œå°¤å…¶æ˜¯æ·»åŠ åœ¨documentä¸Šé¢çš„äº‹ä»¶ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/07/28/Vue/vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/" data-id="cl7icg7e5013bugunaxi845pb" data-title="vueå’Œreactçš„åŒºåˆ«" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue/vue-éƒ¨ç½²404é—®é¢˜" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/07/23/Vue/vue-%E9%83%A8%E7%BD%B2404%E9%97%AE%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2018-07-22T19:48:18.000Z" itemprop="datePublished">2018-07-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/23/Vue/vue-%E9%83%A8%E7%BD%B2404%E9%97%AE%E9%A2%98/">vue-éƒ¨ç½²404é—®é¢˜</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ä¸€ã€å¦‚ä½•éƒ¨ç½²"><a href="#ä¸€ã€å¦‚ä½•éƒ¨ç½²" class="headerlink" title="ä¸€ã€å¦‚ä½•éƒ¨ç½²"></a>ä¸€ã€å¦‚ä½•éƒ¨ç½²</h2><p>å‰åç«¯åˆ†ç¦»å¼€å‘æ¨¡å¼ä¸‹ï¼Œå‰åç«¯æ˜¯ç‹¬ç«‹å¸ƒç½²çš„ï¼Œå‰ç«¯åªéœ€è¦å°†æœ€åçš„æ„å»ºç‰©ä¸Šä¼ è‡³ç›®æ ‡æœåŠ¡å™¨çš„<code>web</code>å®¹å™¨æŒ‡å®šçš„é™æ€ç›®å½•ä¸‹å³å¯</p>
<p>æˆ‘ä»¬çŸ¥é“<code>vue</code>é¡¹ç›®åœ¨æ„å»ºåï¼Œæ˜¯ç”Ÿæˆä¸€ç³»åˆ—çš„é™æ€æ–‡ä»¶</p>
<p><img src="https://imgkr2.cn-bj.ufileos.com/b9d13e56-f859-4b4b-a9da-a703a34c2f5d.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=m1qDXRSFHrfXlnAtAlVhjoLKP70%253D&Expires=1609927181" alt="img"></p>
<p>å¸¸è§„å¸ƒç½²æˆ‘ä»¬åªéœ€è¦å°†è¿™ä¸ªç›®å½•ä¸Šä¼ è‡³ç›®æ ‡æœåŠ¡å™¨å³å¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// scp ä¸Šä¼  userä¸ºä¸»æœºç™»å½•ç”¨æˆ·ï¼Œhostä¸ºä¸»æœºå¤–ç½‘ip, xxä¸ºwebå®¹å™¨é™æ€èµ„æºè·¯å¾„</span><br><span class="line">scp dist.zip user@host:/xx/xx/xx</span><br></pre></td></tr></table></figure>

<p>è®©<code>web</code>å®¹å™¨è·‘èµ·æ¥ï¼Œä»¥<code>nginx</code>ä¸ºä¾‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen  80;</span><br><span class="line">  server_name  www.xxx.com;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    index  /data/dist/index.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®å®Œæˆè®°å¾—é‡å¯<code>nginx</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®</span><br><span class="line">nginx -t </span><br><span class="line"></span><br><span class="line">// å¹³æ»‘é‡å¯</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<p>æ“ä½œå®Œåå°±å¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥åŸŸåè¿›è¡Œè®¿é—®äº†</p>
<p>å½“ç„¶ä¸Šé¢åªæ˜¯æåˆ°æœ€ç®€å•ä¹Ÿæ˜¯æœ€ç›´æ¥çš„ä¸€ç§å¸ƒç½²æ–¹å¼</p>
<p>ä»€ä¹ˆè‡ªåŠ¨åŒ–ï¼Œé•œåƒï¼Œå®¹å™¨ï¼Œæµæ°´çº¿å¸ƒç½²ï¼Œæœ¬è´¨ä¹Ÿæ˜¯å°†è¿™å¥—é€»è¾‘æŠ½è±¡ï¼Œéš”ç¦»ï¼Œç”¨ç¨‹åºæ¥ä»£æ›¿é‡å¤æ€§çš„åŠ³åŠ¨ï¼Œæœ¬æ–‡ä¸å±•å¼€</p>
<h2 id="äºŒã€404é—®é¢˜"><a href="#äºŒã€404é—®é¢˜" class="headerlink" title="äºŒã€404é—®é¢˜"></a>äºŒã€404é—®é¢˜</h2><p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„é—®é¢˜ï¼Œç›¸ä¿¡å¾ˆå¤šåŒå­¦éƒ½æœ‰é‡åˆ°è¿‡ï¼Œé‚£ä¹ˆä½ çŸ¥é“å…¶çœŸæ­£çš„åŸå› å—ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆè¿˜åŸä¸€ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li><code>vue</code>é¡¹ç›®åœ¨æœ¬åœ°æ—¶è¿è¡Œæ­£å¸¸ï¼Œä½†éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸­ï¼Œåˆ·æ–°é¡µé¢ï¼Œå‡ºç°äº†404é”™è¯¯</li>
</ul>
<p>å…ˆå®šä½ä¸€ä¸‹ï¼ŒHTTP 404 é”™è¯¯æ„å‘³ç€é“¾æ¥æŒ‡å‘çš„èµ„æºä¸å­˜åœ¨</p>
<p>é—®é¢˜åœ¨äºä¸ºä»€ä¹ˆä¸å­˜åœ¨ï¼Ÿä¸”ä¸ºä»€ä¹ˆåªæœ‰<code>history</code>æ¨¡å¼ä¸‹ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<h3 id="ä¸ºä»€ä¹ˆhistoryæ¨¡å¼ä¸‹æœ‰é—®é¢˜"><a href="#ä¸ºä»€ä¹ˆhistoryæ¨¡å¼ä¸‹æœ‰é—®é¢˜" class="headerlink" title="ä¸ºä»€ä¹ˆhistoryæ¨¡å¼ä¸‹æœ‰é—®é¢˜"></a>ä¸ºä»€ä¹ˆhistoryæ¨¡å¼ä¸‹æœ‰é—®é¢˜</h3><p><code>Vue</code>æ˜¯å±äºå•é¡µåº”ç”¨ï¼ˆsingle-page applicationï¼‰</p>
<p>è€Œ<code>SPA</code>æ˜¯ä¸€ç§ç½‘ç»œåº”ç”¨ç¨‹åºæˆ–ç½‘ç«™çš„æ¨¡å‹ï¼Œæ‰€æœ‰ç”¨æˆ·äº¤äº’æ˜¯é€šè¿‡åŠ¨æ€é‡å†™å½“å‰é¡µé¢ï¼Œå‰é¢æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ï¼Œä¸ç®¡æˆ‘ä»¬åº”ç”¨æœ‰å¤šå°‘é¡µé¢ï¼Œæ„å»ºç‰©éƒ½åªä¼šäº§å‡ºä¸€ä¸ª<code>index.html</code></p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å›å¤´æ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„<code>nginx</code>é…ç½®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen  <span class="number">80</span>;</span><br><span class="line">  server_name  www.<span class="property">xxx</span>.<span class="property">com</span>;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    index  /data/dist/index.<span class="property">html</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æ ¹æ® <code>nginx</code> é…ç½®å¾—å‡ºï¼Œå½“æˆ‘ä»¬åœ¨åœ°å€æ è¾“å…¥ <code>www.xxx.com</code> æ—¶ï¼Œè¿™æ—¶ä¼šæ‰“å¼€æˆ‘ä»¬ <code>dist</code> ç›®å½•ä¸‹çš„ <code>index.html</code> æ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬åœ¨è·³è½¬è·¯ç”±è¿›å…¥åˆ° <code>www.xxx.com/login</code></p>
<p>å…³é”®åœ¨è¿™é‡Œï¼Œå½“æˆ‘ä»¬åœ¨ <code>website.com/login</code> é¡µæ‰§è¡Œåˆ·æ–°æ“ä½œï¼Œ<code>nginx location</code> æ˜¯æ²¡æœ‰ç›¸å…³é…ç½®çš„ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç° 404 çš„æƒ…å†µ</p>
<h3 id="ä¸ºä»€ä¹ˆhashæ¨¡å¼ä¸‹æ²¡æœ‰é—®é¢˜"><a href="#ä¸ºä»€ä¹ˆhashæ¨¡å¼ä¸‹æ²¡æœ‰é—®é¢˜" class="headerlink" title="ä¸ºä»€ä¹ˆhashæ¨¡å¼ä¸‹æ²¡æœ‰é—®é¢˜"></a>ä¸ºä»€ä¹ˆhashæ¨¡å¼ä¸‹æ²¡æœ‰é—®é¢˜</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router hash` æ¨¡å¼æˆ‘ä»¬éƒ½çŸ¥é“æ˜¯ç”¨ç¬¦å·#è¡¨ç¤ºçš„ï¼Œå¦‚ `website.com/#/login`, `hash` çš„å€¼ä¸º `#/login</span><br></pre></td></tr></table></figure>

<p>å®ƒçš„ç‰¹ç‚¹åœ¨äºï¼š<code>hash</code> è™½ç„¶å‡ºç°åœ¨ <code>URL</code> ä¸­ï¼Œä½†ä¸ä¼šè¢«åŒ…æ‹¬åœ¨ <code>HTTP</code> è¯·æ±‚ä¸­ï¼Œå¯¹æœåŠ¡ç«¯å®Œå…¨æ²¡æœ‰å½±å“ï¼Œå› æ­¤æ”¹å˜ <code>hash</code> ä¸ä¼šé‡æ–°åŠ è½½é¡µé¢</p>
<p><code>hash</code> æ¨¡å¼ä¸‹ï¼Œä»… <code>hash</code> ç¬¦å·ä¹‹å‰çš„å†…å®¹ä¼šè¢«åŒ…å«åœ¨è¯·æ±‚ä¸­ï¼Œå¦‚ <code>website.com/#/login</code> åªæœ‰ <code>website.com</code> ä¼šè¢«åŒ…å«åœ¨è¯·æ±‚ä¸­ ï¼Œå› æ­¤å¯¹äºæœåŠ¡ç«¯æ¥è¯´ï¼Œå³ä½¿æ²¡æœ‰é…ç½®<code>location</code>ï¼Œä¹Ÿä¸ä¼šè¿”å›404é”™è¯¯</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a><a target="_blank" rel="noopener" href="https://vue3js.cn/interview/vue/404.html#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"></a>è§£å†³æ–¹æ¡ˆ</h2><p>çœ‹åˆ°è¿™é‡Œæˆ‘ç›¸ä¿¡å¤§éƒ¨åˆ†åŒå­¦éƒ½èƒ½æƒ³åˆ°æ€ä¹ˆè§£å†³é—®é¢˜äº†ï¼Œ</p>
<p>äº§ç”Ÿé—®é¢˜çš„æœ¬è´¨æ˜¯å› ä¸ºæˆ‘ä»¬çš„è·¯ç”±æ˜¯é€šè¿‡JSæ¥æ‰§è¡Œè§†å›¾åˆ‡æ¢çš„ï¼Œ</p>
<p>å½“æˆ‘ä»¬è¿›å…¥åˆ°å­è·¯ç”±æ—¶åˆ·æ–°é¡µé¢ï¼Œ<code>web</code>å®¹å™¨æ²¡æœ‰ç›¸å¯¹åº”çš„é¡µé¢æ­¤æ—¶ä¼šå‡ºç°404</p>
<p>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é…ç½®å°†ä»»æ„é¡µé¢éƒ½é‡å®šå‘åˆ° <code>index.html</code>ï¼ŒæŠŠè·¯ç”±äº¤ç”±å‰ç«¯å¤„ç†</p>
<p>å¯¹<code>nginx</code>é…ç½®æ–‡ä»¶<code>.conf</code>ä¿®æ”¹ï¼Œæ·»åŠ <code>try_files $uri $uri/ /index.html;</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen  80;</span><br><span class="line">  server_name  www.xxx.com;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    index  /data/dist/index.html;</span><br><span class="line">    try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åè®°å¾—é…ç½®çš„æ›´æ–°</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<p>è¿™ä¹ˆåšä»¥åï¼Œä½ çš„æœåŠ¡å™¨å°±ä¸å†è¿”å› 404 é”™è¯¯é¡µé¢ï¼Œå› ä¸ºå¯¹äºæ‰€æœ‰è·¯å¾„éƒ½ä¼šè¿”å› <code>index.html</code> æ–‡ä»¶</p>
<p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½ åº”è¯¥åœ¨ <code>Vue</code> åº”ç”¨é‡Œé¢è¦†ç›–æ‰€æœ‰çš„è·¯ç”±æƒ…å†µï¼Œç„¶ååœ¨ç»™å‡ºä¸€ä¸ª 404 é¡µé¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>, <span class="attr">component</span>: <span class="title class_">NotFoundComponent</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å…³äºåç«¯é…ç½®æ–¹æ¡ˆè¿˜æœ‰ï¼š<code>Apache</code>ã€<code>nodejs</code>ç­‰.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/07/23/Vue/vue-%E9%83%A8%E7%BD%B2404%E9%97%AE%E9%A2%98/" data-id="cl7icg7dk0122ugungi6ederv" data-title="vue-éƒ¨ç½²404é—®é¢˜" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue/vue-vuexä½¿ç”¨" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/07/20/Vue/vue-vuex%E4%BD%BF%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2018-07-20T08:34:22.000Z" itemprop="datePublished">2018-07-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/20/Vue/vue-vuex%E4%BD%BF%E7%94%A8/">vue-vuexä½¿ç”¨</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="https://vuex.vuejs.org/vuex.png" alt="img"></p>
<h2 id="ä¸€ã€åˆå§‹vuex"><a href="#ä¸€ã€åˆå§‹vuex" class="headerlink" title="ä¸€ã€åˆå§‹vuex"></a>ä¸€ã€åˆå§‹vuex</h2><h3 id="1-1-vuexæ˜¯ä»€ä¹ˆ"><a href="#1-1-vuexæ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1 vuexæ˜¯ä»€ä¹ˆ"></a>1.1 vuexæ˜¯ä»€ä¹ˆ</h3><blockquote>
<ul>
<li>&#96;&#96;&#96;<br>vuex<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">  å°±æ˜¯æŠŠéœ€è¦å…±äº«çš„å˜é‡å…¨éƒ¨å­˜å‚¨åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡æ”¾åœ¨é¡¶å±‚ç»„ä»¶ä¸­ä¾›å…¶ä»–ç»„ä»¶ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">  - çˆ¶å­ç»„ä»¶é€šä¿¡æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡‡ç”¨ `props + emit` è¿™ç§æ–¹å¼ã€‚ä½†å½“é€šä¿¡åŒæ–¹ä¸æ˜¯çˆ¶å­ç»„ä»¶ç”šè‡³å‹æ ¹ä¸å­˜åœ¨ç›¸å…³è”ç³»ï¼Œæˆ–è€…ä¸€ä¸ªçŠ¶æ€éœ€è¦å…±äº«ç»™å¤šä¸ªç»„ä»¶æ—¶ï¼Œå°±ä¼šéå¸¸éº»çƒ¦ï¼Œæ•°æ®ä¹Ÿä¼šç›¸å½“éš¾ç»´æŠ¤</span><br><span class="line"></span><br><span class="line">### 1.2 vuexä¸­æœ‰ä»€ä¹ˆ</span><br><span class="line"></span><br></pre></td></tr></table></figure>
const store &#x3D; new Vuex.Store({<br>  state: {<br>  name: â€˜weishâ€™,<br>  age: 22<br>  },<br>  getters: {<br>  personInfo(state) {<br>      return <code>My name is $&#123;state.name&#125;, I am $&#123;state.age&#125;</code>;<br>  }<br>  }<br>  mutations: {<br>  SET_AGE(state, age) {<br>      commit(age, age);<br>  }<br>  },<br>  actions: {<br>  nameAsyn({commit}) {<br>      setTimeout(() &#x3D;&gt; {<br>          commit(â€˜SET_AGEâ€™, 18);<br>      }, 1000);<br>  }<br>  },<br>  modules: {<br>  a: modulesA<br>  }<br>}</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; ä¸ªå°±æ˜¯æœ€åŸºæœ¬ä¹Ÿæ˜¯å®Œæ•´çš„`vuex`ä»£ç ï¼›`vuex` åŒ…å«æœ‰äº”ä¸ªåŸºæœ¬çš„å¯¹è±¡</span><br><span class="line"></span><br><span class="line">- `state`ï¼šå­˜å‚¨çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯å˜é‡ï¼›</span><br><span class="line">- `getters`ï¼šæ´¾ç”ŸçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯`set`ã€`get`ä¸­çš„`get`ï¼Œæœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼š`state`ã€`getters`åˆ†åˆ«å¯ä»¥è·å–`state`ä¸­çš„å˜é‡å’Œå…¶ä»–çš„`getters`ã€‚å¤–éƒ¨è°ƒç”¨æ–¹å¼ï¼š`store.getters.personInfo()`ã€‚å°±å’Œ`vue`çš„`computed`å·®ä¸å¤šï¼›</span><br><span class="line">- `mutations`ï¼šæäº¤çŠ¶æ€ä¿®æ”¹ã€‚ä¹Ÿå°±æ˜¯`set`ã€`get`ä¸­çš„`set`ï¼Œè¿™æ˜¯`vuex`ä¸­å”¯ä¸€ä¿®æ”¹`state`çš„æ–¹å¼ï¼Œä½†ä¸æ”¯æŒå¼‚æ­¥æ“ä½œã€‚ç¬¬ä¸€ä¸ªå‚æ•°é»˜è®¤æ˜¯`state`ã€‚å¤–éƒ¨è°ƒç”¨æ–¹å¼ï¼š`store.commit(&#x27;SET_AGE&#x27;, 18)`ã€‚å’Œ`vue`ä¸­çš„`methods`ç±»ä¼¼ã€‚</span><br><span class="line">- `actions`ï¼šå’Œ`mutations`ç±»ä¼¼ã€‚ä¸è¿‡`actions`æ”¯æŒå¼‚æ­¥æ“ä½œã€‚ç¬¬ä¸€ä¸ªå‚æ•°é»˜è®¤æ˜¯å’Œ`store`å…·æœ‰ç›¸åŒå‚æ•°å±æ€§çš„å¯¹è±¡ã€‚å¤–éƒ¨è°ƒç”¨æ–¹å¼ï¼š`store.dispatch(&#x27;nameAsyn&#x27;)`ã€‚</span><br><span class="line">- `modules`ï¼š`store`çš„å­æ¨¡å—ï¼Œå†…å®¹å°±ç›¸å½“äºæ˜¯`store`çš„ä¸€ä¸ªå®ä¾‹ã€‚è°ƒç”¨æ–¹å¼å’Œå‰é¢ä»‹ç»çš„ç›¸ä¼¼ï¼Œåªæ˜¯è¦åŠ ä¸Šå½“å‰å­æ¨¡å—åï¼Œå¦‚ï¼š`store.a.getters.xxx()`</span><br><span class="line"></span><br><span class="line">### 1.3 vue-cliä¸­ä½¿ç”¨vuexçš„æ–¹å¼</span><br><span class="line"></span><br><span class="line">**ç›®å½•ç»“æ„**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>â”œâ”€â”€ index.html<br>â”œâ”€â”€ main.js<br>â”œâ”€â”€ components<br>â””â”€â”€ store<br>    â”œâ”€â”€ index.js          # æˆ‘ä»¬ç»„è£…æ¨¡å—å¹¶å¯¼å‡º store çš„åœ°æ–¹<br>    â”œâ”€â”€ state.js          # è·Ÿçº§åˆ«çš„ state<br>    â”œâ”€â”€ getters.js        # è·Ÿçº§åˆ«çš„ getter<br>    â”œâ”€â”€ mutation-types.js # æ ¹çº§åˆ«çš„mutationsåç§°ï¼ˆå®˜æ–¹æ¨èmutionsæ–¹æ³•åä½¿ç”¨å¤§å†™ï¼‰<br>    â”œâ”€â”€ mutations.js      # æ ¹çº§åˆ«çš„ mutation<br>    â”œâ”€â”€ actions.js        # æ ¹çº§åˆ«çš„ action<br>    â””â”€â”€ modules<br>        â”œâ”€â”€ m1.js         # æ¨¡å—1<br>        â””â”€â”€ m2.js         # æ¨¡å—2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**stateç¤ºä¾‹**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>const state &#x3D; {<br>    name: â€˜weishâ€™,<br>    age: 22<br>};</p>
<p>export default state;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**getterç¤ºä¾‹**</span><br><span class="line"></span><br><span class="line">&gt; `getters.js`ç¤ºä¾‹ï¼ˆæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨`getters`æ¥è·å–`state`çš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨`state`ï¼‰</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>export const name &#x3D; (state) &#x3D;&gt; {<br>    return state.name;<br>}</p>
<p>export const age &#x3D; (state) &#x3D;&gt; {<br>    return state.age<br>}</p>
<p>export const other &#x3D; (state) &#x3D;&gt; {<br>    return <code>My name is $&#123;state.name&#125;, I am $&#123;state.age&#125;.</code>;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**mutation-typeç¤ºä¾‹**</span><br><span class="line"></span><br><span class="line">&gt; å°†æ‰€æœ‰`mutations`çš„å‡½æ•°åæ”¾åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œ</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>export const SET_NAME &#x3D; â€˜SET_NAMEâ€™;<br>export const SET_AGE &#x3D; â€˜SET_AGEâ€™;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**mutationsç¤ºä¾‹**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import * as types from â€˜.&#x2F;mutation-type.jsâ€™;</p>
<p>export default {<br>    [types.SET_NAME](state, name) {<br>        state.name &#x3D; name;<br>    },<br>    [types.SET_AGE](state, age) {<br>        state.age &#x3D; age;<br>    }<br>};</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**actionsç¤ºä¾‹**</span><br><span class="line"></span><br><span class="line">&gt; å¼‚æ­¥æ“ä½œã€å¤šä¸ª`commit`æ—¶</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import * as types from â€˜.&#x2F;mutation-type.jsâ€™;</p>
<p>export default {<br>    nameAsyn({commit}, {age, name}) {<br>        commit(types.SET_NAME, name);<br>        commit(types.SET_AGE, age);<br>    }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**modulesâ€“m1.jsç¤ºä¾‹**</span><br><span class="line"></span><br><span class="line">&gt; å¦‚æœä¸æ˜¯å¾ˆå¤æ‚çš„åº”ç”¨ï¼Œä¸€èˆ¬æ¥è®²æ˜¯ä¸ä¼šåˆ†æ¨¡å—çš„</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>export default {<br>    state: {},<br>    getters: {},<br>    mutations: {},<br>    actions: {}<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**index.jsç¤ºä¾‹ï¼ˆç»„è£…vuex)**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import vue from â€˜vueâ€™;<br>import vuex from â€˜vuexâ€™;<br>import state from â€˜.&#x2F;state.jsâ€™;<br>import * as getters from â€˜.&#x2F;getters.jsâ€™;<br>import mutations from â€˜.&#x2F;mutations.jsâ€™;<br>import actions from â€˜.&#x2F;actions.jsâ€™;<br>import m1 from â€˜.&#x2F;modules&#x2F;m1.jsâ€™;<br>import m2 from â€˜.&#x2F;modules&#x2F;m2.jsâ€™;<br>import createLogger from â€˜vuex&#x2F;dist&#x2F;loggerâ€™; &#x2F;&#x2F; ä¿®æ”¹æ—¥å¿—</p>
<p>vue.use(vuex);</p>
<p>const debug &#x3D; process.env.NODE_ENV !&#x3D;&#x3D; â€˜productionâ€™; &#x2F;&#x2F; å¼€å‘ç¯å¢ƒä¸­ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse</p>
<p>export default new vuex.Store({<br>    state,<br>    getters,<br>    mutations,<br>    actions,<br>    modules: {<br>        m1,<br>        m2<br>    },<br>    plugins: debug ? [createLogger()] : [] &#x2F;&#x2F; å¼€å‘ç¯å¢ƒä¸‹æ˜¾ç¤ºvuexçš„çŠ¶æ€ä¿®æ”¹<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; æœ€åå°†`store`å®ä¾‹æŒ‚è½½åˆ°`main.js`é‡Œé¢çš„`vue`ä¸Šå»å°±è¡Œäº†</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import store from â€˜.&#x2F;store&#x2F;index.jsâ€™;</p>
<p>new Vue({<br>  el: â€˜#appâ€™,<br>  store,<br>  render: h &#x3D;&gt; h(App)<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; åœ¨`vue`ç»„ä»¶ä¸­ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨`mapGetters`ã€`mapActions`ã€`mapMutations`ï¼Œç„¶åå°±å¯ä»¥æŒ‰ç…§`vue`è°ƒç”¨`methods`å’Œ`computed`çš„æ–¹å¼å»è°ƒç”¨è¿™äº›å˜é‡æˆ–å‡½æ•°ï¼Œç¤ºä¾‹å¦‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import {mapGetters, mapMutations, mapActions} from â€˜vuexâ€™;</p>
<p>&#x2F;* åªå†™ç»„ä»¶ä¸­çš„scriptéƒ¨åˆ† *&#x2F;<br>export default {<br>    computed: {<br>        â€¦mapGetters([<br>            name,<br>            age<br>        ])<br>    },<br>    methods: {<br>        â€¦mapMutations({<br>            setName: â€˜SET_NAMEâ€™,<br>            setAge: â€˜SET_AGEâ€™<br>        }),<br>        â€¦mapActions([<br>            nameAsyn<br>        ])<br>    }<br>};</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## äºŒã€modules</span><br><span class="line"></span><br><span class="line">&gt; åœ¨ src ç›®å½•ä¸‹ , æ–°å»ºä¸€ä¸ª store æ–‡ä»¶å¤¹ , ç„¶ååœ¨é‡Œé¢æ–°å»ºä¸€ä¸ª index.js</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import Vue from â€˜vueâ€™<br>import vuex from â€˜vuexâ€™<br>Vue.use(vuex);</p>
<p>export default new vuex.Store({<br>    state:{<br>        show:false<br>    }<br>})</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; åœ¨ `main.js` é‡Œçš„ä»£ç åº”è¯¥æ”¹æˆ,åœ¨å®ä¾‹åŒ– `Vue`å¯¹è±¡æ—¶åŠ å…¥ `store` å¯¹è±¡</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;vuex<br>import store from â€˜.&#x2F;storeâ€™</p>
<p>new Vue({<br>  el: â€˜#appâ€™,<br>  router,<br>  store,&#x2F;&#x2F;ä½¿ç”¨store<br>  template: â€˜<App/>â€˜,<br>  components: { App }<br>})</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; è¿™æ ·å°±æŠŠ `store` åˆ†ç¦»å‡ºå»äº† , é‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ : è¿™é‡Œ `$store.state.show` æ— è®ºå“ªä¸ªç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ , é‚£ç»„ä»¶å¤šäº†ä¹‹å , çŠ¶æ€ä¹Ÿå¤šäº† , è¿™ä¹ˆå¤šçŠ¶æ€éƒ½å †åœ¨ store æ–‡ä»¶å¤¹ä¸‹çš„ `index.js` ä¸å¥½ç»´æŠ¤æ€ä¹ˆåŠ ?</span><br><span class="line"></span><br><span class="line">- æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `vuex` çš„ `modules` , æŠŠ `store` æ–‡ä»¶å¤¹ä¸‹çš„ `index.js` æ”¹æˆ</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import Vue from â€˜vueâ€™<br>import vuex from â€˜vuexâ€™<br>Vue.use(vuex);</p>
<p>import dialog_store from â€˜..&#x2F;components&#x2F;dialog_store.jsâ€™;&#x2F;&#x2F;å¼•å…¥æŸä¸ªstoreå¯¹è±¡</p>
<p>export default new vuex.Store({<br>    modules: {<br>        dialog: dialog_store<br>    }<br>})</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; è¿™é‡Œæˆ‘ä»¬å¼•ç”¨äº†ä¸€ä¸ª `dialog_store.js` , åœ¨è¿™ä¸ª `js`æ–‡ä»¶é‡Œæˆ‘ä»¬å°±å¯ä»¥å•ç‹¬å†™ `dialog` ç»„ä»¶çš„çŠ¶æ€äº†</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>export default {<br>    state:{<br>        show:false<br>    }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; åšå‡ºè¿™æ ·çš„ä¿®æ”¹ä¹‹å , æˆ‘ä»¬å°†ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨çš„ `$store.state.show` ç»Ÿç»Ÿæ”¹ä¸º `$store.state.dialog.show`å³å¯</span><br><span class="line"></span><br><span class="line">- å¦‚æœè¿˜æœ‰å…¶ä»–çš„ç»„ä»¶éœ€è¦ä½¿ç”¨ `vuex` , å°±æ–°å»ºä¸€ä¸ªå¯¹åº”çš„çŠ¶æ€æ–‡ä»¶ , ç„¶åå°†ä»–ä»¬åŠ å…¥ `store`æ–‡ä»¶å¤¹ä¸‹çš„ `index.js`æ–‡ä»¶ä¸­çš„ `modules` ä¸­</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>modules: {<br>    dialog: dialog_store,<br>    other: other,&#x2F;&#x2F;å…¶ä»–ç»„ä»¶<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## ä¸‰ã€mutations</span><br><span class="line"></span><br><span class="line">&gt; å¯¹`vuex` çš„ä¾èµ–ä»…ä»…åªæœ‰ä¸€ä¸ª `$store.state.dialog.show` ä¸€ä¸ªçŠ¶æ€ , ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦è¿›è¡Œä¸€ä¸ªæ“ä½œ , éœ€è¦ä¾èµ–å¾ˆå¤šå¾ˆå¤šä¸ªçŠ¶æ€ , é‚£ç®¡ç†èµ·æ¥åˆéº»çƒ¦äº†</span><br><span class="line"></span><br><span class="line">- `mutations`é‡Œçš„æ“ä½œå¿…é¡»æ˜¯åŒæ­¥çš„</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>export default {<br>    state:{&#x2F;&#x2F;state<br>        show:false<br>    },<br>    mutations:{<br>        switch_dialog(state){&#x2F;&#x2F;è¿™é‡Œçš„stateå¯¹åº”ç€ä¸Šé¢è¿™ä¸ªstate<br>            state.show &#x3D; state.show?false:true;<br>            &#x2F;&#x2F;ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–çš„æ“ä½œæ”¹å˜state<br>        }<br>    }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; ä½¿ç”¨ `mutations` å , åŸå…ˆæˆ‘ä»¬çš„çˆ¶ç»„ä»¶å¯ä»¥æ”¹ä¸º</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<template>
  <div id="app">
    <a href="javascript:;" @click="$store.commit('switch_dialog')">ç‚¹å‡»</a>
    <t-dialog></t-dialog>
  </div>
</template>

<script>
import dialog from './components/dialog.vue'
export default {
  components:{
    "t-dialog":dialog
  }
}
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; ä½¿ç”¨ `$store.commit(&#x27;switch_dialog&#x27;)` æ¥è§¦å‘ `mutations` ä¸­çš„ `switch_dialog` æ–¹æ³•</span><br><span class="line"></span><br><span class="line">## å››ã€actions</span><br><span class="line"></span><br><span class="line">&gt; å¤šä¸ª `state` çš„æ“ä½œ , ä½¿ç”¨ `mutations`ä¼šæ¥è§¦å‘ä¼šæ¯”è¾ƒå¥½ç»´æŠ¤ , é‚£ä¹ˆéœ€è¦æ‰§è¡Œå¤šä¸ª `mutations` å°±éœ€è¦ç”¨ `action` äº†</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>export default {<br>    state:{&#x2F;&#x2F;state<br>        show:false<br>    },<br>    mutations:{<br>        switch_dialog(state){&#x2F;&#x2F;è¿™é‡Œçš„stateå¯¹åº”ç€ä¸Šé¢è¿™ä¸ªstate<br>            state.show &#x3D; state.show?false:true;<br>            &#x2F;&#x2F;ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–çš„æ“ä½œæ”¹å˜state<br>        }<br>    },<br>    actions:{<br>        switch_dialog(context){&#x2F;&#x2F;è¿™é‡Œçš„contextå’Œæˆ‘ä»¬ä½¿ç”¨çš„$storeæ‹¥æœ‰ç›¸åŒçš„å¯¹è±¡å’Œæ–¹æ³•<br>            context.commit(â€˜switch_dialogâ€™);<br>            &#x2F;&#x2F;ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œè§¦å‘å…¶ä»–çš„mutationsæ–¹æ³•<br>        },<br>    }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; é‚£ä¹ˆ , åœ¨ä¹‹å‰çš„çˆ¶ç»„ä»¶ä¸­ , æˆ‘ä»¬éœ€è¦åšä¿®æ”¹ , æ¥è§¦å‘ `action` é‡Œçš„ `switch_dialog` æ–¹æ³•</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<template>
  <div id="app">
    <a href="javascript:;" @click="$store.dispatch('switch_dialog')">ç‚¹å‡»</a>
    <t-dialog></t-dialog>
  </div>
</template>

<script>
import dialog from './components/dialog.vue'
export default {
  components:{
    "t-dialog":dialog
  }
}
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ä½¿ç”¨ `$store.dispatch(&#x27;switch_dialog&#x27;)` æ¥è§¦å‘ `action` ä¸­çš„ `switch_dialog` æ–¹æ³•ã€‚</span><br><span class="line">- å®˜æ–¹æ¨è , å°†å¼‚æ­¥æ“ä½œæ”¾åœ¨ `action`ä¸­</span><br><span class="line"></span><br><span class="line">## äº”ã€getters</span><br><span class="line"></span><br><span class="line">&gt; `getters`å’Œ `vue` ä¸­çš„`computed` ç±»ä¼¼ , éƒ½æ˜¯ç”¨æ¥è®¡ç®— `state` ç„¶åç”Ÿæˆæ–°çš„æ•°æ® ( çŠ¶æ€ ) çš„</span><br><span class="line"></span><br><span class="line">- å‡å¦‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸çŠ¶æ€ `show` åˆšå¥½ç›¸åçš„çŠ¶æ€ , ä½¿ç”¨ `vue` ä¸­çš„ `computed` å¯ä»¥è¿™æ ·ç®—å‡ºæ¥</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>computed(){<br>    not_show(){<br>        return !this.$store.state.dialog.show;<br>    }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; é‚£ä¹ˆ , å¦‚æœå¾ˆå¤šå¾ˆå¤šä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦ç”¨åˆ°è¿™ä¸ªä¸ `show`åˆšå¥½ç›¸åçš„çŠ¶æ€ , é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å†™å¾ˆå¤šå¾ˆå¤šä¸ª `not_show`, ä½¿ç”¨ `getters`å°±å¯ä»¥è§£å†³è¿™ç§é—®é¢˜</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>export default {<br>    state:{&#x2F;&#x2F;state<br>        show:false<br>    },<br>    getters:{<br>        not_show(state){&#x2F;&#x2F;è¿™é‡Œçš„stateå¯¹åº”ç€ä¸Šé¢è¿™ä¸ªstate<br>            return !state.show;<br>        }<br>    },<br>    mutations:{<br>        switch_dialog(state){&#x2F;&#x2F;è¿™é‡Œçš„stateå¯¹åº”ç€ä¸Šé¢è¿™ä¸ªstate<br>            state.show &#x3D; state.show?false:true;<br>            &#x2F;&#x2F;ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–çš„æ“ä½œæ”¹å˜state<br>        }<br>    },<br>    actions:{<br>        switch_dialog(context){&#x2F;&#x2F;è¿™é‡Œçš„contextå’Œæˆ‘ä»¬ä½¿ç”¨çš„$storeæ‹¥æœ‰ç›¸åŒçš„å¯¹è±¡å’Œæ–¹æ³•<br>            context.commit(â€˜switch_dialogâ€™);<br>            &#x2F;&#x2F;ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œè§¦å‘å…¶ä»–çš„mutationsæ–¹æ³•<br>        },<br>    }<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `$store.state.dialog.show` æ¥è·å¾—çŠ¶æ€ `show` , ç±»ä¼¼çš„ , æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `$store.getters.not_show` æ¥è·å¾—çŠ¶æ€ `not_show`</span><br><span class="line"></span><br><span class="line">- æ³¨æ„ : `$store.getters.not_show` çš„å€¼æ˜¯ä¸èƒ½ç›´æ¥ä¿®æ”¹çš„ , éœ€è¦å¯¹åº”çš„ `state` å‘ç”Ÿå˜åŒ–æ‰èƒ½ä¿®æ”¹</span><br><span class="line"></span><br><span class="line">## å…­ã€mapStateã€mapGettersã€mapActions</span><br><span class="line"></span><br><span class="line">&gt; å¾ˆå¤šæ—¶å€™ , `$store.state.dialog.show` ã€`$store.dispatch(&#x27;switch_dialog&#x27;)` è¿™ç§å†™æ³•å¾ˆä¸æ–¹ä¾¿</span><br><span class="line"></span><br><span class="line">- ä½¿ç”¨ `mapState`ã€`mapGetters`ã€`mapActions` å°±ä¸ä¼šè¿™ä¹ˆå¤æ‚äº†</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<template>
  <el-dialog :visible.sync="show"></el-dialog>
</template>

<script>
import {mapState} from 'vuex';
export default {
  computed:{

    //è¿™é‡Œçš„ä¸‰ç‚¹å«åš : æ‰©å±•è¿ç®—ç¬¦
    ...mapState({
      show:state=>state.dialog.show
    }),
  }
}
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç›¸å½“äº</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<template>
  <el-dialog :visible.sync="show"></el-dialog>
</template>

<script>
import {mapState} from 'vuex';
export default {
  computed:{
    show(){
        return this.$store.state.dialog.show;
    }
  }
}
</script>
<p>&#96;&#96;&#96;</p>
<blockquote>
<p><code>mapGetters</code>ã€<code>mapActions</code> å’Œ <code>mapState</code> ç±»ä¼¼ , <code>mapGetters</code> ä¸€èˆ¬ä¹Ÿå†™åœ¨ <code>computed</code> ä¸­ , <code>mapActions</code> ä¸€èˆ¬å†™åœ¨ <code>methods</code> ä¸­</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/07/20/Vue/vue-vuex%E4%BD%BF%E7%94%A8/" data-id="cl7icg7d1010tugun0t4lfjgn" data-title="vue-vuexä½¿ç”¨" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue/vue-Vue.observable" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/07/17/Vue/vue-Vue.observable/" class="article-date">
  <time class="dt-published" datetime="2018-07-17T03:40:18.000Z" itemprop="datePublished">2018-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/17/Vue/vue-Vue.observable/">vue-Vue.observable</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ä¸€ã€Observable-æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€Observable-æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€Observable æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€Observable æ˜¯ä»€ä¹ˆ</h2><p><code>Observable</code> ç¿»è¯‘è¿‡æ¥æˆ‘ä»¬å¯ä»¥ç†è§£æˆ<strong>å¯è§‚å¯Ÿçš„</strong></p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å…¶åœ¨<code>Vue</code>ä¸­çš„å®šä¹‰</p>
<blockquote>
<p><code>Vue.observable</code>ï¼Œè®©ä¸€ä¸ªå¯¹è±¡å˜æˆå“åº”å¼æ•°æ®ã€‚<code>Vue</code> å†…éƒ¨ä¼šç”¨å®ƒæ¥å¤„ç† <code>data</code> å‡½æ•°è¿”å›çš„å¯¹è±¡</p>
</blockquote>
<p>è¿”å›çš„å¯¹è±¡å¯ä»¥ç›´æ¥ç”¨äºæ¸²æŸ“å‡½æ•°å’Œè®¡ç®—å±æ€§å†…ï¼Œå¹¶ä¸”ä¼šåœ¨å‘ç”Ÿå˜æ›´æ—¶è§¦å‘ç›¸åº”çš„æ›´æ–°ã€‚ä¹Ÿå¯ä»¥ä½œä¸ºæœ€å°åŒ–çš„è·¨ç»„ä»¶çŠ¶æ€å­˜å‚¨å™¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">observable</span>(&#123; count : <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>å…¶ä½œç”¨ç­‰åŒäº</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title function_">vue</span>(&#123; count : <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>Vue 2.x</code> ä¸­ï¼Œè¢«ä¼ å…¥çš„å¯¹è±¡ä¼šç›´æ¥è¢« <code>Vue.observable</code> å˜æ›´ï¼Œå®ƒå’Œè¢«è¿”å›çš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡</p>
<p>åœ¨ <code>Vue 3.x</code> ä¸­ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªå¯å“åº”çš„ä»£ç†ï¼Œè€Œå¯¹æºå¯¹è±¡ç›´æ¥è¿›è¡Œå˜æ›´ä»ç„¶æ˜¯ä¸å¯å“åº”çš„</p>
<h2 id="äºŒã€ä½¿ç”¨åœºæ™¯"><a href="#äºŒã€ä½¿ç”¨åœºæ™¯" class="headerlink" title="äºŒã€ä½¿ç”¨åœºæ™¯"></a>äºŒã€ä½¿ç”¨åœºæ™¯</h2><p>åœ¨éçˆ¶å­ç»„ä»¶é€šä¿¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é€šå¸¸çš„<code>bus</code>æˆ–è€…ä½¿ç”¨<code>vuex</code>ï¼Œä½†æ˜¯å®ç°çš„åŠŸèƒ½ä¸æ˜¯å¤ªå¤æ‚ï¼Œè€Œä½¿ç”¨ä¸Šé¢ä¸¤ä¸ªåˆæœ‰ç‚¹ç¹çã€‚è¿™æ—¶ï¼Œ<code>observable</code>å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©</p>
<p>åˆ›å»ºä¸€ä¸ª<code>js</code>æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue</span></span><br><span class="line"><span class="string">// åˆ›å»ºstateå¯¹è±¡ï¼Œä½¿ç”¨observableè®©stateå¯¹è±¡å¯å“åº”</span></span><br><span class="line"><span class="string">export let state = Vue.observable(&#123;</span></span><br><span class="line"><span class="string">  name: &#x27;</span>å¼ ä¸‰<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">  &#x27;</span>age<span class="string">&#x27;: 38</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string">// åˆ›å»ºå¯¹åº”çš„æ–¹æ³•</span></span><br><span class="line"><span class="string">export let mutations = &#123;</span></span><br><span class="line"><span class="string">  changeName(name) &#123;</span></span><br><span class="line"><span class="string">    state.name = name</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  setAge(age) &#123;</span></span><br><span class="line"><span class="string">    state.age = age</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨<code>.vue</code>æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨å³å¯</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    å§“åï¼š&#123;&#123; name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName(&#x27;æå››&#x27;)&quot;</span>&gt;</span>æ”¹å˜å§“å<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;setAge(18)&quot;</span>&gt;</span>æ”¹å˜å¹´é¾„<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; state, mutations &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store</span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">  // åœ¨è®¡ç®—å±æ€§ä¸­æ‹¿åˆ°å€¼</span></span><br><span class="line"><span class="string">  computed: &#123;</span></span><br><span class="line"><span class="string">    name() &#123;</span></span><br><span class="line"><span class="string">      return state.name</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    age() &#123;</span></span><br><span class="line"><span class="string">      return state.age</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  // è°ƒç”¨mutationsé‡Œé¢çš„æ–¹æ³•ï¼Œæ›´æ–°æ•°æ®</span></span><br><span class="line"><span class="string">  methods: &#123;</span></span><br><span class="line"><span class="string">    changeName: mutations.changeName,</span></span><br><span class="line"><span class="string">    setAge: mutations.setAge</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€åŸç†åˆ†æ"><a href="#ä¸‰ã€åŸç†åˆ†æ" class="headerlink" title="ä¸‰ã€åŸç†åˆ†æ"></a>ä¸‰ã€åŸç†åˆ†æ</h2><p>æºç ä½ç½®ï¼šsrc\core\observer\index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">observe</span> (<span class="attr">value</span>: any, <span class="attr">asRootData</span>: ?boolean): <span class="title class_">Observer</span> | <span class="keyword">void</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">isObject</span>(value) || value <span class="keyword">instanceof</span> <span class="title class_">VNode</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">ob</span>: <span class="title class_">Observer</span> | <span class="keyword">void</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨__ob__å“åº”å¼å±æ€§</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">hasOwn</span>(value, <span class="string">&#x27;__ob__&#x27;</span>) &amp;&amp; value.<span class="property">__ob__</span> <span class="keyword">instanceof</span> <span class="title class_">Observer</span>) &#123;</span><br><span class="line">    ob = value.<span class="property">__ob__</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">    shouldObserve &amp;&amp;</span><br><span class="line">    !<span class="title function_">isServerRendering</span>() &amp;&amp;</span><br><span class="line">    (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value) || <span class="title function_">isPlainObject</span>(value)) &amp;&amp;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">isExtensible</span>(value) &amp;&amp;</span><br><span class="line">    !value.<span class="property">_isVue</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–Observerå“åº”å¼å¯¹è±¡</span></span><br><span class="line">    ob = <span class="keyword">new</span> <span class="title class_">Observer</span>(value)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (asRootData &amp;&amp; ob) &#123;</span><br><span class="line">    ob.<span class="property">vmCount</span>++</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ob</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Observer</code>ç±»</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">    <span class="attr">value</span>: any;</span><br><span class="line">    <span class="attr">dep</span>: <span class="title class_">Dep</span>;</span><br><span class="line">    <span class="attr">vmCount</span>: number; <span class="comment">// number of vms that have this object as root $data</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span> (<span class="attr">value</span>: any) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">value</span> = value</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dep</span> = <span class="keyword">new</span> <span class="title class_">Dep</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">vmCount</span> = <span class="number">0</span></span><br><span class="line">        <span class="title function_">def</span>(value, <span class="string">&#x27;__ob__&#x27;</span>, <span class="variable language_">this</span>)</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hasProto) &#123;</span><br><span class="line">                <span class="title function_">protoAugment</span>(value, arrayMethods)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">copyAugment</span>(value, arrayMethods, arrayKeys)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">observeArray</span>(value)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å®ä¾‹åŒ–å¯¹è±¡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›å…¥walkæ–¹æ³•</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">walk</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>walk</code>å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">walk (<span class="attr">obj</span>: <span class="title class_">Object</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)</span><br><span class="line">    <span class="comment">// éå†keyï¼Œé€šè¿‡defineReactiveåˆ›å»ºå“åº”å¼å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="title function_">defineReactive</span>(obj, keys[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>defineReactive</code>æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">defineReactive</span> (</span><br><span class="line">  <span class="attr">obj</span>: <span class="title class_">Object</span>,</span><br><span class="line">  <span class="attr">key</span>: string,</span><br><span class="line">  <span class="attr">val</span>: any,</span><br><span class="line">  customSetter?: ?<span class="title class_">Function</span>,</span><br><span class="line">  shallow?: boolean</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">const</span> dep = <span class="keyword">new</span> <span class="title class_">Dep</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> property = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptor</span>(obj, key)</span><br><span class="line">  <span class="keyword">if</span> (property &amp;&amp; property.<span class="property">configurable</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cater for pre-defined getter/setters</span></span><br><span class="line">  <span class="keyword">const</span> getter = property &amp;&amp; property.<span class="property">get</span></span><br><span class="line">  <span class="keyword">const</span> setter = property &amp;&amp; property.<span class="property">set</span></span><br><span class="line">  <span class="keyword">if</span> ((!getter || setter) &amp;&amp; <span class="variable language_">arguments</span>.<span class="property">length</span> === <span class="number">2</span>) &#123;</span><br><span class="line">    val = obj[key]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> childOb = !shallow &amp;&amp; <span class="title function_">observe</span>(val)</span><br><span class="line">  <span class="comment">// æ¥ä¸‹æ¥è°ƒç”¨Object.defineProperty()ç»™å¯¹è±¡å®šä¹‰å“åº”å¼å±æ€§</span></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> <span class="title function_">reactiveGetter</span> () &#123;</span><br><span class="line">      <span class="keyword">const</span> value = getter ? getter.<span class="title function_">call</span>(obj) : val</span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Dep</span>.<span class="property">target</span>) &#123;</span><br><span class="line">        dep.<span class="title function_">depend</span>()</span><br><span class="line">        <span class="keyword">if</span> (childOb) &#123;</span><br><span class="line">          childOb.<span class="property">dep</span>.<span class="title function_">depend</span>()</span><br><span class="line">          <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)) &#123;</span><br><span class="line">            <span class="title function_">dependArray</span>(value)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> <span class="title function_">reactiveSetter</span> (newVal) &#123;</span><br><span class="line">      <span class="keyword">const</span> value = getter ? getter.<span class="title function_">call</span>(obj) : val</span><br><span class="line">      <span class="comment">/* eslint-disable no-self-compare */</span></span><br><span class="line">      <span class="keyword">if</span> (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/* eslint-enable no-self-compare */</span></span><br><span class="line">      <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span> &amp;&amp; customSetter) &#123;</span><br><span class="line">        <span class="title function_">customSetter</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// #7981: for accessor properties without setter</span></span><br><span class="line">      <span class="keyword">if</span> (getter &amp;&amp; !setter) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">if</span> (setter) &#123;</span><br><span class="line">        setter.<span class="title function_">call</span>(obj, newVal)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        val = newVal</span><br><span class="line">      &#125;</span><br><span class="line">      childOb = !shallow &amp;&amp; <span class="title function_">observe</span>(newVal)</span><br><span class="line">      <span class="comment">// å¯¹è§‚å¯Ÿè€…watchersè¿›è¡Œé€šçŸ¥,stateå°±æˆäº†å…¨å±€å“åº”å¼å¯¹è±¡</span></span><br><span class="line">      dep.<span class="title function_">notify</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/07/17/Vue/vue-Vue.observable/" data-id="cl7icg7d0010nugun2m7whr8j" data-title="vue-Vue.observable" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vue-slotæ’æ§½" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/07/05/vue-slot%E6%8F%92%E6%A7%BD/" class="article-date">
  <time class="dt-published" datetime="2018-07-05T12:17:48.000Z" itemprop="datePublished">2018-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/05/vue-slot%E6%8F%92%E6%A7%BD/">vue-slotæ’æ§½</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ä¸€ã€slotæ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€slotæ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€slotæ˜¯ä»€ä¹ˆ"></a>ä¸€ã€slotæ˜¯ä»€ä¹ˆ</h2><p>åœ¨HTMLä¸­ <code>slot</code> å…ƒç´  ï¼Œä½œä¸º <code>Web Components</code> æŠ€æœ¯å¥—ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯Webç»„ä»¶å†…çš„ä¸€ä¸ªå ä½ç¬¦</p>
<p>è¯¥å ä½ç¬¦å¯ä»¥åœ¨åæœŸä½¿ç”¨è‡ªå·±çš„æ ‡è®°è¯­è¨€å¡«å……</p>
<p>ä¸¾ä¸ªæ —å­</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;element-details-template&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;element-name&quot;</span>&gt;</span>Slot template<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">element-details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;element-name&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">element-details</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">element-details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;element-name&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">element-details</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>template</code>ä¸ä¼šå±•ç¤ºåˆ°é¡µé¢ä¸­ï¼Œéœ€è¦ä¼˜å…ˆè·å–å®ƒçš„å¼•ç”¨ï¼Œç„¶åæ·»åŠ åˆ°<code>DOM</code>ä¸­ï¼Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">customElements.<span class="title function_">define</span>(<span class="string">&#x27;element-details&#x27;</span>,</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">HTMLElement</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>();</span><br><span class="line">      <span class="keyword">const</span> template = <span class="variable language_">document</span></span><br><span class="line">        .<span class="title function_">getElementById</span>(<span class="string">&#x27;element-details-template&#x27;</span>)</span><br><span class="line">        .<span class="property">content</span>;</span><br><span class="line">      <span class="keyword">const</span> shadowRoot = <span class="variable language_">this</span>.<span class="title function_">attachShadow</span>(&#123;<span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span>&#125;)</span><br><span class="line">        .<span class="title function_">appendChild</span>(template.<span class="title function_">cloneNode</span>(<span class="literal">true</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>Vue</code>ä¸­çš„æ¦‚å¿µä¹Ÿæ˜¯å¦‚æ­¤</p>
<p><code>Slot</code> è‰ºåæ’æ§½ï¼ŒèŠ±åâ€œå å‘â€ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸º<code>solt</code>åœ¨ç»„ä»¶æ¨¡æ¿ä¸­å å¥½äº†ä½ç½®ï¼Œå½“ä½¿ç”¨è¯¥ç»„ä»¶æ ‡ç­¾æ—¶å€™ï¼Œç»„ä»¶æ ‡ç­¾é‡Œé¢çš„å†…å®¹å°±ä¼šè‡ªåŠ¨å¡«å‘ï¼ˆæ›¿æ¢ç»„ä»¶æ¨¡æ¿ä¸­<code>slot</code>ä½ç½®ï¼‰ï¼Œä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£</p>
<p>å¯ä»¥å°†å…¶ç±»æ¯”ä¸ºæ’å¡å¼çš„FCæ¸¸æˆæœºï¼Œæ¸¸æˆæœºæš´éœ²å¡æ§½ï¼ˆæ’æ§½ï¼‰è®©ç”¨æˆ·æ’å…¥ä¸åŒçš„æ¸¸æˆç£æ¡ï¼ˆè‡ªå®šä¹‰å†…å®¹ï¼‰</p>
<p>æ”¾å¼ å›¾æ„Ÿå—ä¸€ä¸‹ <img src="https://static.vue-js.com/63c0dff0-3dbd-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h2 id="äºŒã€ä½¿ç”¨åœºæ™¯"><a href="#äºŒã€ä½¿ç”¨åœºæ™¯" class="headerlink" title="äºŒã€ä½¿ç”¨åœºæ™¯"></a>äºŒã€ä½¿ç”¨åœºæ™¯</h2><p>é€šè¿‡æ’æ§½å¯ä»¥è®©ç”¨æˆ·å¯ä»¥æ‹“å±•ç»„ä»¶ï¼Œå»æ›´å¥½åœ°å¤ç”¨ç»„ä»¶å’Œå¯¹å…¶åšå®šåˆ¶åŒ–å¤„ç†</p>
<p>å¦‚æœçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨åˆ°ä¸€ä¸ªå¤ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œè·å–è¿™ä¸ªç»„ä»¶åœ¨ä¸åŒçš„åœ°æ–¹æœ‰å°‘é‡çš„æ›´æ”¹ï¼Œå¦‚æœå»é‡å†™ç»„ä»¶æ˜¯ä¸€ä»¶ä¸æ˜æ™ºçš„äº‹æƒ…</p>
<p>é€šè¿‡<code>slot</code>æ’æ§½å‘ç»„ä»¶å†…éƒ¨æŒ‡å®šä½ç½®ä¼ é€’å†…å®¹ï¼Œå®Œæˆè¿™ä¸ªå¤ç”¨ç»„ä»¶åœ¨ä¸åŒåœºæ™¯çš„åº”ç”¨</p>
<p>æ¯”å¦‚å¸ƒå±€ç»„ä»¶ã€è¡¨æ ¼åˆ—ã€ä¸‹æ‹‰é€‰ã€å¼¹æ¡†æ˜¾ç¤ºå†…å®¹ç­‰</p>
<h2 id="ä¸‰ã€åˆ†ç±»"><a href="#ä¸‰ã€åˆ†ç±»" class="headerlink" title="ä¸‰ã€åˆ†ç±»"></a>ä¸‰ã€åˆ†ç±»</h2><p><code>slot</code>å¯ä»¥åˆ†æ¥ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li>é»˜è®¤æ’æ§½</li>
<li>å…·åæ’æ§½</li>
<li>ä½œç”¨åŸŸæ’æ§½</li>
</ul>
<h3 id="é»˜è®¤æ’æ§½"><a href="#é»˜è®¤æ’æ§½" class="headerlink" title="é»˜è®¤æ’æ§½"></a>é»˜è®¤æ’æ§½</h3><p>å­ç»„ä»¶ç”¨&#96;&#96;æ ‡ç­¾æ¥ç¡®å®šæ¸²æŸ“çš„ä½ç½®ï¼Œæ ‡ç­¾é‡Œé¢å¯ä»¥æ”¾<code>DOM</code>ç»“æ„ï¼Œå½“çˆ¶ç»„ä»¶ä½¿ç”¨çš„æ—¶å€™æ²¡æœ‰å¾€æ’æ§½ä¼ å…¥å†…å®¹ï¼Œæ ‡ç­¾å†…<code>DOM</code>ç»“æ„å°±ä¼šæ˜¾ç¤ºåœ¨é¡µé¢</p>
<p>çˆ¶ç»„ä»¶åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥åœ¨å­ç»„ä»¶çš„æ ‡ç­¾å†…å†™å…¥å†…å®¹å³å¯</p>
<p>å­ç»„ä»¶<code>Child.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ’æ§½åå¤‡çš„å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Child</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>é»˜è®¤æ’æ§½<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å…·åæ’æ§½"><a href="#å…·åæ’æ§½" class="headerlink" title="å…·åæ’æ§½"></a>å…·åæ’æ§½</h3><p>å­ç»„ä»¶ç”¨<code>name</code>å±æ€§æ¥è¡¨ç¤ºæ’æ§½çš„åå­—ï¼Œä¸ä¼ ä¸ºé»˜è®¤æ’æ§½</p>
<p>çˆ¶ç»„ä»¶ä¸­åœ¨ä½¿ç”¨æ—¶åœ¨é»˜è®¤æ’æ§½çš„åŸºç¡€ä¸ŠåŠ ä¸Š<code>slot</code>å±æ€§ï¼Œå€¼ä¸ºå­ç»„ä»¶æ’æ§½<code>name</code>å±æ€§å€¼</p>
<p>å­ç»„ä»¶<code>Child.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>æ’æ§½åå¤‡çš„å†…å®¹<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span>&gt;</span>æ’æ§½åå¤‡çš„å†…å®¹<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span>å…·åæ’æ§½<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…·åæ’æ§½â½¤æ’æ§½ååšå‚æ•° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:content</span>&gt;</span>å†…å®¹...<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä½œç”¨åŸŸæ’æ§½"><a href="#ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä½œç”¨åŸŸæ’æ§½"></a>ä½œç”¨åŸŸæ’æ§½</h3><p>å­ç»„ä»¶åœ¨ä½œç”¨åŸŸä¸Šç»‘å®šå±æ€§æ¥å°†å­ç»„ä»¶çš„ä¿¡æ¯ä¼ ç»™çˆ¶ç»„ä»¶ä½¿ç”¨ï¼Œè¿™äº›å±æ€§ä¼šè¢«æŒ‚åœ¨çˆ¶ç»„ä»¶<code>v-slot</code>æ¥å—çš„å¯¹è±¡ä¸Š</p>
<p>çˆ¶ç»„ä»¶ä¸­åœ¨ä½¿ç”¨æ—¶é€šè¿‡<code>v-slot:</code>ï¼ˆç®€å†™ï¼š#ï¼‰è·å–å­ç»„ä»¶çš„ä¿¡æ¯ï¼Œåœ¨å†…å®¹ä¸­ä½¿ç”¨</p>
<p>å­ç»„ä»¶<code>Child.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">testProps</span>=<span class="string">&quot;å­ç»„ä»¶çš„å€¼&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h3</span>&gt;</span>æ²¡ä¼ footeræ’æ§½<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- æŠŠv-slotçš„å€¼æŒ‡å®šä¸ºä½œâ½¤åŸŸä¸Šä¸‹â½‚å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">      æ¥â¾ƒâ¼¦ç»„ä»¶æ•°æ®ï¼š&#123;&#123;slotProps.testProps&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">      æ¥â¾ƒâ¼¦ç»„ä»¶æ•°æ®ï¼š&#123;&#123;slotProps.testProps&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><ul>
<li><code>v-slot</code>å±æ€§åªèƒ½åœ¨&#96;ä¸Šä½¿ç”¨ï¼Œä½†åœ¨åªæœ‰é»˜è®¤æ’æ§½æ—¶å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨</li>
<li>é»˜è®¤æ’æ§½åä¸º<code>default</code>ï¼Œå¯ä»¥çœç•¥defaultç›´æ¥å†™<code>v-slot</code></li>
<li>ç¼©å†™ä¸º<code>#</code>æ—¶ä¸èƒ½ä¸å†™å‚æ•°ï¼Œå†™æˆ<code>#default</code></li>
<li>å¯ä»¥é€šè¿‡è§£æ„è·å–<code>v-slot=&#123;user&#125;</code>ï¼Œè¿˜å¯ä»¥é‡å‘½å<code>v-slot=&quot;&#123;user: newName&#125;&quot;</code>å’Œå®šä¹‰é»˜è®¤å€¼<code>v-slot=&quot;&#123;user = &#39;é»˜è®¤å€¼&#39;&#125;&quot;</code></li>
</ul>
<h2 id="å››ã€åŸç†åˆ†æ"><a href="#å››ã€åŸç†åˆ†æ" class="headerlink" title="å››ã€åŸç†åˆ†æ"></a>å››ã€åŸç†åˆ†æ</h2><p><code>slot</code>æœ¬è´¨ä¸Šæ˜¯è¿”å›<code>VNode</code>çš„å‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<code>Vue</code>ä¸­çš„ç»„ä»¶è¦æ¸²æŸ“åˆ°é¡µé¢ä¸Šéœ€è¦ç»è¿‡<code>template -&gt; render function -&gt; VNode -&gt; DOM</code> è¿‡ç¨‹ï¼Œè¿™é‡Œçœ‹çœ‹<code>slot</code>å¦‚ä½•å®ç°ï¼š</p>
<p>ç¼–å†™ä¸€ä¸ª<code>buttonCounter</code>ç»„ä»¶ï¼Œä½¿ç”¨åŒ¿åæ’æ§½</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;button-counter&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt; &lt;slot&gt;æˆ‘æ˜¯é»˜è®¤å†…å®¹&lt;/slot&gt;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è¯¥ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;button-counter&gt;&lt;span&gt;æˆ‘æ˜¯slotä¼ å…¥å†…å®¹&lt;/span&gt;&lt;/button-counter&gt;&#x27;</span>,</span><br><span class="line">    <span class="attr">components</span>:&#123;buttonCounter&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è·å–<code>buttonCounter</code>ç»„ä»¶æ¸²æŸ“å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> <span class="title function_">anonymous</span>(<span class="params"></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">with</span>(<span class="params"><span class="variable language_">this</span></span>)&#123;<span class="keyword">return</span> <span class="title function_">_c</span>(<span class="string">&#x27;div&#x27;</span>,[<span class="title function_">_t</span>(<span class="string">&quot;default&quot;</span>,[<span class="title function_">_v</span>(<span class="string">&quot;æˆ‘æ˜¯é»˜è®¤å†…å®¹&quot;</span>)])],<span class="number">2</span>)&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>_v</code>è¡¨ç¤ºç©¿ä»¶æ™®é€šæ–‡æœ¬èŠ‚ç‚¹ï¼Œ<code>_t</code>è¡¨ç¤ºæ¸²æŸ“æ’æ§½çš„å‡½æ•°</p>
<p>æ¸²æŸ“æ’æ§½å‡½æ•°<code>renderSlot</code>ï¼ˆåšäº†ç®€åŒ–ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">renderSlot</span> (</span><br><span class="line">  name,</span><br><span class="line">  fallback,</span><br><span class="line">  props,</span><br><span class="line">  bindObject</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="comment">// å¾—åˆ°æ¸²æŸ“æ’æ§½å†…å®¹çš„å‡½æ•°    </span></span><br><span class="line">  <span class="keyword">var</span> scopedSlotFn = <span class="variable language_">this</span>.<span class="property">$scopedSlots</span>[name];</span><br><span class="line">  <span class="keyword">var</span> nodes;</span><br><span class="line">  <span class="comment">// å¦‚æœå­˜åœ¨æ’æ§½æ¸²æŸ“å‡½æ•°ï¼Œåˆ™æ‰§è¡Œæ’æ§½æ¸²æŸ“å‡½æ•°ï¼Œç”ŸæˆnodesèŠ‚ç‚¹è¿”å›</span></span><br><span class="line">  <span class="comment">// å¦åˆ™ä½¿ç”¨é»˜è®¤å€¼</span></span><br><span class="line">  nodes = <span class="title function_">scopedSlotFn</span>(props) || fallback;</span><br><span class="line">  <span class="keyword">return</span> nodes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>name</code>å±æ€§è¡¨ç¤ºå®šä¹‰æ’æ§½çš„åå­—ï¼Œé»˜è®¤å€¼ä¸º<code>default</code>ï¼Œ<code>fallback</code>è¡¨ç¤ºå­ç»„ä»¶ä¸­çš„<code>slot</code>èŠ‚ç‚¹çš„é»˜è®¤å€¼</p>
<p>å…³äº<code>this.$scopredSlots</code>æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹<code>vm.slot</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">initRender</span> (vm) &#123;</span><br><span class="line">  ...</span><br><span class="line">  vm.<span class="property">$slots</span> = <span class="title function_">resolveSlots</span>(options.<span class="property">_renderChildren</span>, renderContext);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">resolveSlots`å‡½æ•°ä¼šå¯¹`children`èŠ‚ç‚¹åšå½’ç±»å’Œè¿‡æ»¤å¤„ç†ï¼Œè¿”å›`slots</span><br><span class="line">function resolveSlots (</span><br><span class="line">    children,</span><br><span class="line">    context</span><br><span class="line">  ) &#123;</span><br><span class="line">    if (!children || !children.length) &#123;</span><br><span class="line">      return &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var slots = &#123;&#125;;</span><br><span class="line">    for (var i = 0, l = children.length; i &lt; l; i++) &#123;</span><br><span class="line">      var child = children[i];</span><br><span class="line">      var data = child.data;</span><br><span class="line">      // remove slot attribute if the node is resolved as a Vue slot node</span><br><span class="line">      if (data &amp;&amp; data.attrs &amp;&amp; data.attrs.slot) &#123;</span><br><span class="line">        delete data.attrs.slot;</span><br><span class="line">      &#125;</span><br><span class="line">      // named slots should only be respected if the vnode was rendered in the</span><br><span class="line">      // same context.</span><br><span class="line">      if ((child.context === context || child.fnContext === context) &amp;&amp;</span><br><span class="line">        data &amp;&amp; data.slot != null</span><br><span class="line">      ) &#123;</span><br><span class="line">        // å¦‚æœslotå­˜åœ¨(slot=&quot;header&quot;) åˆ™æ‹¿å¯¹åº”çš„å€¼ä½œä¸ºkey</span><br><span class="line">        var name = data.slot;</span><br><span class="line">        var slot = (slots[name] || (slots[name] = []));</span><br><span class="line">        // å¦‚æœæ˜¯tempalteå…ƒç´  åˆ™æŠŠtemplateçš„childrenæ·»åŠ è¿›æ•°ç»„ä¸­ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä½ å†™çš„templateæ ‡ç­¾å¹¶ä¸ä¼šæ¸²æŸ“æˆå¦ä¸€ä¸ªæ ‡ç­¾åˆ°é¡µé¢</span><br><span class="line">        if (child.tag === &#x27;template&#x27;) &#123;</span><br><span class="line">          slot.push.apply(slot, child.children || []);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          slot.push(child);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // å¦‚æœæ²¡æœ‰å°±é»˜è®¤æ˜¯default</span><br><span class="line">        (slots.default || (slots.default = [])).push(child);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // ignore slots that contains only whitespace</span><br><span class="line">    for (var name$1 in slots) &#123;</span><br><span class="line">      if (slots[name$1].every(isWhitespace)) &#123;</span><br><span class="line">        delete slots[name$1];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return slots</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_render`æ¸²æŸ“å‡½æ•°é€šè¿‡`normalizeScopedSlots`å¾—åˆ°`vm.$scopedSlots</span><br><span class="line">vm.$scopedSlots = normalizeScopedSlots(</span><br><span class="line">  _parentVnode.data.scopedSlots,</span><br><span class="line">  vm.$slots,</span><br><span class="line">  vm.$scopedSlots</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä½œç”¨åŸŸæ’æ§½ä¸­çˆ¶ç»„ä»¶èƒ½å¤Ÿå¾—åˆ°å­ç»„ä»¶çš„å€¼æ˜¯å› ä¸ºåœ¨<code>renderSlot</code>çš„æ—¶å€™æ‰§è¡Œä¼šä¼ å…¥<code>props</code>ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°<code>_t</code>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œçˆ¶ç»„ä»¶åˆ™èƒ½å¤Ÿå¾—åˆ°å­ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/07/05/vue-slot%E6%8F%92%E6%A7%BD/" data-id="cl7ibm46l0001igun53zi5v46" data-title="vue-slotæ’æ§½" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue/vue-slotæ’æ§½" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/07/05/Vue/vue-slot%E6%8F%92%E6%A7%BD/" class="article-date">
  <time class="dt-published" datetime="2018-07-05T12:17:48.000Z" itemprop="datePublished">2018-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/05/Vue/vue-slot%E6%8F%92%E6%A7%BD/">vue-slotæ’æ§½</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ä¸€ã€slotæ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€slotæ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€slotæ˜¯ä»€ä¹ˆ"></a>ä¸€ã€slotæ˜¯ä»€ä¹ˆ</h2><p>åœ¨HTMLä¸­ <code>slot</code> å…ƒç´  ï¼Œä½œä¸º <code>Web Components</code> æŠ€æœ¯å¥—ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯Webç»„ä»¶å†…çš„ä¸€ä¸ªå ä½ç¬¦</p>
<p>è¯¥å ä½ç¬¦å¯ä»¥åœ¨åæœŸä½¿ç”¨è‡ªå·±çš„æ ‡è®°è¯­è¨€å¡«å……</p>
<p>ä¸¾ä¸ªæ —å­</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;element-details-template&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;element-name&quot;</span>&gt;</span>Slot template<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">element-details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;element-name&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">element-details</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">element-details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;element-name&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">element-details</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>template</code>ä¸ä¼šå±•ç¤ºåˆ°é¡µé¢ä¸­ï¼Œéœ€è¦ä¼˜å…ˆè·å–å®ƒçš„å¼•ç”¨ï¼Œç„¶åæ·»åŠ åˆ°<code>DOM</code>ä¸­ï¼Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">customElements.<span class="title function_">define</span>(<span class="string">&#x27;element-details&#x27;</span>,</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">HTMLElement</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>();</span><br><span class="line">      <span class="keyword">const</span> template = <span class="variable language_">document</span></span><br><span class="line">        .<span class="title function_">getElementById</span>(<span class="string">&#x27;element-details-template&#x27;</span>)</span><br><span class="line">        .<span class="property">content</span>;</span><br><span class="line">      <span class="keyword">const</span> shadowRoot = <span class="variable language_">this</span>.<span class="title function_">attachShadow</span>(&#123;<span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span>&#125;)</span><br><span class="line">        .<span class="title function_">appendChild</span>(template.<span class="title function_">cloneNode</span>(<span class="literal">true</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>Vue</code>ä¸­çš„æ¦‚å¿µä¹Ÿæ˜¯å¦‚æ­¤</p>
<p><code>Slot</code> è‰ºåæ’æ§½ï¼ŒèŠ±åâ€œå å‘â€ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸º<code>solt</code>åœ¨ç»„ä»¶æ¨¡æ¿ä¸­å å¥½äº†ä½ç½®ï¼Œå½“ä½¿ç”¨è¯¥ç»„ä»¶æ ‡ç­¾æ—¶å€™ï¼Œç»„ä»¶æ ‡ç­¾é‡Œé¢çš„å†…å®¹å°±ä¼šè‡ªåŠ¨å¡«å‘ï¼ˆæ›¿æ¢ç»„ä»¶æ¨¡æ¿ä¸­<code>slot</code>ä½ç½®ï¼‰ï¼Œä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£</p>
<p>å¯ä»¥å°†å…¶ç±»æ¯”ä¸ºæ’å¡å¼çš„FCæ¸¸æˆæœºï¼Œæ¸¸æˆæœºæš´éœ²å¡æ§½ï¼ˆæ’æ§½ï¼‰è®©ç”¨æˆ·æ’å…¥ä¸åŒçš„æ¸¸æˆç£æ¡ï¼ˆè‡ªå®šä¹‰å†…å®¹ï¼‰</p>
<p>æ”¾å¼ å›¾æ„Ÿå—ä¸€ä¸‹ <img src="https://static.vue-js.com/63c0dff0-3dbd-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h2 id="äºŒã€ä½¿ç”¨åœºæ™¯"><a href="#äºŒã€ä½¿ç”¨åœºæ™¯" class="headerlink" title="äºŒã€ä½¿ç”¨åœºæ™¯"></a>äºŒã€ä½¿ç”¨åœºæ™¯</h2><p>é€šè¿‡æ’æ§½å¯ä»¥è®©ç”¨æˆ·å¯ä»¥æ‹“å±•ç»„ä»¶ï¼Œå»æ›´å¥½åœ°å¤ç”¨ç»„ä»¶å’Œå¯¹å…¶åšå®šåˆ¶åŒ–å¤„ç†</p>
<p>å¦‚æœçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨åˆ°ä¸€ä¸ªå¤ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œè·å–è¿™ä¸ªç»„ä»¶åœ¨ä¸åŒçš„åœ°æ–¹æœ‰å°‘é‡çš„æ›´æ”¹ï¼Œå¦‚æœå»é‡å†™ç»„ä»¶æ˜¯ä¸€ä»¶ä¸æ˜æ™ºçš„äº‹æƒ…</p>
<p>é€šè¿‡<code>slot</code>æ’æ§½å‘ç»„ä»¶å†…éƒ¨æŒ‡å®šä½ç½®ä¼ é€’å†…å®¹ï¼Œå®Œæˆè¿™ä¸ªå¤ç”¨ç»„ä»¶åœ¨ä¸åŒåœºæ™¯çš„åº”ç”¨</p>
<p>æ¯”å¦‚å¸ƒå±€ç»„ä»¶ã€è¡¨æ ¼åˆ—ã€ä¸‹æ‹‰é€‰ã€å¼¹æ¡†æ˜¾ç¤ºå†…å®¹ç­‰</p>
<h2 id="ä¸‰ã€åˆ†ç±»"><a href="#ä¸‰ã€åˆ†ç±»" class="headerlink" title="ä¸‰ã€åˆ†ç±»"></a>ä¸‰ã€åˆ†ç±»</h2><p><code>slot</code>å¯ä»¥åˆ†æ¥ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li>é»˜è®¤æ’æ§½</li>
<li>å…·åæ’æ§½</li>
<li>ä½œç”¨åŸŸæ’æ§½</li>
</ul>
<h3 id="é»˜è®¤æ’æ§½"><a href="#é»˜è®¤æ’æ§½" class="headerlink" title="é»˜è®¤æ’æ§½"></a>é»˜è®¤æ’æ§½</h3><p>å­ç»„ä»¶ç”¨&#96;&#96;æ ‡ç­¾æ¥ç¡®å®šæ¸²æŸ“çš„ä½ç½®ï¼Œæ ‡ç­¾é‡Œé¢å¯ä»¥æ”¾<code>DOM</code>ç»“æ„ï¼Œå½“çˆ¶ç»„ä»¶ä½¿ç”¨çš„æ—¶å€™æ²¡æœ‰å¾€æ’æ§½ä¼ å…¥å†…å®¹ï¼Œæ ‡ç­¾å†…<code>DOM</code>ç»“æ„å°±ä¼šæ˜¾ç¤ºåœ¨é¡µé¢</p>
<p>çˆ¶ç»„ä»¶åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥åœ¨å­ç»„ä»¶çš„æ ‡ç­¾å†…å†™å…¥å†…å®¹å³å¯</p>
<p>å­ç»„ä»¶<code>Child.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ’æ§½åå¤‡çš„å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Child</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>é»˜è®¤æ’æ§½<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å…·åæ’æ§½"><a href="#å…·åæ’æ§½" class="headerlink" title="å…·åæ’æ§½"></a>å…·åæ’æ§½</h3><p>å­ç»„ä»¶ç”¨<code>name</code>å±æ€§æ¥è¡¨ç¤ºæ’æ§½çš„åå­—ï¼Œä¸ä¼ ä¸ºé»˜è®¤æ’æ§½</p>
<p>çˆ¶ç»„ä»¶ä¸­åœ¨ä½¿ç”¨æ—¶åœ¨é»˜è®¤æ’æ§½çš„åŸºç¡€ä¸ŠåŠ ä¸Š<code>slot</code>å±æ€§ï¼Œå€¼ä¸ºå­ç»„ä»¶æ’æ§½<code>name</code>å±æ€§å€¼</p>
<p>å­ç»„ä»¶<code>Child.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>æ’æ§½åå¤‡çš„å†…å®¹<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span>&gt;</span>æ’æ§½åå¤‡çš„å†…å®¹<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span>å…·åæ’æ§½<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…·åæ’æ§½â½¤æ’æ§½ååšå‚æ•° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:content</span>&gt;</span>å†…å®¹...<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä½œç”¨åŸŸæ’æ§½"><a href="#ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä½œç”¨åŸŸæ’æ§½"></a>ä½œç”¨åŸŸæ’æ§½</h3><p>å­ç»„ä»¶åœ¨ä½œç”¨åŸŸä¸Šç»‘å®šå±æ€§æ¥å°†å­ç»„ä»¶çš„ä¿¡æ¯ä¼ ç»™çˆ¶ç»„ä»¶ä½¿ç”¨ï¼Œè¿™äº›å±æ€§ä¼šè¢«æŒ‚åœ¨çˆ¶ç»„ä»¶<code>v-slot</code>æ¥å—çš„å¯¹è±¡ä¸Š</p>
<p>çˆ¶ç»„ä»¶ä¸­åœ¨ä½¿ç”¨æ—¶é€šè¿‡<code>v-slot:</code>ï¼ˆç®€å†™ï¼š#ï¼‰è·å–å­ç»„ä»¶çš„ä¿¡æ¯ï¼Œåœ¨å†…å®¹ä¸­ä½¿ç”¨</p>
<p>å­ç»„ä»¶<code>Child.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">testProps</span>=<span class="string">&quot;å­ç»„ä»¶çš„å€¼&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h3</span>&gt;</span>æ²¡ä¼ footeræ’æ§½<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- æŠŠv-slotçš„å€¼æŒ‡å®šä¸ºä½œâ½¤åŸŸä¸Šä¸‹â½‚å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">      æ¥â¾ƒâ¼¦ç»„ä»¶æ•°æ®ï¼š&#123;&#123;slotProps.testProps&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">      æ¥â¾ƒâ¼¦ç»„ä»¶æ•°æ®ï¼š&#123;&#123;slotProps.testProps&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><ul>
<li><code>v-slot</code>å±æ€§åªèƒ½åœ¨&#96;ä¸Šä½¿ç”¨ï¼Œä½†åœ¨åªæœ‰é»˜è®¤æ’æ§½æ—¶å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨</li>
<li>é»˜è®¤æ’æ§½åä¸º<code>default</code>ï¼Œå¯ä»¥çœç•¥defaultç›´æ¥å†™<code>v-slot</code></li>
<li>ç¼©å†™ä¸º<code>#</code>æ—¶ä¸èƒ½ä¸å†™å‚æ•°ï¼Œå†™æˆ<code>#default</code></li>
<li>å¯ä»¥é€šè¿‡è§£æ„è·å–<code>v-slot=&#123;user&#125;</code>ï¼Œè¿˜å¯ä»¥é‡å‘½å<code>v-slot=&quot;&#123;user: newName&#125;&quot;</code>å’Œå®šä¹‰é»˜è®¤å€¼<code>v-slot=&quot;&#123;user = &#39;é»˜è®¤å€¼&#39;&#125;&quot;</code></li>
</ul>
<h2 id="å››ã€åŸç†åˆ†æ"><a href="#å››ã€åŸç†åˆ†æ" class="headerlink" title="å››ã€åŸç†åˆ†æ"></a>å››ã€åŸç†åˆ†æ</h2><p><code>slot</code>æœ¬è´¨ä¸Šæ˜¯è¿”å›<code>VNode</code>çš„å‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<code>Vue</code>ä¸­çš„ç»„ä»¶è¦æ¸²æŸ“åˆ°é¡µé¢ä¸Šéœ€è¦ç»è¿‡<code>template -&gt; render function -&gt; VNode -&gt; DOM</code> è¿‡ç¨‹ï¼Œè¿™é‡Œçœ‹çœ‹<code>slot</code>å¦‚ä½•å®ç°ï¼š</p>
<p>ç¼–å†™ä¸€ä¸ª<code>buttonCounter</code>ç»„ä»¶ï¼Œä½¿ç”¨åŒ¿åæ’æ§½</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;button-counter&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt; &lt;slot&gt;æˆ‘æ˜¯é»˜è®¤å†…å®¹&lt;/slot&gt;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è¯¥ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;button-counter&gt;&lt;span&gt;æˆ‘æ˜¯slotä¼ å…¥å†…å®¹&lt;/span&gt;&lt;/button-counter&gt;&#x27;</span>,</span><br><span class="line">    <span class="attr">components</span>:&#123;buttonCounter&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è·å–<code>buttonCounter</code>ç»„ä»¶æ¸²æŸ“å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> <span class="title function_">anonymous</span>(<span class="params"></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">with</span>(<span class="params"><span class="variable language_">this</span></span>)&#123;<span class="keyword">return</span> <span class="title function_">_c</span>(<span class="string">&#x27;div&#x27;</span>,[<span class="title function_">_t</span>(<span class="string">&quot;default&quot;</span>,[<span class="title function_">_v</span>(<span class="string">&quot;æˆ‘æ˜¯é»˜è®¤å†…å®¹&quot;</span>)])],<span class="number">2</span>)&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>_v</code>è¡¨ç¤ºç©¿ä»¶æ™®é€šæ–‡æœ¬èŠ‚ç‚¹ï¼Œ<code>_t</code>è¡¨ç¤ºæ¸²æŸ“æ’æ§½çš„å‡½æ•°</p>
<p>æ¸²æŸ“æ’æ§½å‡½æ•°<code>renderSlot</code>ï¼ˆåšäº†ç®€åŒ–ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">renderSlot</span> (</span><br><span class="line">  name,</span><br><span class="line">  fallback,</span><br><span class="line">  props,</span><br><span class="line">  bindObject</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="comment">// å¾—åˆ°æ¸²æŸ“æ’æ§½å†…å®¹çš„å‡½æ•°    </span></span><br><span class="line">  <span class="keyword">var</span> scopedSlotFn = <span class="variable language_">this</span>.<span class="property">$scopedSlots</span>[name];</span><br><span class="line">  <span class="keyword">var</span> nodes;</span><br><span class="line">  <span class="comment">// å¦‚æœå­˜åœ¨æ’æ§½æ¸²æŸ“å‡½æ•°ï¼Œåˆ™æ‰§è¡Œæ’æ§½æ¸²æŸ“å‡½æ•°ï¼Œç”ŸæˆnodesèŠ‚ç‚¹è¿”å›</span></span><br><span class="line">  <span class="comment">// å¦åˆ™ä½¿ç”¨é»˜è®¤å€¼</span></span><br><span class="line">  nodes = <span class="title function_">scopedSlotFn</span>(props) || fallback;</span><br><span class="line">  <span class="keyword">return</span> nodes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>name</code>å±æ€§è¡¨ç¤ºå®šä¹‰æ’æ§½çš„åå­—ï¼Œé»˜è®¤å€¼ä¸º<code>default</code>ï¼Œ<code>fallback</code>è¡¨ç¤ºå­ç»„ä»¶ä¸­çš„<code>slot</code>èŠ‚ç‚¹çš„é»˜è®¤å€¼</p>
<p>å…³äº<code>this.$scopredSlots</code>æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹<code>vm.slot</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">initRender</span> (vm) &#123;</span><br><span class="line">  ...</span><br><span class="line">  vm.<span class="property">$slots</span> = <span class="title function_">resolveSlots</span>(options.<span class="property">_renderChildren</span>, renderContext);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">resolveSlots`å‡½æ•°ä¼šå¯¹`children`èŠ‚ç‚¹åšå½’ç±»å’Œè¿‡æ»¤å¤„ç†ï¼Œè¿”å›`slots</span><br><span class="line">function resolveSlots (</span><br><span class="line">    children,</span><br><span class="line">    context</span><br><span class="line">  ) &#123;</span><br><span class="line">    if (!children || !children.length) &#123;</span><br><span class="line">      return &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var slots = &#123;&#125;;</span><br><span class="line">    for (var i = 0, l = children.length; i &lt; l; i++) &#123;</span><br><span class="line">      var child = children[i];</span><br><span class="line">      var data = child.data;</span><br><span class="line">      // remove slot attribute if the node is resolved as a Vue slot node</span><br><span class="line">      if (data &amp;&amp; data.attrs &amp;&amp; data.attrs.slot) &#123;</span><br><span class="line">        delete data.attrs.slot;</span><br><span class="line">      &#125;</span><br><span class="line">      // named slots should only be respected if the vnode was rendered in the</span><br><span class="line">      // same context.</span><br><span class="line">      if ((child.context === context || child.fnContext === context) &amp;&amp;</span><br><span class="line">        data &amp;&amp; data.slot != null</span><br><span class="line">      ) &#123;</span><br><span class="line">        // å¦‚æœslotå­˜åœ¨(slot=&quot;header&quot;) åˆ™æ‹¿å¯¹åº”çš„å€¼ä½œä¸ºkey</span><br><span class="line">        var name = data.slot;</span><br><span class="line">        var slot = (slots[name] || (slots[name] = []));</span><br><span class="line">        // å¦‚æœæ˜¯tempalteå…ƒç´  åˆ™æŠŠtemplateçš„childrenæ·»åŠ è¿›æ•°ç»„ä¸­ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä½ å†™çš„templateæ ‡ç­¾å¹¶ä¸ä¼šæ¸²æŸ“æˆå¦ä¸€ä¸ªæ ‡ç­¾åˆ°é¡µé¢</span><br><span class="line">        if (child.tag === &#x27;template&#x27;) &#123;</span><br><span class="line">          slot.push.apply(slot, child.children || []);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          slot.push(child);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // å¦‚æœæ²¡æœ‰å°±é»˜è®¤æ˜¯default</span><br><span class="line">        (slots.default || (slots.default = [])).push(child);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // ignore slots that contains only whitespace</span><br><span class="line">    for (var name$1 in slots) &#123;</span><br><span class="line">      if (slots[name$1].every(isWhitespace)) &#123;</span><br><span class="line">        delete slots[name$1];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return slots</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_render`æ¸²æŸ“å‡½æ•°é€šè¿‡`normalizeScopedSlots`å¾—åˆ°`vm.$scopedSlots</span><br><span class="line">vm.$scopedSlots = normalizeScopedSlots(</span><br><span class="line">  _parentVnode.data.scopedSlots,</span><br><span class="line">  vm.$slots,</span><br><span class="line">  vm.$scopedSlots</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä½œç”¨åŸŸæ’æ§½ä¸­çˆ¶ç»„ä»¶èƒ½å¤Ÿå¾—åˆ°å­ç»„ä»¶çš„å€¼æ˜¯å› ä¸ºåœ¨<code>renderSlot</code>çš„æ—¶å€™æ‰§è¡Œä¼šä¼ å…¥<code>props</code>ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°<code>_t</code>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œçˆ¶ç»„ä»¶åˆ™èƒ½å¤Ÿå¾—åˆ°å­ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/07/05/Vue/vue-slot%E6%8F%92%E6%A7%BD/" data-id="cl7icg7cw010bugun6fb954r3" data-title="vue-slotæ’æ§½" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue/vue-router+vuexåŸç†" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/07/02/Vue/vue-router+vuex%E5%8E%9F%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2018-07-02T10:51:46.000Z" itemprop="datePublished">2018-07-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/02/Vue/vue-router+vuex%E5%8E%9F%E7%90%86/">vue-router+vuexåŸç†</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h2><blockquote>
<p>Vue Router æ˜¯ Vue.js å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå’Œ Vue.js çš„æ ¸å¿ƒæ·±åº¦é›†æˆï¼Œè®©æ„å»ºå•â»šé¢åº”ç”¨å˜å¾—æ˜“å¦‚å æŒã€‚</p>
</blockquote>
<p>å®‰è£…: vue add router æ ¸å¿ƒæ­¥éª¤:</p>
<ol>
<li>æ­¥éª¤ä¸€:ä½¿ç”¨vue-routeræ’ä»¶ï¼Œrouter.js</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Router from &#x27;vue-router&#x27; </span><br><span class="line">Vue.use(Router)</span><br></pre></td></tr></table></figure>

<ol>
<li>æ­¥éª¤äºŒ:åˆ›å»ºRouterå®ä¾‹ï¼Œrouter.js</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export default new Router(&#123;...&#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li>æ­¥éª¤ä¸‰:åœ¨æ ¹ç»„ä»¶ä¸Šæ·»åŠ è¯¥å®ä¾‹ï¼Œmain.js</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">    router,</span><br><span class="line">&#125;).$mount(&quot;#app&quot;);</span><br></pre></td></tr></table></figure>

<ol>
<li>æ­¥éª¤å››:æ·»åŠ è·¯ç”±è§†å›¾ï¼Œ<code>App.vue</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>

<p>å¯¼èˆª</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/&quot;&gt;Home&lt;/router-link&gt; </span><br><span class="line">&lt;router-link to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<h3 id="vue-routeræºç å®ç°"><a href="#vue-routeræºç å®ç°" class="headerlink" title="vue-routeræºç å®ç°"></a>vue-routeræºç å®ç°</h3><ul>
<li>ä½œä¸ºä¸€ä¸ªæ’ä»¶å­˜åœ¨:å®ç°<code>VueRouter</code>ç±»å’Œ<code>install</code>æ–¹æ³•</li>
<li>å®ç°ä¸¤ä¸ªå…¨å±€ç»„ä»¶:<code>router-view</code>ç”¨äºæ˜¾ç¤ºåŒ¹é…ç»„ä»¶å†…å®¹ï¼Œ<code>router-link</code>ç”¨äºè·³è½¬</li>
<li>ç›‘æ§<code>url</code>å˜åŒ–:ç›‘å¬<code>hashchange</code>æˆ–<code>popstate</code>äº‹ä»¶</li>
<li>å“åº”æœ€æ–°<code>url</code>:åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„å±æ€§<code>current</code>ï¼Œå½“å®ƒæ”¹å˜æ—¶è·å–å¯¹åº”ç»„ä»¶å¹¶æ˜¾ç¤º</li>
</ul>
<p>åˆ›å»ºkvue-router.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">// æˆ‘ä»¬çš„æ’ä»¶ï¼š</span><br><span class="line">// 1.å®ç°ä¸€ä¸ªRouterç±»å¹¶æŒ‚è½½æœŸå®ä¾‹</span><br><span class="line">// 2.å®ç°ä¸¤ä¸ªå…¨å±€ç»„ä»¶router-linkå’Œrouter-view</span><br><span class="line">let Vue;</span><br><span class="line"></span><br><span class="line">class VueRouter &#123;</span><br><span class="line">  // æ ¸å¿ƒä»»åŠ¡ï¼š</span><br><span class="line">  // 1.ç›‘å¬urlå˜åŒ–</span><br><span class="line">  constructor(options) &#123;</span><br><span class="line">    this.$options = options;</span><br><span class="line"></span><br><span class="line">    // ç¼“å­˜pathå’Œrouteæ˜ å°„å…³ç³»</span><br><span class="line">    // è¿™æ ·æ‰¾ç»„ä»¶æ›´å¿«</span><br><span class="line">    this.routeMap = &#123;&#125;</span><br><span class="line">    this.$options.routes.forEach(route =&gt; &#123;</span><br><span class="line">      this.routeMap[route.path] = route</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    // æ•°æ®å“åº”å¼</span><br><span class="line">    // å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„currentï¼Œåˆ™å¦‚æœä»–å˜äº†ï¼Œé‚£ä¹ˆä½¿ç”¨å®ƒçš„ç»„ä»¶ä¼šrerender</span><br><span class="line">    Vue.util.defineReactive(this, &#x27;current&#x27;, &#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    // è¯·ç¡®ä¿onHashChangeä¸­thisæŒ‡å‘å½“å‰å®ä¾‹</span><br><span class="line">    window.addEventListener(&#x27;hashchange&#x27;, this.onHashChange.bind(this))</span><br><span class="line">    window.addEventListener(&#x27;load&#x27;, this.onHashChange.bind(this))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onHashChange() &#123;</span><br><span class="line">    // console.log(window.location.hash);</span><br><span class="line">    this.current = window.location.hash.slice(1) || &#x27;/&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ’ä»¶éœ€è¦å®ç°installæ–¹æ³•</span><br><span class="line">// æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼ŒVueæ„é€ å‡½æ•°ï¼Œä¸»è¦ç”¨äºæ•°æ®å“åº”å¼</span><br><span class="line">VueRouter.install = function (_Vue) &#123;</span><br><span class="line">  // ä¿å­˜Vueæ„é€ å‡½æ•°åœ¨VueRouterä¸­ä½¿ç”¨</span><br><span class="line">  Vue = _Vue</span><br><span class="line"></span><br><span class="line">  // ä»»åŠ¡1ï¼šä½¿ç”¨æ··å…¥æ¥åšrouteræŒ‚è½½è¿™ä»¶äº‹æƒ…</span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      // åªæœ‰æ ¹å®ä¾‹æ‰æœ‰routeré€‰é¡¹</span><br><span class="line">      if (this.$options.router) &#123;</span><br><span class="line">        Vue.prototype.$router = this.$options.router</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // ä»»åŠ¡2ï¼šå®ç°ä¸¤ä¸ªå…¨å±€ç»„ä»¶</span><br><span class="line">  // router-link: ç”Ÿæˆä¸€ä¸ªaæ ‡ç­¾ï¼Œåœ¨urlåé¢æ·»åŠ #</span><br><span class="line">  // &lt;a href=&quot;#/about&quot;&gt;aaaa&lt;/a&gt;</span><br><span class="line">  // &lt;router-link to=&quot;/about&quot;&gt;aaa&lt;/router-link&gt;</span><br><span class="line">  Vue.component(&#x27;router-link&#x27;, &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">      to: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        required: true</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    render(h) &#123;</span><br><span class="line">      // h(tag, props, children)</span><br><span class="line">      return h(&#x27;a&#x27;,</span><br><span class="line">        &#123; attrs: &#123; href: &#x27;#&#x27; + this.to &#125; &#125;,</span><br><span class="line">        this.$slots.default</span><br><span class="line">      )</span><br><span class="line">      // ä½¿ç”¨jsx</span><br><span class="line">      // return &lt;a href=&#123;&#x27;#&#x27;+this.to&#125;&gt;&#123;this.$slots.default&#125;&lt;/a&gt;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  Vue.component(&#x27;router-view&#x27;, &#123;</span><br><span class="line">    render(h) &#123;</span><br><span class="line">      // æ ¹æ®currentè·å–ç»„ä»¶å¹¶render</span><br><span class="line">      // currentæ€ä¹ˆè·å–?</span><br><span class="line">      // console.log(&#x27;render&#x27;,this.$router.current);</span><br><span class="line">      // è·å–è¦æ¸²æŸ“çš„ç»„ä»¶</span><br><span class="line">      let component = null</span><br><span class="line">      const &#123; routeMap, current &#125; = this.$router</span><br><span class="line">      if (routeMap[current]) &#123;</span><br><span class="line">        component = routeMap[current].component</span><br><span class="line">      &#125;</span><br><span class="line">      return h(component)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default VueRouter</span><br></pre></td></tr></table></figure>

<h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><blockquote>
<p>Vuex é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–</p>
</blockquote>
<h3 id="æ•´åˆvuex"><a href="#æ•´åˆvuex" class="headerlink" title="æ•´åˆvuex"></a>æ•´åˆ<strong>vuex</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue add vuex</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒæ¦‚å¿µ</p>
<ul>
<li>state çŠ¶æ€ã€æ•°æ®</li>
<li>mutations æ›´æ”¹çŠ¶æ€çš„å‡½æ•°</li>
<li>actions å¼‚æ­¥æ“ä½œ</li>
<li>store åŒ…å«ä»¥ä¸Šæ¦‚å¿µçš„å®¹å™¨</li>
</ul>
<ol>
<li>çŠ¶æ€ <strong>- state</strong></li>
</ol>
<p>stateä¿å­˜åº”ç”¨çŠ¶æ€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123; state: &#123; counter:0 &#125;,&#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li>çŠ¶æ€å˜æ›´ <strong>- mutations</strong></li>
</ol>
<p>mutationsç”¨äºä¿®æ”¹çŠ¶æ€ï¼Œstore.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">    mutations:</span><br><span class="line">    &#123;</span><br><span class="line">      add(state) &#123;</span><br><span class="line">        state.counter++</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li>æ´¾ç”ŸçŠ¶æ€ <strong>- getters</strong></li>
</ol>
<p>ä»stateæ´¾ç”Ÿå‡ºæ–°çŠ¶æ€ï¼Œç±»ä¼¼è®¡ç®—å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">    getters:</span><br><span class="line">    &#123;</span><br><span class="line">      doubleCounter(state) &#123; // è®¡ç®—å‰©ä½™æ•°é‡ return state.counter * 2;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li>åŠ¨ä½œ <strong>- actions</strong></li>
</ol>
<p>åŠ ä¸šåŠ¡é€»è¾‘ï¼Œç±»ä¼¼äºcontroller</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">    actions:</span><br><span class="line">    &#123;</span><br><span class="line">      add(&#123;</span><br><span class="line">        commit</span><br><span class="line">      &#125;) &#123;</span><br><span class="line">        setTimeout(() = &gt;&#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä»£ç :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;p @click=&quot;$store.commit(&#x27;add&#x27;)&quot;&gt;counter: &#123;&#123;$store.state.counter&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p @click=&quot;$store.dispatch(&#x27;add&#x27;)&quot;&gt;async counter: &#123;&#123;$store.state.counter&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;double:&#123;&#123;$store.getters.doubleCounter&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h3 id="vuexåŸç†è§£æ"><a href="#vuexåŸç†è§£æ" class="headerlink" title="vuexåŸç†è§£æ"></a><strong>vuex</strong>åŸç†è§£æ</h3><ul>
<li>å®ç°ä¸€ä¸ªæ’ä»¶:å£°æ˜Storeç±»ï¼ŒæŒ‚è½½$store</li>
<li>Storeå…·ä½“å®ç°:<ul>
<li>åˆ›å»ºå“åº”å¼çš„stateï¼Œä¿å­˜mutationsã€actionså’Œgetters</li>
<li>å®ç°commitæ ¹æ®ç”¨æˆ·ä¼ å…¥typeæ‰§è¡Œå¯¹åº”mutation</li>
<li>å®ç°dispatchæ ¹æ®ç”¨æˆ·ä¼ å…¥typeæ‰§è¡Œå¯¹åº”actionï¼ŒåŒæ—¶ä¼ é€’ä¸Šä¸‹æ–‡</li>
<li>å®ç°gettersï¼ŒæŒ‰ç…§getterså®šä¹‰å¯¹stateåšæ´¾ç”Ÿ</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">// ç›®æ ‡1ï¼šå®ç°Storeç±»ï¼Œç®¡ç†stateï¼ˆå“åº”å¼çš„ï¼‰ï¼Œcommitæ–¹æ³•å’Œdispatchæ–¹æ³•</span><br><span class="line">// ç›®æ ‡2ï¼šå°è£…ä¸€ä¸ªæ’ä»¶ï¼Œä½¿ç”¨æ›´å®¹æ˜“ä½¿ç”¨</span><br><span class="line">let Vue;</span><br><span class="line"></span><br><span class="line">class Store &#123;</span><br><span class="line">  constructor(options) &#123;</span><br><span class="line">    // å®šä¹‰å“åº”å¼çš„state</span><br><span class="line">    // this.$store.state.xx</span><br><span class="line">    // å€Ÿé¸¡ç”Ÿè›‹</span><br><span class="line">    this._vm = new Vue(&#123;</span><br><span class="line">      data: &#123;</span><br><span class="line">        $$state: options.state</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    this._mutations = options.mutations</span><br><span class="line">    this._actions = options.actions</span><br><span class="line"></span><br><span class="line">    // ç»‘å®šthisæŒ‡å‘</span><br><span class="line">    this.commit = this.commit.bind(this)</span><br><span class="line">    this.dispatch = this.dispatch.bind(this)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // åªè¯»</span><br><span class="line">  get state() &#123;</span><br><span class="line">    return this._vm._data.$$state</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  set state(val) &#123;</span><br><span class="line">    console.error(&#x27;ä¸èƒ½ç›´æ¥èµ‹å€¼å‘€ï¼Œè¯·æ¢åˆ«çš„æ–¹å¼ï¼ï¼å¤©ç‹ç›–åœ°è™ï¼ï¼&#x27;);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // å®ç°commitæ–¹æ³•ï¼Œå¯ä»¥ä¿®æ”¹state</span><br><span class="line">  commit(type, payload) &#123;</span><br><span class="line">    // æ‹¿å‡ºmutationsä¸­çš„å¤„ç†å‡½æ•°æ‰§è¡Œå®ƒ</span><br><span class="line">    const entry = this._mutations[type]</span><br><span class="line">    if (!entry) &#123;</span><br><span class="line">      console.error(&#x27;æœªçŸ¥mutaionç±»å‹&#x27;);</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    entry(this.state, payload)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  dispatch(type, payload) &#123;</span><br><span class="line">    const entry = this._actions[type]</span><br><span class="line"></span><br><span class="line">    if (!entry) &#123;</span><br><span class="line">      console.error(&#x27;æœªçŸ¥actionç±»å‹&#x27;);</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ä¸Šä¸‹æ–‡å¯ä»¥ä¼ é€’å½“å‰storeå®ä¾‹è¿›å»å³å¯</span><br><span class="line">    entry(this, payload)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function install(_Vue)&#123;</span><br><span class="line">  Vue = _Vue</span><br><span class="line"></span><br><span class="line">  // æ··å…¥storeå®ä¾‹</span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      if (this.$options.store) &#123;</span><br><span class="line">        Vue.prototype.$store = this.$options.store</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// &#123; Store, install &#125;ç›¸å½“äºVuex</span><br><span class="line">// å®ƒå¿…é¡»å®ç°installæ–¹æ³•</span><br><span class="line">export default &#123; Store, install &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/07/02/Vue/vue-router+vuex%E5%8E%9F%E7%90%86/" data-id="cl7icg7ct0104ugunfa7sge9u" data-title="vue-router+vuexåŸç†" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue/vue-mixin" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/06/30/Vue/vue-mixin/" class="article-date">
  <time class="dt-published" datetime="2018-06-30T13:18:43.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/30/Vue/vue-mixin/">vue-mixin</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h2><h2 id="ä¸€ã€mixinæ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€mixinæ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€mixinæ˜¯ä»€ä¹ˆ"></a>ä¸€ã€mixinæ˜¯ä»€ä¹ˆ</h2><p><code>Mixin</code>æ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯­è¨€ä¸­çš„ç±»ï¼Œæä¾›äº†æ–¹æ³•çš„å®ç°ã€‚å…¶ä»–ç±»å¯ä»¥è®¿é—®<code>mixin</code>ç±»çš„æ–¹æ³•è€Œä¸å¿…æˆä¸ºå…¶å­ç±»</p>
<p><code>Mixin</code>ç±»é€šå¸¸ä½œä¸ºåŠŸèƒ½æ¨¡å—ä½¿ç”¨ï¼Œåœ¨éœ€è¦è¯¥åŠŸèƒ½æ—¶â€œæ··å…¥â€ï¼Œæœ‰åˆ©äºä»£ç å¤ç”¨åˆé¿å…äº†å¤šç»§æ‰¿çš„å¤æ‚</p>
<h3 id="Vueä¸­çš„mixin"><a href="#Vueä¸­çš„mixin" class="headerlink" title="Vueä¸­çš„mixin"></a>Vueä¸­çš„mixin</h3><p>å…ˆæ¥çœ‹ä¸€ä¸‹å®˜æ–¹å®šä¹‰</p>
<blockquote>
<p><code>mixin</code>ï¼ˆæ··å…¥ï¼‰ï¼Œæä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼ï¼Œæ¥åˆ†å‘ <code>Vue</code> ç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚</p>
</blockquote>
<p>æœ¬è´¨å…¶å®å°±æ˜¯ä¸€ä¸ª<code>js</code>å¯¹è±¡ï¼Œå®ƒå¯ä»¥åŒ…å«æˆ‘ä»¬ç»„ä»¶ä¸­ä»»æ„åŠŸèƒ½é€‰é¡¹ï¼Œå¦‚<code>data</code>ã€<code>components</code>ã€<code>methods</code>ã€<code>created</code>ã€<code>computed</code>ç­‰ç­‰</p>
<p>æˆ‘ä»¬åªè¦å°†å…±ç”¨çš„åŠŸèƒ½ä»¥å¯¹è±¡çš„æ–¹å¼ä¼ å…¥ <code>mixins</code>é€‰é¡¹ä¸­ï¼Œå½“ç»„ä»¶ä½¿ç”¨ <code>mixins</code>å¯¹è±¡æ—¶æ‰€æœ‰<code>mixins</code>å¯¹è±¡çš„é€‰é¡¹éƒ½å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ä¸­æ¥</p>
<p>åœ¨<code>Vue</code>ä¸­æˆ‘ä»¬å¯ä»¥<strong>å±€éƒ¨æ··å…¥</strong>è·Ÿ<strong>å…¨å±€æ··å…¥</strong></p>
<h3 id="å±€éƒ¨æ··å…¥"><a href="#å±€éƒ¨æ··å…¥" class="headerlink" title="å±€éƒ¨æ··å…¥"></a>å±€éƒ¨æ··å…¥</h3><p>å®šä¹‰ä¸€ä¸ª<code>mixin</code>å¯¹è±¡ï¼Œæœ‰ç»„ä»¶<code>options</code>çš„<code>data</code>ã€<code>methods</code>å±æ€§</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myMixin = &#123;</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">hello</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">hello</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello from mixin!&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶é€šè¿‡<code>mixins</code>å±æ€§è°ƒç”¨<code>mixin</code>å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;componentA&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">mixins</span>: [myMixin]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è¯¥ç»„ä»¶åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ··åˆäº†<code>mixin</code>é‡Œé¢çš„æ–¹æ³•ï¼Œåœ¨è‡ªåŠ¨æ‰§è¡Œ<code>create</code>ç”Ÿå‘½é’©å­ï¼Œæ‰§è¡Œ<code>hello</code>æ–¹æ³•</p>
<h3 id="å…¨å±€æ··å…¥"><a href="#å…¨å±€æ··å…¥" class="headerlink" title="å…¨å±€æ··å…¥"></a>å…¨å±€æ··å…¥</h3><p>é€šè¿‡<code>Vue.mixin()</code>è¿›è¡Œå…¨å±€çš„æ··å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">  <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å…¨å±€æ··å…¥&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨å…¨å±€æ··å…¥éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå› ä¸ºå®ƒä¼šå½±å“åˆ°æ¯ä¸€ä¸ªç»„ä»¶å®ä¾‹ï¼ˆåŒ…æ‹¬ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼‰</p>
<p>PSï¼šå…¨å±€æ··å…¥å¸¸ç”¨äºæ’ä»¶çš„ç¼–å†™</p>
<h3 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h3><p>å½“ç»„ä»¶å­˜åœ¨ä¸<code>mixin</code>å¯¹è±¡ç›¸åŒçš„é€‰é¡¹çš„æ—¶å€™ï¼Œè¿›è¡Œé€’å½’åˆå¹¶çš„æ—¶å€™ç»„ä»¶çš„é€‰é¡¹ä¼šè¦†ç›–<code>mixin</code>çš„é€‰é¡¹</p>
<p>ä½†æ˜¯å¦‚æœç›¸åŒé€‰é¡¹ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­çš„æ—¶å€™ï¼Œä¼šåˆå¹¶æˆä¸€ä¸ªæ•°ç»„ï¼Œå…ˆæ‰§è¡Œ<code>mixin</code>çš„é’©å­ï¼Œå†æ‰§è¡Œç»„ä»¶çš„é’©å­</p>
<h2 id="äºŒã€ä½¿ç”¨åœºæ™¯"><a href="#äºŒã€ä½¿ç”¨åœºæ™¯" class="headerlink" title="äºŒã€ä½¿ç”¨åœºæ™¯"></a>äºŒã€ä½¿ç”¨åœºæ™¯</h2><p>åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°åœ¨ä¸åŒçš„ç»„ä»¶ä¸­ç»å¸¸ä¼šéœ€è¦ç”¨åˆ°ä¸€äº›ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„ä»£ç ï¼Œè¿™äº›ä»£ç çš„åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹</p>
<p>è¿™æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>Vue</code>çš„<code>mixin</code>åŠŸèƒ½å°†ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„ä»£ç æå‡ºæ¥</p>
<p>ä¸¾ä¸ªä¾‹å­</p>
<p>å®šä¹‰ä¸€ä¸ª<code>modal</code>å¼¹çª—ç»„ä»¶ï¼Œå†…éƒ¨é€šè¿‡<code>isShowing</code>æ¥æ§åˆ¶æ˜¾ç¤º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Modal</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;#modal&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">isShowing</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">toggleShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isShowing</span> = !<span class="variable language_">this</span>.<span class="property">isShowing</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰ä¸€ä¸ª<code>tooltip</code>æç¤ºæ¡†ï¼Œå†…éƒ¨é€šè¿‡<code>isShowing</code>æ¥æ§åˆ¶æ˜¾ç¤º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Tooltip</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;#tooltip&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">isShowing</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">toggleShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isShowing</span> = !<span class="variable language_">this</span>.<span class="property">isShowing</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è§‚å¯Ÿä¸Šé¢ä¸¤ä¸ªç»„ä»¶ï¼Œå‘ç°ä¸¤è€…çš„é€»è¾‘æ˜¯ç›¸åŒï¼Œä»£ç æ§åˆ¶æ˜¾ç¤ºä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œè¿™æ—¶å€™<code>mixin</code>å°±æ´¾ä¸Šç”¨åœºäº†</p>
<p>é¦–å…ˆæŠ½å‡ºå…±åŒä»£ç ï¼Œç¼–å†™ä¸€ä¸ª<code>mixin</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toggle = &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">isShowing</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">toggleShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isShowing</span> = !<span class="variable language_">this</span>.<span class="property">isShowing</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªç»„ä»¶åœ¨ä½¿ç”¨ä¸Šï¼Œåªéœ€è¦å¼•å…¥<code>mixin</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Modal</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;#modal&#x27;</span>,</span><br><span class="line">  <span class="attr">mixins</span>: [toggle]</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Tooltip</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;#tooltip&#x27;</span>,</span><br><span class="line">  <span class="attr">mixins</span>: [toggle]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸Šé¢å°å°çš„ä¾‹å­ï¼Œè®©æˆ‘ä»¬çŸ¥é“äº†<code>Mixin</code>å¯¹äºå°è£…ä¸€äº›å¯å¤ç”¨çš„åŠŸèƒ½å¦‚æ­¤æœ‰è¶£ã€æ–¹ä¾¿ã€å®ç”¨</p>
<h2 id="ä¸‰ã€æºç åˆ†æ"><a href="#ä¸‰ã€æºç åˆ†æ" class="headerlink" title="ä¸‰ã€æºç åˆ†æ"></a>ä¸‰ã€æºç åˆ†æ</h2><p>é¦–å…ˆä»<code>Vue.mixin</code>å…¥æ‰‹</p>
<p>æºç ä½ç½®ï¼š&#x2F;src&#x2F;core&#x2F;global-api&#x2F;mixin.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">initMixin</span> (<span class="title class_">Vue</span>: <span class="title class_">GlobalAPI</span>) &#123;</span><br><span class="line">  <span class="title class_">Vue</span>.<span class="property">mixin</span> = <span class="keyword">function</span> (<span class="params">mixin: <span class="built_in">Object</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">options</span> = <span class="title function_">mergeOptions</span>(<span class="variable language_">this</span>.<span class="property">options</span>, mixin)</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸»è¦æ˜¯è°ƒç”¨<code>merOptions</code>æ–¹æ³•</p>
<p>æºç ä½ç½®ï¼š&#x2F;src&#x2F;core&#x2F;util&#x2F;options.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mergeOptions</span> (</span><br><span class="line">  <span class="attr">parent</span>: <span class="title class_">Object</span>,</span><br><span class="line">  <span class="attr">child</span>: <span class="title class_">Object</span>,</span><br><span class="line">  vm?: <span class="title class_">Component</span></span><br><span class="line">): <span class="title class_">Object</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (child.<span class="property">mixins</span>) &#123; <span class="comment">// åˆ¤æ–­æœ‰æ²¡æœ‰mixin ä¹Ÿå°±æ˜¯mixiné‡Œé¢æŒ‚mixinçš„æƒ…å†µ æœ‰çš„è¯é€’å½’è¿›è¡Œåˆå¹¶</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = child.<span class="property">mixins</span>.<span class="property">length</span>; i &lt; l; i++) &#123;</span><br><span class="line">    parent = <span class="title function_">mergeOptions</span>(parent, child.<span class="property">mixins</span>[i], vm)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> options = &#123;&#125; </span><br><span class="line">  <span class="keyword">let</span> key</span><br><span class="line">  <span class="keyword">for</span> (key <span class="keyword">in</span> parent) &#123;</span><br><span class="line">    <span class="title function_">mergeField</span>(key) <span class="comment">// å…ˆéå†parentçš„key è°ƒå¯¹åº”çš„strats[XXX]æ–¹æ³•è¿›è¡Œåˆå¹¶</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (key <span class="keyword">in</span> child) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">hasOwn</span>(parent, key)) &#123; <span class="comment">// å¦‚æœparentå·²ç»å¤„ç†è¿‡æŸä¸ªkey å°±ä¸å¤„ç†äº†</span></span><br><span class="line">      <span class="title function_">mergeField</span>(key) <span class="comment">// å¤„ç†childä¸­çš„key ä¹Ÿå°±parentä¸­æ²¡æœ‰å¤„ç†è¿‡çš„key</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">mergeField</span> (key) &#123;</span><br><span class="line">    <span class="keyword">const</span> strat = strats[key] || defaultStrat</span><br><span class="line">    options[key] = <span class="title function_">strat</span>(parent[key], child[key], vm, key) <span class="comment">// æ ¹æ®ä¸åŒç±»å‹çš„optionsè°ƒç”¨stratsä¸­ä¸åŒçš„æ–¹æ³•è¿›è¡Œåˆå¹¶</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> options</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„æºç ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>ä¼˜å…ˆé€’å½’å¤„ç† <code>mixins</code></li>
<li>å…ˆéå†åˆå¹¶<code>parent</code> ä¸­çš„<code>key</code>ï¼Œè°ƒç”¨<code>mergeField</code>æ–¹æ³•è¿›è¡Œåˆå¹¶ï¼Œç„¶åä¿å­˜åœ¨å˜é‡<code>options</code></li>
<li>å†éå† <code>child</code>ï¼Œåˆå¹¶è¡¥ä¸Š <code>parent</code> ä¸­æ²¡æœ‰çš„<code>key</code>ï¼Œè°ƒç”¨<code>mergeField</code>æ–¹æ³•è¿›è¡Œåˆå¹¶ï¼Œä¿å­˜åœ¨å˜é‡<code>options</code></li>
<li>é€šè¿‡ <code>mergeField</code> å‡½æ•°è¿›è¡Œäº†åˆå¹¶</li>
</ul>
<p>ä¸‹é¢æ˜¯å…³äº<code>Vue</code>çš„å‡ ç§ç±»å‹çš„åˆå¹¶ç­–ç•¥</p>
<ul>
<li>æ›¿æ¢å‹</li>
<li>åˆå¹¶å‹</li>
<li>é˜Ÿåˆ—å‹</li>
<li>å åŠ å‹</li>
</ul>
<h3 id="æ›¿æ¢å‹"><a href="#æ›¿æ¢å‹" class="headerlink" title="æ›¿æ¢å‹"></a>æ›¿æ¢å‹</h3><p>æ›¿æ¢å‹åˆå¹¶æœ‰<code>props</code>ã€<code>methods</code>ã€<code>inject</code>ã€<code>computed</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">strats.<span class="property">props</span> =</span><br><span class="line">strats.<span class="property">methods</span> =</span><br><span class="line">strats.<span class="property">inject</span> =</span><br><span class="line">strats.<span class="property">computed</span> = <span class="keyword">function</span> (<span class="params"></span></span><br><span class="line"><span class="params">  parentVal: ?<span class="built_in">Object</span>,</span></span><br><span class="line"><span class="params">  childVal: ?<span class="built_in">Object</span>,</span></span><br><span class="line"><span class="params">  vm?: Component,</span></span><br><span class="line"><span class="params">  key: string</span></span><br><span class="line"><span class="params"></span>): ?<span class="title class_">Object</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!parentVal) <span class="keyword">return</span> childVal <span class="comment">// å¦‚æœparentValæ²¡æœ‰å€¼ï¼Œç›´æ¥è¿”å›childVal</span></span><br><span class="line">  <span class="keyword">const</span> ret = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>) <span class="comment">// åˆ›å»ºä¸€ä¸ªç¬¬ä¸‰æ–¹å¯¹è±¡ ret</span></span><br><span class="line">  <span class="title function_">extend</span>(ret, parentVal) <span class="comment">// extendæ–¹æ³•å®é™…æ˜¯æŠŠparentValçš„å±æ€§å¤åˆ¶åˆ°retä¸­</span></span><br><span class="line">  <span class="keyword">if</span> (childVal) <span class="title function_">extend</span>(ret, childVal) <span class="comment">// æŠŠchildValçš„å±æ€§å¤åˆ¶åˆ°retä¸­</span></span><br><span class="line">  <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line">strats.<span class="property">provide</span> = mergeDataOrFn</span><br></pre></td></tr></table></figure>

<p>åŒåçš„<code>props</code>ã€<code>methods</code>ã€<code>inject</code>ã€<code>computed</code>ä¼šè¢«åæ¥è€…ä»£æ›¿</p>
<h3 id="åˆå¹¶å‹"><a href="#åˆå¹¶å‹" class="headerlink" title="åˆå¹¶å‹"></a>åˆå¹¶å‹</h3><p>å’Œå¹¶å‹åˆå¹¶æœ‰ï¼š<code>data</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">strats.<span class="property">data</span> = <span class="keyword">function</span>(<span class="params">parentVal, childVal, vm</span>) &#123;    </span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">mergeDataOrFn</span>(</span><br><span class="line">        parentVal, childVal, vm</span><br><span class="line">    )</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mergeDataOrFn</span>(<span class="params">parentVal, childVal, vm</span>) &#123;    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">mergedInstanceDataFn</span>(<span class="params"></span>) &#123;        </span><br><span class="line">        <span class="keyword">var</span> childData = childVal.<span class="title function_">call</span>(vm, vm) <span class="comment">// æ‰§è¡ŒdataæŒ‚çš„å‡½æ•°å¾—åˆ°å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">var</span> parentData = parentVal.<span class="title function_">call</span>(vm, vm)        </span><br><span class="line">        <span class="keyword">if</span> (childData) &#123;            </span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">mergeData</span>(childData, parentData) <span class="comment">// å°†2ä¸ªå¯¹è±¡è¿›è¡Œåˆå¹¶                                 </span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;            </span><br><span class="line">            <span class="keyword">return</span> parentData <span class="comment">// å¦‚æœæ²¡æœ‰childData ç›´æ¥è¿”å›parentData</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mergeData</span>(<span class="params">to, <span class="keyword">from</span></span>) &#123;    </span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">from</span>) <span class="keyword">return</span> to    </span><br><span class="line">    <span class="keyword">var</span> key, toVal, fromVal;    </span><br><span class="line">    <span class="keyword">var</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="keyword">from</span>);   </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; keys.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        key = keys[i];</span><br><span class="line">        toVal = to[key];</span><br><span class="line">        fromVal = <span class="keyword">from</span>[key];    </span><br><span class="line">        <span class="comment">// å¦‚æœä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œå°±é‡æ–°è®¾ç½®</span></span><br><span class="line">        <span class="keyword">if</span> (!to.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">            <span class="title function_">set</span>(to, key, fromVal);</span><br><span class="line">        &#125;      </span><br><span class="line">        <span class="comment">// å­˜åœ¨ç›¸åŒå±æ€§ï¼Œåˆå¹¶å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> toVal ==<span class="string">&quot;object&quot;</span> &amp;&amp; <span class="keyword">typeof</span> fromVal ==<span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">            <span class="title function_">mergeData</span>(toVal, fromVal);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">return</span> to</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>mergeData</code>å‡½æ•°éå†äº†è¦åˆå¹¶çš„ data çš„æ‰€æœ‰å±æ€§ï¼Œç„¶åæ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œåˆå¹¶ï¼š</p>
<ul>
<li>å½“ç›®æ ‡ data å¯¹è±¡ä¸åŒ…å«å½“å‰å±æ€§æ—¶ï¼Œè°ƒç”¨ <code>set</code> æ–¹æ³•è¿›è¡Œåˆå¹¶ï¼ˆsetæ–¹æ³•å…¶å®å°±æ˜¯ä¸€äº›åˆå¹¶é‡æ–°èµ‹å€¼çš„æ–¹æ³•ï¼‰</li>
<li>å½“ç›®æ ‡ data å¯¹è±¡åŒ…å«å½“å‰å±æ€§å¹¶ä¸”å½“å‰å€¼ä¸ºçº¯å¯¹è±¡æ—¶ï¼Œé€’å½’åˆå¹¶å½“å‰å¯¹è±¡å€¼ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é˜²æ­¢å¯¹è±¡å­˜åœ¨æ–°å¢å±æ€§</li>
</ul>
<h3 id="é˜Ÿåˆ—æ€§"><a href="#é˜Ÿåˆ—æ€§" class="headerlink" title="é˜Ÿåˆ—æ€§"></a>é˜Ÿåˆ—æ€§</h3><p>é˜Ÿåˆ—æ€§åˆå¹¶æœ‰ï¼šå…¨éƒ¨ç”Ÿå‘½å‘¨æœŸå’Œ<code>watch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mergeHook</span> (</span><br><span class="line">  <span class="attr">parentVal</span>: ?<span class="title class_">Array</span>&lt;<span class="title class_">Function</span>&gt;,</span><br><span class="line">  <span class="attr">childVal</span>: ?<span class="title class_">Function</span> | ?<span class="title class_">Array</span>&lt;<span class="title class_">Function</span>&gt;</span><br><span class="line">): ?<span class="title class_">Array</span>&lt;<span class="title class_">Function</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> childVal</span><br><span class="line">    ? parentVal</span><br><span class="line">      ? parentVal.<span class="title function_">concat</span>(childVal)</span><br><span class="line">      : <span class="title class_">Array</span>.<span class="title function_">isArray</span>(childVal)</span><br><span class="line">        ? childVal</span><br><span class="line">        : [childVal]</span><br><span class="line">    : parentVal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable constant_">LIFECYCLE_HOOKS</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">hook</span> =&gt;</span> &#123;</span><br><span class="line">  strats[hook] = mergeHook</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// watch</span></span><br><span class="line">strats.<span class="property">watch</span> = <span class="keyword">function</span> (<span class="params"></span></span><br><span class="line"><span class="params">  parentVal,</span></span><br><span class="line"><span class="params">  childVal,</span></span><br><span class="line"><span class="params">  vm,</span></span><br><span class="line"><span class="params">  key</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// work around Firefox&#x27;s Object.prototype.watch...</span></span><br><span class="line">  <span class="keyword">if</span> (parentVal === nativeWatch) &#123; parentVal = <span class="literal">undefined</span>; &#125;</span><br><span class="line">  <span class="keyword">if</span> (childVal === nativeWatch) &#123; childVal = <span class="literal">undefined</span>; &#125;</span><br><span class="line">  <span class="comment">/* istanbul ignore if */</span></span><br><span class="line">  <span class="keyword">if</span> (!childVal) &#123; <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">create</span>(parentVal || <span class="literal">null</span>) &#125;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="title function_">assertObjectType</span>(key, childVal, vm);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!parentVal) &#123; <span class="keyword">return</span> childVal &#125;</span><br><span class="line">  <span class="keyword">var</span> ret = &#123;&#125;;</span><br><span class="line">  <span class="title function_">extend</span>(ret, parentVal);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key$<span class="number">1</span> <span class="keyword">in</span> childVal) &#123;</span><br><span class="line">    <span class="keyword">var</span> parent = ret[key$<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">var</span> child = childVal[key$<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (parent &amp;&amp; !<span class="title class_">Array</span>.<span class="title function_">isArray</span>(parent)) &#123;</span><br><span class="line">      parent = [parent];</span><br><span class="line">    &#125;</span><br><span class="line">    ret[key$<span class="number">1</span>] = parent</span><br><span class="line">      ? parent.<span class="title function_">concat</span>(child)</span><br><span class="line">      : <span class="title class_">Array</span>.<span class="title function_">isArray</span>(child) ? child : [child];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç”Ÿå‘½å‘¨æœŸé’©å­å’Œ<code>watch</code>è¢«åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæ­£åºéå†ä¸€æ¬¡æ‰§è¡Œ</p>
<h3 id="å åŠ å‹"><a href="#å åŠ å‹" class="headerlink" title="å åŠ å‹"></a>å åŠ å‹</h3><p>å åŠ å‹åˆå¹¶æœ‰ï¼š<code>component</code>ã€<code>directives</code>ã€<code>filters</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">strats.<span class="property">components</span>=</span><br><span class="line">strats.<span class="property">directives</span>=</span><br><span class="line"></span><br><span class="line">strats.<span class="property">filters</span> = <span class="keyword">function</span> <span class="title function_">mergeAssets</span>(<span class="params"></span></span><br><span class="line"><span class="params">    parentVal, childVal, vm, key</span></span><br><span class="line"><span class="params"></span>) &#123;    </span><br><span class="line">    <span class="keyword">var</span> res = <span class="title class_">Object</span>.<span class="title function_">create</span>(parentVal || <span class="literal">null</span>);    </span><br><span class="line">    <span class="keyword">if</span> (childVal) &#123; </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> childVal) &#123;</span><br><span class="line">            res[key] = childVal[key];</span><br><span class="line">        &#125;   </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å åŠ å‹ä¸»è¦æ˜¯é€šè¿‡åŸå‹é“¾è¿›è¡Œå±‚å±‚çš„å åŠ </p>
<h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><ul>
<li>æ›¿æ¢å‹ç­–ç•¥æœ‰<code>props</code>ã€<code>methods</code>ã€<code>inject</code>ã€<code>computed</code>ï¼Œå°±æ˜¯å°†æ–°çš„åŒåå‚æ•°æ›¿ä»£æ—§çš„å‚æ•°</li>
<li>åˆå¹¶å‹ç­–ç•¥æ˜¯<code>data</code>, é€šè¿‡<code>set</code>æ–¹æ³•è¿›è¡Œåˆå¹¶å’Œé‡æ–°èµ‹å€¼</li>
<li>é˜Ÿåˆ—å‹ç­–ç•¥æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œ<code>watch</code>ï¼ŒåŸç†æ˜¯å°†å‡½æ•°å­˜å…¥ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæ­£åºéå†ä¾æ¬¡æ‰§è¡Œ</li>
<li>å åŠ å‹æœ‰<code>component</code>ã€<code>directives</code>ã€<code>filters</code>ï¼Œé€šè¿‡åŸå‹é“¾è¿›è¡Œå±‚å±‚çš„å åŠ </li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/06/30/Vue/vue-mixin/" data-id="cl7icg7cv0108ugunhq8049ir" data-title="vue-mixin" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue/vue-keyå€¼ä½œç”¨" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/06/27/Vue/vue-key%E5%80%BC%E4%BD%9C%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2018-06-27T02:42:37.000Z" itemprop="datePublished">2018-06-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/27/Vue/vue-key%E5%80%BC%E4%BD%9C%E7%94%A8/">vue-keyå€¼ä½œç”¨</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ä¸€ã€Keyæ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€Keyæ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€Keyæ˜¯ä»€ä¹ˆ"></a>ä¸€ã€Keyæ˜¯ä»€ä¹ˆ</h2><p>å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¿˜åŸä¸¤ä¸ªå®é™…å·¥ä½œåœºæ™¯</p>
<ol>
<li>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨<code>v-for</code>æ—¶ï¼Œéœ€è¦ç»™å•å…ƒåŠ ä¸Š<code>key</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç”¨<code>+new Date()</code>ç”Ÿæˆçš„æ—¶é—´æˆ³ä½œä¸º<code>key</code>ï¼Œæ‰‹åŠ¨å¼ºåˆ¶è§¦å‘é‡æ–°æ¸²æŸ“</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Comp</span> :key=<span class="string">&quot;+new Date()&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆè¿™èƒŒåçš„é€»è¾‘æ˜¯ä»€ä¹ˆï¼Œ<code>key</code>çš„ä½œç”¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ä¸€å¥è¯æ¥è®²</p>
<blockquote>
<p>keyæ˜¯ç»™æ¯ä¸€ä¸ªvnodeçš„å”¯ä¸€idï¼Œä¹Ÿæ˜¯diffçš„ä¸€ç§ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥æ ¹æ®keyï¼Œæ›´å‡†ç¡®ï¼Œ æ›´å¿«çš„æ‰¾åˆ°å¯¹åº”çš„vnodeèŠ‚ç‚¹</p>
</blockquote>
<h3 id="åœºæ™¯èƒŒåçš„é€»è¾‘"><a href="#åœºæ™¯èƒŒåçš„é€»è¾‘" class="headerlink" title="åœºæ™¯èƒŒåçš„é€»è¾‘"></a>åœºæ™¯èƒŒåçš„é€»è¾‘</h3><p>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨<code>v-for</code>æ—¶ï¼Œéœ€è¦ç»™å•å…ƒåŠ ä¸Š<code>key</code></p>
<ul>
<li>å¦‚æœä¸ç”¨keyï¼ŒVueä¼šé‡‡ç”¨å°±åœ°å¤åœ°åŸåˆ™ï¼šæœ€å°åŒ–elementçš„ç§»åŠ¨ï¼Œå¹¶ä¸”ä¼šå°è¯•å°½æœ€å¤§ç¨‹åº¦åœ¨åŒé€‚å½“çš„åœ°æ–¹å¯¹ç›¸åŒç±»å‹çš„elementï¼Œåšpatchæˆ–è€…reuseã€‚</li>
<li>å¦‚æœä½¿ç”¨äº†keyï¼ŒVueä¼šæ ¹æ®keysçš„é¡ºåºè®°å½•elementï¼Œæ›¾ç»æ‹¥æœ‰äº†keyçš„elementå¦‚æœä¸å†å‡ºç°çš„è¯ï¼Œä¼šè¢«ç›´æ¥removeæˆ–è€…destoryed</li>
</ul>
<p>ç”¨<code>+new Date()</code>ç”Ÿæˆçš„æ—¶é—´æˆ³ä½œä¸º<code>key</code>ï¼Œæ‰‹åŠ¨å¼ºåˆ¶è§¦å‘é‡æ–°æ¸²æŸ“</p>
<ul>
<li>å½“æ‹¥æœ‰æ–°å€¼çš„rerenderä½œä¸ºkeyæ—¶ï¼Œæ‹¥æœ‰äº†æ–°keyçš„Compå‡ºç°äº†ï¼Œé‚£ä¹ˆæ—§key Compä¼šè¢«ç§»é™¤ï¼Œæ–°key Compè§¦å‘æ¸²æŸ“</li>
</ul>
<h2 id="äºŒã€è®¾ç½®keyä¸ä¸è®¾ç½®keyåŒºåˆ«"><a href="#äºŒã€è®¾ç½®keyä¸ä¸è®¾ç½®keyåŒºåˆ«" class="headerlink" title="äºŒã€è®¾ç½®keyä¸ä¸è®¾ç½®keyåŒºåˆ«"></a>äºŒã€è®¾ç½®keyä¸ä¸è®¾ç½®keyåŒºåˆ«</h2><p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œ2ç§’åå¾€<code>items</code>æ•°ç»„æ’å…¥æ•°æ®</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// åˆ›å»ºå®ä¾‹</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#demo&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123; <span class="attr">items</span>: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>] &#125;,</span></span><br><span class="line"><span class="language-javascript">      mounted () &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; </span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&#x27;f&#x27;</span>)  <span class="comment">// </span></span></span><br><span class="line"><span class="language-javascript">       &#125;, <span class="number">2000</span>);</span></span><br><span class="line"><span class="language-javascript">     &#125;,</span></span><br><span class="line"><span class="language-javascript">   &#125;);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸ä½¿ç”¨<code>key</code>çš„æƒ…å†µï¼Œ<code>vue</code>ä¼šè¿›è¡Œè¿™æ ·çš„æ“ä½œï¼š</p>
<p><img src="https://static.vue-js.com/c9da6790-3f41-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>åˆ†æä¸‹æ•´ä½“æµç¨‹ï¼š</p>
<ul>
<li>æ¯”è¾ƒAï¼ŒAï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>æ¯”è¾ƒBï¼ŒBï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>æ¯”è¾ƒCï¼ŒFï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œæ•°æ®ä¸åŒï¼Œå‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>æ¯”è¾ƒDï¼ŒCï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œæ•°æ®ä¸åŒï¼Œå‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>æ¯”è¾ƒEï¼ŒDï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œæ•°æ®ä¸åŒï¼Œå‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>å¾ªç¯ç»“æŸï¼Œå°†Eæ’å…¥åˆ°<code>DOM</code>ä¸­</li>
</ul>
<p>ä¸€å…±å‘ç”Ÿäº†3æ¬¡æ›´æ–°ï¼Œ1æ¬¡æ’å…¥æ“ä½œ</p>
<p>åœ¨ä½¿ç”¨<code>key</code>çš„æƒ…å†µï¼š<code>vue</code>ä¼šè¿›è¡Œè¿™æ ·çš„æ“ä½œï¼š</p>
<ul>
<li>æ¯”è¾ƒAï¼ŒAï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>æ¯”è¾ƒBï¼ŒBï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>æ¯”è¾ƒCï¼ŒFï¼Œä¸ç›¸åŒç±»å‹çš„èŠ‚ç‚¹<ul>
<li>æ¯”è¾ƒEã€Eï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
</ul>
</li>
<li>æ¯”è¾ƒDã€Dï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>æ¯”è¾ƒCã€Cï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œ<code>patch</code>ï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿ<code>dom</code>æ“ä½œ</li>
<li>å¾ªç¯ç»“æŸï¼Œå°†Fæ’å…¥åˆ°Cä¹‹å‰</li>
</ul>
<p>ä¸€å…±å‘ç”Ÿäº†0æ¬¡æ›´æ–°ï¼Œ1æ¬¡æ’å…¥æ“ä½œ</p>
<p>é€šè¿‡ä¸Šé¢ä¸¤ä¸ªå°ä¾‹å­ï¼Œå¯è§è®¾ç½®<code>key</code>èƒ½å¤Ÿå¤§å¤§å‡å°‘å¯¹é¡µé¢çš„<code>DOM</code>æ“ä½œï¼Œæé«˜äº†<code>diff</code>æ•ˆç‡</p>
<h3 id="è®¾ç½®keyå€¼ä¸€å®šèƒ½æé«˜diffæ•ˆç‡å—ï¼Ÿ"><a href="#è®¾ç½®keyå€¼ä¸€å®šèƒ½æé«˜diffæ•ˆç‡å—ï¼Ÿ" class="headerlink" title="è®¾ç½®keyå€¼ä¸€å®šèƒ½æé«˜diffæ•ˆç‡å—ï¼Ÿ"></a>è®¾ç½®keyå€¼ä¸€å®šèƒ½æé«˜diffæ•ˆç‡å—ï¼Ÿ</h3><p>å…¶å®ä¸ç„¶ï¼Œæ–‡æ¡£ä¸­ä¹Ÿæ˜ç¡®è¡¨ç¤º</p>
<blockquote>
<p>å½“ Vue.js ç”¨ v-for æ­£åœ¨æ›´æ–°å·²æ¸²æŸ“è¿‡çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ç”¨â€œå°±åœ°å¤ç”¨â€ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œ è€Œæ˜¯ç®€å•å¤ç”¨æ­¤å¤„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒåœ¨ç‰¹å®šç´¢å¼•ä¸‹æ˜¾ç¤ºå·²è¢«æ¸²æŸ“è¿‡çš„æ¯ä¸ªå…ƒç´ </p>
</blockquote>
<p>è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„ï¼Œä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–ä¸´æ—¶ DOM çŠ¶æ€ (ä¾‹å¦‚ï¼šè¡¨å•è¾“å…¥å€¼) çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡º</p>
<p>å»ºè®®å°½å¯èƒ½åœ¨ä½¿ç”¨ <code>v-for</code> æ—¶æä¾› <code>key</code>ï¼Œé™¤ééå†è¾“å‡ºçš„ DOM å†…å®¹éå¸¸ç®€å•ï¼Œæˆ–è€…æ˜¯åˆ»æ„ä¾èµ–é»˜è®¤è¡Œä¸ºä»¥è·å–æ€§èƒ½ä¸Šçš„æå‡</p>
<h2 id="ä¸‰ã€åŸç†åˆ†æ"><a href="#ä¸‰ã€åŸç†åˆ†æ" class="headerlink" title="ä¸‰ã€åŸç†åˆ†æ"></a>ä¸‰ã€åŸç†åˆ†æ</h2><p>æºç ä½ç½®ï¼šcore&#x2F;vdom&#x2F;patch.js</p>
<p>è¿™é‡Œåˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ä¸ª<code>key</code>ï¼Œé¦–å…ˆåˆ¤æ–­çš„æ˜¯<code>key</code>å€¼æ˜¯å¦ç›¸ç­‰å¦‚æœæ²¡æœ‰è®¾ç½®<code>key</code>ï¼Œé‚£ä¹ˆ<code>key</code>ä¸º<code>undefined</code>ï¼Œè¿™æ—¶å€™<code>undefined</code>æ˜¯æ’ç­‰äº<code>undefined</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sameVnode</span> (a, b) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        a.<span class="property">key</span> === b.<span class="property">key</span> &amp;&amp; (</span><br><span class="line">            (</span><br><span class="line">                a.<span class="property">tag</span> === b.<span class="property">tag</span> &amp;&amp;</span><br><span class="line">                a.<span class="property">isComment</span> === b.<span class="property">isComment</span> &amp;&amp;</span><br><span class="line">                <span class="title function_">isDef</span>(a.<span class="property">data</span>) === <span class="title function_">isDef</span>(b.<span class="property">data</span>) &amp;&amp;</span><br><span class="line">                <span class="title function_">sameInputType</span>(a, b)</span><br><span class="line">            ) || (</span><br><span class="line">                <span class="title function_">isTrue</span>(a.<span class="property">isAsyncPlaceholder</span>) &amp;&amp;</span><br><span class="line">                a.<span class="property">asyncFactory</span> === b.<span class="property">asyncFactory</span> &amp;&amp;</span><br><span class="line">                <span class="title function_">isUndef</span>(b.<span class="property">asyncFactory</span>.<span class="property">error</span>)</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">updateChildren`æ–¹æ³•ä¸­ä¼šå¯¹æ–°æ—§`vnode`è¿›è¡Œ`diff`ï¼Œç„¶åå°†æ¯”å¯¹å‡ºçš„ç»“æœç”¨æ¥æ›´æ–°çœŸå®çš„`DOM</span><br><span class="line">function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) &#123;</span><br><span class="line">    ...</span><br><span class="line">    while (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) &#123;</span><br><span class="line">        if (isUndef(oldStartVnode)) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125; else if (isUndef(oldEndVnode)) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125; else if (sameVnode(oldStartVnode, newStartVnode)) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125; else if (sameVnode(oldEndVnode, newEndVnode)) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125; else if (sameVnode(oldStartVnode, newEndVnode)) &#123; // Vnode moved right</span><br><span class="line">            ...</span><br><span class="line">        &#125; else if (sameVnode(oldEndVnode, newStartVnode)) &#123; // Vnode moved left</span><br><span class="line">            ...</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx)</span><br><span class="line">            idxInOld = isDef(newStartVnode.key)</span><br><span class="line">                ? oldKeyToIdx[newStartVnode.key]</span><br><span class="line">                : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx)</span><br><span class="line">            if (isUndef(idxInOld)) &#123; // New element</span><br><span class="line">                createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                vnodeToMove = oldCh[idxInOld]</span><br><span class="line">                if (sameVnode(vnodeToMove, newStartVnode)) &#123;</span><br><span class="line">                    patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)</span><br><span class="line">                    oldCh[idxInOld] = undefined</span><br><span class="line">                    canMove &amp;&amp; nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm)</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    // same key but different element. treat as new element</span><br><span class="line">                    createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            newStartVnode = newCh[++newStartIdx]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/06/27/Vue/vue-key%E5%80%BC%E4%BD%9C%E7%94%A8/" data-id="cl7icg7cs0103ugun40ia410n" data-title="vue-keyå€¼ä½œç”¨" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/13/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/15/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/liunx/">liunx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">ç§»åŠ¨ç«¯</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/%E9%97%AE%E9%A2%98/">é—®é¢˜</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/%E9%9F%B3%E8%A7%86%E9%A2%91/">éŸ³è§†é¢‘</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">å‰ç«¯å·¥ç¨‹åŒ–</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">åç«¯</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/%E7%AE%97%E6%B3%95/">ç®—æ³•</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">å°ç¨‹åº</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">æ•°æ®å¯è§†åŒ–</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">æ¶æ„æ¨¡å¼</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A1%86%E6%9E%B6/">æ¡†æ¶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">æ­£åˆ™è¡¨è¾¾å¼</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/" rel="tag">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RESTful/" rel="tag">RESTful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redux/" rel="tag">Redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async-await/" rel="tag">async&#x2F;await</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/echart/" rel="tag">echart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eslint/" rel="tag">eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glup/" rel="tag">glup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/" rel="tag">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/" rel="tag">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vs-code/" rel="tag">vs code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue3/" rel="tag">vue3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/" rel="tag">xml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">ä¼˜åŒ–</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">å°ç¨‹åº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">æ­£åˆ™è¡¨è¾¾å¼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" rel="tag">ç§»åŠ¨ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">è®¾è®¡æ¨¡å¼</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Mock/" style="font-size: 10px;">Mock</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/React/" style="font-size: 19.17px;">React</a> <a href="/tags/Redux/" style="font-size: 11.67px;">Redux</a> <a href="/tags/async-await/" style="font-size: 10px;">async/await</a> <a href="/tags/css/" style="font-size: 11.67px;">css</a> <a href="/tags/echart/" style="font-size: 10px;">echart</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/eslint/" style="font-size: 10px;">eslint</a> <a href="/tags/git/" style="font-size: 16.67px;">git</a> <a href="/tags/glup/" style="font-size: 10.83px;">glup</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/http/" style="font-size: 17.5px;">http</a> <a href="/tags/javascript/" style="font-size: 18.33px;">javascript</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10.83px;">nginx</a> <a href="/tags/nodejs/" style="font-size: 13.33px;">nodejs</a> <a href="/tags/python/" style="font-size: 10.83px;">python</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/typescript/" style="font-size: 12.5px;">typescript</a> <a href="/tags/vs-code/" style="font-size: 11.67px;">vs code</a> <a href="/tags/vue/" style="font-size: 20px;">vue</a> <a href="/tags/vue3/" style="font-size: 10px;">vue3</a> <a href="/tags/webpack/" style="font-size: 19.17px;">webpack</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 14.17px;">ä¼˜åŒ–</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 10.83px;">å‰ç«¯</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15.83px;">å°ç¨‹åº</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">æ­£åˆ™è¡¨è¾¾å¼</a> <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" style="font-size: 10.83px;">ç§»åŠ¨ç«¯</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">ç®—æ³•</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10.83px;">è®¾è®¡æ¨¡å¼</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/08/25/Js%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">å˜é‡ç±»å‹</a>
          </li>
        
          <li>
            <a href="/2022/04/25/http/DNS%E5%8D%8F%E8%AE%AE/">DNSåè®®</a>
          </li>
        
          <li>
            <a href="/2022/01/18/React/React-%E6%8F%90%E9%AB%98%E7%BB%84%E4%BB%B6%E6%95%88%E7%8E%87%20%20%E9%81%BF%E5%85%8D%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84render/">React-æé«˜ç»„ä»¶æ•ˆç‡  é¿å…ä¸å¿…è¦çš„render</a>
          </li>
        
          <li>
            <a href="/2022/01/12/%E5%B7%A5%E5%85%B7/git-stach/">git-stach</a>
          </li>
        
          <li>
            <a href="/2021/10/16/Vue/vue3%E4%BC%98%E5%8C%96/">vue3ä¼˜åŒ–</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>