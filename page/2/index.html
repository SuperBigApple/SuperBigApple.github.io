<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="John Doe">
    
    
    
    
    
    
    <title>Hexo</title>
    <!-- inject:style -->
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <!-- endinject -->
    <style>
        .cube-loading {
            top: 0;
            position: fixed;
            width: 100%;
            height: 100%;
            background: url('/images/lg/loading.gif') no-repeat center center;
            background-color: rgba(0,0,0,.7);
        }

        .cube-loading.out {
            display: none;
        }

        .cube-loading:before {
            display: block;
            content: 'Loading';
            position: relative;
            width: 100%;
            top: 50%;
            right: -50%;
            color: #fff;
        }

        @media(max-width: 768px) {
            .cube-loading:before {
                font-size: 1.2em;
                transform: translate(-24px,20px);
                -webkit-transform: translate(-24px,20px);
                -o-transform: translate(-24px,20px);
                -ms-transform: translate(-24px,20px);
            }
        }

        @media(min-width: 768px) {
            .cube-loading:before {

            }
        }
    </style>
    
<meta name="generator" content="Hexo 6.2.0"></head>
<body>
<div class="cube-body">
    <nav id="cube-top-memu" class="cube-menu">
    <ul class="cube-menu-collapse">
        
        <li>
            <i class="cube-icon cube-icon-home" aria-hidden="true"></i>
            <a href="/">é¦–é¡µ</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-archive" aria-hidden="true"></i>
            <a href="/archives">å½’æ¡£</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-categories" aria-hidden="true"></i>
            <a href="/categories">åˆ†ç±»</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-tags" aria-hidden="true"></i>
            <a href="/tags">æ ‡ç­¾</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-about" aria-hidden="true"></i>
            <a href="/about-me">å…³äºæˆ‘</a>
        </li>
        
    </ul>
</nav>
<nav class="cube-side-menu" id="cube-side-menu">
    <ul class="cube-menu-list">
        
        <li>
            <a class="lrc-control">Open Lyrics</a>
        </li>
        
        <li>
            <a class="scroll-to-top">Top</a>
        </li>
    </ul>
</nav>
    <header class="cube-header" id="cube-header">
    <img src=" https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2 " alt="å¤´éƒ¨èƒŒæ™¯å›¾ç‰‡">
    
    <div class="cube-type">
        <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
        <span class="cube-typed-cursor">|</span>
    </div>
    
</header>

    <style>
        nav.cube-menu:before {
            content: '';
            visibility: hidden;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 44px;
        
            filter: blur(5px);
            -webkit-filter: blur(5px);
        
            z-index: -1;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-repeat: no-repeat;
            background-position: center -356px;
            background-size: cover;
            background-color: transparent;
        }

        header.cube-background.cube-header-background {
            visibility: hidden;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-position: center -400px;
        }
    </style>
    <header class="cube-background cube-header-background">
        
        <div class="cube-type">
            <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
            <span class="cube-typed-cursor">|</span>
        </div>
        
    </header>
    <div class="load-header-background"></div>
    <script>
        (function (window) {

            window.headerModule = {}
            window.headerModule.image = {
                width: '2000',
                height: '1414'
            }

        })(window)
    </script>
    
    <div class="cube-content">
        <div class="cube-left">
            
<div class="cube-excerpt" id="cube-excerpt-js-moment.js">
    <header class="cube-excerpt-header">
        <h1><a href="/2022/01/16/html+css+js+ts/3-js%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85moment/">js-moment.js</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2022-01-16
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/javascript/" class="cube-excerpt-tag-link">#javascript</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€åŸºç¡€ç”¨æ³•"><a href="#ä¸€ã€åŸºç¡€ç”¨æ³•" class="headerlink" title="ä¸€ã€åŸºç¡€ç”¨æ³•"></a>ä¸€ã€åŸºç¡€ç”¨æ³•</h2><p><strong>å–å½“å¤©æ—¶é—´ï¼Œä»¥YYYYå¹´MMæœˆDDæ—¥å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var now=moment().format(&quot;YYYYå¹´MMæœˆDDæ—¥&quot;);</span><br></pre></td></tr></table></figure>

<p><strong>ä»»æ„æ—¶é—´æˆ³æ ¼å¼åŒ–ï¼Œä»¥<code>YYYY-MM-DD HH:mm:ss</code>å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t1=moment(1411641720000).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–å‰ä¸€å¤©æ—¥æœŸï¼Œæ ¼å¼ä»¥<code>YYYY-MM-DD</code>å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t11=moment().day(0).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–æœ¬å‘¨äº”æ—¥æœŸï¼Œæ ¼å¼ä»¥<code>YYYY-MM-DD</code>å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t12=moment().weekday(5).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–ä¸Šå‘¨äº”æ—¥æœŸï¼Œæ ¼å¼ä»¥<code>YYYY-MM-DD</code>å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t13=moment().weekday(-3).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–å½“å‰å¹´ä»½ã€æœˆä»½ã€æ—¥æœŸ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var t14=moment().year()</span><br><span class="line">var t15=moment().month()//æ­¤å¤„æœˆä»½ä»0å¼€å§‹ï¼Œå½“å‰æœˆè¦+1</span><br><span class="line">var t16=moment().date();</span><br></pre></td></tr></table></figure>

<p><strong>è·å–ä¸Šä¸ªæœˆä»Šå¤©çš„æ—¥æœŸï¼Œæ ¼å¼ä»¥YYYY-MM-DDæ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t18=moment().subtract(1, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–ä¸Šä¸ªæœˆæ—¥æœŸï¼Œæ ¼å¼ä»¥YYYY-MMæ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t19=moment().subtract(1, &#x27;months&#x27;).format(&#x27;YYYY-MM&#x27;)</span><br></pre></td></tr></table></figure>

<p><strong>è·å–å‰ä¸€å¤©æ—¥æœŸï¼Œæ ¼å¼ä»¥YYYY-MM-DDæ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t20 = moment().subtract(1, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–ä¸¤ä¸ªå°æ—¶ä¹‹åçš„æ—¶é—´</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t22=moment().add(2,&#x27;hours&#x27;).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–äº”å¤©å‰çš„æ—¥æœŸ</strong></p>
<ul>
<li>ä¾‹å¦‚:ä»Šå¤©<code>2018-7-23</code>ï¼Œè·å–åˆ°çš„æ—¶é—´æ˜¯<code>2018-7-18</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t23=moment().subtract(5, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€æ›´å¤šç¤ºä¾‹"><a href="#äºŒã€æ›´å¤šç¤ºä¾‹" class="headerlink" title="äºŒã€æ›´å¤šç¤ºä¾‹"></a>äºŒã€æ›´å¤šç¤ºä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&#x27;use strict&#x27;</span><br><span class="line">let moment = require(&#x27;moment&#x27;);</span><br><span class="line">//è·å–å½“å‰æ—¶é—´</span><br><span class="line">var now = moment().toDate();</span><br><span class="line">console.log(now)</span><br><span class="line"> </span><br><span class="line">//æ ¼å¼åŒ–å½“å‰æ—¶é—´</span><br><span class="line">now = moment().format(&#x27;YYYY-MM-DD&#x27;);</span><br><span class="line">console.log(now);</span><br><span class="line"> </span><br><span class="line">//å…¶å®ƒå‡ ç§æ ¼å¼åŒ–æ–¹æ³•</span><br><span class="line">now = moment().format(&#x27;L&#x27;) // 10/22/2016 </span><br><span class="line">console.log(now);</span><br><span class="line"> </span><br><span class="line">now = moment().format(&#x27;LL&#x27;) // October 22, 2016</span><br><span class="line">console.log(now);</span><br><span class="line"> </span><br><span class="line">//æ ¼å¼åŒ–å½“å‰æ—¶é—´</span><br><span class="line">now = moment().format(&#x27;YYYY-MM-DD:HH:MM:SS&#x27;);</span><br><span class="line">console.log(now);</span><br><span class="line"> </span><br><span class="line">//è·å–è¿™ä¸ªæœˆåˆæ—¶é—´</span><br><span class="line">let startMonth = moment().startOf(&#x27;month&#x27;).toDate();</span><br><span class="line">console.log(startMonth);</span><br><span class="line"> </span><br><span class="line">//è·å–ä»Šå¤©å¼€å§‹çš„æ—¶é—´</span><br><span class="line">let dayOfStart = moment().startOf(&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(dayOfStart);</span><br><span class="line"> </span><br><span class="line">//è·å–ä»Šå¤©ç»“æŸçš„æ—¶é—´</span><br><span class="line">let dayOfEnd = moment().endOf(&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(dayOfEnd);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//è·å–ï¼‹nå°æ—¶</span><br><span class="line">let lateHour = moment().add(2,&#x27;hour&#x27;).toDate();</span><br><span class="line">console.log(lateHour);</span><br><span class="line"> </span><br><span class="line">//è·å–ï¼‹nå°æ—¶</span><br><span class="line">console.log(&#x27;//è·å–-nå°æ—¶&#x27;)</span><br><span class="line">let beforeHour = moment().subtract(2,&#x27;hour&#x27;).toDate();</span><br><span class="line">console.log(beforeHour);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//è·å–ï¼‹nå¤©</span><br><span class="line">let lateDay = moment().add(+5,&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(lateDay);</span><br><span class="line"> </span><br><span class="line">//è·å–-nå¤©</span><br><span class="line">let beforeDay = moment().add(-5,&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(beforeDay);</span><br><span class="line">//ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸º</span><br><span class="line">beforeDay = moment().subtract(5,&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(beforeDay);</span><br><span class="line"> </span><br><span class="line">console.log(&#x27;//è·å–ï¼‹næœˆ&#x27;)</span><br><span class="line">let lateMonth = moment().add(2,&#x27;month&#x27;).toDate();</span><br><span class="line">console.log(lateHour);</span><br><span class="line"> </span><br><span class="line">//è·å–ï¼‹næœˆ</span><br><span class="line">let beforeMonth = moment().subtract(2,&#x27;month&#x27;).toDate();</span><br><span class="line">console.log(lateHour);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//è·å–æ˜ŸæœŸ</span><br><span class="line">let week = moment().format(&#x27;dddd&#x27;);</span><br><span class="line">console.log(week);</span><br><span class="line"> </span><br><span class="line">//è·å–åˆ°ç°åœ¨çš„å¹´é™ å¦‚æœä¸æ»¡ä¸€å¹´æ˜¾ç¤ºå‡ºå…·ä½“å‡ ä¸ªæœˆ</span><br><span class="line">let years = moment(&#x27;2020-12-31&#x27;).fromNow();</span><br><span class="line">console.log(years);</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ç»¼åˆ"><a href="#ä¸‰ã€ç»¼åˆ" class="headerlink" title="ä¸‰ã€ç»¼åˆ"></a>ä¸‰ã€ç»¼åˆ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import moment from &#x27;moment&#x27;</span><br><span class="line"></span><br><span class="line">DATE_TODAY: moment().format(&#x27;YYYY-MM-DD&#x27;),//ä»Šå¤©</span><br><span class="line">DATE_YESTERDAY: moment().subtract(1, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;), // æ˜¨å¤©</span><br><span class="line">DATE_1_WEEK_BEFORE: moment().subtract(1, &#x27;weeks&#x27;).format(&#x27;YYYY-MM-DD&#x27;),// ä¸€å‘¨å‰</span><br><span class="line">DATE_2_WEEKS_BEFORE: moment().subtract(2, &#x27;weeks&#x27;).format(&#x27;YYYY-MM-DD&#x27;),// ä¸¤å‘¨å‰</span><br><span class="line">DATE_3_WEEKS_BEFORE: moment().subtract(3, &#x27;weeks&#x27;).format(&#x27;YYYY-MM-DD&#x27;),// </span><br><span class="line">DATE_1_MONTH_BEFORE: moment().subtract(1, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_2_MONTH_BEFORE: moment().subtract(2, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_3_MONTHS_BEFORE: moment().subtract(3, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_1_YEAR_BEFORE: moment().subtract(1, &#x27;years&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line"></span><br><span class="line">DATE_3_MONTHS_AFTER: moment().add(3, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_1_YEAR_AFTER: moment().add(1, &#x27;year&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line"></span><br><span class="line">DATE_FIRST_DAY_OF_MONTH: moment().startOf(&#x27;month&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_LAST_DAY_OF_MONTH: moment().endOf(&#x27;month&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line"></span><br><span class="line">DATE_7_DAYS_BEFORE: moment().subtract(7, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_30_DAYS_BEFORE: moment().subtract(30, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_90_DAYS_BEFORE: moment().subtract(90, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_100_DAYS_BEFORE: moment().subtract(100, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">// æœ€è¿‘ä¸€ä¸ªå°æ—¶æ—¶é—´æˆ³</span><br><span class="line">new Date(moment().add(1, &#x27;h&#x27;).format(&#x27;YYYY-MM-DD hh:mm:ss&#x27;)).getTime()</span><br><span class="line"></span><br><span class="line">// æ ¼å¼åŒ–æ—¶é—´æˆ³ä¸ºæ—¥æœŸ 2018-12-06:12:21</span><br><span class="line">moment(æ—¶é—´æˆ³ * 1000).format(&#x27;YY-MM-DD:HH:mm:ss&#x27;)</span><br><span class="line"></span><br><span class="line">// è®¡ç®—æ—¶é—´å½“å‰æ—¶é—´å’Œæœ€è¿‘ä¸€å°æ—¶æ—¶é—´å·® å·®åˆ†é’Ÿ</span><br><span class="line">const oneHourBefore = new Date(moment().add(1, &#x27;h&#x27;).format(&#x27;YYYY-MM-DD hh:mm:ss&#x27;)).getTime()</span><br><span class="line">const currTime = Date.now()</span><br><span class="line">const minute = moment(currTime).diff(oneHourBefore), &#x27;minute&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€å…¶ä»–"><a href="#å››ã€å…¶ä»–" class="headerlink" title="å››ã€å…¶ä»–"></a>å››ã€å…¶ä»–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> * [getTimeList description] ç”Ÿæˆæ—¶é—´åˆ—è¡¨ </span><br><span class="line"> * @param  &#123;[type]&#125; hours [description] å°æ—¶ </span><br><span class="line"> * @param  &#123;[type]&#125; step  [description] åˆ†æ®µ </span><br><span class="line"> * @return &#123;[type]&#125;       [description] æ—¶é—´æ®µåˆ—è¡¨ </span><br><span class="line"> */  </span><br><span class="line">function getTimeList(hours, step)&#123;  </span><br><span class="line">    var minutes = 60  </span><br><span class="line">    var timeArr = []  </span><br><span class="line">    hours = hours  </span><br><span class="line">    step = step   </span><br><span class="line">  </span><br><span class="line">    for(var i = 0; i &lt; hours; i++)&#123;  </span><br><span class="line">        var str = &#x27;&#x27;  </span><br><span class="line">        if(i &lt; 10) &#123;  </span><br><span class="line">            str = 0 + &#x27;&#x27; + i  </span><br><span class="line">        &#125; else &#123;  </span><br><span class="line">            str = &#x27;&#x27; + i  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        for(var j = 0; j &lt; minutes; j++) &#123;  </span><br><span class="line">            if(j % step == 0)&#123;  </span><br><span class="line">                var s = j &lt; 10 ? &#x27;:&#x27; + 0 + &#x27;&#x27; + j : &#x27;:&#x27; +  j;  </span><br><span class="line">                s = str + s  </span><br><span class="line">                timeArr.push(s)  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    return timeArr;  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br><span class="line">getTimeList(12, 15)</span><br></pre></td></tr></table></figure>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2022/01/16/html+css+js+ts/3-js%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85moment/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-js-lodash.js">
    <header class="cube-excerpt-header">
        <h1><a href="/2022/01/13/html+css+js+ts/3-js%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85lodash/">js-lodash.js</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2022-01-13
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/javascript/" class="cube-excerpt-tag-link">#javascript</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <blockquote>
<p>ä¸­æ–‡æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://www.lodashjs.com/docs/4.17.5.html">https://www.lodashjs.com/docs/4.17.5.html</a></p>
</blockquote>
<h3 id="chunk"><a href="#chunk" class="headerlink" title="_.chunk"></a>_.chunk</h3><blockquote>
<p>å°†æ•°ç»„è¿›è¡Œåˆ‡åˆ†</p>
</blockquote>
<ul>
<li>è¿™ä¸ªå‡½æ•°æŠŠæ•°ç»„æŒ‰ç…§ä¸€å®šçš„é•¿åº¦åˆ†å¼€ï¼Œè¿”å›æ–°çš„æ•°ç»„ã€‚ï¼ˆç‰‡æ®µåŒ–æ•°ç»„ï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const arr = [1,2,3,4,5,6,7,8,9];</span><br><span class="line">_.chunk(arr,2);</span><br><span class="line">// =&gt;[[1,2],[3,4],[5,6],[7,8],[9]]</span><br></pre></td></tr></table></figure>

<h3 id="compact"><a href="#compact" class="headerlink" title="compact"></a>compact</h3><blockquote>
<p>å»é™¤å‡å€¼ã€‚ï¼ˆå°†æ‰€æœ‰çš„ç©ºå€¼ï¼Œ0ï¼ŒNaNè¿‡æ»¤æ‰ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_.compact([&#x27;1&#x27;,&#x27;2&#x27;,&#x27; &#x27;,0])</span><br><span class="line">// =&gt; [&#x27;1&#x27;,&#x27;2&#x27;]</span><br></pre></td></tr></table></figure>

<h3 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h3><blockquote>
<p>æ•°ç»„å»é‡ã€‚ï¼ˆå°†æ•°ç»„ä¸­çš„å¯¹è±¡å»é‡ï¼Œåªèƒ½æ˜¯æ•°ç»„å»é‡ï¼Œä¸èƒ½æ˜¯å¯¹è±¡å»é‡ã€‚ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_.uniq([1,1,3])</span><br><span class="line">// =&gt; [1,3]</span><br></pre></td></tr></table></figure>

<h3 id="reject"><a href="#reject" class="headerlink" title="_.reject"></a>_.reject</h3><blockquote>
<p>æ ¹æ®æ¡ä»¶å»é™¤æŸä¸ªå…ƒç´ </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.reject(foo, [&#x27;id&#x27;, 0])</span><br><span class="line"></span><br><span class="line">//bar = [&#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;]</span><br></pre></td></tr></table></figure>

<h3 id="shuffle"><a href="#shuffle" class="headerlink" title="shuffle"></a>shuffle</h3><blockquote>
<p>æ— åºåŒ–</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_.shuffle([1,2,3,4]);// æ— åºåŒ–</span><br></pre></td></tr></table></figure>

<h3 id="pick"><a href="#pick" class="headerlink" title="_.pick"></a>_.pick</h3><blockquote>
<p>æ ¹æ®keyæ¥ç­›é€‰æ•°ç»„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var foo = &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;</span><br><span class="line">var bar = _.pick(foo, [&#x27;name&#x27;, &#x27;age&#x27;])</span><br><span class="line">//bar = &#123;name: &quot;aaa&quot;, age: 33&#125;</span><br></pre></td></tr></table></figure>

<h3 id="keys"><a href="#keys" class="headerlink" title="_.keys"></a>_.keys</h3><blockquote>
<p>è¿”å›objectä¸­çš„æ‰€æœ‰key</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var foo = &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;</span><br><span class="line">var bar = _.keys(foo)</span><br><span class="line">//bar = [&#x27;id&#x27;, &#x27;name&#x27;, &#x27;age&#x27;]</span><br></pre></td></tr></table></figure>

<h3 id="cloneDeep"><a href="#cloneDeep" class="headerlink" title="_.cloneDeep"></a>_.cloneDeep</h3><blockquote>
<p>æ·±åº¦æ‹·è´</p>
</blockquote>
<h3 id="forEach"><a href="#forEach" class="headerlink" title="_.forEach"></a>_.forEach</h3><p><strong>å¸¸è§„æ•°ç»„éå†</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">agent.forEach(function (n,key) &#123;</span><br><span class="line">    agent[key].agent_id = agent[key].agent_name;</span><br><span class="line">    return agent;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨lodashæ¥éå†</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_.forEach(agent,function(n,key) &#123;</span><br><span class="line"></span><br><span class="line">    agent[key].agent_id= agent[key].agent_name</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„<code>forEach</code>çš„æ•°ç»„éå†ï¼Œä½¿ç”¨äº†<code>lodash</code>è¿‡åï¼Œ<code>_.forEach()</code>è¿™æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å°±å¯ä»¥ç›´æ¥</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const arr = _.forEach();</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™<code>arr</code>å°±æ˜¯æ–°çš„æ•°ç»„<code>agent</code></p>
<h3 id="merge-å‚æ•°åˆå¹¶"><a href="#merge-å‚æ•°åˆå¹¶" class="headerlink" title="_.merge å‚æ•°åˆå¹¶"></a>_.merge å‚æ•°åˆå¹¶</h3><blockquote>
<p>é€’å½’çš„å°†æºå¯¹è±¡å’Œç»§æ‰¿çš„å¯æšä¸¾å­—ç¬¦ä¸²ç›‘æ§å±æ€§åˆå¹¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚æºå¯¹è±¡ä»å·¦åˆ°å³å¼•ç”¨ï¼Œåç»­æ¥æºå°†è¦†ç›–ä»¥å‰æ¥æºçš„å±æ€§åˆ†é…ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var object = &#123;</span><br><span class="line">  &#x27;a&#x27;: [&#123; &#x27;b&#x27;: 2 &#125;, &#123; &#x27;d&#x27;: 4 &#125;]</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">var other = &#123;</span><br><span class="line">  &#x27;a&#x27;: [&#123; &#x27;c&#x27;: 3 &#125;, &#123; &#x27;e&#x27;: 5 &#125;]</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">_.merge(object, other);</span><br><span class="line">// =&gt; &#123; &#x27;a&#x27;: [&#123; &#x27;b&#x27;: 2, &#x27;c&#x27;: 3 &#125;, &#123; &#x27;d&#x27;: 4, &#x27;e&#x27;: 5 &#125;] &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‰ç«¯åœ¨æ¥å£çš„è¯·æ±‚å¯ä»¥<code>merge</code>ä¸€ä¸‹ä¹‹å‰çš„<code>query</code>å’Œç°åœ¨æ”¹å˜çš„æŸ¥è¯¢çš„å€¼ï¼Œå†å»è¯·æ±‚åç«¯æ¥å£çš„æ•°æ®</p>
</blockquote>
<h3 id="random"><a href="#random" class="headerlink" title="_.random"></a>_.random</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(_.random(10, 20)); // è·å–éšæœºæ•°</span><br><span class="line">_.random(15, 20, true); // éšæœºæµ®ç‚¹</span><br><span class="line">_.sample([&quot;lisong&quot;, &quot;heyan&quot;], 1);// éšæœºè·å–æ•°ç»„ä¸­çš„æŸä¸€é¡¹,attr2:éšæœºè·å–çš„ä¸ªæ•°</span><br></pre></td></tr></table></figure>

<h3 id="findæŸ¥æ‰¾æ•°ç»„"><a href="#findæŸ¥æ‰¾æ•°ç»„" class="headerlink" title="_.findæŸ¥æ‰¾æ•°ç»„"></a>_.findæŸ¥æ‰¾æ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.find(foo, [&#x27;id&#x27;, 0])</span><br><span class="line">//bar = &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ä¸€ä¸‹å¦‚æœæ²¡æ‰¾åˆ°çš„è¯ï¼Œä¼šè¿”å›<code>undefined</code>ï¼Œè¦å¤„ç†ä¸€ä¸‹</p>
</blockquote>
<h3 id="keyBy"><a href="#keyBy" class="headerlink" title="_.keyBy"></a>_.keyBy</h3><blockquote>
<p>ä»¥æŸä¸ªå±æ€§ä¸ºé”®ï¼Œå°†æ•°ç»„è½¬ä¸ºå¯¹è±¡</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var foo = var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.keyBy(foo, &#x27;name&#x27;)</span><br><span class="line">//bar = &#123;</span><br><span class="line">//    aaa: &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">//    bbb: &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">//&#125;</span><br></pre></td></tr></table></figure>

<h3 id="filter"><a href="#filter" class="headerlink" title="_.filter"></a>_.filter</h3><blockquote>
<p>æ ¹æ®æ¡ä»¶è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›æ–°æ•°ç»„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var foo = var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.filter(foo, [&#x27;name&#x27;, &quot;aaa&quot;])</span><br><span class="line">//bar = &#123;</span><br><span class="line">//    aaa: &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;</span><br><span class="line">//&#125;</span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="_.map"></a>_.map</h3><blockquote>
<p>ä»é›†åˆä¸­æŒ‘å‡ºä¸€ä¸ª<code>key</code>ï¼Œå°†å…¶å€¼ä½œä¸ºæ•°ç»„è¿”å›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var foo = var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.map(foo, &#x27;name&#x27;)</span><br><span class="line">//bar = [&quot;aaa&quot;, &quot;bbb&quot;]</span><br></pre></td></tr></table></figure>

<h3 id="max-x2F-min-x2F-sum"><a href="#max-x2F-min-x2F-sum" class="headerlink" title=".max&#x2F;.min&#x2F;_.sum"></a><em>.max&#x2F;</em>.min&#x2F;_.sum</h3><blockquote>
<p>æ•°ç»„ä¸­æœ€å¤§å€¼ã€æœ€å°å€¼ã€æ•°ç»„æ±‚å’Œ</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var foo = [1, 2, 3, 4]</span><br><span class="line">var bar = _.max(foo)</span><br><span class="line">//bar = 4</span><br><span class="line">bar = _.min(foo)</span><br><span class="line">//bar = 1</span><br><span class="line">bar = _.sum(foo)</span><br><span class="line">//bar = 10</span><br></pre></td></tr></table></figure>

<h3 id="pad-x2F-padStart-x2F-padEnd"><a href="#pad-x2F-padStart-x2F-padEnd" class="headerlink" title=".pad&#x2F;.padStart&#x2F;_.padEnd"></a><em>.pad&#x2F;</em>.padStart&#x2F;_.padEnd</h3><blockquote>
<p>åœ¨ä¸¤ç«¯ã€å¼€å¤´ã€æœ«å°¾è¡¥é½å­—ç¬¦</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var foo = &quot;helloworld&quot;</span><br><span class="line">var bar = _.pad(foo, 14, &#x27;-&#x27;)</span><br><span class="line">//bar = --helloworld--</span><br><span class="line">bar = _.padStart(foo, 14, &#x27;-&#x27;)</span><br><span class="line">//bar = ----helloworld</span><br><span class="line">bar = _.padEnd(foo, 14, &#x27;-&#x27;)</span><br><span class="line">//bar = helloworld----</span><br></pre></td></tr></table></figure>

<h3 id="é€‰å‡ºjsonæ•°ç»„ä¸­idæœ€å¤§çš„ä¸€é¡¹"><a href="#é€‰å‡ºjsonæ•°ç»„ä¸­idæœ€å¤§çš„ä¸€é¡¹" class="headerlink" title="é€‰å‡ºjsonæ•°ç»„ä¸­idæœ€å¤§çš„ä¸€é¡¹"></a>é€‰å‡ºjsonæ•°ç»„ä¸­idæœ€å¤§çš„ä¸€é¡¹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.find(foo, [&#x27;id&#x27;, _.max(_.map(foo, &#x27;id&#x27;))])</span><br><span class="line">// bar = &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">// ps:ä¹Ÿå¯ä»¥ç”¨maxByæŸä¸ªkeyæ¥ä»£æ›¿</span><br></pre></td></tr></table></figure>

<h3 id="æ›´æ–°jsonæ•°ç»„ä¸­æŸä¸€é¡¹çš„å€¼"><a href="#æ›´æ–°jsonæ•°ç»„ä¸­æŸä¸€é¡¹çš„å€¼" class="headerlink" title="æ›´æ–°jsonæ•°ç»„ä¸­æŸä¸€é¡¹çš„å€¼"></a>æ›´æ–°jsonæ•°ç»„ä¸­æŸä¸€é¡¹çš„å€¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">let list = _.keyBy(foo, &#x27;id&#x27;)</span><br><span class="line">list[0].name = &quot;ccc&quot;</span><br><span class="line">var bar = _.map(list)</span><br><span class="line">// bar = [</span><br><span class="line">//    &#123;id: 0, name: &quot;ccc&quot;, age: 33&#125;,</span><br><span class="line">//    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">//]</span><br></pre></td></tr></table></figure>

<h3 id="æ‰å¹³åŒ–æ•°ç»„-flatten"><a href="#æ‰å¹³åŒ–æ•°ç»„-flatten" class="headerlink" title="æ‰å¹³åŒ–æ•°ç»„ _.flatten"></a>æ‰å¹³åŒ–æ•°ç»„ _.flatten</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1,2,[3,4,[5],6]]</span><br><span class="line">var a8 = _.flatten(arr)  //[ 1, 2, 3, 4, [ 5 ], 6 ]</span><br><span class="line">var a9 = _.flattenDeep(arr)  //[ 1, 2, 3, 4, 5, 6 ]</span><br><span class="line">var a10 = _.flattenDepth(arr,2)  //[ 1, 2, 3, 4, 5, 6 ]</span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr2 = [12,14,11,12,12,1,14,16,17,22,2,11,12]</span><br><span class="line">var a11 = Array.from(new Set(arr2))</span><br><span class="line">var a12 = [...new Set(arr2)]</span><br><span class="line">var a13 = _.uniq(arr2)  //[ 12, 14, 11, 1, 16, 17, 22, 2 ]</span><br><span class="line">var arrObj = [&#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 2 &#125;, &#123; &#x27;x&#x27;: 2, &#x27;y&#x27;: 1 &#125;,&#123; &#x27;x&#x27;: 2, &#x27;y&#x27;: 1 &#125;, &#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 2 &#125;];</span><br><span class="line">var a14 = _.uniqWith(arrObj, _.isEqual)  //[ &#123; x: 1, y: 2 &#125;, &#123; x: 2, y: 1 &#125; ]</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2022/01/13/html+css+js+ts/3-js%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85lodash/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-git-stach">
    <header class="cube-excerpt-header">
        <h1><a href="/2022/01/12/%E5%B7%A5%E5%85%B7/git-stach/">git-stach</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2022-01-12
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/git/" class="cube-excerpt-tag-link">#git</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><p>stashï¼Œè¯‘ä¸ºå­˜æ”¾ï¼Œåœ¨ git ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºä¿å­˜å½“å‰å·¥ä½œè¿›åº¦ï¼Œä¼šæŠŠæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ”¹åŠ¨è¿›è¡Œä¿å­˜ï¼Œè¿™äº›ä¿®æ”¹ä¼šä¿å­˜åœ¨ä¸€ä¸ªæ ˆä¸Š</p>
<p>åç»­ä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™ä»»ä½•åˆ†æ”¯é‡æ–°å°†æŸæ¬¡çš„ä¿®æ”¹æ¨å‡ºæ¥ï¼Œé‡æ–°åº”ç”¨è¿™äº›æ›´æ”¹çš„ä»£ç </p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git stash</code>ä¼šç¼“å­˜ä¸‹åˆ—çŠ¶æ€çš„æ–‡ä»¶ï¼š</p>
<ul>
<li>æ·»åŠ åˆ°æš‚å­˜åŒºçš„ä¿®æ”¹ï¼ˆstaged changesï¼‰</li>
<li>Gitè·Ÿè¸ªçš„ä½†å¹¶æœªæ·»åŠ åˆ°æš‚å­˜åŒºçš„ä¿®æ”¹ï¼ˆunstaged changesï¼‰</li>
</ul>
<p>ä½†ä»¥ä¸‹çŠ¶æ€çš„æ–‡ä»¶ä¸ä¼šç¼“å­˜ï¼š</p>
<ul>
<li>åœ¨å·¥ä½œç›®å½•ä¸­æ–°çš„æ–‡ä»¶ï¼ˆuntracked filesï¼‰</li>
<li>è¢«å¿½ç•¥çš„æ–‡ä»¶ï¼ˆignored filesï¼‰</li>
</ul>
<p>å¦‚æœæƒ³è¦ä¸Šè¿°çš„æ–‡ä»¶éƒ½è¢«ç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨<code>-u</code>æˆ–è€…<code>--include-untracked</code>å¯ä»¥å·¥ä½œç›®å½•æ–°çš„æ–‡ä»¶ï¼Œä½¿ç”¨<code>-a</code>æˆ–è€…<code>--all</code>å‘½ä»¤å¯ä»¥å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ä¿®æ”¹</p>
<h2 id="äºŒã€å¦‚ä½•ä½¿ç”¨"><a href="#äºŒã€å¦‚ä½•ä½¿ç”¨" class="headerlink" title="äºŒã€å¦‚ä½•ä½¿ç”¨"></a>äºŒã€å¦‚ä½•ä½¿ç”¨</h2><p>å…³äº<code>git stash</code>å¸¸è§çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>git stash</li>
<li>git stash save</li>
<li>git stash list</li>
<li>git stash pop</li>
<li>git stash apply</li>
<li>git stash show</li>
<li>git stash drop</li>
<li>git stash clear</li>
</ul>
<h3 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h3><p>ä¿å­˜å½“å‰å·¥ä½œè¿›åº¦ï¼Œä¼šæŠŠæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ”¹åŠ¨ä¿å­˜èµ·æ¥</p>
<h3 id="git-stash-save"><a href="#git-stash-save" class="headerlink" title="git stash save"></a>git stash save</h3><p><code>git stash save</code>å¯ä»¥ç”¨äºå­˜å‚¨ä¿®æ”¹.å¹¶ä¸”å°†<code>git</code>çš„å·¥ä½œçŠ¶æ€åˆ‡å›åˆ°<code>HEAD</code>ä¹Ÿå°±æ˜¯ä¸Šä¸€æ¬¡åˆæ³•æäº¤ä¸Š</p>
<p>å¦‚æœç»™å®šå…·ä½“çš„æ–‡ä»¶è·¯å¾„,<code>git stash</code>åªä¼šå¤„ç†è·¯å¾„ä¸‹çš„æ–‡ä»¶.å…¶ä»–çš„æ–‡ä»¶ä¸ä¼šè¢«å­˜å‚¨ï¼Œå…¶å­˜åœ¨ä¸€äº›å‚æ•°ï¼š</p>
<ul>
<li>â€“keep-index æˆ–è€… -k åªä¼šå­˜å‚¨ä¸ºåŠ å…¥ git ç®¡ç†çš„æ–‡ä»¶</li>
<li>â€“include-untracked ä¸ºè¿½è¸ªçš„æ–‡ä»¶ä¹Ÿä¼šè¢«ç¼“å­˜,å½“å‰çš„å·¥ä½œç©ºé—´ä¼šè¢«æ¢å¤ä¸ºå®Œå…¨æ¸…ç©ºçš„çŠ¶æ€</li>
<li>-a æˆ–è€… â€“all å‘½ä»¤å¯ä»¥å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ä¿®æ”¹ï¼ŒåŒ…æ‹¬è¢« git å¿½ç•¥çš„æ–‡ä»¶</li>
</ul>
<h3 id="git-stash-list"><a href="#git-stash-list" class="headerlink" title="git stash list"></a>git stash list</h3><p>æ˜¾ç¤ºä¿å­˜è¿›åº¦çš„åˆ—è¡¨ã€‚ä¹Ÿå°±æ„å‘³ç€ï¼Œ<code>git stash</code>å‘½ä»¤å¯ä»¥å¤šæ¬¡æ‰§è¡Œï¼Œå½“å¤šæ¬¡ä½¿ç”¨<code>git stash</code>å‘½ä»¤åï¼Œæ ˆé‡Œä¼šå……æ»¡æœªæäº¤çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://static.vue-js.com/50216dd0-fccf-11eb-bc6f-3f06e1491664.png" alt="img"></p>
<p>å…¶ä¸­ï¼Œ<code>stash@&#123;0&#125;</code>ã€<code>stash@&#123;1&#125;</code>å°±æ˜¯å½“å‰<code>stash</code>çš„åç§°</p>
<h3 id="git-stash-pop"><a href="#git-stash-pop" class="headerlink" title="git stash pop"></a>git stash pop</h3><p><code>git stash pop</code> ä»æ ˆä¸­è¯»å–æœ€è¿‘ä¸€æ¬¡ä¿å­˜çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯æ ˆé¡¶çš„<code>stash</code>ä¼šæ¢å¤åˆ°å·¥ä½œåŒº</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ <code>git stash pop</code> + <code>stash</code>åå­—æ‰§è¡Œæ¢å¤å“ªä¸ª<code>stash</code>æ¢å¤åˆ°å½“å‰ç›®å½•</p>
<p>å¦‚æœä»<code>stash</code>ä¸­æ¢å¤çš„å†…å®¹å’Œå½“å‰ç›®å½•ä¸­çš„å†…å®¹å‘ç”Ÿäº†å†²çªï¼Œåˆ™éœ€è¦æ‰‹åŠ¨ä¿®å¤å†²çªæˆ–è€…åˆ›å»ºæ–°çš„åˆ†æ”¯æ¥è§£å†³å†²çª</p>
<h3 id="git-stash-apply"><a href="#git-stash-apply" class="headerlink" title="git stash apply"></a>git stash apply</h3><p>å°†å †æ ˆä¸­çš„å†…å®¹åº”ç”¨åˆ°å½“å‰ç›®å½•ï¼Œä¸åŒäº<code>git stash pop</code>ï¼Œè¯¥å‘½ä»¤ä¸ä¼šå°†å†…å®¹ä»å †æ ˆä¸­åˆ é™¤</p>
<p>ä¹Ÿå°±è¯´è¯¥å‘½ä»¤èƒ½å¤Ÿå°†å †æ ˆçš„å†…å®¹å¤šæ¬¡åº”ç”¨åˆ°å·¥ä½œç›®å½•ä¸­ï¼Œé€‚åº”äºå¤šä¸ªåˆ†æ”¯çš„æƒ…å†µ</p>
<p>åŒæ ·ï¼Œå¯ä»¥é€šè¿‡<code>git stash apply</code> + <code>stash</code>åå­—æ‰§è¡Œæ¢å¤å“ªä¸ª<code>stash</code>æ¢å¤åˆ°å½“å‰ç›®å½•</p>
<h3 id="git-stash-show"><a href="#git-stash-show" class="headerlink" title="git stash show"></a>git stash show</h3><p>æŸ¥çœ‹å †æ ˆä¸­æœ€æ–°ä¿å­˜çš„<code>stash</code>å’Œå½“å‰ç›®å½•çš„å·®å¼‚</p>
<p>é€šè¿‡ä½¿ç”¨<code>git stash show -p</code>æŸ¥çœ‹è¯¦ç»†çš„ä¸åŒ</p>
<p>é€šè¿‡ä½¿ç”¨<code>git stash show stash@&#123;1&#125;</code>æŸ¥çœ‹æŒ‡å®šçš„<code>stash</code>å’Œå½“å‰ç›®å½•å·®å¼‚</p>
<p><img src="https://static.vue-js.com/458620a0-fccf-11eb-bc6f-3f06e1491664.png" alt="img"></p>
<h3 id="git-stash-drop"><a href="#git-stash-drop" class="headerlink" title="git stash drop"></a>git stash drop</h3><p><code>git stash drop</code> + <code>stash</code>åç§°è¡¨ç¤ºä»å †æ ˆä¸­ç§»é™¤æŸä¸ªæŒ‡å®šçš„stash</p>
<h3 id="git-stash-clear"><a href="#git-stash-clear" class="headerlink" title="git stash clear"></a>git stash clear</h3><p>åˆ é™¤æ‰€æœ‰å­˜å‚¨çš„è¿›åº¦</p>
<h2 id="ä¸‰ã€åº”ç”¨åœºæ™¯"><a href="#ä¸‰ã€åº”ç”¨åœºæ™¯" class="headerlink" title="ä¸‰ã€åº”ç”¨åœºæ™¯"></a>ä¸‰ã€åº”ç”¨åœºæ™¯</h2><p>å½“ä½ åœ¨é¡¹ç›®çš„ä¸€éƒ¨åˆ†ä¸Šå·²ç»å·¥ä½œä¸€æ®µæ—¶é—´åï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½è¿›å…¥äº†æ··ä¹±çš„çŠ¶æ€ï¼Œ è€Œè¿™æ—¶ä½ æƒ³è¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯æˆ–è€…æ‹‰ä¸‹è¿œç«¯çš„ä»£ç å»åšä¸€ç‚¹åˆ«çš„äº‹æƒ…</p>
<p>ä½†æ˜¯ä½ åˆ›å»ºä¸€æ¬¡æœªå®Œæˆçš„ä»£ç çš„<code>commit</code>æäº¤ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨<code>git stash</code></p>
<p>ä¾‹å¦‚ä»¥ä¸‹åœºæ™¯ï¼š</p>
<p>å½“ä½ çš„å¼€å‘è¿›è¡Œåˆ°ä¸€åŠ,ä½†æ˜¯ä»£ç è¿˜ä¸æƒ³è¿›è¡Œæäº¤ ,ç„¶åéœ€è¦åŒæ­¥å»å…³è”è¿œç«¯ä»£ç æ—¶.å¦‚æœä½ æœ¬åœ°çš„ä»£ç å’Œè¿œç«¯ä»£ç æ²¡æœ‰å†²çªæ—¶,å¯ä»¥ç›´æ¥é€šè¿‡<code>git pull</code>è§£å†³</p>
<p>ä½†æ˜¯å¦‚æœå¯èƒ½å‘ç”Ÿå†²çªæ€ä¹ˆåŠ.ç›´æ¥<code>git pull</code>ä¼šæ‹’ç»è¦†ç›–å½“å‰çš„ä¿®æ”¹ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä¾æ¬¡ä½¿ç”¨ä¸‹è¿°çš„å‘½ä»¤ï¼š</p>
<ul>
<li>git stash</li>
<li>git pull</li>
<li>git stash pop</li>
</ul>
<p>æˆ–è€…å½“ä½ å¼€å‘åˆ°ä¸€åŠï¼Œç°åœ¨è¦ä¿®æ”¹åˆ«çš„åˆ†æ”¯é—®é¢˜çš„æ—¶å€™ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>git stash</code>ç¼“å­˜å½“å‰åŒºåŸŸçš„ä»£ç </p>
<ul>
<li>git stashï¼šä¿å­˜å¼€å‘åˆ°ä¸€åŠçš„ä»£ç </li>
<li>git commit -m â€˜ä¿®æ”¹é—®é¢˜â€™</li>
<li>git stash popï¼šå°†ä»£ç è¿½åŠ åˆ°æœ€æ–°çš„æäº¤ä¹‹å</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2022/01/12/%E5%B7%A5%E5%85%B7/git-stach/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3ä¼˜åŒ–">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/10/16/Vue/vue3%E4%BC%98%E5%8C%96/">vue3ä¼˜åŒ–</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-10-16
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€ç¼–è¯‘é˜¶æ®µ"><a href="#ä¸€ã€ç¼–è¯‘é˜¶æ®µ" class="headerlink" title="ä¸€ã€ç¼–è¯‘é˜¶æ®µ"></a>ä¸€ã€ç¼–è¯‘é˜¶æ®µ</h2><p>å›é¡¾<code>Vue2</code>ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª <code>watcher</code> å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠç”¨åˆ°çš„æ•°æ®<code>property</code>è®°å½•ä¸ºä¾èµ–ï¼Œå½“ä¾èµ–å‘ç”Ÿæ”¹å˜ï¼Œè§¦å‘<code>setter</code>ï¼Œåˆ™ä¼šé€šçŸ¥<code>watcher</code>ï¼Œä»è€Œä½¿å…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“</p>
<p><img src="https://static.vue-js.com/39066120-5ed0-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªç»„ä»¶ç»“æ„å¦‚ä¸‹å›¾</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œç»„ä»¶å†…éƒ¨åªæœ‰ä¸€ä¸ªåŠ¨æ€èŠ‚ç‚¹ï¼Œå‰©ä½™ä¸€å †éƒ½æ˜¯é™æ€èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œå¾ˆå¤š <code>diff</code> å’Œéå†å…¶å®éƒ½æ˜¯ä¸éœ€è¦çš„ï¼Œé€ æˆæ€§èƒ½æµªè´¹</p>
<p>å› æ­¤ï¼Œ<code>Vue3</code>åœ¨ç¼–è¯‘é˜¶æ®µï¼Œåšäº†è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚ä¸»è¦æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>diffç®—æ³•ä¼˜åŒ–</li>
<li>é™æ€æå‡</li>
<li>äº‹ä»¶ç›‘å¬ç¼“å­˜</li>
<li>SSRä¼˜åŒ–</li>
</ul>
<h4 id="diffç®—æ³•ä¼˜åŒ–"><a href="#diffç®—æ³•ä¼˜åŒ–" class="headerlink" title="diffç®—æ³•ä¼˜åŒ–"></a>diffç®—æ³•ä¼˜åŒ–</h4><p><code>vue3</code>åœ¨<code>diff</code>ç®—æ³•ä¸­ç›¸æ¯”<code>vue2</code>å¢åŠ äº†é™æ€æ ‡è®°</p>
<p>å…³äºè¿™ä¸ªé™æ€æ ‡è®°ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºäº†ä¼šå‘ç”Ÿå˜åŒ–çš„åœ°æ–¹æ·»åŠ ä¸€ä¸ª<code>flag</code>æ ‡è®°ï¼Œä¸‹æ¬¡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ç›´æ¥æ‰¾è¯¥åœ°æ–¹è¿›è¡Œæ¯”è¾ƒ</p>
<p>ä¸‹å›¾è¿™é‡Œï¼Œå·²ç»æ ‡è®°é™æ€èŠ‚ç‚¹çš„<code>p</code>æ ‡ç­¾åœ¨<code>diff</code>è¿‡ç¨‹ä¸­åˆ™ä¸ä¼šæ¯”è¾ƒï¼ŒæŠŠæ€§èƒ½è¿›ä¸€æ­¥æé«˜</p>
<p><img src="https://static.vue-js.com/c732e150-5c58-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>å…³äºé™æ€ç±»å‹æšä¸¾å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> enum <span class="title class_">PatchFlags</span> &#123;</span><br><span class="line">  <span class="variable constant_">TEXT</span> = <span class="number">1</span>,<span class="comment">// åŠ¨æ€çš„æ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line">  <span class="variable constant_">CLASS</span> = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,  <span class="comment">// 2 åŠ¨æ€çš„ class</span></span><br><span class="line">  <span class="variable constant_">STYLE</span> = <span class="number">1</span> &lt;&lt; <span class="number">2</span>,  <span class="comment">// 4 åŠ¨æ€çš„ style</span></span><br><span class="line">  <span class="variable constant_">PROPS</span> = <span class="number">1</span> &lt;&lt; <span class="number">3</span>,  <span class="comment">// 8 åŠ¨æ€å±æ€§ï¼Œä¸åŒ…æ‹¬ç±»åå’Œæ ·å¼</span></span><br><span class="line">  <span class="variable constant_">FULL_PROPS</span> = <span class="number">1</span> &lt;&lt; <span class="number">4</span>,  <span class="comment">// 16 åŠ¨æ€ keyï¼Œå½“ key å˜åŒ–æ—¶éœ€è¦å®Œæ•´çš„ diff ç®—æ³•åšæ¯”è¾ƒ</span></span><br><span class="line">  <span class="variable constant_">HYDRATE_EVENTS</span> = <span class="number">1</span> &lt;&lt; <span class="number">5</span>,  <span class="comment">// 32 è¡¨ç¤ºå¸¦æœ‰äº‹ä»¶ç›‘å¬å™¨çš„èŠ‚ç‚¹</span></span><br><span class="line">  <span class="variable constant_">STABLE_FRAGMENT</span> = <span class="number">1</span> &lt;&lt; <span class="number">6</span>,   <span class="comment">// 64 ä¸€ä¸ªä¸ä¼šæ”¹å˜å­èŠ‚ç‚¹é¡ºåºçš„ Fragment</span></span><br><span class="line">  <span class="variable constant_">KEYED_FRAGMENT</span> = <span class="number">1</span> &lt;&lt; <span class="number">7</span>, <span class="comment">// 128 å¸¦æœ‰ key å±æ€§çš„ Fragment</span></span><br><span class="line">  <span class="variable constant_">UNKEYED_FRAGMENT</span> = <span class="number">1</span> &lt;&lt; <span class="number">8</span>, <span class="comment">// 256 å­èŠ‚ç‚¹æ²¡æœ‰ key çš„ Fragment</span></span><br><span class="line">  <span class="variable constant_">NEED_PATCH</span> = <span class="number">1</span> &lt;&lt; <span class="number">9</span>,   <span class="comment">// 512</span></span><br><span class="line">  <span class="variable constant_">DYNAMIC_SLOTS</span> = <span class="number">1</span> &lt;&lt; <span class="number">10</span>,  <span class="comment">// åŠ¨æ€ solt</span></span><br><span class="line">  <span class="variable constant_">HOISTED</span> = -<span class="number">1</span>,  <span class="comment">// ç‰¹æ®Šæ ‡å¿—æ˜¯è´Ÿæ•´æ•°è¡¨ç¤ºæ°¸è¿œä¸ä¼šç”¨ä½œ diff</span></span><br><span class="line">  <span class="variable constant_">BAIL</span> = -<span class="number">2</span> <span class="comment">// ä¸€ä¸ªç‰¹æ®Šçš„æ ‡å¿—ï¼ŒæŒ‡ä»£å·®å¼‚ç®—æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é™æ€æå‡"><a href="#é™æ€æå‡" class="headerlink" title="é™æ€æå‡"></a>é™æ€æå‡</h4><p><code>Vue3</code>ä¸­å¯¹ä¸å‚ä¸æ›´æ–°çš„å…ƒç´ ï¼Œä¼šåšé™æ€æå‡ï¼Œåªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œåœ¨æ¸²æŸ“æ—¶ç›´æ¥å¤ç”¨</p>
<p>è¿™æ ·å°±å…å»äº†é‡å¤çš„åˆ›å»ºèŠ‚ç‚¹ï¼Œå¤§å‹åº”ç”¨ä¼šå—ç›Šäºè¿™ä¸ªæ”¹åŠ¨ï¼Œå…å»äº†é‡å¤çš„åˆ›å»ºæ“ä½œï¼Œä¼˜åŒ–äº†è¿è¡Œæ—¶å€™çš„å†…å­˜å ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;ä½ å¥½&lt;/span&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰åšé™æ€æå‡ä¹‹å‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createBlock</span>(_Fragment, <span class="literal">null</span>, [</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;span&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;ä½ å¥½&quot;</span>),</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="title function_">_toDisplayString</span>(_ctx.<span class="property">message</span>), <span class="number">1</span> <span class="comment">/* TEXT */</span>)</span><br><span class="line">  ], <span class="number">64</span> <span class="comment">/* STABLE_FRAGMENT */</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åšäº†é™æ€æå‡ä¹‹å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _hoisted_1 = <span class="comment">/*#__PURE__*/</span><span class="title function_">_createVNode</span>(<span class="string">&quot;span&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;ä½ å¥½&quot;</span>, -<span class="number">1</span> <span class="comment">/* HOISTED */</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createBlock</span>(_Fragment, <span class="literal">null</span>, [</span><br><span class="line">    _hoisted_1,</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="title function_">_toDisplayString</span>(_ctx.<span class="property">message</span>), <span class="number">1</span> <span class="comment">/* TEXT */</span>)</span><br><span class="line">  ], <span class="number">64</span> <span class="comment">/* STABLE_FRAGMENT */</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Check the console for the AST</span></span><br></pre></td></tr></table></figure>

<p>é™æ€å†…å®¹<code>_hoisted_1</code>è¢«æ”¾ç½®åœ¨<code>render</code> å‡½æ•°å¤–ï¼Œæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™åªè¦å– <code>_hoisted_1</code> å³å¯</p>
<p>åŒæ—¶ <code>_hoisted_1</code> è¢«æ‰“ä¸Šäº† <code>PatchFlag</code> ï¼Œé™æ€æ ‡è®°å€¼ä¸º -1 ï¼Œç‰¹æ®Šæ ‡å¿—æ˜¯è´Ÿæ•´æ•°è¡¨ç¤ºæ°¸è¿œä¸ä¼šç”¨äº Diff</p>
<h4 id="äº‹ä»¶ç›‘å¬ç¼“å­˜"><a href="#äº‹ä»¶ç›‘å¬ç¼“å­˜" class="headerlink" title="äº‹ä»¶ç›‘å¬ç¼“å­˜"></a>äº‹ä»¶ç›‘å¬ç¼“å­˜</h4><p>é»˜è®¤æƒ…å†µä¸‹ç»‘å®šäº‹ä»¶è¡Œä¸ºä¼šè¢«è§†ä¸ºåŠ¨æ€ç»‘å®šï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½ä¼šå»è¿½è¸ªå®ƒçš„å˜åŒ–</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;button @click = &#x27;onClick&#x27;&gt;ç‚¹æˆ‘&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>æ²¡å¼€å¯äº‹ä»¶ç›‘å¬å™¨ç¼“å­˜</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> render = <span class="comment">/*#__PURE__*/</span><span class="title function_">_withId</span>(<span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createBlock</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, [</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;button&quot;</span>, &#123; <span class="attr">onClick</span>: _ctx.<span class="property">onClick</span> &#125;, <span class="string">&quot;ç‚¹æˆ‘&quot;</span>, <span class="number">8</span> <span class="comment">/* PROPS */</span>, [<span class="string">&quot;onClick&quot;</span>])</span><br><span class="line">                                             <span class="comment">// PROPS=1&lt;&lt;3,// 8 //åŠ¨æ€å±æ€§ï¼Œä½†ä¸åŒ…å«ç±»åå’Œæ ·å¼</span></span><br><span class="line">  ]))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å¼€å¯äº‹ä»¶ä¾¦å¬å™¨ç¼“å­˜å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createBlock</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, [</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;button&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">onClick</span>: _cache[<span class="number">1</span>] || (_cache[<span class="number">1</span>] = <span class="function">(<span class="params">...args</span>) =&gt;</span> (_ctx.<span class="title function_">onClick</span>(...args)))</span><br><span class="line">    &#125;, <span class="string">&quot;ç‚¹æˆ‘&quot;</span>)</span><br><span class="line">  ]))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°å‘ç°å¼€å¯äº†ç¼“å­˜åï¼Œæ²¡æœ‰äº†é™æ€æ ‡è®°ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸‹æ¬¡<code>diff</code>ç®—æ³•çš„æ—¶å€™ç›´æ¥ä½¿ç”¨</p>
<h4 id="SSRä¼˜åŒ–"><a href="#SSRä¼˜åŒ–" class="headerlink" title="SSRä¼˜åŒ–"></a>SSRä¼˜åŒ–</h4><p>å½“é™æ€å†…å®¹å¤§åˆ°ä¸€å®šé‡çº§æ—¶å€™ï¼Œä¼šç”¨<code>createStaticVNode</code>æ–¹æ³•åœ¨å®¢æˆ·ç«¯å»ç”Ÿæˆä¸€ä¸ªstatic nodeï¼Œè¿™äº›é™æ€<code>node</code>ï¼Œä¼šè¢«ç›´æ¥<code>innerHtml</code>ï¼Œå°±ä¸éœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œç„¶åæ ¹æ®å¯¹è±¡æ¸²æŸ“</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">div&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">span</span>&gt;</span>ä½ å¥½<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	...  <span class="comment">// å¾ˆå¤šä¸ªé™æ€å±æ€§</span></span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mergeProps <span class="keyword">as</span> _mergeProps &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ssrRenderAttrs <span class="keyword">as</span> _ssrRenderAttrs, ssrInterpolate <span class="keyword">as</span> _ssrInterpolate &#125; <span class="keyword">from</span> <span class="string">&quot;@vue/server-renderer&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">ssrRender</span>(<span class="params">_ctx, _push, _parent, _attrs, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> _cssVars = &#123; <span class="attr">style</span>: &#123; <span class="attr">color</span>: _ctx.<span class="property">color</span> &#125;&#125;</span><br><span class="line">  <span class="title function_">_push</span>(<span class="string">`&lt;div<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">    _ssrRenderAttrs(_mergeProps(_attrs, _cssVars))</span></span></span><br><span class="line"><span class="subst"><span class="string">  &#125;</span>&gt;&lt;div&gt;&lt;span&gt;ä½ å¥½&lt;/span&gt;...&lt;div&gt;&lt;span&gt;ä½ å¥½&lt;/span&gt;&lt;div&gt;&lt;span&gt;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">    _ssrInterpolate(_ctx.message)</span></span></span><br><span class="line"><span class="subst"><span class="string">  &#125;</span>&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€æºç ä½“ç§¯"><a href="#äºŒã€æºç ä½“ç§¯" class="headerlink" title="äºŒã€æºç ä½“ç§¯"></a>äºŒã€æºç ä½“ç§¯</h2><p>ç›¸æ¯”<code>Vue2</code>ï¼Œ<code>Vue3</code>æ•´ä½“ä½“ç§¯å˜å°äº†ï¼Œé™¤äº†ç§»å‡ºä¸€äº›ä¸å¸¸ç”¨çš„APIï¼Œå†é‡è¦çš„æ˜¯<code>Tree shanking</code></p>
<p>ä»»ä½•ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚<code>ref</code>ã€<code>reavtived</code>ã€<code>computed</code>ç­‰ï¼Œä»…ä»…åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰æ‰“åŒ…ï¼Œæ²¡ç”¨åˆ°çš„æ¨¡å—éƒ½è¢«æ‘‡æ‰ï¼Œæ‰“åŒ…çš„æ•´ä½“ä½“ç§¯å˜å°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed, defineComponent, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params">props, context</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> readOnlyAge = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> age.<span class="property">value</span>++) <span class="comment">// 19</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            age,</span><br><span class="line">            state,</span><br><span class="line">            readOnlyAge</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€å“åº”å¼ç³»ç»Ÿ"><a href="#ä¸‰ã€å“åº”å¼ç³»ç»Ÿ" class="headerlink" title="ä¸‰ã€å“åº”å¼ç³»ç»Ÿ"></a>ä¸‰ã€å“åº”å¼ç³»ç»Ÿ</h2><p><code>vue2</code>ä¸­é‡‡ç”¨ <code>defineProperty</code>æ¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œç„¶åè¿›è¡Œæ·±åº¦éå†æ‰€æœ‰å±æ€§ï¼Œç»™æ¯ä¸ªå±æ€§æ·»åŠ <code>getter</code>å’Œ<code>setter</code>ï¼Œå®ç°å“åº”å¼</p>
<p><code>vue3</code>é‡‡ç”¨<code>proxy</code>é‡å†™äº†å“åº”å¼ç³»ç»Ÿï¼Œå› ä¸º<code>proxy</code>å¯ä»¥å¯¹æ•´ä¸ªå¯¹è±¡è¿›è¡Œç›‘å¬ï¼Œæ‰€ä»¥ä¸éœ€è¦æ·±åº¦éå†</p>
<ul>
<li>å¯ä»¥ç›‘å¬åŠ¨æ€å±æ€§çš„æ·»åŠ </li>
<li>å¯ä»¥ç›‘å¬åˆ°æ•°ç»„çš„ç´¢å¼•å’Œæ•°ç»„<code>length</code>å±æ€§</li>
<li>å¯ä»¥ç›‘å¬åˆ é™¤å±æ€§</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/10/16/Vue/vue3%E4%BC%98%E5%8C%96/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-Vue3-è®¾è®¡ç›®æ ‡ã€åšäº†å“ªäº›ä¼˜åŒ–">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/10/11/Vue/Vue3-%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E3%80%81%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/">Vue3-è®¾è®¡ç›®æ ‡ã€åšäº†å“ªäº›ä¼˜åŒ–</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-10-11
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€è®¾è®¡ç›®æ ‡"><a href="#ä¸€ã€è®¾è®¡ç›®æ ‡" class="headerlink" title="ä¸€ã€è®¾è®¡ç›®æ ‡"></a>ä¸€ã€è®¾è®¡ç›®æ ‡</h2><p>ä¸ä»¥è§£å†³å®é™…ä¸šåŠ¡ç—›ç‚¹çš„æ›´æ–°éƒ½æ˜¯è€æµæ°“ï¼Œä¸‹é¢æˆ‘ä»¬æ¥åˆ—ä¸¾ä¸€ä¸‹<code>Vue3</code>ä¹‹å‰æˆ‘ä»¬æˆ–è®¸ä¼šé¢ä¸´çš„é—®é¢˜</p>
<ul>
<li>éšç€åŠŸèƒ½çš„å¢é•¿ï¼Œå¤æ‚ç»„ä»¶çš„ä»£ç å˜å¾—è¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤</li>
<li>ç¼ºå°‘ä¸€ç§æ¯”è¾ƒã€Œå¹²å‡€ã€çš„åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´æå–å’Œå¤ç”¨é€»è¾‘çš„æœºåˆ¶</li>
<li>ç±»å‹æ¨æ–­ä¸å¤Ÿå‹å¥½</li>
<li><code>bundle</code>çš„æ—¶é—´å¤ªä¹…äº†</li>
</ul>
<p>è€Œ <code>Vue3</code> ç»è¿‡é•¿è¾¾ä¸¤ä¸‰å¹´æ—¶é—´çš„ç­¹å¤‡ï¼Œåšäº†å“ªäº›äº‹æƒ…ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»ç»“æœåæ¨</p>
<ul>
<li>æ›´å°</li>
<li>æ›´å¿«</li>
<li>TypeScriptæ”¯æŒ</li>
<li>APIè®¾è®¡ä¸€è‡´æ€§</li>
<li>æé«˜è‡ªèº«å¯ç»´æŠ¤æ€§</li>
<li>å¼€æ”¾æ›´å¤šåº•å±‚åŠŸèƒ½</li>
</ul>
<p>ä¸€å¥è¯æ¦‚è¿°ï¼Œå°±æ˜¯æ›´å°æ›´å¿«æ›´å‹å¥½äº†</p>
<h3 id="æ›´å°"><a href="#æ›´å°" class="headerlink" title="æ›´å°"></a>æ›´å°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue3`ç§»é™¤ä¸€äº›ä¸å¸¸ç”¨çš„ `API</span><br></pre></td></tr></table></figure>

<p>å¼•å…¥<code>tree-shaking</code>ï¼Œå¯ä»¥å°†æ— ç”¨æ¨¡å—â€œå‰ªè¾‘â€ï¼Œä»…æ‰“åŒ…éœ€è¦çš„ï¼Œä½¿æ‰“åŒ…çš„æ•´ä½“ä½“ç§¯å˜å°äº†</p>
<h3 id="æ›´å¿«"><a href="#æ›´å¿«" class="headerlink" title="æ›´å¿«"></a>æ›´å¿«</h3><p>ä¸»è¦ä½“ç°åœ¨ç¼–è¯‘æ–¹é¢ï¼š</p>
<ul>
<li>diffç®—æ³•ä¼˜åŒ–</li>
<li>é™æ€æå‡</li>
<li>äº‹ä»¶ç›‘å¬ç¼“å­˜</li>
<li>SSRä¼˜åŒ–</li>
</ul>
<p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬ä¼šè¿›ä¸€æ­¥ä»‹ç»</p>
<h3 id="æ›´å‹å¥½"><a href="#æ›´å‹å¥½" class="headerlink" title="æ›´å‹å¥½"></a>æ›´å‹å¥½</h3><p><code>vue3</code>åœ¨å…¼é¡¾<code>vue2</code>çš„<code>options API</code>çš„åŒæ—¶è¿˜æ¨å‡ºäº†<code>composition API</code>ï¼Œå¤§å¤§å¢åŠ äº†ä»£ç çš„é€»è¾‘ç»„ç»‡å’Œä»£ç å¤ç”¨èƒ½åŠ›</p>
<p>è¿™é‡Œä»£ç ç®€å•æ¼”ç¤ºä¸‹ï¼š</p>
<p>å­˜åœ¨ä¸€ä¸ªè·å–é¼ æ ‡ä½ç½®çš„å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toRefs, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useMouse</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;<span class="attr">x</span>:<span class="number">0</span>,<span class="attr">y</span>:<span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">update</span> = e=&gt;&#123;</span><br><span class="line">        state.<span class="property">x</span> = e.<span class="property">pageX</span>;</span><br><span class="line">        state.<span class="property">y</span> = e.<span class="property">pageY</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>,update);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>,update);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">toRefs</span>(state);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åªéœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå³å¯è·å–<code>x</code>ã€<code>y</code>çš„åæ ‡ï¼Œå®Œå…¨ä¸ç”¨å…³æ³¨å®ç°è¿‡ç¨‹</p>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå¾ˆå¤šç±»ä¼¼çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨å³å¯ï¼Œä¸å¿…å…³æ³¨å®ç°è¿‡ç¨‹ï¼Œå¼€å‘æ•ˆç‡å¤§å¤§æé«˜</p>
<p>åŒæ—¶ï¼Œ<code>VUE3</code>æ˜¯åŸºäº<code>typescipt</code>ç¼–å†™çš„ï¼Œå¯ä»¥äº«å—åˆ°è‡ªåŠ¨çš„ç±»å‹å®šä¹‰æç¤º</p>
<h2 id="ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ"></a>ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ</h2><p><code>vue3</code>ä»å¾ˆå¤šå±‚é¢éƒ½åšäº†ä¼˜åŒ–ï¼Œå¯ä»¥åˆ†æˆä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>æºç </li>
<li>æ€§èƒ½</li>
<li>è¯­æ³• API</li>
</ul>
<h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p>æºç å¯ä»¥ä»ä¸¤ä¸ªå±‚é¢å±•å¼€ï¼š</p>
<ul>
<li>æºç ç®¡ç†</li>
<li>TypeScript</li>
</ul>
<h4 id="æºç ç®¡ç†"><a href="#æºç ç®¡ç†" class="headerlink" title="æºç ç®¡ç†"></a>æºç ç®¡ç†</h4><p><code>vue3</code>æ•´ä¸ªæºç æ˜¯é€šè¿‡ <code>monorepo</code>çš„æ–¹å¼ç»´æŠ¤çš„ï¼Œæ ¹æ®åŠŸèƒ½å°†ä¸åŒçš„æ¨¡å—æ‹†åˆ†åˆ°<code>packages</code>ç›®å½•ä¸‹é¢ä¸åŒçš„å­ç›®å½•ä¸­</p>
<p><img src="https://static.vue-js.com/d7c32520-5c58-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>è¿™æ ·ä½¿å¾—æ¨¡å—æ‹†åˆ†æ›´ç»†åŒ–ï¼ŒèŒè´£åˆ’åˆ†æ›´æ˜ç¡®ï¼Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¹Ÿæ›´åŠ æ˜ç¡®ï¼Œå¼€å‘äººå‘˜ä¹Ÿæ›´å®¹æ˜“é˜…è¯»ã€ç†è§£å’Œæ›´æ”¹æ‰€æœ‰æ¨¡å—æºç ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§</p>
<p>å¦å¤–ä¸€äº› <code>package</code>ï¼ˆæ¯”å¦‚ <code>reactivity</code> å“åº”å¼åº“ï¼‰æ˜¯å¯ä»¥ç‹¬ç«‹äº <code>Vue</code> ä½¿ç”¨çš„ï¼Œè¿™æ ·ç”¨æˆ·å¦‚æœåªæƒ³ä½¿ç”¨ <code>Vue3</code>çš„å“åº”å¼èƒ½åŠ›ï¼Œå¯ä»¥å•ç‹¬ä¾èµ–è¿™ä¸ªå“åº”å¼åº“è€Œä¸ç”¨å»ä¾èµ–æ•´ä¸ª <code>Vue</code></p>
<h4 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h4><p><code>Vue3</code>æ˜¯åŸºäº<code>typeScript</code>ç¼–å†™çš„ï¼Œæä¾›äº†æ›´å¥½çš„ç±»å‹æ£€æŸ¥ï¼Œèƒ½æ”¯æŒå¤æ‚çš„ç±»å‹æ¨å¯¼</p>
<h3 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h3><p><code>vue3</code>æ˜¯ä»ä»€ä¹ˆå“ªäº›æ–¹é¢å¯¹æ€§èƒ½è¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–å‘¢ï¼Ÿ</p>
<ul>
<li>ä½“ç§¯ä¼˜åŒ–</li>
<li>ç¼–è¯‘ä¼˜åŒ–</li>
<li>æ•°æ®åŠ«æŒä¼˜åŒ–</li>
</ul>
<p>è¿™é‡Œè®²è¿°æ•°æ®åŠ«æŒï¼š</p>
<p>åœ¨<code>vue2</code>ä¸­ï¼Œæ•°æ®åŠ«æŒæ˜¯é€šè¿‡<code>Object.defineProperty</code>ï¼Œè¿™ä¸ª API æœ‰ä¸€äº›ç¼ºé™·ï¼Œå¹¶ä¸èƒ½æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;a&#x27;</span>,&#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// track</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// trigger</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å°½ç®¡<code>Vue</code>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æä¾›äº† <code>set</code>å’Œ<code>delete</code>å®ä¾‹æ–¹æ³•ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œè¿˜æ˜¯å¢åŠ äº†ä¸€å®šçš„å¿ƒæ™ºè´Ÿæ‹…</p>
<p>åŒæ—¶åœ¨é¢å¯¹åµŒå¥—å±‚çº§æ¯”è¾ƒæ·±çš„æƒ…å†µä¸‹ï¼Œå°±å­˜åœ¨æ€§èƒ½é—®é¢˜</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123;</span><br><span class="line">      <span class="attr">b</span>: &#123;</span><br><span class="line">          <span class="attr">c</span>: &#123;</span><br><span class="line">          <span class="attr">d</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>vue3</code>æ˜¯é€šè¿‡<code>proxy</code>ç›‘å¬æ•´ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹äºåˆ é™¤è¿˜æ˜¯ç›‘å¬å½“ç„¶ä¹Ÿèƒ½ç›‘å¬åˆ°</p>
<p>åŒæ—¶<code>Proxy</code> å¹¶ä¸èƒ½ç›‘å¬åˆ°å†…éƒ¨æ·±å±‚æ¬¡çš„å¯¹è±¡å˜åŒ–ï¼Œè€Œ <code>Vue3</code> çš„å¤„ç†æ–¹å¼æ˜¯åœ¨<code>getter</code> ä¸­å»é€’å½’å“åº”å¼ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯çœŸæ­£è®¿é—®åˆ°çš„å†…éƒ¨å¯¹è±¡æ‰ä¼šå˜æˆå“åº”å¼ï¼Œè€Œä¸æ˜¯æ— è„‘é€’å½’</p>
<h3 id="è¯­æ³•-API"><a href="#è¯­æ³•-API" class="headerlink" title="è¯­æ³• API"></a>è¯­æ³• API</h3><p>è¿™é‡Œå½“ç„¶è¯´çš„å°±æ˜¯<code>composition API</code>ï¼Œå…¶ä¸¤å¤§æ˜¾è‘—çš„ä¼˜åŒ–ï¼š</p>
<ul>
<li>ä¼˜åŒ–é€»è¾‘ç»„ç»‡</li>
<li>ä¼˜åŒ–é€»è¾‘å¤ç”¨</li>
</ul>
<h4 id="é€»è¾‘ç»„ç»‡"><a href="#é€»è¾‘ç»„ç»‡" class="headerlink" title="é€»è¾‘ç»„ç»‡"></a>é€»è¾‘ç»„ç»‡</h4><p>ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚åœ°æ„Ÿå—åˆ° <code>Composition API</code>åœ¨é€»è¾‘ç»„ç»‡æ–¹é¢çš„ä¼˜åŠ¿</p>
<p><img src="https://static.vue-js.com/e5804bc0-5c58-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>ç›¸åŒåŠŸèƒ½çš„ä»£ç ç¼–å†™åœ¨ä¸€å—ï¼Œè€Œä¸åƒ<code>options API</code>é‚£æ ·ï¼Œå„ä¸ªåŠŸèƒ½çš„ä»£ç æ··æˆä¸€å—</p>
<h4 id="é€»è¾‘å¤ç”¨"><a href="#é€»è¾‘å¤ç”¨" class="headerlink" title="é€»è¾‘å¤ç”¨"></a>é€»è¾‘å¤ç”¨</h4><p>åœ¨<code>vue2</code>ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡<code>mixin</code>å®ç°åŠŸèƒ½æ··åˆï¼Œå¦‚æœå¤šä¸ª<code>mixin</code>æ··åˆï¼Œä¼šå­˜åœ¨ä¸¤ä¸ªéå¸¸æ˜æ˜¾çš„é—®é¢˜ï¼šå‘½åå†²çªå’Œæ•°æ®æ¥æºä¸æ¸…æ™°</p>
<p>è€Œé€šè¿‡<code>composition</code>è¿™ç§å½¢å¼ï¼Œå¯ä»¥å°†ä¸€äº›å¤ç”¨çš„ä»£ç æŠ½ç¦»å‡ºæ¥ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œåªè¦çš„ä½¿ç”¨çš„åœ°æ–¹ç›´æ¥è¿›è¡Œè°ƒç”¨å³å¯</p>
<p>åŒæ ·æ˜¯ä¸Šæ–‡çš„è·å–é¼ æ ‡ä½ç½®çš„ä¾‹å­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toRefs, reactive, onUnmounted, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useMouse</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;<span class="attr">x</span>:<span class="number">0</span>,<span class="attr">y</span>:<span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">update</span> = e=&gt;&#123;</span><br><span class="line">        state.<span class="property">x</span> = e.<span class="property">pageX</span>;</span><br><span class="line">        state.<span class="property">y</span> = e.<span class="property">pageY</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>,update);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>,update);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">toRefs</span>(state);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useMousePosition <span class="keyword">from</span> <span class="string">&#x27;./mouse&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; x, y &#125; = <span class="title function_">useMousePosition</span>()</span><br><span class="line">        <span class="keyword">return</span> &#123; x, y &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªæ•°æ®æ¥æºæ¸…æ™°äº†ï¼Œå³ä½¿å»ç¼–å†™æ›´å¤šçš„<code>hook</code>å‡½æ•°ï¼Œä¹Ÿä¸ä¼šå‡ºç°å‘½åå†²çªçš„é—®é¢˜</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/10/11/Vue/Vue3-%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E3%80%81%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3-Treeshaking">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/09/29/Vue/vue3-Treeshaking/">vue3-Treeshaking</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-09-29
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tree shaking` æ˜¯ä¸€ç§é€šè¿‡æ¸…é™¤å¤šä½™ä»£ç æ–¹å¼æ¥ä¼˜åŒ–é¡¹ç›®æ‰“åŒ…ä½“ç§¯çš„æŠ€æœ¯ï¼Œä¸“ä¸šæœ¯è¯­å« `Dead code elimination</span><br></pre></td></tr></table></figure>

<p>ç®€å•æ¥è®²ï¼Œå°±æ˜¯åœ¨ä¿æŒä»£ç è¿è¡Œç»“æœä¸å˜çš„å‰æä¸‹ï¼Œå»é™¤æ— ç”¨çš„ä»£ç </p>
<p>å¦‚æœæŠŠä»£ç æ‰“åŒ…æ¯”ä½œåˆ¶ä½œè›‹ç³•ï¼Œä¼ ç»Ÿçš„æ–¹å¼æ˜¯æŠŠé¸¡è›‹ï¼ˆå¸¦å£³ï¼‰å…¨éƒ¨ä¸¢è¿›å»æ…æ‹Œï¼Œç„¶åæ”¾å…¥çƒ¤ç®±ï¼Œæœ€åæŠŠï¼ˆæ²¡æœ‰ç”¨çš„ï¼‰è›‹å£³å…¨éƒ¨æŒ‘é€‰å¹¶å‰”é™¤å‡ºå»</p>
<p>è€Œ<code>treeshaking</code>åˆ™æ˜¯ä¸€å¼€å§‹å°±æŠŠæœ‰ç”¨çš„è›‹ç™½è›‹é»„ï¼ˆimportï¼‰æ”¾å…¥æ…æ‹Œï¼Œæœ€åç›´æ¥ä½œå‡ºè›‹ç³•</p>
<p>ä¹Ÿå°±æ˜¯è¯´ ï¼Œ<code>tree shaking</code> å…¶å®æ˜¯æ‰¾å‡ºä½¿ç”¨çš„ä»£ç </p>
<p>åœ¨<code>Vue2</code>ä¸­ï¼Œæ— è®ºæˆ‘ä»¬ä½¿ç”¨ä»€ä¹ˆåŠŸèƒ½ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šå‡ºç°åœ¨ç”Ÿäº§ä»£ç ä¸­ã€‚ä¸»è¦åŸå› æ˜¯<code>Vue</code>å®ä¾‹åœ¨é¡¹ç›®ä¸­æ˜¯å•ä¾‹çš„ï¼Œæ†ç»‘ç¨‹åºæ— æ³•æ£€æµ‹åˆ°è¯¥å¯¹è±¡çš„å“ªäº›å±æ€§åœ¨ä»£ç ä¸­è¢«ä½¿ç”¨åˆ°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>è€Œ<code>Vue3</code>æºç å¼•å…¥<code>tree shaking</code>ç‰¹æ€§ï¼Œå°†å…¨å±€ API è¿›è¡Œåˆ†å—ã€‚å¦‚æœæ‚¨ä¸ä½¿ç”¨å…¶æŸäº›åŠŸèƒ½ï¼Œå®ƒä»¬å°†ä¸ä¼šåŒ…å«åœ¨æ‚¨çš„åŸºç¡€åŒ…ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; nextTick, observable &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å¦‚ä½•åš"><a href="#äºŒã€å¦‚ä½•åš" class="headerlink" title="äºŒã€å¦‚ä½•åš"></a>äºŒã€å¦‚ä½•åš</h2><p><code>Tree shaking</code>æ˜¯åŸºäº<code>ES6</code>æ¨¡æ¿è¯­æ³•ï¼ˆ<code>import</code>ä¸<code>exports</code>ï¼‰ï¼Œä¸»è¦æ˜¯å€ŸåŠ©<code>ES6</code>æ¨¡å—çš„é™æ€ç¼–è¯‘æ€æƒ³ï¼Œåœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡</p>
<p><code>Tree shaking</code>æ— éå°±æ˜¯åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>ç¼–è¯‘é˜¶æ®µåˆ©ç”¨<code>ES6 Module</code>åˆ¤æ–­å“ªäº›æ¨¡å—å·²ç»åŠ è½½</li>
<li>åˆ¤æ–­é‚£äº›æ¨¡å—å’Œå˜é‡æœªè¢«ä½¿ç”¨æˆ–è€…å¼•ç”¨ï¼Œè¿›è€Œåˆ é™¤å¯¹åº”ä»£ç </li>
</ul>
<p>ä¸‹é¢å°±æ¥ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>é€šè¿‡è„šæ‰‹æ¶<code>vue-cli</code>å®‰è£…<code>Vue2</code>ä¸<code>Vue3</code>é¡¹ç›®</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create vue-demo</span><br></pre></td></tr></table></figure>

<h3 id="Vue2-é¡¹ç›®"><a href="#Vue2-é¡¹ç›®" class="headerlink" title="Vue2 é¡¹ç›®"></a>Vue2 é¡¹ç›®</h3><p>ç»„ä»¶ä¸­ä½¿ç”¨<code>data</code>å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        data: () =&gt; (&#123;</span><br><span class="line">            count: 1,</span><br><span class="line">        &#125;),</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>å¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œä½“ç§¯å¦‚ä¸‹å›¾</p>
<p><img src="https://static.vue-js.com/6bd2aff0-6097-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>ä¸ºç»„ä»¶è®¾ç½®å…¶ä»–å±æ€§ï¼ˆ<code>compted</code>ã€<code>watch</code>ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">question</span>:<span class="string">&quot;&quot;</span>, </span><br><span class="line">        <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="attr">double</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">count</span> * <span class="number">2</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="attr">question</span>: <span class="keyword">function</span> (<span class="params">newQuestion, oldQuestion</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">answer</span> = <span class="string">&#x27;xxxx&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å†ä¸€æ¬¡æ‰“åŒ…ï¼Œå‘ç°æ‰“åŒ…å‡ºæ¥çš„ä½“ç§¯å¹¶æ²¡æœ‰å˜åŒ–</p>
<p><img src="https://static.vue-js.com/7c29e260-6097-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h3 id="Vue3-é¡¹ç›®"><a href="#Vue3-é¡¹ç›®" class="headerlink" title="Vue3 é¡¹ç›®"></a>Vue3 é¡¹ç›®</h3><p>ç»„ä»¶ä¸­ç®€å•ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, defineComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      state,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å°†é¡¹ç›®è¿›è¡Œæ‰“åŒ…</p>
<p><img src="https://static.vue-js.com/95df0000-6097-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>åœ¨ç»„ä»¶ä¸­å¼•å…¥<code>computed</code>å’Œ<code>watch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, defineComponent, computed, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> double = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">count</span> * <span class="number">2</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">watch</span>(</span><br><span class="line">      <span class="function">() =&gt;</span> state.<span class="property">count</span>,</span><br><span class="line">      <span class="function">(<span class="params">count, preCount</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(preCount);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      state,</span><br><span class="line">      double,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡å¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°åœ¨å¼•å…¥<code>computer</code>å’Œ<code>watch</code>ä¹‹åï¼Œé¡¹ç›®æ•´ä½“ä½“ç§¯å˜å¤§äº†</p>
<p><img src="https://static.vue-js.com/b36a7a00-6097-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h2 id="ä¸‰ã€ä½œç”¨"><a href="#ä¸‰ã€ä½œç”¨" class="headerlink" title="ä¸‰ã€ä½œç”¨"></a>ä¸‰ã€ä½œç”¨</h2><p>é€šè¿‡<code>Tree shaking</code>ï¼Œ<code>Vue3</code>ç»™æˆ‘ä»¬å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>å‡å°‘ç¨‹åºä½“ç§¯ï¼ˆæ›´å°ï¼‰</li>
<li>å‡å°‘ç¨‹åºæ‰§è¡Œæ—¶é—´ï¼ˆæ›´å¿«ï¼‰</li>
<li>ä¾¿äºå°†æ¥å¯¹ç¨‹åºæ¶æ„è¿›è¡Œä¼˜åŒ–ï¼ˆæ›´å‹å¥½ï¼‰</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/09/29/Vue/vue3-Treeshaking/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3-Proxy API æ›¿ä»£ defineProperty API">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/09/26/Vue/vue3-Proxy%20API%20%E6%9B%BF%E4%BB%A3%20defineProperty%20API%20/">vue3-Proxy API æ›¿ä»£ defineProperty API</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-09-26
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€Object-defineProperty"><a href="#ä¸€ã€Object-defineProperty" class="headerlink" title="ä¸€ã€Object.defineProperty"></a>ä¸€ã€Object.defineProperty</h2><p>å®šä¹‰ï¼š<code>Object.defineProperty()</code> æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡</p>
<h5 id="ä¸ºä»€ä¹ˆèƒ½å®ç°å“åº”å¼"><a href="#ä¸ºä»€ä¹ˆèƒ½å®ç°å“åº”å¼" class="headerlink" title="#ä¸ºä»€ä¹ˆèƒ½å®ç°å“åº”å¼"></a><a target="_blank" rel="noopener" href="https://vue3js.cn/interview/vue3/proxy.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%83%BD%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F">#</a>ä¸ºä»€ä¹ˆèƒ½å®ç°å“åº”å¼</h5><p>é€šè¿‡<code>defineProperty</code> ä¸¤ä¸ªå±æ€§ï¼Œ<code>get</code>åŠ<code>set</code></p>
<ul>
<li>get</li>
</ul>
<p>å±æ€§çš„ getter å‡½æ•°ï¼Œå½“è®¿é—®è¯¥å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚æ‰§è¡Œæ—¶ä¸ä¼ å…¥ä»»ä½•å‚æ•°ï¼Œä½†æ˜¯ä¼šä¼ å…¥ this å¯¹è±¡ï¼ˆç”±äºç»§æ‰¿å…³ç³»ï¼Œè¿™é‡Œçš„thiså¹¶ä¸ä¸€å®šæ˜¯å®šä¹‰è¯¥å±æ€§çš„å¯¹è±¡ï¼‰ã€‚è¯¥å‡½æ•°çš„è¿”å›å€¼ä¼šè¢«ç”¨ä½œå±æ€§çš„å€¼</p>
<ul>
<li>set</li>
</ul>
<p>å±æ€§çš„ setter å‡½æ•°ï¼Œå½“å±æ€§å€¼è¢«ä¿®æ”¹æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆä¹Ÿå°±æ˜¯è¢«èµ‹äºˆçš„æ–°å€¼ï¼‰ï¼Œä¼šä¼ å…¥èµ‹å€¼æ—¶çš„ this å¯¹è±¡ã€‚é»˜è®¤ä¸º undefined</p>
<p>ä¸‹é¢é€šè¿‡ä»£ç å±•ç¤ºï¼š</p>
<p>å®šä¹‰ä¸€ä¸ªå“åº”å¼å‡½æ•°<code>defineReactive</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line">    app.<span class="property">innerText</span> = obj.<span class="property">foo</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">defineReactive</span>(<span class="params">obj, key, val</span>) &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`get <span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;val&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">return</span> val</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (newVal !== val) &#123;</span><br><span class="line">                val = newVal</span><br><span class="line">                <span class="title function_">update</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨<code>defineReactive</code>ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–è§¦å‘<code>update</code>æ–¹æ³•ï¼Œå®ç°æ•°æ®å“åº”å¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="title function_">defineReactive</span>(obj, <span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    obj.<span class="property">foo</span> = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleTimeString</span>()</span><br><span class="line">&#125;,<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p>åœ¨å¯¹è±¡å­˜åœ¨å¤šä¸ª<code>key</code>æƒ…å†µä¸‹ï¼Œéœ€è¦è¿›è¡Œéå†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">observe</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">defineReactive</span>(obj, key, obj[key])</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå­˜åœ¨åµŒå¥—å¯¹è±¡çš„æƒ…å†µï¼Œè¿˜éœ€è¦åœ¨<code>defineReactive</code>ä¸­è¿›è¡Œé€’å½’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">defineReactive</span>(<span class="params">obj, key, val</span>) &#123;</span><br><span class="line">    <span class="title function_">observe</span>(val)</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`get <span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;val&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">return</span> val</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (newVal !== val) &#123;</span><br><span class="line">                val = newVal</span><br><span class="line">                <span class="title function_">update</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç»™<code>key</code>èµ‹å€¼ä¸ºå¯¹è±¡çš„æ—¶å€™ï¼Œè¿˜éœ€è¦åœ¨<code>set</code>å±æ€§ä¸­è¿›è¡Œé€’å½’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (newVal !== val) &#123;</span><br><span class="line">        <span class="title function_">observe</span>(newVal) <span class="comment">// æ–°å€¼æ˜¯å¯¹è±¡çš„æƒ…å†µ</span></span><br><span class="line">        <span class="title function_">notifyUpdate</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä¾‹å­èƒ½å¤Ÿå®ç°å¯¹ä¸€ä¸ªå¯¹è±¡çš„åŸºæœ¬å“åº”å¼ï¼Œä½†ä»ç„¶å­˜åœ¨è¯¸å¤šé—®é¢˜</p>
<p>ç°åœ¨å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆ é™¤ä¸æ·»åŠ å±æ€§æ“ä½œï¼Œæ— æ³•åŠ«æŒåˆ°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="string">&quot;bar&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">observe</span>(obj)</span><br><span class="line"><span class="keyword">delete</span> obj.<span class="property">foo</span> <span class="comment">// no ok</span></span><br><span class="line">obj.<span class="property">jar</span> = <span class="string">&#x27;xxx&#x27;</span> <span class="comment">// no ok</span></span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œç›‘å¬çš„æ—¶å€™ï¼Œå¹¶ä¸é‚£ä¹ˆå¥½ä½¿äº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrData = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line">arrData.<span class="title function_">forEach</span>(<span class="function">(<span class="params">val,index</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">defineProperty</span>(arrData,index,val)</span><br><span class="line">&#125;)</span><br><span class="line">arrData.<span class="title function_">push</span>() <span class="comment">// no ok</span></span><br><span class="line">arrData.<span class="title function_">pop</span>()  <span class="comment">// no ok</span></span><br><span class="line">arrDate[<span class="number">0</span>] = <span class="number">99</span> <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æ•°æ®çš„<code>api</code>æ— æ³•åŠ«æŒåˆ°ï¼Œä»è€Œæ— æ³•å®ç°æ•°æ®å“åº”å¼ï¼Œ</p>
<p>æ‰€ä»¥åœ¨<code>Vue2</code>ä¸­ï¼Œå¢åŠ äº†<code>set</code>ã€<code>delete</code> APIï¼Œå¹¶ä¸”å¯¹æ•°ç»„<code>api</code>æ–¹æ³•è¿›è¡Œä¸€ä¸ªé‡å†™</p>
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜åˆ™æ˜¯ï¼Œå¦‚æœå­˜åœ¨æ·±å±‚çš„åµŒå¥—å¯¹è±¡å…³ç³»ï¼Œéœ€è¦æ·±å±‚çš„è¿›è¡Œç›‘å¬ï¼Œé€ æˆäº†æ€§èƒ½çš„æå¤§é—®é¢˜</p>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul>
<li>æ£€æµ‹ä¸åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤</li>
<li>æ•°ç»„<code>API</code>æ–¹æ³•æ— æ³•ç›‘å¬åˆ°</li>
<li>éœ€è¦å¯¹æ¯ä¸ªå±æ€§è¿›è¡Œéå†ç›‘å¬ï¼Œå¦‚æœåµŒå¥—å¯¹è±¡ï¼Œéœ€è¦æ·±å±‚ç›‘å¬ï¼Œé€ æˆæ€§èƒ½é—®é¢˜</li>
</ul>
<h2 id="äºŒã€proxy"><a href="#äºŒã€proxy" class="headerlink" title="äºŒã€proxy"></a>äºŒã€proxy</h2><p><code>Proxy</code>çš„ç›‘å¬æ˜¯é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡çš„ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰æ“ä½œä¼šè¿›å…¥ç›‘å¬æ“ä½œï¼Œè¿™å°±å®Œå…¨å¯ä»¥ä»£ç†æ‰€æœ‰å±æ€§äº†</p>
<p>åœ¨<code>ES6</code>ç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†è®²è§£è¿‡<code>Proxy</code>çš„ä½¿ç”¨ï¼Œå°±ä¸å†è¿°è¯´äº†</p>
<p>ä¸‹é¢é€šè¿‡ä»£ç è¿›è¡Œå±•ç¤ºï¼š</p>
<p>å®šä¹‰ä¸€ä¸ªå“åº”å¼æ–¹æ³•<code>reactive</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Proxyç›¸å½“äºåœ¨å¯¹è±¡å¤–å±‚åŠ æ‹¦æˆª</span></span><br><span class="line">    <span class="keyword">const</span> observed = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">target, key, value, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¾ç½®<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">deleteProperty</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, key)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åˆ é™¤<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> observed</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹ç®€å•æ•°æ®çš„æ“ä½œï¼Œå‘ç°éƒ½èƒ½åŠ«æŒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 1.è·å–</span></span><br><span class="line">state.<span class="property">foo</span> <span class="comment">// ok</span></span><br><span class="line"><span class="comment">// 2.è®¾ç½®å·²å­˜åœ¨å±æ€§</span></span><br><span class="line">state.<span class="property">foo</span> = <span class="string">&#x27;fooooooo&#x27;</span> <span class="comment">// ok</span></span><br><span class="line"><span class="comment">// 3.è®¾ç½®ä¸å­˜åœ¨å±æ€§</span></span><br><span class="line">state.<span class="property">dong</span> = <span class="string">&#x27;dong&#x27;</span> <span class="comment">// ok</span></span><br><span class="line"><span class="comment">// 4.åˆ é™¤å±æ€§</span></span><br><span class="line"><span class="keyword">delete</span> state.<span class="property">dong</span> <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<p>å†æµ‹è¯•åµŒå¥—å¯¹è±¡æƒ…å†µï¼Œè¿™æ—¶å€™å‘ç°å°±ä¸é‚£ä¹ˆ OK äº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">bar</span>: &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®åµŒå¥—å¯¹è±¡å±æ€§</span></span><br><span class="line">state.<span class="property">bar</span>.<span class="property">a</span> = <span class="number">10</span> <span class="comment">// no ok</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦è§£å†³ï¼Œéœ€è¦åœ¨<code>get</code>ä¹‹ä¸Šå†è¿›è¡Œä¸€å±‚ä»£ç†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Proxyç›¸å½“äºåœ¨å¯¹è±¡å¤–å±‚åŠ æ‹¦æˆª</span></span><br><span class="line">    <span class="keyword">const</span> observed = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">isObject</span>(res) ? <span class="title function_">reactive</span>(res) : res</span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="keyword">return</span> observed</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p><code>Object.defineProperty</code>åªèƒ½éå†å¯¹è±¡å±æ€§è¿›è¡ŒåŠ«æŒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">observe</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">defineReactive</span>(obj, key, obj[key])</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Proxy</code>ç›´æ¥å¯ä»¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åªæ“ä½œæ–°çš„å¯¹è±¡è¾¾åˆ°å“åº”å¼ç›®çš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Proxyç›¸å½“äºåœ¨å¯¹è±¡å¤–å±‚åŠ æ‹¦æˆª</span></span><br><span class="line">    <span class="keyword">const</span> observed = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">target, key, value, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¾ç½®<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">deleteProperty</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, key)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åˆ é™¤<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> observed</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Proxy</code>å¯ä»¥ç›´æ¥ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼ˆ<code>push</code>ã€<code>shift</code>ã€<code>splice</code>ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> proxtObj = <span class="title function_">reactive</span>(obj)</span><br><span class="line">obj.<span class="title function_">psuh</span>(<span class="number">4</span>) <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<p><code>Proxy</code>æœ‰å¤šè¾¾13ç§æ‹¦æˆªæ–¹æ³•,ä¸é™äº<code>apply</code>ã€<code>ownKeys</code>ã€<code>deleteProperty</code>ã€<code>has</code>ç­‰ç­‰ï¼Œè¿™æ˜¯<code>Object.defineProperty</code>ä¸å…·å¤‡çš„</p>
<p>æ­£å› ä¸º<code>defineProperty</code>è‡ªèº«çš„ç¼ºé™·ï¼Œå¯¼è‡´<code>Vue2</code>åœ¨å®ç°å“åº”å¼è¿‡ç¨‹éœ€è¦å®ç°å…¶ä»–çš„æ–¹æ³•è¾…åŠ©ï¼ˆå¦‚é‡å†™æ•°ç»„æ–¹æ³•ã€å¢åŠ é¢å¤–<code>set</code>ã€<code>delete</code>æ–¹æ³•ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„é‡å†™</span></span><br><span class="line"><span class="keyword">const</span> originalProto = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line"><span class="keyword">const</span> arrayProto = <span class="title class_">Object</span>.<span class="title function_">create</span>(originalProto)</span><br><span class="line">[<span class="string">&#x27;push&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;shift&#x27;</span>, <span class="string">&#x27;unshift&#x27;</span>, <span class="string">&#x27;splice&#x27;</span>, <span class="string">&#x27;reverse&#x27;</span>, <span class="string">&#x27;sort&#x27;</span>].<span class="title function_">forEach</span>(<span class="function"><span class="params">method</span> =&gt;</span> &#123;</span><br><span class="line">  arrayProto[method] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    originalProto[method].<span class="title function_">apply</span>(<span class="variable language_">this</span>.<span class="property">arguments</span>)</span><br><span class="line">    dep.<span class="title function_">notice</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// setã€delete</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(obj,<span class="string">&#x27;bar&#x27;</span>,<span class="string">&#x27;newbar&#x27;</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">delete</span>(obj),<span class="string">&#x27;bar&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><code>Proxy</code> ä¸å…¼å®¹IEï¼Œä¹Ÿæ²¡æœ‰ <code>polyfill</code>, <code>defineProperty</code> èƒ½æ”¯æŒåˆ°IE9</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/09/26/Vue/vue3-Proxy%20API%20%E6%9B%BF%E4%BB%A3%20defineProperty%20API%20/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3-Composition APIè¯¦è§£">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/09/14/Vue/vue3-Composition%20API%E8%AF%A6%E8%A7%A3/">vue3-Composition APIè¯¦è§£</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-09-14
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <p><code>Composition API</code>ä¹Ÿå«ç»„åˆå¼APIï¼Œæ˜¯Vue3.xçš„æ–°ç‰¹æ€§ã€‚</p>
<blockquote>
<p>é€šè¿‡åˆ›å»º Vue ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¥å£çš„å¯é‡å¤éƒ¨åˆ†åŠå…¶åŠŸèƒ½æå–åˆ°å¯é‡ç”¨çš„ä»£ç æ®µä¸­ã€‚ä»…æ­¤ä¸€é¡¹å°±å¯ä»¥ä½¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåœ¨å¯ç»´æŠ¤æ€§å’Œçµæ´»æ€§æ–¹é¢èµ°å¾—æ›´è¿œã€‚ç„¶è€Œï¼Œæˆ‘ä»¬çš„ç»éªŒå·²ç»è¯æ˜ï¼Œå…‰é è¿™ä¸€ç‚¹å¯èƒ½æ˜¯ä¸å¤Ÿçš„ï¼Œå°¤å…¶æ˜¯å½“ä½ çš„åº”ç”¨ç¨‹åºå˜å¾—éå¸¸å¤§çš„æ—¶å€™â€”â€”æƒ³æƒ³å‡ ç™¾ä¸ªç»„ä»¶ã€‚åœ¨å¤„ç†å¦‚æ­¤å¤§çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œå…±äº«å’Œé‡ç”¨ä»£ç å˜å¾—å°¤ä¸ºé‡è¦</p>
</blockquote>
<p><strong>é€šä¿—çš„è®²ï¼š</strong></p>
<p>æ²¡æœ‰<code>Composition API</code>ä¹‹å‰vueç›¸å…³ä¸šåŠ¡çš„ä»£ç éœ€è¦é…ç½®åˆ°optionçš„ç‰¹å®šçš„åŒºåŸŸï¼Œä¸­å°å‹é¡¹ç›®æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ä¼šå¯¼è‡´åæœŸçš„ç»´æŠ¤æ€§æ¯”è¾ƒå¤æ‚ï¼ŒåŒæ—¶ä»£ç å¯å¤ç”¨æ€§ä¸é«˜ã€‚Vue3.xä¸­çš„composition-apiå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„</p>
<p><strong>compositon apiæä¾›äº†ä»¥ä¸‹å‡ ä¸ªå‡½æ•°ï¼š</strong></p>
<ul>
<li><code>setup</code></li>
<li><code>ref</code></li>
<li><code>reactive</code></li>
<li><code>watchEffect</code></li>
<li><code>watch</code></li>
<li><code>computed</code></li>
<li><code>toRefs</code></li>
<li>ç”Ÿå‘½å‘¨æœŸçš„<code>hooks</code></li>
</ul>
<h2 id="ä¸€ã€setupç»„ä»¶é€‰é¡¹"><a href="#ä¸€ã€setupç»„ä»¶é€‰é¡¹" class="headerlink" title="ä¸€ã€setupç»„ä»¶é€‰é¡¹"></a>ä¸€ã€setupç»„ä»¶é€‰é¡¹</h2><blockquote>
<p>æ–°çš„ <code>setup</code> ç»„ä»¶é€‰é¡¹åœ¨<strong>åˆ›å»ºç»„ä»¶ä¹‹å‰</strong>æ‰§è¡Œï¼Œä¸€æ—¦ <code>props</code> è¢«è§£æï¼Œå¹¶å……å½“åˆæˆ <code>API</code> çš„å…¥å£ç‚¹</p>
</blockquote>
<p><strong>æç¤ºï¼š</strong></p>
<blockquote>
<p>ç”±äºåœ¨æ‰§è¡Œ <code>setup</code> æ—¶å°šæœªåˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œå› æ­¤åœ¨ <code>setup</code> é€‰é¡¹ä¸­æ²¡æœ‰ <code>this</code>ã€‚è¿™æ„å‘³ç€ï¼Œé™¤äº†<code>props</code>ä¹‹å¤–ï¼Œä½ å°†æ— æ³•è®¿é—®ç»„ä»¶ä¸­å£°æ˜çš„ä»»ä½•å±æ€§â€”â€”æœ¬åœ°çŠ¶æ€ã€è®¡ç®—å±æ€§æˆ–æ–¹æ³•ã€‚</p>
</blockquote>
<p>ä½¿ç”¨ <code>setup</code> å‡½æ•°æ—¶ï¼Œå®ƒå°†æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ol>
<li><code>props</code></li>
<li><code>context</code></li>
</ol>
<p>è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°ç ”ç©¶å¦‚ä½•ä½¿ç”¨æ¯ä¸ªå‚æ•°</p>
<h3 id="1-Props"><a href="#1-Props" class="headerlink" title="1. Props"></a>1. Props</h3><blockquote>
<p><code>setup</code> å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>props</code>ã€‚æ­£å¦‚åœ¨ä¸€ä¸ªæ ‡å‡†ç»„ä»¶ä¸­æ‰€æœŸæœ›çš„é‚£æ ·ï¼Œ<code>setup</code> å‡½æ•°ä¸­çš„ <code>props</code> æ˜¯å“åº”å¼çš„ï¼Œå½“ä¼ å…¥æ–°çš„ <code>prop</code> æ—¶ï¼Œå®ƒå°†è¢«æ›´æ–°</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// MyBook.vue</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    title: String</span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    console.log(props.title)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<blockquote>
<p>ä½†æ˜¯ï¼Œå› ä¸º <code>props</code> æ˜¯å“åº”å¼çš„ï¼Œä½ ä¸èƒ½ä½¿ç”¨ <code>ES6</code> è§£æ„ï¼Œå› ä¸ºå®ƒä¼šæ¶ˆé™¤ <code>prop</code> çš„å“åº”æ€§ã€‚</p>
</blockquote>
<p>å¦‚æœéœ€è¦è§£æ„ propï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ <code>setup</code> å‡½æ•°ä¸­çš„ <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/reactivity-fundamentals.html#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%8A%B6%E6%80%81%E8%A7%A3%E6%9E%84"><code>toRefs</code></a> æ¥å®‰å…¨åœ°å®Œæˆæ­¤æ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// MyBook.vue</span><br><span class="line"></span><br><span class="line">import &#123; toRefs &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">setup(props) &#123;</span><br><span class="line">	const &#123; title &#125; = toRefs(props)</span><br><span class="line"></span><br><span class="line">	console.log(title.value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-ä¸Šä¸‹æ–‡"><a href="#2-ä¸Šä¸‹æ–‡" class="headerlink" title="2. ä¸Šä¸‹æ–‡"></a>2. ä¸Šä¸‹æ–‡</h3><blockquote>
<p>ä¼ é€’ç»™ <code>setup</code> å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>context</code>ã€‚<code>context</code> æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œå®ƒæš´éœ²ä¸‰ä¸ªç»„ä»¶çš„ property</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// MyBook.vue</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup(props, context) &#123;</span><br><span class="line">    // Attribute (éå“åº”å¼å¯¹è±¡)</span><br><span class="line">    console.log(context.attrs)</span><br><span class="line"></span><br><span class="line">    // æ’æ§½ (éå“åº”å¼å¯¹è±¡)</span><br><span class="line">    console.log(context.slots)</span><br><span class="line"></span><br><span class="line">    // è§¦å‘äº‹ä»¶ (æ–¹æ³•)</span><br><span class="line">    console.log(context.emit)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>context</code> æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸æ˜¯å“åº”å¼çš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å®‰å…¨åœ°å¯¹ <code>context</code> ä½¿ç”¨ ES6 è§£æ„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// MyBook.vue</span><br><span class="line">export default &#123;</span><br><span class="line">  setup(props, &#123; attrs, slots, emit &#125;) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>attrs</code> å’Œ <code>slots</code> æ˜¯æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œå®ƒä»¬æ€»æ˜¯ä¼šéšç»„ä»¶æœ¬èº«çš„æ›´æ–°è€Œæ›´æ–°ã€‚è¿™æ„å‘³ç€ä½ åº”è¯¥é¿å…å¯¹å®ƒä»¬è¿›è¡Œè§£æ„ï¼Œå¹¶å§‹ç»ˆä»¥ <code>attrs.x</code> æˆ– <code>slots.x</code> çš„æ–¹å¼å¼•ç”¨ propertyã€‚è¯·æ³¨æ„ï¼Œä¸ <code>props</code> ä¸åŒï¼Œ<code>attrs</code> å’Œ <code>slots</code> æ˜¯<strong>é</strong>å“åº”å¼çš„ã€‚å¦‚æœä½ æ‰“ç®—æ ¹æ® <code>attrs</code> æˆ– <code>slots</code> æ›´æ”¹åº”ç”¨å‰¯ä½œç”¨ï¼Œé‚£ä¹ˆåº”è¯¥åœ¨ <code>onUpdated</code>ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚</p>
</blockquote>
<h3 id="3-setupç»„ä»¶çš„-property"><a href="#3-setupç»„ä»¶çš„-property" class="headerlink" title="3. setupç»„ä»¶çš„ property"></a>3. setupç»„ä»¶çš„ property</h3><blockquote>
<p>æ‰§è¡Œ <code>setup</code> æ—¶ï¼Œç»„ä»¶å®ä¾‹å°šæœªè¢«åˆ›å»ºã€‚å› æ­¤ï¼Œä½ åªèƒ½è®¿é—®ä»¥ä¸‹ propertyï¼š</p>
</blockquote>
<ul>
<li><code>props</code></li>
<li><code>attrs</code></li>
<li><code>slots</code></li>
<li><code>emit</code></li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œä½ <strong>å°†æ— æ³•è®¿é—®</strong>ä»¥ä¸‹ç»„ä»¶é€‰é¡¹ï¼š</p>
<ul>
<li><code>data</code></li>
<li><code>computed</code></li>
<li><code>methods</code></li>
</ul>
<h3 id="4-ref-reactive-ä»¥åŠsetupç»“åˆæ¨¡æ¿ä½¿ç”¨"><a href="#4-ref-reactive-ä»¥åŠsetupç»“åˆæ¨¡æ¿ä½¿ç”¨" class="headerlink" title="4. ref reactive ä»¥åŠsetupç»“åˆæ¨¡æ¿ä½¿ç”¨"></a>4. ref reactive ä»¥åŠsetupç»“åˆæ¨¡æ¿ä½¿ç”¨</h3><p>åœ¨çœ‹<code>setup</code>ç»“åˆæ¨¡æ¿ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—çŸ¥é“<code>ref</code> å’Œ <code>reactive</code> æ–¹æ³•ã€‚</p>
<p>å¦‚æœ <code>setup</code> è¿”å›ä¸€ä¸ªå¯¹è±¡åˆ™å¯ä»¥åœ¨æ¨¡æ¿ä¸­ç»‘å®šå¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯è¦å®šä¹‰å“åº”å¼æ•°æ®çš„æ—¶å€™å¯ä»¥ä½¿ç”¨<code>ref</code>, <code>reactive</code>æ–¹æ³•å®šä¹‰å“åº”å¼çš„æ•°æ®</p>
<h5 id="é”™è¯¯å†™æ³•ï¼š"><a href="#é”™è¯¯å†™æ³•ï¼š" class="headerlink" title="é”™è¯¯å†™æ³•ï¼š"></a><strong>é”™è¯¯å†™æ³•ï¼š</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&#123;&#123;msg&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;button @click=&quot;updateMsg&quot;&gt;æ”¹å˜etupä¸­çš„msg&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let msg = &quot;è¿™æ˜¯setupä¸­çš„msg&quot;;</span><br><span class="line">        let updateMsg = () =&gt; &#123;</span><br><span class="line">            alert(&quot;è§¦å‘æ–¹æ³•&quot;)</span><br><span class="line">            msg = &quot;æ”¹å˜åçš„å€¼&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg,</span><br><span class="line">            updateMsg</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.home &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="æ­£ç¡®å†™æ³•ä¸€ï¼š"><a href="#æ­£ç¡®å†™æ³•ä¸€ï¼š" class="headerlink" title="æ­£ç¡®å†™æ³•ä¸€ï¼š"></a><strong>æ­£ç¡®å†™æ³•ä¸€ï¼š</strong></h5><blockquote>
<p><strong>ref</strong>ç”¨æ¥å®šä¹‰å“åº”å¼çš„ å­—ç¬¦ä¸²ã€ æ•°å€¼ã€ æ•°ç»„ã€<code>Bool</code>ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import &#123;  </span><br><span class="line">    ref</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&#123;&#123;msg&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;button @click=&quot;updateMsg&quot;&gt;æ”¹å˜etupä¸­çš„msg&lt;/button&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">        &#123;&#123;item&#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line"></span><br><span class="line">    ref</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let msg = ref(&quot;è¿™æ˜¯setupä¸­çš„msg&quot;);</span><br><span class="line"></span><br><span class="line">        let list = ref([&quot;é©¬æ€»&quot;, &quot;ææ€»&quot;, &quot;åˆ˜æ€»&quot;])</span><br><span class="line"></span><br><span class="line">        let updateMsg = () =&gt; &#123;</span><br><span class="line">            alert(&quot;è§¦å‘æ–¹æ³•&quot;);</span><br><span class="line">            msg.value = &quot;æ”¹å˜åçš„å€¼&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg,</span><br><span class="line">            list,</span><br><span class="line">            updateMsg</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.home &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="æ­£ç¡®å†™æ³•äºŒï¼š"><a href="#æ­£ç¡®å†™æ³•äºŒï¼š" class="headerlink" title="æ­£ç¡®å†™æ³•äºŒï¼š"></a><strong>æ­£ç¡®å†™æ³•äºŒï¼š</strong></h5><p><strong>reactive</strong> ç”¨æ¥å®šä¹‰å“åº”å¼çš„å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">    reactive   </span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&#123;&#123;msg&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;button @click=&quot;updateMsg&quot;&gt;æ”¹å˜setupä¸­çš„msg&lt;/button&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">        &#123;&#123;item&#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&#123;&#123;setupData.title&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;button @click=&quot;updateTitle&quot;&gt;æ›´æ–°setupä¸­çš„title&lt;/button&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    ref</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let msg = ref(&quot;è¿™æ˜¯setupä¸­çš„msg&quot;);</span><br><span class="line"></span><br><span class="line">        let setupData = reactive(&#123;</span><br><span class="line">            title: &quot;reactiveå®šä¹‰å“åº”å¼æ•°æ®çš„title&quot;,</span><br><span class="line">            userinfo: &#123;</span><br><span class="line">                username: &quot;å¼ ä¸‰&quot;,</span><br><span class="line">                age: 20</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        let updateMsg = () =&gt; &#123;</span><br><span class="line">            alert(&quot;è§¦å‘æ–¹æ³•&quot;);</span><br><span class="line">            msg.value = &quot;æ”¹å˜åçš„å€¼&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        let updateTitle = () =&gt; &#123;</span><br><span class="line">            alert(&quot;è§¦å‘æ–¹æ³•&quot;);</span><br><span class="line">            setupData.title = &quot;æˆ‘æ˜¯æ”¹å˜åçš„title&quot;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg,</span><br><span class="line">            setupData,</span><br><span class="line">            updateMsg,</span><br><span class="line">            updateTitle</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.home &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>**è¯´æ˜:**è¦æ”¹å˜refå®šä¹‰çš„å±æ€§åç§°éœ€è¦é€šè¿‡ <code>å±æ€§åç§°.value</code>æ¥ä¿®æ”¹ï¼Œè¦æ”¹å˜<code>reactive</code>ä¸­å®šä¹‰çš„å¯¹è±¡åç§°å¯ä»¥ç›´æ¥</p>
<h3 id="5-ä½¿ç”¨-this"><a href="#5-ä½¿ç”¨-this" class="headerlink" title="5. ä½¿ç”¨ this"></a>5. ä½¿ç”¨ <code>this</code></h3><blockquote>
<p><strong>åœ¨ <code>setup()</code> å†…éƒ¨ï¼Œ<code>this</code> ä¸ä¼šæ˜¯è¯¥æ´»è·ƒå®ä¾‹çš„å¼•ç”¨</strong>ï¼Œå› ä¸º <code>setup()</code> æ˜¯åœ¨è§£æå…¶å®ƒç»„ä»¶é€‰é¡¹ä¹‹å‰è¢«è°ƒç”¨çš„ï¼Œæ‰€ä»¥ <code>setup()</code> å†…éƒ¨çš„ <code>this</code> çš„è¡Œä¸ºä¸å…¶å®ƒé€‰é¡¹ä¸­çš„ <code>this</code> å®Œå…¨ä¸åŒã€‚è¿™åœ¨å’Œå…¶å®ƒé€‰é¡¹å¼ API ä¸€èµ·ä½¿ç”¨ <code>setup()</code> æ—¶å¯èƒ½ä¼šå¯¼è‡´æ··æ·†</p>
</blockquote>
<h2 id="äºŒã€toRefs-è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®"><a href="#äºŒã€toRefs-è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®" class="headerlink" title="äºŒã€toRefs - è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®"></a>äºŒã€toRefs - è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®</h2><blockquote>
<p>æŠŠä¸€ä¸ªå“åº”å¼å¯¹è±¡è½¬æ¢æˆæ™®é€šå¯¹è±¡ï¼Œè¯¥æ™®é€šå¯¹è±¡çš„æ¯ä¸ª <code>property</code> éƒ½æ˜¯ä¸€ä¸ª <code>ref</code> ï¼Œå’Œå“åº”å¼å¯¹è±¡ <code>property</code> ä¸€ä¸€å¯¹åº”</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Username: &#123;&#123;username&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Age: &#123;&#123;age&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    toRefs</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const user = reactive(&#123;</span><br><span class="line">            username: &quot;å¼ ä¸‰&quot;,</span><br><span class="line">            age: 10000,</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            ...toRefs(user)</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å½“æƒ³è¦ä»ä¸€ä¸ªç»„åˆé€»è¾‘å‡½æ•°ä¸­è¿”å›å“åº”å¼å¯¹è±¡æ—¶ï¼Œç”¨ toRefs æ˜¯å¾ˆæœ‰æ•ˆçš„ï¼Œè¯¥ API è®©æ¶ˆè´¹ç»„ä»¶å¯ä»¥ è§£æ„ &#x2F; æ‰©å±•ï¼ˆä½¿ç”¨ <code>â€¦</code>æ“ä½œç¬¦ï¼‰è¿”å›çš„å¯¹è±¡ï¼Œå¹¶ä¸ä¼šä¸¢å¤±å“åº”æ€§ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">function useFeatureX() &#123;</span><br><span class="line">  const state = reactive(&#123;</span><br><span class="line">    foo: 1,</span><br><span class="line">    bar: 2,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // å¯¹ state çš„é€»è¾‘æ“ä½œ</span><br><span class="line">  // ....</span><br><span class="line"></span><br><span class="line">  // è¿”å›æ—¶å°†å±æ€§éƒ½è½¬ä¸º ref</span><br><span class="line">  return toRefs(state)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // å¯ä»¥è§£æ„ï¼Œä¸ä¼šä¸¢å¤±å“åº”æ€§</span><br><span class="line">    const &#123; foo, bar &#125; = useFeatureX()</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      foo,</span><br><span class="line">      bar,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€computed-è®¡ç®—å±æ€§"><a href="#ä¸‰ã€computed-è®¡ç®—å±æ€§" class="headerlink" title="ä¸‰ã€computed - è®¡ç®—å±æ€§"></a>ä¸‰ã€computed - è®¡ç®—å±æ€§</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®+computed&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;firstName&quot; placeholder=&quot;firstName&quot; /&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;lastName&quot; placeholder=&quot;lastName&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &#123;&#123;fullName&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    toRefs,</span><br><span class="line">    computed</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const user = reactive(&#123;</span><br><span class="line">            firstName: &quot;&quot;,</span><br><span class="line">            lastName: &quot;&quot;,</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        const fullName = computed(() =&gt; &#123;</span><br><span class="line">            return user.firstName + &quot; &quot; + user.lastName</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            ...toRefs(user),</span><br><span class="line">            fullName</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€readonly-â€œæ·±å±‚â€çš„åªè¯»ä»£ç†"><a href="#å››ã€readonly-â€œæ·±å±‚â€çš„åªè¯»ä»£ç†" class="headerlink" title="å››ã€readonly â€œæ·±å±‚â€çš„åªè¯»ä»£ç†"></a>å››ã€readonly â€œæ·±å±‚â€çš„åªè¯»ä»£ç†</h2><blockquote>
<p>ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ˆå“åº”å¼æˆ–æ™®é€šï¼‰æˆ– refï¼Œè¿”å›ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„åªè¯»ä»£ç†ã€‚ä¸€ä¸ªåªè¯»çš„ä»£ç†æ˜¯â€œæ·±å±‚çš„â€ï¼Œå¯¹è±¡å†…éƒ¨ä»»ä½•åµŒå¥—çš„å±æ€§ä¹Ÿéƒ½æ˜¯åªè¯»çš„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;readonly - â€œæ·±å±‚â€çš„åªè¯»ä»£ç†&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;original.count: &#123;&#123;original.count&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;copy.count: &#123;&#123;copy.count&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, readonly &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Readonly&quot;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const original = reactive(&#123; count: 0 &#125;);</span><br><span class="line">    const copy = readonly(original);</span><br><span class="line"></span><br><span class="line">    setInterval(() =&gt; &#123;</span><br><span class="line">      original.count++;</span><br><span class="line">      copy.count++; // æŠ¥è­¦å‘Šï¼ŒSet operation on key &quot;count&quot; failed: target is readonly. Proxy &#123;count: 1&#125;</span><br><span class="line">    &#125;, 1000);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return &#123; original, copy &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€watchEffect"><a href="#äº”ã€watchEffect" class="headerlink" title="äº”ã€watchEffect"></a>äº”ã€watchEffect</h2><blockquote>
<p>åœ¨å“åº”å¼åœ°è·Ÿè¸ªå…¶ä¾èµ–é¡¹æ—¶ç«‹å³è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨æ›´æ”¹ä¾èµ–é¡¹æ—¶é‡æ–°è¿è¡Œå®ƒã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;watchEffect - ä¾¦å¬å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123;data.count&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;stop&quot;&gt;æ‰‹åŠ¨å…³é—­ä¾¦å¬å™¨&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    watchEffect</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;WatchEffect&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const data = reactive(&#123;</span><br><span class="line">            count: 1,</span><br><span class="line">            num: 1</span><br><span class="line">        &#125;);</span><br><span class="line">        const stop = watchEffect(() =&gt; console.log(`ä¾¦å¬å™¨ï¼š$&#123;data.count&#125;`));</span><br><span class="line">        setInterval(() =&gt; &#123;</span><br><span class="line">            data.count++;</span><br><span class="line">        &#125;, 1000);</span><br><span class="line">        return &#123;</span><br><span class="line">            data,</span><br><span class="line">            stop</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€watch-ã€watch-ä¸watchEffectåŒºåˆ«"><a href="#å…­ã€watch-ã€watch-ä¸watchEffectåŒºåˆ«" class="headerlink" title="å…­ã€watch ã€watch ä¸watchEffectåŒºåˆ«"></a>å…­ã€watch ã€watch ä¸watchEffectåŒºåˆ«</h2><p>å¯¹æ¯”<code>watchEffect</code>ï¼Œ**<code>watch</code>å…è®¸æˆ‘ä»¬**ï¼š</p>
<ul>
<li>æ‡’æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ä»…åœ¨ä¾¦å¬çš„æºå˜æ›´æ—¶æ‰æ‰§è¡Œå›è°ƒï¼›</li>
<li>æ›´æ˜ç¡®å“ªäº›çŠ¶æ€çš„æ”¹å˜ä¼šè§¦å‘ä¾¦å¬å™¨é‡æ–°è¿è¡Œï¼›</li>
<li>è®¿é—®ä¾¦å¬çŠ¶æ€å˜åŒ–å‰åçš„å€¼</li>
</ul>
<p><strong>æ›´æ˜ç¡®å“ªäº›çŠ¶æ€çš„æ”¹å˜ä¼šè§¦å‘ä¾¦å¬å™¨é‡æ–°è¿è¡Œ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;watch - ä¾¦å¬å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;count1: &#123;&#123;data.count1&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;count2: &#123;&#123;data.count2&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;stopAll&quot;&gt;Stop All&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    watch</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;Watch&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const data = reactive(&#123;</span><br><span class="line">            count1: 0,</span><br><span class="line">            count2: 0</span><br><span class="line">        &#125;);</span><br><span class="line">        // ä¾¦å¬å•ä¸ªæ•°æ®æº</span><br><span class="line">        const stop1 = watch(data, () =&gt;</span><br><span class="line">            console.log(&quot;watch1&quot;, data.count1, data.count2)</span><br><span class="line">        );</span><br><span class="line">        // ä¾¦å¬å¤šä¸ªæ•°æ®æº</span><br><span class="line">        const stop2 = watch([data], () =&gt; &#123;</span><br><span class="line">            console.log(&quot;watch2&quot;, data.count1, data.count2);</span><br><span class="line">        &#125;);</span><br><span class="line">        setInterval(() =&gt; &#123;</span><br><span class="line">            data.count1++;</span><br><span class="line">        &#125;, 1000);</span><br><span class="line">        return &#123;</span><br><span class="line">            data,</span><br><span class="line">            stopAll: () =&gt; &#123;</span><br><span class="line">                stop1();</span><br><span class="line">                stop2();</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>è®¿é—®ä¾¦å¬çŠ¶æ€å˜åŒ–å‰åçš„å€¼</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;watch - ä¾¦å¬å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;keywords&quot; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    ref,</span><br><span class="line">    watch</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;Watch&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let keywords = ref(&quot;111&quot;);</span><br><span class="line">        // ä¾¦å¬å•ä¸ªæ•°æ®æº</span><br><span class="line">        watch(keywords, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">            console.log(newValue, oldValue)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            keywords</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>æ‡’æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ä»…åœ¨ä¾¦å¬çš„æºå˜æ›´æ—¶æ‰æ‰§è¡Œå›è°ƒ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;watch - ä¾¦å¬å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;num1=&#123;&#123;num1&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;num2=&#123;&#123;num2&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    ref,</span><br><span class="line">    watch,</span><br><span class="line">    watchEffect</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;Watch&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let num1 = ref(10);</span><br><span class="line">        let num2 = ref(10);</span><br><span class="line">        // ä¾¦å¬å•ä¸ªæ•°æ®æº</span><br><span class="line">        watch(num1, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">            console.log(newValue, oldValue)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        watchEffect(() =&gt; console.log(`watchEffectä¾¦å¬å™¨ï¼š$&#123;num2.value&#125;`));</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            num1,</span><br><span class="line">            num2</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€ç»„åˆå¼apiç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#ä¸ƒã€ç»„åˆå¼apiç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="ä¸ƒã€ç»„åˆå¼apiç”Ÿå‘½å‘¨æœŸé’©å­"></a>ä¸ƒã€ç»„åˆå¼apiç”Ÿå‘½å‘¨æœŸé’©å­</h2><p>ä½ å¯ä»¥é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­å‰é¢åŠ ä¸Š â€œonâ€ æ¥è®¿é—®ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</p>
<p>ä¸‹è¡¨åŒ…å«å¦‚ä½•åœ¨ <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-setup.html">setup ()</a> å†…éƒ¨è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š</p>
<table>
<thead>
<tr>
<th align="left">é€‰é¡¹å¼ API</th>
<th align="left">Hook inside <code>setup</code></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>beforeCreate</code></td>
<td align="left">ä¸éœ€è¦*</td>
</tr>
<tr>
<td align="left"><code>created</code></td>
<td align="left">ä¸éœ€è¦*</td>
</tr>
<tr>
<td align="left"><code>beforeMount</code></td>
<td align="left"><code>onBeforeMount</code></td>
</tr>
<tr>
<td align="left"><code>mounted</code></td>
<td align="left"><code>onMounted</code></td>
</tr>
<tr>
<td align="left"><code>beforeUpdate</code></td>
<td align="left"><code>onBeforeUpdate</code></td>
</tr>
<tr>
<td align="left"><code>updated</code></td>
<td align="left"><code>onUpdated</code></td>
</tr>
<tr>
<td align="left"><code>beforeUnmount</code></td>
<td align="left"><code>onBeforeUnmount</code></td>
</tr>
<tr>
<td align="left"><code>unmounted</code></td>
<td align="left"><code>onUnmounted</code></td>
</tr>
<tr>
<td align="left"><code>errorCaptured</code></td>
<td align="left"><code>onErrorCaptured</code></td>
</tr>
<tr>
<td align="left"><code>renderTracked</code></td>
<td align="left"><code>onRenderTracked</code></td>
</tr>
<tr>
<td align="left"><code>renderTriggered</code></td>
<td align="left"><code>onRenderTriggered</code></td>
</tr>
</tbody></table>
<blockquote>
<p>å› ä¸º <code>setup</code> æ˜¯å›´ç»• <code>beforeCreate</code> å’Œ <code>created</code> ç”Ÿå‘½å‘¨æœŸé’©å­è¿è¡Œçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼åœ°å®šä¹‰å®ƒä»¬ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨è¿™äº›é’©å­ä¸­ç¼–å†™çš„ä»»ä½•ä»£ç éƒ½åº”è¯¥ç›´æ¥åœ¨ <code>setup</code> å‡½æ•°ä¸­ç¼–å†™</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // mounted</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;Component is mounted!&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€Provider-Inject"><a href="#å…«ã€Provider-Inject" class="headerlink" title="å…«ã€Provider Inject"></a>å…«ã€Provider Inject</h2><p>é€šå¸¸ï¼Œå½“æˆ‘ä»¬éœ€è¦å°†æ•°æ®ä»çˆ¶ç»„ä»¶ä¼ é€’åˆ°å­ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/component-props.html">props</a>ã€‚æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„ç»“æ„ï¼šä½ æœ‰ä¸€äº›æ·±åµŒå¥—çš„ç»„ä»¶ï¼Œè€Œä½ åªéœ€è¦æ¥è‡ªæ·±åµŒå¥—å­ç»„ä»¶ä¸­çˆ¶ç»„ä»¶çš„æŸäº›å†…å®¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å°† prop ä¼ é€’åˆ°æ•´ä¸ªç»„ä»¶é“¾ä¸­ï¼Œè¿™å¯èƒ½ä¼šå¾ˆçƒ¦äºº</p>
<blockquote>
<p>å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>provide</code> å’Œ <code>inject</code> å¯¹çˆ¶ç»„ä»¶å¯ä»¥ä½œä¸ºå…¶æ‰€æœ‰å­ç»„ä»¶çš„ä¾èµ–é¡¹æä¾›ç¨‹åºï¼Œè€Œä¸ç®¡ç»„ä»¶å±‚æ¬¡ç»“æ„æœ‰å¤šæ·±ã€‚è¿™ä¸ªç‰¹æ€§æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª <code>provide</code> é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œå­ç»„ä»¶æœ‰ä¸€ä¸ª <code>inject</code> é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™ä¸ªæ•°æ®</p>
</blockquote>
<h3 id="1-éç»„åˆå¼apiä¸­çš„å†™æ³•"><a href="#1-éç»„åˆå¼apiä¸­çš„å†™æ³•" class="headerlink" title="1. éç»„åˆå¼apiä¸­çš„å†™æ³•"></a>1. <strong>éç»„åˆå¼apiä¸­çš„å†™æ³•</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- src/components/MyMap.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;MyMarker /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyMarker from &#x27;./MyMarker.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyMarker</span><br><span class="line">  &#125;,</span><br><span class="line">  provide: &#123;</span><br><span class="line">    location: &#x27;North Pole&#x27;,</span><br><span class="line">    geolocation: &#123;</span><br><span class="line">      longitude: 90,</span><br><span class="line">      latitude: 135</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- src/components/MyMarker.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  inject: [&#x27;location&#x27;, &#x27;geolocation&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-ç»„åˆå¼apiä¸­çš„å†™æ³•"><a href="#2-ç»„åˆå¼apiä¸­çš„å†™æ³•" class="headerlink" title="2. ç»„åˆå¼apiä¸­çš„å†™æ³•"></a>2. <strong>ç»„åˆå¼apiä¸­çš„å†™æ³•</strong></h3><h5 id="Providerï¼š"><a href="#Providerï¼š" class="headerlink" title="Providerï¼š"></a>Providerï¼š</h5><blockquote>
<p>åœ¨ <code>setup()</code> ä¸­ä½¿ç”¨ <code>provide</code> æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆä» <code>vue</code> æ˜¾å¼å¯¼å…¥ <code>provide</code> æ–¹æ³•ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿè°ƒç”¨ <code>provide</code> æ—¶æ¥å®šä¹‰æ¯ä¸ª <code>property</code></p>
</blockquote>
<p><code>provide</code> å‡½æ•°å…è®¸ä½ é€šè¿‡ä¸¤ä¸ªå‚æ•°å®šä¹‰ <code>property</code>ï¼š</p>
<ol>
<li><code>property</code> çš„ <code>name</code> (&#96;&#96; ç±»å‹)</li>
<li><code>property</code> çš„ <code>value</code></li>
</ol>
<p>ä½¿ç”¨ <code>MyMap</code> ç»„ä»¶ï¼Œæˆ‘ä»¬æä¾›çš„å€¼å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼é‡æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- src/components/MyMap.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;MyMarker /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; provide &#125; from &#x27;vue&#x27;</span><br><span class="line">import MyMarker from &#x27;./MyMarker.vue</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyMarker</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    provide(&#x27;location&#x27;, &#x27;North Pole&#x27;)</span><br><span class="line">    provide(&#x27;geolocation&#x27;, &#123;</span><br><span class="line">      longitude: 90,</span><br><span class="line">      latitude: 135</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="Inject"><a href="#Inject" class="headerlink" title="Inject:"></a>Inject:</h5><blockquote>
<p>åœ¨ <code>setup()</code> ä¸­ä½¿ç”¨ <code>inject</code> æ—¶ï¼Œè¿˜éœ€è¦ä» <code>vue</code> æ˜¾å¼å¯¼å…¥å®ƒã€‚ä¸€æ—¦æˆ‘ä»¬è¿™æ ·åšäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨å®ƒæ¥å®šä¹‰å¦‚ä½•å°†å®ƒæš´éœ²ç»™æˆ‘ä»¬çš„ç»„ä»¶ã€‚</p>
</blockquote>
<p><code>inject</code> å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>è¦æ³¨å…¥çš„ <code>property</code> çš„åç§°</li>
<li>ä¸€ä¸ªé»˜è®¤çš„å€¼ (<strong>å¯é€‰</strong>)</li>
</ol>
<p>ä½¿ç”¨ <code>MyMarker</code> ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç å¯¹å…¶è¿›è¡Œé‡æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- src/components/MyMarker.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const userLocation = inject(&#x27;location&#x27;, &#x27;The Universe&#x27;)</span><br><span class="line">    const userGeolocation = inject(&#x27;geolocation&#x27;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      userLocation,</span><br><span class="line">      userGeolocation</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>Provider Inject å“åº”æ€§</strong></p>
<p><strong>çˆ¶ç»„ä»¶ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">    provide,</span><br><span class="line">    ref,</span><br><span class="line">    reactive</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">setup() &#123;</span><br><span class="line">        const location = ref(&#x27;åŒ—äº¬&#x27;)</span><br><span class="line">        const geolocation = reactive(&#123;</span><br><span class="line">            longitude: 90,</span><br><span class="line">            latitude: 135</span><br><span class="line">        &#125;)</span><br><span class="line">        const updateLocation = () =&gt; &#123;</span><br><span class="line">            location.value = &#x27;ä¸Šæµ·&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">        provide(&#x27;location&#x27;, location);</span><br><span class="line">        provide(&#x27;geolocation&#x27;, geolocation);</span><br><span class="line">        return &#123;</span><br><span class="line">            updateLocation</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;button @click=&quot;updateLocation&quot;&gt;æ”¹å˜location&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p><strong>å­ç»„ä»¶ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const userLocation = inject(&#x27;location&#x27;, &#x27;The Universe&#x27;)</span><br><span class="line">    const userGeolocation = inject(&#x27;geolocation&#x27;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      userLocation,</span><br><span class="line">      userGeolocation</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/09/14/Vue/vue3-Composition%20API%E8%AF%A6%E8%A7%A3/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3-Composition Api ä¸  Options Api æœ‰ä»€ä¹ˆä¸åŒ">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/09/02/Vue/vue3-Composition%20Api%20%E4%B8%8E%20%20Options%20Api%20%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C/">vue3-Composition Api ä¸  Options Api æœ‰ä»€ä¹ˆä¸åŒ</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-09-02
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue3/" class="cube-excerpt-tag-link">#vue3</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="å¼€å§‹ä¹‹å‰"><a href="#å¼€å§‹ä¹‹å‰" class="headerlink" title="å¼€å§‹ä¹‹å‰"></a>å¼€å§‹ä¹‹å‰</h2><p><code>Composition API</code> å¯ä»¥è¯´æ˜¯<code>Vue3</code>çš„æœ€å¤§ç‰¹ç‚¹ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦æ¨å‡º<code>Composition Api</code>ï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<p>é€šå¸¸ä½¿ç”¨<code>Vue2</code>å¼€å‘çš„é¡¹ç›®ï¼Œæ™®éä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>ä»£ç çš„å¯è¯»æ€§éšç€ç»„ä»¶å˜å¤§è€Œå˜å·®</li>
<li>æ¯ä¸€ç§ä»£ç å¤ç”¨çš„æ–¹å¼ï¼Œéƒ½å­˜åœ¨ç¼ºç‚¹</li>
<li>TypeScriptæ”¯æŒæœ‰é™</li>
</ul>
<p>ä»¥ä¸Šé€šè¿‡ä½¿ç”¨<code>Composition Api</code>éƒ½èƒ½è¿åˆƒè€Œè§£</p>
<h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><h3 id="ä¸€ã€Options-Api"><a href="#ä¸€ã€Options-Api" class="headerlink" title="ä¸€ã€Options Api"></a>ä¸€ã€Options Api</h3><p><code>Options API</code>ï¼Œå³å¤§å®¶å¸¸è¯´çš„é€‰é¡¹APIï¼Œå³ä»¥<code>vue</code>ä¸ºåç¼€çš„æ–‡ä»¶ï¼Œé€šè¿‡å®šä¹‰<code>methods</code>ï¼Œ<code>computed</code>ï¼Œ<code>watch</code>ï¼Œ<code>data</code>ç­‰å±æ€§ä¸æ–¹æ³•ï¼Œå…±åŒå¤„ç†é¡µé¢é€»è¾‘</p>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://static.vue-js.com/9bf6d9d0-6048-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>å¯ä»¥çœ‹åˆ°<code>Options</code>ä»£ç ç¼–å†™æ–¹å¼ï¼Œå¦‚æœæ˜¯ç»„ä»¶çŠ¶æ€ï¼Œåˆ™å†™åœ¨<code>data</code>å±æ€§ä¸Šï¼Œå¦‚æœæ˜¯æ–¹æ³•ï¼Œåˆ™å†™åœ¨<code>methods</code>å±æ€§ä¸Šâ€¦</p>
<p>ç”¨ç»„ä»¶çš„é€‰é¡¹ (<code>data</code>ã€<code>computed</code>ã€<code>methods</code>ã€<code>watch</code>) ç»„ç»‡é€»è¾‘åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æœ‰æ•ˆ</p>
<p>ç„¶è€Œï¼Œå½“ç»„ä»¶å˜å¾—å¤æ‚ï¼Œå¯¼è‡´å¯¹åº”å±æ€§çš„åˆ—è¡¨ä¹Ÿä¼šå¢é•¿ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç»„ä»¶éš¾ä»¥é˜…è¯»å’Œç†è§£</p>
<h3 id="äºŒã€Composition-Api"><a href="#äºŒã€Composition-Api" class="headerlink" title="äºŒã€Composition Api"></a>äºŒã€Composition Api</h3><p>åœ¨ Vue3 Composition API ä¸­ï¼Œç»„ä»¶æ ¹æ®é€»è¾‘åŠŸèƒ½æ¥ç»„ç»‡çš„ï¼Œä¸€ä¸ªåŠŸèƒ½æ‰€å®šä¹‰çš„æ‰€æœ‰ API ä¼šæ”¾åœ¨ä¸€èµ·ï¼ˆæ›´åŠ çš„é«˜å†…èšï¼Œä½è€¦åˆï¼‰</p>
<p>å³ä½¿é¡¹ç›®å¾ˆå¤§ï¼ŒåŠŸèƒ½å¾ˆå¤šï¼Œæˆ‘ä»¬éƒ½èƒ½å¿«é€Ÿçš„å®šä½åˆ°è¿™ä¸ªåŠŸèƒ½æ‰€ç”¨åˆ°çš„æ‰€æœ‰ API</p>
<p><img src="https://static.vue-js.com/acee9200-6048-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h3 id="ä¸‰ã€å¯¹æ¯”"><a href="#ä¸‰ã€å¯¹æ¯”" class="headerlink" title="ä¸‰ã€å¯¹æ¯”"></a>ä¸‰ã€å¯¹æ¯”</h3><p>ä¸‹é¢å¯¹<code>Composition Api</code>ä¸<code>Options Api</code>è¿›è¡Œä¸¤å¤§æ–¹é¢çš„æ¯”è¾ƒ</p>
<ul>
<li>é€»è¾‘ç»„ç»‡</li>
<li>é€»è¾‘å¤ç”¨</li>
</ul>
<h4 id="é€»è¾‘ç»„ç»‡"><a href="#é€»è¾‘ç»„ç»‡" class="headerlink" title="é€»è¾‘ç»„ç»‡"></a>é€»è¾‘ç»„ç»‡</h4><h5 id="Options-API"><a href="#Options-API" class="headerlink" title="Options API"></a>Options API</h5><p>å‡è®¾ä¸€ä¸ªç»„ä»¶æ˜¯ä¸€ä¸ªå¤§å‹ç»„ä»¶ï¼Œå…¶å†…éƒ¨æœ‰å¾ˆå¤šå¤„ç†é€»è¾‘å…³æ³¨ç‚¹ï¼ˆå¯¹åº”ä¸‹å›¾ä¸ç”¨é¢œè‰²ï¼‰</p>
<p><img src="https://static.vue-js.com/dc83d070-6048-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§ç¢ç‰‡åŒ–ä½¿å¾—ç†è§£å’Œç»´æŠ¤å¤æ‚ç»„ä»¶å˜å¾—å›°éš¾</p>
<p>é€‰é¡¹çš„åˆ†ç¦»æ©ç›–äº†æ½œåœ¨çš„é€»è¾‘é—®é¢˜ã€‚æ­¤å¤–ï¼Œåœ¨å¤„ç†å•ä¸ªé€»è¾‘å…³æ³¨ç‚¹æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ä¸æ–­åœ°â€œè·³è½¬â€ç›¸å…³ä»£ç çš„é€‰é¡¹å—</p>
<h5 id="Compostion-API"><a href="#Compostion-API" class="headerlink" title="Compostion API"></a>Compostion API</h5><p>è€Œ<code>Compositon API</code>æ­£æ˜¯è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå°†æŸä¸ªé€»è¾‘å…³æ³¨ç‚¹ç›¸å…³çš„ä»£ç å…¨éƒ½æ”¾åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œè¿™æ ·å½“éœ€è¦ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½æ—¶ï¼Œå°±ä¸å†éœ€è¦åœ¨æ–‡ä»¶ä¸­è·³æ¥è·³å»</p>
<p>ä¸‹é¢ä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œå°†å¤„ç†<code>count</code>å±æ€§ç›¸å…³çš„ä»£ç æ”¾åœ¨åŒä¸€ä¸ªå‡½æ•°äº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="title function_">ref</span>(<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">let</span> double = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count.<span class="property">value</span> * <span class="number">2</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleConut</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        count.<span class="property">value</span> = count.<span class="property">value</span> * <span class="number">2</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        count,</span><br><span class="line">        double,</span><br><span class="line">        handleConut,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶ä¸Šä¸­ä½¿ç”¨<code>count</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; count, double, handleConut &#125; = <span class="title function_">useCount</span>();</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            count,</span><br><span class="line">            double,</span><br><span class="line">            handleConut</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å†æ¥ä¸€å¼ å›¾è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥å¾ˆç›´è§‚åœ°æ„Ÿå—åˆ° <code>Composition API</code>åœ¨é€»è¾‘ç»„ç»‡æ–¹é¢çš„ä¼˜åŠ¿ï¼Œä»¥åä¿®æ”¹ä¸€ä¸ªå±æ€§åŠŸèƒ½çš„æ—¶å€™ï¼Œåªéœ€è¦è·³åˆ°æ§åˆ¶è¯¥å±æ€§çš„æ–¹æ³•ä¸­å³å¯</p>
<p><img src="https://static.vue-js.com/e5804bc0-5c58-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h4 id="é€»è¾‘å¤ç”¨"><a href="#é€»è¾‘å¤ç”¨" class="headerlink" title="é€»è¾‘å¤ç”¨"></a>é€»è¾‘å¤ç”¨</h4><p>åœ¨<code>Vue2</code>ä¸­ï¼Œæˆ‘ä»¬æ˜¯ç”¨è¿‡<code>mixin</code>å»å¤ç”¨ç›¸åŒçš„é€»è¾‘</p>
<p>ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä¼šå¦èµ·ä¸€ä¸ª<code>mixin.js</code>æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">MoveMixin</span> = &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">handleKeyup</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">code</span>);</span><br><span class="line">      <span class="comment">// ä¸Šä¸‹å·¦å³ x y</span></span><br><span class="line">      <span class="keyword">switch</span> (e.<span class="property">code</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ArrowUp&quot;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">y</span>--;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ArrowDown&quot;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">y</span>++;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ArrowLeft&quot;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">x</span>--;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ArrowRight&quot;</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">x</span>++;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keyup&quot;</span>, <span class="variable language_">this</span>.<span class="property">handleKeyup</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;keyup&quot;</span>, <span class="variable language_">this</span>.<span class="property">handleKeyup</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨ç»„ä»¶ä¸­ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Mouse position: x &#123;&#123; x &#125;&#125; / y &#123;&#123; y &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> mousePositionMixin <span class="keyword">from</span> <span class="string">&#x27;./mouse&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">mixins</span>: [mousePositionMixin]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨å•ä¸ª<code>mixin</code>ä¼¼ä¹é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ä¸€ä¸ªç»„ä»¶æ··å…¥å¤§é‡ä¸åŒçš„ <code>mixins</code> çš„æ—¶å€™</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mixins</span>: [mousePositionMixin, fooMixin, barMixin, otherMixin]</span><br></pre></td></tr></table></figure>

<p>ä¼šå­˜åœ¨ä¸¤ä¸ªéå¸¸æ˜æ˜¾çš„é—®é¢˜ï¼š</p>
<ul>
<li>å‘½åå†²çª</li>
<li>æ•°æ®æ¥æºä¸æ¸…æ™°</li>
</ul>
<p>ç°åœ¨é€šè¿‡<code>Compositon API</code>è¿™ç§æ–¹å¼æ”¹å†™ä¸Šé¢çš„ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted, onUnmounted, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useMove</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> position = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleKeyup</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">code</span>);</span><br><span class="line">    <span class="comment">// ä¸Šä¸‹å·¦å³ x y</span></span><br><span class="line">    <span class="keyword">switch</span> (e.<span class="property">code</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;ArrowUp&quot;</span>:</span><br><span class="line">        <span class="comment">// y.value--;</span></span><br><span class="line">        position.<span class="property">y</span>--;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;ArrowDown&quot;</span>:</span><br><span class="line">        <span class="comment">// y.value++;</span></span><br><span class="line">        position.<span class="property">y</span>++;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;ArrowLeft&quot;</span>:</span><br><span class="line">        <span class="comment">// x.value--;</span></span><br><span class="line">        position.<span class="property">x</span>--;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;ArrowRight&quot;</span>:</span><br><span class="line">        <span class="comment">// x.value++;</span></span><br><span class="line">        position.<span class="property">x</span>++;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keyup&quot;</span>, handleKeyup);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;keyup&quot;</span>, handleKeyup);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; position &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Mouse position: x &#123;&#123; x &#125;&#125; / y &#123;&#123; y &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useMove &#125; <span class="keyword">from</span> <span class="string">&quot;./useMove&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> &#123; position &#125; = <span class="title function_">useMove</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> &#123; x, y &#125; = <span class="title function_">toRefs</span>(position);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      x,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      y,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<p>å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªæ•°æ®æ¥æºæ¸…æ™°äº†ï¼Œå³ä½¿å»ç¼–å†™æ›´å¤šçš„ hook å‡½æ•°ï¼Œä¹Ÿä¸ä¼šå‡ºç°å‘½åå†²çªçš„é—®é¢˜</p>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul>
<li>åœ¨é€»è¾‘ç»„ç»‡å’Œé€»è¾‘å¤ç”¨æ–¹é¢ï¼Œ<code>Composition API</code>æ˜¯ä¼˜äº<code>Options API</code></li>
<li>å› ä¸º<code>Composition API</code>å‡ ä¹æ˜¯å‡½æ•°ï¼Œä¼šæœ‰æ›´å¥½çš„ç±»å‹æ¨æ–­ã€‚</li>
<li><code>Composition API</code>å¯¹ <code>tree-shaking</code> å‹å¥½ï¼Œä»£ç ä¹Ÿæ›´å®¹æ˜“å‹ç¼©</li>
<li><code>Composition API</code>ä¸­è§ä¸åˆ°<code>this</code>çš„ä½¿ç”¨ï¼Œå‡å°‘äº†<code>this</code>æŒ‡å‘ä¸æ˜çš„æƒ…å†µ</li>
<li>å¦‚æœæ˜¯å°å‹ç»„ä»¶ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨<code>Options API</code>ï¼Œä¹Ÿæ˜¯ååˆ†å‹å¥½çš„</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/09/02/Vue/vue3-Composition%20Api%20%E4%B8%8E%20%20Options%20Api%20%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-Typescriptæ€»ç»“">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/08/23/html+css+js+ts/5-Typescript%E6%80%BB%E7%BB%93/">Typescriptæ€»ç»“</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-08-23
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/typescript/" class="cube-excerpt-tag-link">#typescript</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h1 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯-TypeScript"><a href="#1-1-ä»€ä¹ˆæ˜¯-TypeScript" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ TypeScript"></a>1.1 ä»€ä¹ˆæ˜¯ TypeScript</h2><ul>
<li><code>TypeScript</code> æ˜¯ <code>JavaScript</code> çš„ä¸€ä¸ªè¶…é›†ï¼Œä¸»è¦æä¾›äº†ç±»å‹ç³»ç»Ÿå’Œå¯¹ <code>ES6</code>çš„æ”¯æŒ</li>
<li><code>TypeScript</code> æ˜¯ç”±å¾®è½¯å¼€å‘çš„ä¸€æ¬¾å¼€æºçš„ç¼–ç¨‹è¯­è¨€</li>
<li><code>TypeScript</code> æ˜¯ <code>Javascript</code> çš„è¶…çº§ï¼Œéµå¾ªæœ€æ–°çš„ <code>ES6</code>ã€<code>Es5</code> è§„èŒƒã€‚<code>TypeScript</code> æ‰©å±•äº† <code>JavaScript</code> çš„è¯­æ³•</li>
<li><code>TypeScript</code> æ›´åƒåç«¯ <code>java</code>ã€<code>C#</code>è¿™æ ·çš„é¢å‘å¯¹è±¡è¯­è¨€å¯ä»¥è®© <code>js</code> å¼€å‘å¤§å‹ä¼ä¸šé¡¹ç›®</li>
</ul>
<h2 id="1-2-ä¸ºä»€ä¹ˆé€‰æ‹©-TypeScript"><a href="#1-2-ä¸ºä»€ä¹ˆé€‰æ‹©-TypeScript" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆé€‰æ‹© TypeScript"></a>1.2 ä¸ºä»€ä¹ˆé€‰æ‹© TypeScript</h2><blockquote>
<p><code>Typescript</code>å’Œ<code>es6</code>ã€<code>es5</code>å…³ç³»</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/583.png" alt="img"></p>
<p><strong>TypeScript å¢åŠ äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</strong></p>
<ul>
<li>ç±»å‹ç³»ç»Ÿå®é™…ä¸Šæ˜¯æœ€å¥½çš„æ–‡æ¡£ï¼Œå¤§éƒ¨åˆ†çš„å‡½æ•°çœ‹çœ‹ç±»å‹çš„å®šä¹‰å°±å¯ä»¥çŸ¥é“å¦‚ä½•ä½¿ç”¨äº†</li>
<li>å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå°±å‘ç°å¤§éƒ¨åˆ†é”™è¯¯ï¼Œè¿™æ€»æ¯”åœ¨è¿è¡Œæ—¶å€™å‡ºé”™å¥½</li>
<li>å¢å¼ºäº†ç¼–è¾‘å™¨å’Œ <code>IDE</code> çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä»£ç è¡¥å…¨ã€æ¥å£æç¤ºã€è·³è½¬åˆ°å®šä¹‰ã€é‡æ„ç­‰</li>
</ul>
<p><strong>TypeScript éå¸¸åŒ…å®¹</strong></p>
<ul>
<li><code>TypeScript</code> æ˜¯ <code>JavaScript</code> çš„è¶…é›†ï¼Œ<code>.js</code> æ–‡ä»¶å¯ä»¥ç›´æ¥é‡å‘½åä¸º <code>.ts</code> å³å¯</li>
<li>å³ä½¿ä¸æ˜¾å¼çš„å®šä¹‰ç±»å‹ï¼Œä¹Ÿèƒ½å¤Ÿè‡ªåŠ¨åšå‡ºç±»å‹æ¨è®º</li>
<li>å¯ä»¥å®šä¹‰ä»ç®€å•åˆ°å¤æ‚çš„å‡ ä¹ä¸€åˆ‡ç±»å‹</li>
<li>å³ä½¿ <code>TypeScript</code> ç¼–è¯‘æŠ¥é”™ï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆ <code>JavaScript</code> æ–‡ä»¶</li>
<li>å…¼å®¹ç¬¬ä¸‰æ–¹åº“ï¼Œå³ä½¿ç¬¬ä¸‰æ–¹åº“ä¸æ˜¯ç”¨ <code>TypeScript</code> å†™çš„ï¼Œä¹Ÿå¯ä»¥ç¼–å†™å•ç‹¬çš„ç±»å‹æ–‡ä»¶ä¾› <code>TypeScript</code> è¯»å–</li>
</ul>
<p><strong>TypeScript æ‹¥æœ‰æ´»è·ƒçš„ç¤¾åŒº</strong></p>
<ul>
<li>å¤§éƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“éƒ½æœ‰æä¾›ç»™ <code>TypeScript</code> çš„ç±»å‹å®šä¹‰æ–‡ä»¶</li>
<li><code>Google</code> å¼€å‘çš„<code>Angular2</code> å°±æ˜¯ä½¿ç”¨ <code>TypeScript</code> ç¼–å†™çš„</li>
<li><code>TypeScript</code> æ‹¥æŠ±äº† <code>ES6</code> è§„èŒƒï¼Œä¹Ÿæ”¯æŒéƒ¨åˆ† <code>ESNext</code> è‰æ¡ˆçš„è§„èŒƒ</li>
<li>æœ€æ–°çš„ <code>Vue</code> ã€<code>React</code> ä¹Ÿå¯ä»¥é›†æˆ <code>TypeScript</code></li>
</ul>
<p><strong>TypeScript çš„ç¼ºç‚¹</strong></p>
<ul>
<li>æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼Œéœ€è¦ç†è§£æ¥å£ï¼ˆ<code>Interfaces</code>ï¼‰ã€æ³›å‹ï¼ˆ<code>Generics</code>ï¼‰ã€ç±»ï¼ˆ<code>Classes</code>ï¼‰ã€æšä¸¾ç±»å‹ï¼ˆ<code>Enums</code>ï¼‰ç­‰å‰ç«¯å·¥ç¨‹å¸ˆå¯èƒ½ä¸æ˜¯å¾ˆç†Ÿæ‚‰çš„æ¦‚å¿µ</li>
<li>çŸ­æœŸå¯èƒ½ä¼šå¢åŠ ä¸€äº›å¼€å‘æˆæœ¬ï¼Œæ¯•ç«Ÿè¦å¤šå†™ä¸€äº›ç±»å‹çš„å®šä¹‰ï¼Œä¸è¿‡å¯¹äºä¸€ä¸ªéœ€è¦é•¿æœŸç»´æŠ¤çš„é¡¹ç›®ï¼Œ<code>TypeScript</code> èƒ½å¤Ÿå‡å°‘å…¶ç»´æŠ¤æˆæœ¬</li>
<li>é›†æˆåˆ°æ„å»ºæµç¨‹éœ€è¦ä¸€äº›å·¥ä½œé‡</li>
<li>å¯èƒ½å’Œä¸€äº›åº“ç»“åˆçš„ä¸æ˜¯å¾ˆå®Œç¾</li>
</ul>
<h2 id="1-3-å®‰è£…-TypeScript"><a href="#1-3-å®‰è£…-TypeScript" class="headerlink" title="1.3 å®‰è£… TypeScript"></a>1.3 å®‰è£… TypeScript</h2><p><strong>typescript å®‰è£…</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i typescript -g</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…¨å±€å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>hello.ts</code>çš„<code>ts</code>æ–‡ä»¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// hello.tså†…å®¹</span><br><span class="line">let a = &quot;poet&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥<code>tsc hello.ts</code>æ¥ç¼–è¯‘è¿™ä¸ª<code>ts</code>æ–‡ä»¶ï¼Œç„¶åä¼šåœ¨åŒçº§ç›®å½•ç”Ÿæˆä¸€ä¸ªç¼–è¯‘å¥½äº†çš„<code>hello.js</code>æ–‡ä»¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// hello.jså†…å®¹</span><br><span class="line">var = &quot;poet&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é‚£ä¹ˆæˆ‘ä»¬æ¯æ¬¡éƒ½è¦è¾“<code>tsc hello.ts</code>å‘½ä»¤æ¥ç¼–è¯‘ï¼Œè¿™æ ·å¾ˆéº»çƒ¦ï¼Œèƒ½å¦è®©å®ƒè‡ªåŠ¨ç¼–è¯‘ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½¿ç”¨<code>vscode</code>æ¥å¼€å‘ï¼Œéœ€è¦é…ç½®ä¸€ä¸‹<code>vscode</code>å°±å¯ä»¥ã€‚</p>
</blockquote>
<blockquote>
<p>é¦–å…ˆæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ<code>tsc --init</code>æ¥ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬åœ¨ç›®å½•ä¸‹çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ª<code>tsconfig.json</code>æ–‡ä»¶</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/584.png" alt="img"></p>
<blockquote>
<p>è¿™ä¸ª<code>json</code>æ–‡ä»¶é‡Œæœ‰å¾ˆå¤šé€‰é¡¹</p>
</blockquote>
<ul>
<li><code>target</code>æ˜¯é€‰æ‹©ç¼–è¯‘åˆ°ä»€ä¹ˆè¯­æ³•</li>
<li><code>module</code>åˆ™æ˜¯æ¨¡å—ç±»å‹</li>
<li><code>outDir</code>åˆ™æ˜¯è¾“å‡ºç›®å½•ï¼Œå¯ä»¥æŒ‡å®šè¿™ä¸ªå‚æ•°åˆ°æŒ‡å®šç›®å½•</li>
</ul>
<blockquote>
<p>æ›´å¤šç»†èŠ‚ <a target="_blank" rel="noopener" href="https://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/tsconfig.json.html">https://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/tsconfig.json.html</a></p>
</blockquote>
<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¼€å¯ç›‘æ§äº†ï¼Œåœ¨<code>vscode</code>ä»»åŠ¡æ ä¸­</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/585.png" alt="img"></p>
<h2 id="1-4-Hello-TypeScript"><a href="#1-4-Hello-TypeScript" class="headerlink" title="1.4 Hello TypeScript"></a>1.4 Hello TypeScript</h2><blockquote>
<p>å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ° <code>hello.ts</code> ä¸­</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function sayHello(person: string) &#123;</span><br><span class="line">    return &#x27;Hello, &#x27; + person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let user = &#x27;poetries&#x27;;</span><br><span class="line">console.log(sayHello(user));</span><br><span class="line">tsc hello.ts</span><br><span class="line">//è¿™æ—¶å€™ä¼šç”Ÿæˆä¸€ä¸ªç¼–è¯‘å¥½çš„æ–‡ä»¶ hello.jsï¼š</span><br><span class="line"></span><br><span class="line">function sayHello(person) &#123;</span><br><span class="line">    return &#x27;Hello, &#x27; + person;</span><br><span class="line">&#125;</span><br><span class="line">var user = &#x27;poetries&#x27;;</span><br><span class="line">console.log(sayHello(user));</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>TypeScript</code> ä¸­ï¼Œä½¿ç”¨ <code>:</code> æŒ‡å®šå˜é‡çš„ç±»å‹ï¼Œ<code>:</code> çš„å‰åæœ‰æ²¡æœ‰ç©ºæ ¼éƒ½å¯ä»¥</p>
</blockquote>
<ul>
<li><code>TypeScript</code> åªä¼šè¿›è¡Œé™æ€æ£€æŸ¥ï¼Œå¦‚æœå‘ç°æœ‰é”™è¯¯ï¼Œç¼–è¯‘çš„æ—¶å€™å°±ä¼šæŠ¥é”™</li>
<li><code>TypeScript</code> ç¼–è¯‘çš„æ—¶å€™å³ä½¿æŠ¥é”™äº†ï¼Œè¿˜æ˜¯ä¼šç”Ÿæˆç¼–è¯‘ç»“æœï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¼–è¯‘ä¹‹åçš„æ–‡ä»¶</li>
</ul>
<h1 id="äºŒã€åŸºç¡€"><a href="#äºŒã€åŸºç¡€" class="headerlink" title="äºŒã€åŸºç¡€"></a>äºŒã€åŸºç¡€</h1><h2 id="2-1-åŸå§‹æ•°æ®ç±»å‹"><a href="#2-1-åŸå§‹æ•°æ®ç±»å‹" class="headerlink" title="2.1 åŸå§‹æ•°æ®ç±»å‹"></a>2.1 åŸå§‹æ•°æ®ç±»å‹</h2><blockquote>
<p><code>JavaScript</code> çš„ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼šåŸå§‹æ•°æ®ç±»å‹ï¼ˆ<code>Primitive data types</code>ï¼‰å’Œå¯¹è±¡ç±»å‹ï¼ˆ<code>Object types</code>ï¼‰ã€‚</p>
</blockquote>
<ul>
<li>åŸå§‹æ•°æ®ç±»å‹åŒ…æ‹¬ï¼š<code>å¸ƒå°”å€¼</code>ã€<code>æ•°å€¼</code>ã€<code>å­—ç¬¦ä¸²</code>ã€<code>null</code>ã€<code>undefined</code> ä»¥åŠ <code>ES6</code>ä¸­çš„æ–°ç±»å‹ <code>Symbol</code>ã€‚</li>
</ul>
<blockquote>
<p>æœ¬èŠ‚ä¸»è¦ä»‹ç»å‰äº”ç§åŸå§‹æ•°æ®ç±»å‹åœ¨ <code>TypeScript</code> ä¸­çš„åº”ç”¨</p>
</blockquote>
<h3 id="2-1-1-å¸ƒå°”å€¼"><a href="#2-1-1-å¸ƒå°”å€¼" class="headerlink" title="2.1.1 å¸ƒå°”å€¼"></a>2.1.1 å¸ƒå°”å€¼</h3><blockquote>
<p>å¸ƒå°”å€¼æ˜¯æœ€åŸºç¡€çš„æ•°æ®ç±»å‹ï¼Œåœ¨ <code>TypeScript</code> ä¸­ï¼Œä½¿ç”¨ <code>boolean</code> å®šä¹‰å¸ƒå°”å€¼ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let isDone: boolean = false;</span><br><span class="line"></span><br><span class="line">// ç¼–è¯‘é€šè¿‡</span><br><span class="line">// åé¢çº¦å®šï¼Œæœªå¼ºè°ƒç¼–è¯‘é”™è¯¯çš„ä»£ç ç‰‡æ®µï¼Œé»˜è®¤ä¸ºç¼–è¯‘é€šè¿‡</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼Œä½¿ç”¨æ„é€ å‡½æ•° <code>Boolean</code> åˆ›é€ çš„å¯¹è±¡ä¸æ˜¯å¸ƒå°”å€¼</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let createdByNewBoolean: boolean = new Boolean(1);</span><br><span class="line"></span><br><span class="line">// index.ts(1,5): error TS2322: Type &#x27;Boolean&#x27; is not assignable to type &#x27;boolean&#x27;.</span><br><span class="line">// åé¢çº¦å®šï¼Œæ³¨é‡Šä¸­æ ‡å‡ºäº†ç¼–è¯‘æŠ¥é”™çš„ä»£ç ç‰‡æ®µï¼Œè¡¨ç¤ºç¼–è¯‘æœªé€šè¿‡</span><br></pre></td></tr></table></figure>

<ul>
<li>äº‹å®ä¸Š <code>new Boolean()</code> è¿”å›çš„æ˜¯ä¸€ä¸ª <code>Boolean</code> å¯¹è±¡ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let createdByNewBoolean: Boolean = new Boolean(1);</span><br></pre></td></tr></table></figure>

<ul>
<li>ç›´æ¥è°ƒç”¨ <code>Boolean</code> ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª <code>boolean</code> ç±»å‹ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let createdByBoolean: boolean = Boolean(1);</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ <code>TypeScript</code> ä¸­ï¼Œ<code>boolean</code>æ˜¯ <code>JavaScript</code> ä¸­çš„åŸºæœ¬ç±»å‹ï¼Œè€Œ <code>Boolean</code> æ˜¯ <code>JavaScript</code>ä¸­çš„æ„é€ å‡½æ•°ã€‚å…¶ä»–åŸºæœ¬ç±»å‹ï¼ˆé™¤äº† <code>null</code> å’Œ <code>undefined</code>ï¼‰ä¸€æ ·</li>
</ul>
<h3 id="2-1-2-æ•°å€¼"><a href="#2-1-2-æ•°å€¼" class="headerlink" title="2.1.2 æ•°å€¼"></a>2.1.2 æ•°å€¼</h3><blockquote>
<p>ä½¿ç”¨ <code>number</code> å®šä¹‰æ•°å€¼ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">let decLiteral: number = 6;</span><br><span class="line">let hexLiteral: number = 0xf00d;</span><br><span class="line"></span><br><span class="line">// ES6 ä¸­çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ³•</span><br><span class="line">let binaryLiteral: number = 0b1010;</span><br><span class="line"></span><br><span class="line">// ES6 ä¸­çš„å…«è¿›åˆ¶è¡¨ç¤ºæ³•</span><br><span class="line">let octalLiteral: number = 0o744;</span><br><span class="line">let notANumber: number = NaN;</span><br><span class="line">let infinityNumber: number = Infinity;</span><br><span class="line">//ç¼–è¯‘ç»“æœï¼š</span><br><span class="line"></span><br><span class="line">var decLiteral = 6;</span><br><span class="line">var hexLiteral = 0xf00d;</span><br><span class="line">// ES6 ä¸­çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ³•</span><br><span class="line">var binaryLiteral = 10;</span><br><span class="line">// ES6 ä¸­çš„å…«è¿›åˆ¶è¡¨ç¤ºæ³•</span><br><span class="line">var octalLiteral = 484;</span><br><span class="line">var notANumber = NaN;</span><br><span class="line">var infinityNumber = Infinity;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…¶ä¸­ <code>0b101</code>0 å’Œ <code>0o744</code>æ˜¯ <code>ES6</code> ä¸­çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œå®ƒä»¬ä¼šè¢«ç¼–è¯‘ä¸ºåè¿›åˆ¶æ•°å­—</p>
</blockquote>
<h3 id="2-1-3-å­—ç¬¦ä¸²"><a href="#2-1-3-å­—ç¬¦ä¸²" class="headerlink" title="2.1.3 å­—ç¬¦ä¸²"></a>2.1.3 å­—ç¬¦ä¸²</h3><blockquote>
<p>ä½¿ç”¨ <code>string</code> å®šä¹‰å­—ç¬¦ä¸²ç±»å‹ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let myName: string = &#x27;Tom&#x27;;</span><br><span class="line">let myAge: number = 25;</span><br><span class="line"></span><br><span class="line">// æ¨¡æ¿å­—ç¬¦ä¸²</span><br><span class="line">let sentence: string = `Hello, my name is $&#123;myName&#125;.</span><br><span class="line">I&#x27;ll be $&#123;myAge + 1&#125; years old next month.`;</span><br></pre></td></tr></table></figure>

<h3 id="2-1-4-ç©ºå€¼"><a href="#2-1-4-ç©ºå€¼" class="headerlink" title="2.1.4 ç©ºå€¼"></a>2.1.4 ç©ºå€¼</h3><blockquote>
<p><code>JavaScript</code> æ²¡æœ‰ç©ºå€¼ï¼ˆ<code>Void</code>ï¼‰çš„æ¦‚å¿µï¼Œåœ¨ <code>TypeScript</code> ä¸­ï¼Œå¯ä»¥ç”¨ <code>void</code> è¡¨ç¤ºæ²¡æœ‰ä»»ä½•è¿”å›å€¼çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function alertName(): void &#123;</span><br><span class="line">    alert(&#x27;My name is Tom&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å£°æ˜ä¸€ä¸ª <code>void</code> ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå› ä¸ºä½ åªèƒ½å°†å®ƒèµ‹å€¼ä¸º <code>undefined</code>å’Œ <code>null</code>ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let unusable: void = undefined;</span><br></pre></td></tr></table></figure>

<h3 id="2-1-5-Null-å’Œ-Undefined"><a href="#2-1-5-Null-å’Œ-Undefined" class="headerlink" title="2.1.5 Null å’Œ Undefined"></a>2.1.5 Null å’Œ Undefined</h3><blockquote>
<p>åœ¨ <code>TypeScript</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>null</code> å’Œ <code>undefined</code>æ¥å®šä¹‰è¿™ä¸¤ä¸ªåŸå§‹æ•°æ®ç±»å‹ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let u: undefined = undefined;</span><br><span class="line">let n: null = null;</span><br></pre></td></tr></table></figure>

<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">undefined` ç±»å‹çš„å˜é‡åªèƒ½è¢«èµ‹å€¼ä¸º `undefined`ï¼Œ`null` ç±»å‹çš„å˜é‡åªèƒ½è¢«èµ‹å€¼ä¸º `null</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>ä¸ <code>void</code> çš„åŒºåˆ«æ˜¯ï¼Œ<code>undefined</code>å’Œ <code>null</code> æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ <code>undefined</code> ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥èµ‹å€¼ç»™ <code>number</code> ç±»å‹çš„å˜é‡</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// è¿™æ ·ä¸ä¼šæŠ¥é”™</span><br><span class="line">let num: number = undefined;</span><br><span class="line"></span><br><span class="line">// è¿™æ ·ä¹Ÿä¸ä¼šæŠ¥é”™</span><br><span class="line">let u: undefined;</span><br><span class="line">let num: number = u;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è€Œ <code>void</code> ç±»å‹çš„å˜é‡ä¸èƒ½èµ‹å€¼ç»™ <code>number</code> ç±»å‹çš„å˜é‡ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let u: void;</span><br><span class="line">let num: number = u;</span><br><span class="line"></span><br><span class="line">// index.ts(2,5): error TS2322: Type &#x27;void&#x27; is not assignable to type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<h2 id="2-2-ä»»æ„å€¼Any"><a href="#2-2-ä»»æ„å€¼Any" class="headerlink" title="2.2 ä»»æ„å€¼Any"></a>2.2 ä»»æ„å€¼Any</h2><blockquote>
<p>å¦‚æœæ˜¯ä¸€ä¸ªæ™®é€šç±»å‹ï¼Œåœ¨èµ‹å€¼è¿‡ç¨‹ä¸­æ”¹å˜ç±»å‹æ˜¯ä¸è¢«å…è®¸çš„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let myFavoriteNumber: string = &#x27;seven&#x27;;</span><br><span class="line">myFavoriteNumber = 7;</span><br><span class="line"></span><br><span class="line">// index.ts(2,1): error TS2322: Type &#x27;number&#x27; is not assignable to type &#x27;string&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½†å¦‚æœæ˜¯ <code>any</code> ç±»å‹ï¼Œåˆ™å…è®¸è¢«èµ‹å€¼ä¸ºä»»æ„ç±»å‹ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let myFavoriteNumber: any = &#x27;seven&#x27;;</span><br><span class="line">myFavoriteNumber = 7;</span><br></pre></td></tr></table></figure>

<p><strong>ä»»æ„å€¼çš„å±æ€§å’Œæ–¹æ³•</strong></p>
<p>åœ¨ä»»æ„å€¼ä¸Šè®¿é—®ä»»ä½•å±æ€§éƒ½æ˜¯å…è®¸çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let anyThing: any = &#x27;hello&#x27;;</span><br><span class="line"></span><br><span class="line">console.log(anyThing.myName);</span><br><span class="line">console.log(anyThing.myName.firstName);</span><br></pre></td></tr></table></figure>

<p><strong>ä¹Ÿå…è®¸è°ƒç”¨ä»»ä½•æ–¹æ³•</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let anyThing: any = &#x27;Tom&#x27;;</span><br><span class="line"></span><br><span class="line">anyThing.setName(&#x27;Jerry&#x27;);</span><br><span class="line">anyThing.setName(&#x27;Jerry&#x27;).sayHello();</span><br><span class="line">anyThing.myName.setFirstName(&#x27;Cat&#x27;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯ä»¥è®¤ä¸ºï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ä¸ºä»»æ„å€¼ä¹‹åï¼Œå¯¹å®ƒçš„ä»»ä½•æ“ä½œï¼Œè¿”å›çš„å†…å®¹çš„ç±»å‹éƒ½æ˜¯ä»»æ„å€¼</p>
</blockquote>
<p><strong>æœªå£°æ˜ç±»å‹çš„å˜é‡</strong></p>
<blockquote>
<p>å˜é‡å¦‚æœåœ¨å£°æ˜çš„æ—¶å€™ï¼ŒæœªæŒ‡å®šå…¶ç±»å‹ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«è¯†åˆ«ä¸ºä»»æ„å€¼ç±»å‹ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let something;</span><br><span class="line">something = &#x27;seven&#x27;;</span><br><span class="line">something = 7;</span><br><span class="line"></span><br><span class="line">something.setName(&#x27;Tom&#x27;);</span><br></pre></td></tr></table></figure>

<p>ç­‰ä»·äº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let something: any;</span><br><span class="line">something = &#x27;seven&#x27;;</span><br><span class="line">something = 7;</span><br><span class="line"></span><br><span class="line">something.setName(&#x27;Tom&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="2-3-ç±»å‹æ¨è®º"><a href="#2-3-ç±»å‹æ¨è®º" class="headerlink" title="2.3 ç±»å‹æ¨è®º"></a>2.3 ç±»å‹æ¨è®º</h2><blockquote>
<p>å¦‚æœæ²¡æœ‰æ˜ç¡®çš„æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆ <code>TypeScript</code> ä¼šä¾ç…§ç±»å‹æ¨è®ºï¼ˆ<code>Type Inference</code>ï¼‰çš„è§„åˆ™æ¨æ–­å‡ºä¸€ä¸ªç±»å‹</p>
</blockquote>
<p><strong>ä»€ä¹ˆæ˜¯ç±»å‹æ¨è®º</strong></p>
<p>ä»¥ä¸‹ä»£ç è™½ç„¶æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œä½†æ˜¯ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let myFavoriteNumber = &#x27;seven&#x27;;</span><br><span class="line">myFavoriteNumber = 7;</span><br><span class="line"></span><br><span class="line">// index.ts(2,1): error TS2322: Type &#x27;number&#x27; is not assignable to type &#x27;string&#x27;.</span><br></pre></td></tr></table></figure>

<p>äº‹å®ä¸Šï¼Œå®ƒç­‰ä»·äºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let myFavoriteNumber: string = &#x27;seven&#x27;;</span><br><span class="line">myFavoriteNumber = 7;</span><br><span class="line"></span><br><span class="line">// index.ts(2,1): error TS2322: Type &#x27;number&#x27; is not assignable to type &#x27;string&#x27;.</span><br></pre></td></tr></table></figure>

<p><code>TypeScript</code> ä¼šåœ¨æ²¡æœ‰æ˜ç¡®çš„æŒ‡å®šç±»å‹çš„æ—¶å€™æ¨æµ‹å‡ºä¸€ä¸ªç±»å‹ï¼Œè¿™å°±æ˜¯ç±»å‹æ¨è®º</p>
<p><strong>å¦‚æœå®šä¹‰çš„æ—¶å€™æ²¡æœ‰èµ‹å€¼ï¼Œä¸ç®¡ä¹‹åæœ‰æ²¡æœ‰èµ‹å€¼ï¼Œéƒ½ä¼šè¢«æ¨æ–­æˆ any ç±»å‹è€Œå®Œå…¨ä¸è¢«ç±»å‹æ£€æŸ¥</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let myFavoriteNumber;</span><br><span class="line"></span><br><span class="line">myFavoriteNumber = &#x27;seven&#x27;;</span><br><span class="line">myFavoriteNumber = 7;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-è”åˆç±»å‹"><a href="#2-4-è”åˆç±»å‹" class="headerlink" title="2.4 è”åˆç±»å‹"></a>2.4 è”åˆç±»å‹</h2><blockquote>
<p>è”åˆç±»å‹ï¼ˆ<code>Union Types</code>ï¼‰è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// ç®€å•ä¾‹å­</span><br><span class="line"></span><br><span class="line">let myFavoriteNumber: string | number;</span><br><span class="line">myFavoriteNumber = &#x27;seven&#x27;;</span><br><span class="line">myFavoriteNumber = 7;</span><br><span class="line">let myFavoriteNumber: string | number;</span><br><span class="line">myFavoriteNumber = true;</span><br><span class="line"></span><br><span class="line">// index.ts(2,1): error TS2322: Type &#x27;boolean&#x27; is not assignable to type &#x27;string | number&#x27;.</span><br><span class="line">//   Type &#x27;boolean&#x27; is not assignable to type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<ul>
<li>è”åˆç±»å‹ä½¿ç”¨ <code>|</code> åˆ†éš”æ¯ä¸ªç±»å‹ã€‚</li>
<li>è¿™é‡Œçš„ <code>let myFavoriteNumber: string | number</code> çš„å«ä¹‰æ˜¯ï¼Œå…è®¸ <code>myFavoriteNumber</code> çš„ç±»å‹æ˜¯ <code>string</code> æˆ–è€… <code>number</code>ï¼Œä½†æ˜¯ä¸èƒ½æ˜¯å…¶ä»–ç±»å‹</li>
</ul>
<p><strong>è®¿é—®è”åˆç±»å‹çš„å±æ€§æˆ–æ–¹æ³•</strong></p>
<blockquote>
<p>å½“ <code>TypeScript</code> ä¸ç¡®å®šä¸€ä¸ªè”åˆç±»å‹çš„å˜é‡åˆ°åº•æ˜¯å“ªä¸ªç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®æ­¤è”åˆç±»å‹çš„æ‰€æœ‰ç±»å‹é‡Œå…±æœ‰çš„å±æ€§æˆ–æ–¹æ³•</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function getLength(something: string | number): number &#123;</span><br><span class="line">    return something.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// length ä¸æ˜¯ string å’Œ number çš„å…±æœ‰å±æ€§ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™</span><br><span class="line">// index.ts(2,22): error TS2339: Property &#x27;length&#x27; does not exist on type &#x27;string | number&#x27;.</span><br><span class="line">//   Property &#x27;length&#x27; does not exist on type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è®¿é—® <code>string</code> å’Œ <code>number</code> çš„å…±æœ‰å±æ€§æ˜¯æ²¡é—®é¢˜çš„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function getString(something: string | number): string &#123;</span><br><span class="line">    return something.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è”åˆç±»å‹çš„å˜é‡åœ¨è¢«èµ‹å€¼çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ç±»å‹æ¨è®ºçš„è§„åˆ™æ¨æ–­å‡ºä¸€ä¸ªç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let myFavoriteNumber: string | number;</span><br><span class="line">myFavoriteNumber = &#x27;seven&#x27;;</span><br><span class="line"></span><br><span class="line">console.log(myFavoriteNumber.length); // 5</span><br><span class="line"></span><br><span class="line">myFavoriteNumber = 7;</span><br><span class="line">console.log(myFavoriteNumber.length); // ç¼–è¯‘æ—¶æŠ¥é”™</span><br><span class="line"></span><br><span class="line">// index.ts(5,30): error TS2339: Property &#x27;length&#x27; does not exist on type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šä¾‹ä¸­ï¼Œç¬¬äºŒè¡Œçš„ <code>myFavoriteNumber</code> è¢«æ¨æ–­æˆäº† <code>string</code>ï¼Œè®¿é—®å®ƒçš„ <code>length</code> å±æ€§ä¸ä¼šæŠ¥é”™ã€‚</li>
<li>è€Œç¬¬å››è¡Œçš„ <code>myFavoriteNumber</code> è¢«æ¨æ–­æˆäº† <code>number</code>ï¼Œè®¿é—®å®ƒçš„ <code>length</code> å±æ€§æ—¶å°±æŠ¥é”™äº†</li>
</ul>
<h2 id="2-5-å¯¹è±¡çš„ç±»å‹â€”â€”æ¥å£"><a href="#2-5-å¯¹è±¡çš„ç±»å‹â€”â€”æ¥å£" class="headerlink" title="2.5 å¯¹è±¡çš„ç±»å‹â€”â€”æ¥å£"></a>2.5 å¯¹è±¡çš„ç±»å‹â€”â€”æ¥å£</h2><h3 id="2-5-1-ç®€å•ä¾‹å­"><a href="#2-5-1-ç®€å•ä¾‹å­" class="headerlink" title="2.5.1 ç®€å•ä¾‹å­"></a>2.5.1 ç®€å•ä¾‹å­</h3><blockquote>
<p>åœ¨ <code>TypeScript</code> ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥å£ï¼ˆ<code>Interfaces</code>ï¼‰æ¥å®šä¹‰å¯¹è±¡çš„ç±»å‹</p>
</blockquote>
<p><strong>ä»€ä¹ˆæ˜¯æ¥å£</strong></p>
<ul>
<li>åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£ï¼ˆ<code>Interfaces</code>ï¼‰æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œè€Œå…·ä½“å¦‚ä½•è¡ŒåŠ¨éœ€è¦ç”±ç±»ï¼ˆ<code>classes</code>ï¼‰å»å®ç°ï¼ˆ<code>implements</code>ï¼‰ã€‚</li>
<li><code>TypeScript</code> ä¸­çš„æ¥å£æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„æ¦‚å¿µï¼Œé™¤äº†å¯ç”¨äºå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ï¼ˆ<code>Shape</code>ï¼‰ã€è¿›è¡Œæè¿°ã€‚</li>
</ul>
<p>æ¥å£ä¸€èˆ¬é¦–å­—æ¯å¤§å†™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    age: 25</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¥å£ <code>Person</code>ï¼Œæ¥ç€å®šä¹‰äº†ä¸€ä¸ªå˜é‡ <code>tom</code>ï¼Œå®ƒçš„ç±»å‹æ˜¯ <code>Person</code>ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±çº¦æŸäº† <code>tom</code> çš„å½¢çŠ¶å¿…é¡»å’Œæ¥å£ <code>Person</code> ä¸€è‡´</p>
</blockquote>
<p><strong>å®šä¹‰çš„å˜é‡æ¯”æ¥å£å°‘äº†ä¸€äº›å±æ€§æ˜¯ä¸å…è®¸çš„</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// index.ts(6,5): error TS2322: Type &#x27;&#123; name: string; &#125;&#x27; is not assignable to type &#x27;Person&#x27;.</span><br><span class="line">//   Property &#x27;age&#x27; is missing in type &#x27;&#123; name: string; &#125;&#x27;.</span><br></pre></td></tr></table></figure>

<p><strong>å¤šä¸€äº›å±æ€§ä¹Ÿæ˜¯ä¸å…è®¸çš„</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    age: 25,</span><br><span class="line">    gender: &#x27;male&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// index.ts(9,5): error TS2322: Type &#x27;&#123; name: string; age: number; gender: string; &#125;&#x27; is not assignable to type &#x27;Person&#x27;.</span><br><span class="line">//   Object literal may only specify known properties, and &#x27;gender&#x27; does not exist in type &#x27;Person&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯è§ï¼Œèµ‹å€¼çš„æ—¶å€™ï¼Œå˜é‡çš„å½¢çŠ¶å¿…é¡»å’Œæ¥å£çš„å½¢çŠ¶ä¿æŒä¸€è‡´ã€‚</p>
</blockquote>
<h3 id="2-5-2-å¯é€‰å±æ€§"><a href="#2-5-2-å¯é€‰å±æ€§" class="headerlink" title="2.5.2 å¯é€‰å±æ€§"></a>2.5.2 å¯é€‰å±æ€§</h3><blockquote>
<p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›ä¸è¦å®Œå…¨åŒ¹é…ä¸€ä¸ªå½¢çŠ¶ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨å¯é€‰å±æ€§</p>
</blockquote>
<p>å¯é€‰å±æ€§çš„å«ä¹‰æ˜¯è¯¥å±æ€§å¯ä»¥ä¸å­˜åœ¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age?: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;</span><br><span class="line">&#125;;</span><br><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age?: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    age: 25</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-3-ä»»æ„å±æ€§"><a href="#2-5-3-ä»»æ„å±æ€§" class="headerlink" title="2.5.3 ä»»æ„å±æ€§"></a>2.5.3 ä»»æ„å±æ€§</h3><blockquote>
<p>æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªæ¥å£å…è®¸æœ‰ä»»æ„çš„å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age?: number;</span><br><span class="line">    [propName: string]: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    gender: &#x27;male&#x27;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨ <code>[propName: string]</code> å®šä¹‰äº†ä»»æ„å±æ€§å– <code>string</code> ç±»å‹çš„å€¼</li>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ä¸€æ—¦å®šä¹‰äº†ä»»æ„å±æ€§ï¼Œé‚£ä¹ˆç¡®å®šå±æ€§å’Œå¯é€‰å±æ€§éƒ½å¿…é¡»æ˜¯å®ƒçš„å­å±æ€§</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age?: number;</span><br><span class="line">    [propName: string]: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    age: 25,</span><br><span class="line">    gender: &#x27;male&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// index.ts(3,5): error TS2411: Property &#x27;age&#x27; of type &#x27;number&#x27; is not assignable to string index type &#x27;string&#x27;.</span><br><span class="line">// index.ts(7,5): error TS2322: Type &#x27;&#123; [x: string]: string | number; name: string; age: number; gender: string; &#125;&#x27; is not assignable to type &#x27;Person&#x27;.</span><br><span class="line">//   Index signatures are incompatible.</span><br><span class="line">//     Type &#x27;string | number&#x27; is not assignable to type &#x27;string&#x27;.</span><br><span class="line">//       Type &#x27;number&#x27; is not assignable to type &#x27;string&#x27;.</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šä¾‹ä¸­ï¼Œä»»æ„å±æ€§çš„å€¼å…è®¸æ˜¯ <code>string</code>ï¼Œä½†æ˜¯å¯é€‰å±æ€§ <code>age</code> çš„å€¼å´æ˜¯ <code>number</code>ï¼Œ<code>number</code>ä¸æ˜¯ <code>string</code> çš„å­å±æ€§ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚</li>
<li>å¦å¤–ï¼Œåœ¨æŠ¥é”™ä¿¡æ¯ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶ <code>&#123; name: &#39;Tom&#39;, age: 25, gender: &#39;male&#39; &#125;</code>çš„ç±»å‹è¢«æ¨æ–­æˆäº† <code>&#123; [x: string]: string | number; name: string; age: number; gender: string; &#125;</code>ï¼Œè¿™æ˜¯è”åˆç±»å‹å’Œæ¥å£çš„ç»“åˆ</li>
</ul>
<h3 id="2-5-4-åªè¯»å±æ€§"><a href="#2-5-4-åªè¯»å±æ€§" class="headerlink" title="2.5.4 åªè¯»å±æ€§"></a>2.5.4 åªè¯»å±æ€§</h3><blockquote>
<p>æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¯¹è±¡ä¸­çš„ä¸€äº›å­—æ®µåªèƒ½åœ¨åˆ›å»ºçš„æ—¶å€™è¢«èµ‹å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ <code>readonly</code>å®šä¹‰åªè¯»å±æ€§</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    readonly id: number;</span><br><span class="line">    name: string;</span><br><span class="line">    age?: number;</span><br><span class="line">    [propName: string]: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    id: 89757,</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    gender: &#x27;male&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">tom.id = 9527;</span><br><span class="line"></span><br><span class="line">// index.ts(14,5): error TS2540: Cannot assign to &#x27;id&#x27; because it is a constant or a read-only property.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œä½¿ç”¨ <code>readonly</code> å®šä¹‰çš„å±æ€§ <code>id</code> åˆå§‹åŒ–åï¼Œåˆè¢«èµ‹å€¼äº†ï¼Œæ‰€ä»¥æŠ¥é”™äº†</p>
</blockquote>
<p><strong>æ³¨æ„ï¼Œåªè¯»çš„çº¦æŸå­˜åœ¨äºç¬¬ä¸€æ¬¡ç»™å¯¹è±¡èµ‹å€¼çš„æ—¶å€™ï¼Œè€Œä¸æ˜¯ç¬¬ä¸€æ¬¡ç»™åªè¯»å±æ€§èµ‹å€¼çš„æ—¶å€™</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    readonly id: number;</span><br><span class="line">    name: string;</span><br><span class="line">    age?: number;</span><br><span class="line">    [propName: string]: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let tom: Person = &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    gender: &#x27;male&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">tom.id = 89757;</span><br><span class="line"></span><br><span class="line">// index.ts(8,5): error TS2322: Type &#x27;&#123; name: string; gender: string; &#125;&#x27; is not assignable to type &#x27;Person&#x27;.</span><br><span class="line">//   Property &#x27;id&#x27; is missing in type &#x27;&#123; name: string; gender: string; &#125;&#x27;.</span><br><span class="line">// index.ts(13,5): error TS2540: Cannot assign to &#x27;id&#x27; because it is a constant or a read-only property.</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šä¾‹ä¸­ï¼ŒæŠ¥é”™ä¿¡æ¯æœ‰ä¸¤å¤„ï¼Œç¬¬ä¸€å¤„æ˜¯åœ¨å¯¹ <code>tom</code> è¿›è¡Œèµ‹å€¼çš„æ—¶å€™ï¼Œæ²¡æœ‰ç»™ <code>id</code> èµ‹å€¼ã€‚</li>
<li>ç¬¬äºŒå¤„æ˜¯åœ¨ç»™ <code>tom.id</code> èµ‹å€¼çš„æ—¶å€™ï¼Œç”±äºå®ƒæ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥æŠ¥é”™äº†</li>
</ul>
<h2 id="2-6-æ•°ç»„çš„ç±»å‹"><a href="#2-6-æ•°ç»„çš„ç±»å‹" class="headerlink" title="2.6 æ•°ç»„çš„ç±»å‹"></a>2.6 æ•°ç»„çš„ç±»å‹</h2><blockquote>
<p>åœ¨ <code>TypeScript</code> ä¸­ï¼Œæ•°ç»„ç±»å‹æœ‰å¤šç§å®šä¹‰æ–¹å¼ï¼Œæ¯”è¾ƒçµæ´»ã€‚</p>
</blockquote>
<h3 id="2-6-1ã€Œç±»å‹-æ–¹æ‹¬å·ã€è¡¨ç¤ºæ³•"><a href="#2-6-1ã€Œç±»å‹-æ–¹æ‹¬å·ã€è¡¨ç¤ºæ³•" class="headerlink" title="2.6.1ã€Œç±»å‹ + æ–¹æ‹¬å·ã€è¡¨ç¤ºæ³•"></a>2.6.1ã€Œç±»å‹ + æ–¹æ‹¬å·ã€è¡¨ç¤ºæ³•</h3><blockquote>
<p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ã€Œç±»å‹ + æ–¹æ‹¬å·ã€æ¥è¡¨ç¤ºæ•°ç»„ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let fibonacci: number[] = [1, 1, 2, 3, 5];</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ•°ç»„çš„é¡¹ä¸­ä¸å…è®¸å‡ºç°å…¶ä»–çš„ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let fibonacci: number[] = [1, &#x27;1&#x27;, 2, 3, 5];</span><br><span class="line"></span><br><span class="line">// index.ts(1,5): error TS2322: Type &#x27;(number | string)[]&#x27; is not assignable to type &#x27;number[]&#x27;.</span><br><span class="line">//   Type &#x27;number | string&#x27; is not assignable to type &#x27;number&#x27;.</span><br><span class="line">//     Type &#x27;string&#x27; is not assignable to type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šä¾‹ä¸­ï¼Œ<code>[1, &#39;1&#39;, 2, 3, 5]</code> çš„ç±»å‹è¢«æ¨æ–­ä¸º <code>(number | string)[]</code>ï¼Œè¿™æ˜¯è”åˆç±»å‹å’Œæ•°ç»„çš„ç»“åˆã€‚</li>
<li>æ•°ç»„çš„ä¸€äº›æ–¹æ³•çš„å‚æ•°ä¹Ÿä¼šæ ¹æ®æ•°ç»„åœ¨å®šä¹‰æ—¶çº¦å®šçš„ç±»å‹è¿›è¡Œé™åˆ¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let fibonacci: number[] = [1, 1, 2, 3, 5];</span><br><span class="line">fibonacci.push(&#x27;8&#x27;);</span><br><span class="line"></span><br><span class="line">// index.ts(2,16): error TS2345: Argument of type &#x27;string&#x27; is not assignable to parameter of type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œ<code>push</code> æ–¹æ³•åªå…è®¸ä¼ å…¥ <code>number</code> ç±»å‹çš„å‚æ•°ï¼Œä½†æ˜¯å´ä¼ äº†ä¸€ä¸ª <code>string</code> ç±»å‹çš„å‚æ•°ï¼Œæ‰€ä»¥æŠ¥é”™äº†</p>
</blockquote>
<h3 id="2-6-2-æ•°ç»„æ³›å‹"><a href="#2-6-2-æ•°ç»„æ³›å‹" class="headerlink" title="2.6.2 æ•°ç»„æ³›å‹"></a>2.6.2 æ•°ç»„æ³›å‹</h3><blockquote>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„æ³›å‹ï¼ˆ<code>Array Generic</code>ï¼‰<code>Array</code>æ¥è¡¨ç¤ºæ•°ç»„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let fibonacci: Array&lt;number&gt; = [1, 1, 2, 3, 5];</span><br></pre></td></tr></table></figure>

<h3 id="2-6-3-ç”¨æ¥å£è¡¨ç¤ºæ•°ç»„"><a href="#2-6-3-ç”¨æ¥å£è¡¨ç¤ºæ•°ç»„" class="headerlink" title="2.6.3 ç”¨æ¥å£è¡¨ç¤ºæ•°ç»„"></a>2.6.3 ç”¨æ¥å£è¡¨ç¤ºæ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface NumberArray &#123;</span><br><span class="line">    [index: number]: number;</span><br><span class="line">&#125;</span><br><span class="line">let fibonacci: NumberArray = [1, 1, 2, 3, 5];</span><br></pre></td></tr></table></figure>

<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NumberArray` è¡¨ç¤ºï¼šåªè¦ `index` çš„ç±»å‹æ˜¯ `number`ï¼Œé‚£ä¹ˆå€¼çš„ç±»å‹å¿…é¡»æ˜¯ `number</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-6-4-any-åœ¨æ•°ç»„ä¸­çš„åº”ç”¨"><a href="#2-6-4-any-åœ¨æ•°ç»„ä¸­çš„åº”ç”¨" class="headerlink" title="2.6.4 any åœ¨æ•°ç»„ä¸­çš„åº”ç”¨"></a>2.6.4 any åœ¨æ•°ç»„ä¸­çš„åº”ç”¨</h3><blockquote>
<p>ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åšæ³•æ˜¯ï¼Œç”¨ <code>any</code> è¡¨ç¤ºæ•°ç»„ä¸­å…è®¸å‡ºç°ä»»æ„ç±»å‹ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let list: any[] = [&#x27;poetries&#x27;, 22, &#123; website: &#x27;http://blog.poetries.top&#x27; &#125;];</span><br></pre></td></tr></table></figure>

<h3 id="2-6-5-ç±»æ•°ç»„"><a href="#2-6-5-ç±»æ•°ç»„" class="headerlink" title="2.6.5 ç±»æ•°ç»„"></a>2.6.5 ç±»æ•°ç»„</h3><blockquote>
<p>ç±»æ•°ç»„ï¼ˆ<code>Array-like Object</code>ï¼‰ä¸æ˜¯æ•°ç»„ç±»å‹ï¼Œæ¯”å¦‚ <code>arguments</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function sum() &#123;</span><br><span class="line">    let args: number[] = arguments;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.ts(2,7): error TS2322: Type &#x27;IArguments&#x27; is not assignable to type &#x27;number[]&#x27;.</span><br><span class="line">//   Property &#x27;push&#x27; is missing in type &#x27;IArguments&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>äº‹å®ä¸Šå¸¸è§çš„ç±»æ•°ç»„éƒ½æœ‰è‡ªå·±çš„æ¥å£å®šä¹‰ï¼Œå¦‚ <code>IArguments</code>, <code>NodeList</code>, <code>HTMLCollection</code> ç­‰ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function sum() &#123;</span><br><span class="line">    let args: IArguments = arguments;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-7-å‡½æ•°çš„ç±»å‹"><a href="#2-7-å‡½æ•°çš„ç±»å‹" class="headerlink" title="2.7 å‡½æ•°çš„ç±»å‹"></a>2.7 å‡½æ•°çš„ç±»å‹</h2><h3 id="2-7-1-å‡½æ•°å£°æ˜"><a href="#2-7-1-å‡½æ•°å£°æ˜" class="headerlink" title="2.7.1 å‡½æ•°å£°æ˜"></a>2.7.1 å‡½æ•°å£°æ˜</h3><blockquote>
<p>åœ¨ <code>JavaScript</code> ä¸­ï¼Œæœ‰ä¸¤ç§å¸¸è§çš„å®šä¹‰å‡½æ•°çš„æ–¹å¼â€”â€”å‡½æ•°å£°æ˜ï¼ˆ<code>Function Declaration</code>ï¼‰å’Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆ<code>Function Expression</code>ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// å‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰</span><br><span class="line">function sum(x, y) &#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰</span><br><span class="line">let mySum = function (x, y) &#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸€ä¸ªå‡½æ•°æœ‰è¾“å…¥å’Œè¾“å‡ºï¼Œè¦åœ¨ <code>TypeScript</code> ä¸­å¯¹å…¶è¿›è¡Œçº¦æŸï¼Œéœ€è¦æŠŠè¾“å…¥å’Œè¾“å‡ºéƒ½è€ƒè™‘åˆ°ï¼Œå…¶ä¸­å‡½æ•°å£°æ˜çš„ç±»å‹å®šä¹‰è¾ƒç®€å•</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function sum(x: number, y: number): number &#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼Œè¾“å…¥å¤šä½™çš„ï¼ˆæˆ–è€…å°‘äºè¦æ±‚çš„ï¼‰å‚æ•°ï¼Œæ˜¯ä¸è¢«å…è®¸çš„ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function sum(x: number, y: number): number &#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br><span class="line">sum(1, 2, 3);</span><br><span class="line"></span><br><span class="line">// index.ts(4,1): error TS2346: Supplied parameters do not match any signature of call target.</span><br><span class="line">function sum(x: number, y: number): number &#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br><span class="line">sum(1);</span><br><span class="line"></span><br><span class="line">// index.ts(4,1): error TS2346: Supplied parameters do not match any signature of call target.</span><br></pre></td></tr></table></figure>

<h3 id="2-7-2-å‡½æ•°è¡¨è¾¾å¼"><a href="#2-7-2-å‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="2.7.2 å‡½æ•°è¡¨è¾¾å¼"></a>2.7.2 å‡½æ•°è¡¨è¾¾å¼</h3><blockquote>
<p>å¦‚æœè¦æˆ‘ä»¬ç°åœ¨å†™ä¸€ä¸ªå¯¹å‡½æ•°è¡¨è¾¾å¼ï¼ˆ<code>Function Expression</code>ï¼‰çš„å®šä¹‰ï¼Œå¯èƒ½ä¼šå†™æˆè¿™æ ·</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let mySum = function (x: number, y: number): number &#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘çš„ï¼Œä¸è¿‡äº‹å®ä¸Šï¼Œä¸Šé¢çš„ä»£ç åªå¯¹ç­‰å·å³ä¾§çš„åŒ¿åå‡½æ•°è¿›è¡Œäº†ç±»å‹å®šä¹‰ï¼Œè€Œç­‰å·å·¦è¾¹çš„ <code>mySum</code>ï¼Œæ˜¯é€šè¿‡èµ‹å€¼æ“ä½œè¿›è¡Œç±»å‹æ¨è®ºè€Œæ¨æ–­å‡ºæ¥çš„ã€‚å¦‚æœéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç»™ <code>mySum</code> æ·»åŠ ç±»å‹ï¼Œåˆ™åº”è¯¥æ˜¯è¿™æ ·</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// =&gt;å·¦è¾¹ (x: number, y: number) æ˜¯è¾“å…¥ç±»å‹ </span><br><span class="line">// =&gt;å³è¾¹numberæ˜¯è¾“å‡ºç±»å‹</span><br><span class="line">let mySum: (x: number, y: number) =&gt; number = function (x: number, y: number): number &#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ä¸è¦æ··æ·†äº† TypeScript ä¸­çš„ &#x3D;&gt; å’Œ ES6 ä¸­çš„ &#x3D;&gt;</strong></p>
<blockquote>
<p>åœ¨ <code>TypeScript</code> çš„ç±»å‹å®šä¹‰ä¸­ï¼Œ<code>=&gt;</code> ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ï¼Œå·¦è¾¹æ˜¯è¾“å…¥ç±»å‹ï¼Œéœ€è¦ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œå³è¾¹æ˜¯è¾“å‡ºç±»å‹ã€‚</p>
</blockquote>
<h3 id="2-7-3-ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶"><a href="#2-7-3-ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶" class="headerlink" title="2.7.3 ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶"></a>2.7.3 ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶</h3><blockquote>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ¥å£çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°éœ€è¦ç¬¦åˆçš„å½¢çŠ¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface SearchFunc &#123;</span><br><span class="line">    (source: string, subString: string): boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let mySearch: SearchFunc;</span><br><span class="line">mySearch = function(source: string, subString: string) &#123;</span><br><span class="line">    return source.search(subString) !== -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯é€‰å‚æ•°å¿…é¡»æ¥åœ¨å¿…éœ€å‚æ•°åé¢ã€‚æ¢å¥è¯è¯´ï¼Œå¯é€‰å‚æ•°åé¢ä¸å…è®¸å†å‡ºç°å¿…é¡»å‚æ•°äº†</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function buildName(firstName?: string, lastName: string) &#123;</span><br><span class="line">    if (firstName) &#123;</span><br><span class="line">        return firstName + &#x27; &#x27; + lastName;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let tomcat = buildName(&#x27;Tom&#x27;, &#x27;Cat&#x27;);</span><br><span class="line">let tom = buildName(undefined, &#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line">// index.ts(1,40): error TS1016: A required parameter cannot follow an optional parameter.</span><br></pre></td></tr></table></figure>

<h3 id="2-7-4-å‚æ•°é»˜è®¤å€¼"><a href="#2-7-4-å‚æ•°é»˜è®¤å€¼" class="headerlink" title="2.7.4 å‚æ•°é»˜è®¤å€¼"></a>2.7.4 å‚æ•°é»˜è®¤å€¼</h3><blockquote>
<p>åœ¨ <code>ES6</code>ä¸­ï¼Œæˆ‘ä»¬å…è®¸ç»™å‡½æ•°çš„å‚æ•°æ·»åŠ é»˜è®¤å€¼ï¼Œ<code>TypeScript</code> ä¼šå°†æ·»åŠ äº†é»˜è®¤å€¼çš„å‚æ•°è¯†åˆ«ä¸ºå¯é€‰å‚æ•°</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function buildName(firstName: string, lastName: string = &#x27;Cat&#x27;) &#123;</span><br><span class="line">    return firstName + &#x27; &#x27; + lastName;</span><br><span class="line">&#125;</span><br><span class="line">let tomcat = buildName(&#x27;Tom&#x27;, &#x27;Cat&#x27;);</span><br><span class="line">let tom = buildName(&#x27;Tom&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>æ­¤æ—¶å°±ä¸å—ã€Œå¯é€‰å‚æ•°å¿…é¡»æ¥åœ¨å¿…éœ€å‚æ•°åé¢ã€çš„é™åˆ¶äº†</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function buildName(firstName: string = &#x27;Tom&#x27;, lastName: string) &#123;</span><br><span class="line">    return firstName + &#x27; &#x27; + lastName;</span><br><span class="line">&#125;</span><br><span class="line">let tomcat = buildName(&#x27;Tom&#x27;, &#x27;Cat&#x27;);</span><br><span class="line">let cat = buildName(undefined, &#x27;Cat&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="2-7-5-å‰©ä½™å‚æ•°"><a href="#2-7-5-å‰©ä½™å‚æ•°" class="headerlink" title="2.7.5 å‰©ä½™å‚æ•°"></a>2.7.5 å‰©ä½™å‚æ•°</h3><blockquote>
<p>ES6 ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>...rest</code> çš„æ–¹å¼è·å–å‡½æ•°ä¸­çš„å‰©ä½™å‚æ•°ï¼ˆ<code>rest</code> å‚æ•°ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function push(array, ...items) &#123;</span><br><span class="line">    items.forEach(function(item) &#123;</span><br><span class="line">        array.push(item);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a = [];</span><br><span class="line">push(a, 1, 2, 3);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>äº‹å®ä¸Šï¼Œitems æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„çš„ç±»å‹æ¥å®šä¹‰å®ƒ</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function push(array: any[], ...items: any[]) &#123;</span><br><span class="line">    items.forEach(function(item) &#123;</span><br><span class="line">        array.push(item);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a = [];</span><br><span class="line">push(a, 1, 2, 3);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼Œrest å‚æ•°åªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°</p>
</blockquote>
<h3 id="2-7-6-å‡½æ•°é‡è½½"><a href="#2-7-6-å‡½æ•°é‡è½½" class="headerlink" title="2.7.6 å‡½æ•°é‡è½½"></a>2.7.6 å‡½æ•°é‡è½½</h3><ul>
<li>é‡è½½å…è®¸ä¸€ä¸ªå‡½æ•°æ¥å—ä¸åŒæ•°é‡æˆ–ç±»å‹çš„å‚æ•°æ—¶ï¼Œä½œå‡ºä¸åŒçš„å¤„ç†ã€‚</li>
</ul>
<blockquote>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå‡½æ•° <code>reverse</code>ï¼Œè¾“å…¥æ•°å­— <code>123</code> çš„æ—¶å€™ï¼Œè¾“å‡ºåè½¬çš„æ•°å­— <code>321</code>ï¼Œè¾“å…¥å­—ç¬¦ä¸² <code>&#39;hello&#39;</code> çš„æ—¶å€™ï¼Œè¾“å‡ºåè½¬çš„å­—ç¬¦ä¸² <code>&#39;olleh&#39;</code></p>
</blockquote>
<p><strong>åˆ©ç”¨è”åˆç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå®ç°</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function reverse(x: number | string): number | string &#123;</span><br><span class="line">    if (typeof x === &#x27;number&#x27;) &#123;</span><br><span class="line">        return Number(x.toString().split(&#x27;&#x27;).reverse().join(&#x27;&#x27;));</span><br><span class="line">    &#125; else if (typeof x === &#x27;string&#x27;) &#123;</span><br><span class="line">        return x.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç„¶è€Œè¿™æ ·æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯ä¸èƒ½å¤Ÿç²¾ç¡®çš„è¡¨è¾¾ï¼Œè¾“å…¥ä¸ºæ•°å­—çš„æ—¶å€™ï¼Œè¾“å‡ºä¹Ÿåº”è¯¥ä¸ºæ•°å­—ï¼Œè¾“å…¥ä¸ºå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œè¾“å‡ºä¹Ÿåº”è¯¥ä¸ºå­—ç¬¦ä¸²</p>
</blockquote>
<p><strong>è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é‡è½½å®šä¹‰å¤šä¸ª reverse çš„å‡½æ•°ç±»å‹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function reverse(x: number): number;</span><br><span class="line">function reverse(x: string): string;</span><br><span class="line"></span><br><span class="line">function reverse(x: number | string): number | string &#123;</span><br><span class="line">    if (typeof x === &#x27;number&#x27;) &#123;</span><br><span class="line">        return Number(x.toString().split(&#x27;&#x27;).reverse().join(&#x27;&#x27;));</span><br><span class="line">    &#125; else if (typeof x === &#x27;string&#x27;) &#123;</span><br><span class="line">        return x.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬é‡å¤å®šä¹‰äº†å¤šæ¬¡å‡½æ•° <code>reverse</code>ï¼Œå‰å‡ æ¬¡éƒ½æ˜¯å‡½æ•°å®šä¹‰ï¼Œæœ€åä¸€æ¬¡æ˜¯å‡½æ•°å®ç°ã€‚åœ¨ç¼–è¾‘å™¨çš„ä»£ç æç¤ºä¸­ï¼Œå¯ä»¥æ­£ç¡®çš„çœ‹åˆ°å‰ä¸¤ä¸ªæç¤ºã€‚</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼Œ<code>TypeScript</code> ä¼šä¼˜å…ˆä»æœ€å‰é¢çš„å‡½æ•°å®šä¹‰å¼€å§‹åŒ¹é…ï¼Œæ‰€ä»¥å¤šä¸ªå‡½æ•°å®šä¹‰å¦‚æœæœ‰åŒ…å«å…³ç³»ï¼Œéœ€è¦ä¼˜å…ˆæŠŠç²¾ç¡®çš„å®šä¹‰å†™åœ¨å‰é¢</p>
</blockquote>
<h2 id="2-8-ç±»å‹æ–­è¨€"><a href="#2-8-ç±»å‹æ–­è¨€" class="headerlink" title="2.8 ç±»å‹æ–­è¨€"></a>2.8 ç±»å‹æ–­è¨€</h2><blockquote>
<p>ç±»å‹æ–­è¨€ï¼ˆ<code>Type Assertion</code>ï¼‰å¯ä»¥ç”¨æ¥æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªå€¼çš„ç±»å‹ã€‚</p>
</blockquote>
<p><strong>è¯­æ³•</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ç±»å‹&gt;å€¼</span><br><span class="line"></span><br><span class="line">// æˆ–</span><br><span class="line"></span><br><span class="line">å€¼ as ç±»å‹</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ <code>tsx</code> è¯­æ³•ï¼ˆ<code>React</code> çš„ <code>jsx</code> è¯­æ³•çš„ <code>ts</code> ç‰ˆï¼‰ä¸­å¿…é¡»ç”¨åä¸€ç§</p>
</blockquote>
<p><strong>ä¾‹å­ï¼šå°†ä¸€ä¸ªè”åˆç±»å‹çš„å˜é‡æŒ‡å®šä¸ºä¸€ä¸ªæ›´åŠ å…·ä½“çš„ç±»å‹</strong></p>
<blockquote>
<p>å½“ TypeScript ä¸ç¡®å®šä¸€ä¸ªè”åˆç±»å‹çš„å˜é‡åˆ°åº•æ˜¯å“ªä¸ªç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®æ­¤è”åˆç±»å‹çš„æ‰€æœ‰ç±»å‹é‡Œå…±æœ‰çš„å±æ€§æˆ–æ–¹æ³•</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function getLength(something: string | number): number &#123;</span><br><span class="line">    return something.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.ts(2,22): error TS2339: Property &#x27;length&#x27; does not exist on type &#x27;string | number&#x27;.</span><br><span class="line">//   Property &#x27;length&#x27; does not exist on type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è€Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ç¡®å®éœ€è¦åœ¨è¿˜ä¸ç¡®å®šç±»å‹çš„æ—¶å€™å°±è®¿é—®å…¶ä¸­ä¸€ä¸ªç±»å‹çš„å±æ€§æˆ–æ–¹æ³•ï¼Œæ¯”å¦‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function getLength(something: string | number): number &#123;</span><br><span class="line">    if (something.length) &#123;</span><br><span class="line">        return something.length;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return something.toString().length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.ts(2,19): error TS2339: Property &#x27;length&#x27; does not exist on type &#x27;string | number&#x27;.</span><br><span class="line">//   Property &#x27;length&#x27; does not exist on type &#x27;number&#x27;.</span><br><span class="line">// index.ts(3,26): error TS2339: Property &#x27;length&#x27; does not exist on type &#x27;string | number&#x27;.</span><br><span class="line">//   Property &#x27;length&#x27; does not exist on type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œè·å– <code>something.length</code>çš„æ—¶å€™ä¼šæŠ¥é”™</p>
</blockquote>
<p><strong>æ­¤æ—¶å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œå°† something æ–­è¨€æˆ string</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function getLength(something: string | number): number &#123;</span><br><span class="line">    if ((&lt;string&gt;something).length) &#123;</span><br><span class="line">        return (&lt;string&gt;something).length;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return something.toString().length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç±»å‹æ–­è¨€çš„ç”¨æ³•å¦‚ä¸Šï¼Œåœ¨éœ€è¦æ–­è¨€çš„å˜é‡å‰åŠ ä¸Š &#96;&#96; å³å¯</p>
</blockquote>
<p><strong>ç±»å‹æ–­è¨€ä¸æ˜¯ç±»å‹è½¬æ¢ï¼Œæ–­è¨€æˆä¸€ä¸ªè”åˆç±»å‹ä¸­ä¸å­˜åœ¨çš„ç±»å‹æ˜¯ä¸å…è®¸çš„</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function toBoolean(something: string | number): boolean &#123;</span><br><span class="line">    return &lt;boolean&gt;something;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.ts(2,10): error TS2352: Type &#x27;string | number&#x27; cannot be converted to type &#x27;boolean&#x27;.</span><br><span class="line">//   Type &#x27;number&#x27; is not comparable to type &#x27;boolean&#x27;.</span><br></pre></td></tr></table></figure>

<h2 id="2-9-å£°æ˜æ–‡ä»¶"><a href="#2-9-å£°æ˜æ–‡ä»¶" class="headerlink" title="2.9 å£°æ˜æ–‡ä»¶"></a>2.9 å£°æ˜æ–‡ä»¶</h2><blockquote>
<p>å½“ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¼•ç”¨å®ƒçš„å£°æ˜æ–‡ä»¶</p>
</blockquote>
<h3 id="2-9-1-å£°æ˜-declare-è¯­å¥"><a href="#2-9-1-å£°æ˜-declare-è¯­å¥" class="headerlink" title="2.9.1 å£°æ˜(declare)è¯­å¥"></a>2.9.1 å£°æ˜(declare)è¯­å¥</h3><blockquote>
<p>å‡å¦‚æˆ‘ä»¬æƒ³ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ <code>jQuery</code>ï¼Œæˆ‘ä»¬é€šå¸¸è¿™æ ·è·å–ä¸€ä¸ª <code>id</code> æ˜¯ <code>foo</code> çš„å…ƒç´ </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&#x27;#foo&#x27;);</span><br><span class="line">// or</span><br><span class="line">jQuery(&#x27;#foo&#x27;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½†æ˜¯åœ¨ <code>TypeScript</code> ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ <code>$</code> æˆ– <code>jQuery</code>æ˜¯ä»€ä¹ˆä¸œè¥¿</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jQuery(&#x27;#foo&#x27;);</span><br><span class="line"></span><br><span class="line">// index.ts(1,1): error TS2304: Cannot find name &#x27;jQuery&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>declare</code> å…³é”®å­—æ¥å®šä¹‰å®ƒçš„ç±»å‹ï¼Œå¸®åŠ©<code>TypeScript</code> åˆ¤æ–­æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°ç±»å‹å¯¹ä¸å¯¹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">declare var jQuery: (selector: string) =&gt; any;</span><br><span class="line"></span><br><span class="line">jQuery(&#x27;#foo&#x27;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>declare</code> å®šä¹‰çš„ç±»å‹åªä¼šç”¨äºç¼–è¯‘æ—¶çš„æ£€æŸ¥ï¼Œç¼–è¯‘ç»“æœä¸­ä¼šè¢«åˆ é™¤</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//ä¸Šä¾‹çš„ç¼–è¯‘ç»“æœæ˜¯ï¼š</span><br><span class="line"></span><br><span class="line">jQuery(&#x27;#foo&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="2-9-2-å£°æ˜æ–‡ä»¶-çº¦å®š-d-tsåç¼€"><a href="#2-9-2-å£°æ˜æ–‡ä»¶-çº¦å®š-d-tsåç¼€" class="headerlink" title="2.9.2 å£°æ˜æ–‡ä»¶(çº¦å®š.d.tsåç¼€)"></a>2.9.2 å£°æ˜æ–‡ä»¶(çº¦å®š.d.tsåç¼€)</h3><blockquote>
<p>é€šå¸¸æˆ‘ä»¬ä¼šæŠŠç±»å‹å£°æ˜æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œè¿™å°±æ˜¯å£°æ˜æ–‡ä»¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// jQuery.d.ts</span><br><span class="line"></span><br><span class="line">declare var jQuery: (string) =&gt; any;</span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ‘ä»¬çº¦å®šå£°æ˜æ–‡ä»¶ä»¥ <code>.d.ts</code> ä¸ºåç¼€ã€‚</li>
<li>ç„¶ååœ¨ä½¿ç”¨åˆ°çš„æ–‡ä»¶çš„å¼€å¤´ï¼Œç”¨<code>ã€Œä¸‰æ–œçº¿æŒ‡ä»¤ã€///</code>è¡¨ç¤ºå¼•ç”¨äº†å£°æ˜æ–‡ä»¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;reference path=&quot;./jQuery.d.ts&quot; /&gt;</span><br><span class="line"></span><br><span class="line">jQuery(&#x27;#foo&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="2-9-3-ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶"><a href="#2-9-3-ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶" class="headerlink" title="2.9.3 ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶"></a>2.9.3 ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶</h3><blockquote>
<p>å½“ç„¶ï¼Œ<code>jQuery</code> çš„å£°æ˜æ–‡ä»¶ä¸éœ€è¦æˆ‘ä»¬å®šä¹‰äº†ï¼Œå·²ç»æœ‰äººå¸®æˆ‘ä»¬å®šä¹‰å¥½äº†ï¼š<a target="_blank" rel="noopener" href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/jquery/index.d.ts">jQuery in DefinitelyTyped</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">// https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/jquery/index.d.ts</span><br><span class="line"></span><br><span class="line">// Type definitions for jquery 3.3</span><br><span class="line">// Project: https://jquery.com</span><br><span class="line">// Definitions by: Leonard Thieu &lt;https://github.com/leonard-thieu&gt;</span><br><span class="line">//                 Boris Yankov &lt;https://github.com/borisyankov&gt;</span><br><span class="line">//                 Christian Hoffmeister &lt;https://github.com/choffmeister&gt;</span><br><span class="line">//                 Steve Fenton &lt;https://github.com/Steve-Fenton&gt;</span><br><span class="line">//                 Diullei Gomes &lt;https://github.com/Diullei&gt;</span><br><span class="line">//                 Tass Iliopoulos &lt;https://github.com/tasoili&gt;</span><br><span class="line">//                 Jason Swearingen &lt;https://github.com/jasons-novaleaf&gt;</span><br><span class="line">//                 Sean Hill &lt;https://github.com/seanski&gt;</span><br><span class="line">//                 Guus Goossens &lt;https://github.com/Guuz&gt;</span><br><span class="line">//                 Kelly Summerlin &lt;https://github.com/ksummerlin&gt;</span><br><span class="line">//                 Basarat Ali Syed &lt;https://github.com/basarat&gt;</span><br><span class="line">//                 Nicholas Wolverson &lt;https://github.com/nwolverson&gt;</span><br><span class="line">//                 Derek Cicerone &lt;https://github.com/derekcicerone&gt;</span><br><span class="line">//                 Andrew Gaspar &lt;https://github.com/AndrewGaspar&gt;</span><br><span class="line">//                 Seikichi Kondo &lt;https://github.com/seikichi&gt;</span><br><span class="line">//                 Benjamin Jackman &lt;https://github.com/benjaminjackman&gt;</span><br><span class="line">//                 Poul Sorensen &lt;https://github.com/s093294&gt;</span><br><span class="line">//                 Josh Strobl &lt;https://github.com/JoshStrobl&gt;</span><br><span class="line">//                 John Reilly &lt;https://github.com/johnnyreilly&gt;</span><br><span class="line">//                 Dick van den Brink &lt;https://github.com/DickvdBrink&gt;</span><br><span class="line">//                 Thomas Schulz &lt;https://github.com/King2500&gt;</span><br><span class="line">//                 Terry Mun &lt;https://github.com/terrymun&gt;</span><br><span class="line">// Definitions: https://github.com/DefinitelyTyped/DefinitelyTyped</span><br><span class="line">// TypeScript Version: 2.3</span><br><span class="line"></span><br><span class="line">// å¼•å…¥å£°æ˜æ–‡ä»¶</span><br><span class="line">/// &lt;reference types=&quot;sizzle&quot; /&gt;</span><br><span class="line">/// &lt;reference path=&quot;JQueryStatic.d.ts&quot; /&gt;</span><br><span class="line">/// &lt;reference path=&quot;JQuery.d.ts&quot; /&gt;</span><br><span class="line">/// &lt;reference path=&quot;misc.d.ts&quot; /&gt;</span><br><span class="line">/// &lt;reference path=&quot;legacy.d.ts&quot; /&gt;</span><br><span class="line"></span><br><span class="line">export = jQuery;</span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸‹è½½ä¸‹æ¥ä½¿ç”¨ï¼Œä½†æ˜¯æ›´æ¨èçš„æ˜¯ä½¿ç”¨å·¥å…·ç»Ÿä¸€ç®¡ç†ç¬¬ä¸‰æ–¹åº“çš„å£°æ˜æ–‡ä»¶- ç¤¾åŒºå·²ç»æœ‰å¤šç§æ–¹å¼å¼•å…¥å£°æ˜æ–‡ä»¶ï¼Œä¸è¿‡ <code>TypeScript 2.0</code>æ¨èä½¿ç”¨ <code>@types</code> æ¥ç®¡ç†ã€‚</li>
<li><code>@types</code> çš„ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼Œç›´æ¥ç”¨ <code>npm</code> å®‰è£…å¯¹åº”çš„å£°æ˜æ¨¡å—å³å¯ï¼Œä»¥ <code>jQuery</code> ä¸¾ä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @types/jquery --save-dev</span><br></pre></td></tr></table></figure>

<p><strong>å¯ä»¥åœ¨è¿™ä¸ªé¡µé¢æœç´¢ä½ éœ€è¦çš„å£°æ˜æ–‡ä»¶</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://microsoft.github.io/TypeSearch/">http://microsoft.github.io/TypeSearch/</a></p>
</blockquote>
<h2 id="2-10-å†…ç½®å¯¹è±¡"><a href="#2-10-å†…ç½®å¯¹è±¡" class="headerlink" title="2.10 å†…ç½®å¯¹è±¡"></a>2.10 å†…ç½®å¯¹è±¡</h2><blockquote>
<p><code>JavaScript</code> ä¸­æœ‰å¾ˆå¤šå†…ç½®å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥åœ¨ <code>TypeScript</code> ä¸­å½“åšå®šä¹‰å¥½äº†çš„ç±»å‹</p>
</blockquote>
<blockquote>
<p>å†…ç½®å¯¹è±¡æ˜¯æŒ‡æ ¹æ®æ ‡å‡†åœ¨å…¨å±€ä½œç”¨åŸŸï¼ˆ<code>Global</code>ï¼‰ä¸Šå­˜åœ¨çš„å¯¹è±¡ã€‚è¿™é‡Œçš„æ ‡å‡†æ˜¯æŒ‡ <code>ECMAScript</code> å’Œå…¶ä»–ç¯å¢ƒï¼ˆæ¯”å¦‚ <code>DOM</code>ï¼‰çš„æ ‡å‡†</p>
</blockquote>
<h3 id="2-10-1-ECMAScript-çš„å†…ç½®å¯¹è±¡"><a href="#2-10-1-ECMAScript-çš„å†…ç½®å¯¹è±¡" class="headerlink" title="2.10.1 ECMAScript çš„å†…ç½®å¯¹è±¡"></a>2.10.1 ECMAScript çš„å†…ç½®å¯¹è±¡</h3><p><strong>ECMAScript æ ‡å‡†æä¾›çš„å†…ç½®å¯¹è±¡æœ‰</strong></p>
<blockquote>
<p><code>Boolean</code>ã€<code>Error</code>ã€<code>Date</code>ã€<code>RegExp</code> ç­‰</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>TypeScript</code> ä¸­å°†å˜é‡å®šä¹‰ä¸ºè¿™äº›ç±»å‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let b: Boolean = new Boolean(1);</span><br><span class="line"></span><br><span class="line">let e: Error = new Error(&#x27;Error occurred&#x27;);</span><br><span class="line"></span><br><span class="line">let d: Date = new Date();</span><br><span class="line"></span><br><span class="line">let r: RegExp = /[a-z]/;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ›´å¤šçš„å†…ç½®å¯¹è±¡ï¼Œå¯ä»¥æŸ¥çœ‹ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects">MDN çš„æ–‡æ¡£</a></p>
</blockquote>
<blockquote>
<p>è€Œä»–ä»¬çš„å®šä¹‰æ–‡ä»¶ï¼Œåˆ™åœ¨ <a target="_blank" rel="noopener" href="https://github.com/Microsoft/TypeScript/tree/master/src/lib">TypeScript æ ¸å¿ƒåº“çš„å®šä¹‰æ–‡ä»¶ä¸­</a></p>
</blockquote>
<h3 id="2-10-2-DOM-å’Œ-BOM-çš„å†…ç½®å¯¹è±¡"><a href="#2-10-2-DOM-å’Œ-BOM-çš„å†…ç½®å¯¹è±¡" class="headerlink" title="2.10.2 DOM å’Œ BOM çš„å†…ç½®å¯¹è±¡"></a>2.10.2 DOM å’Œ BOM çš„å†…ç½®å¯¹è±¡</h3><p><strong>DOM å’Œ BOM æä¾›çš„å†…ç½®å¯¹è±¡æœ‰</strong></p>
<blockquote>
<p><code>Document</code>ã€<code>HTMLElement</code>ã€<code>Event</code>ã€<code>NodeList</code> ç­‰ã€‚</p>
</blockquote>
<blockquote>
<p>TypeScript ä¸­ä¼šç»å¸¸ç”¨åˆ°è¿™äº›ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let body: HTMLElement = document.body;</span><br><span class="line">let allDiv: NodeList = document.querySelectorAll(&#x27;div&#x27;);</span><br><span class="line"></span><br><span class="line">document.addEventListener(&#x27;click&#x27;, function(e: MouseEvent) &#123;</span><br><span class="line">  // Do something</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®ƒä»¬çš„å®šä¹‰æ–‡ä»¶åŒæ ·åœ¨ <a target="_blank" rel="noopener" href="https://github.com/Microsoft/TypeScript/tree/master/src/lib">TypeScript æ ¸å¿ƒåº“çš„å®šä¹‰æ–‡ä»¶ä¸­</a></p>
</blockquote>
<h3 id="2-10-3-TypeScript-æ ¸å¿ƒåº“çš„å®šä¹‰æ–‡ä»¶"><a href="#2-10-3-TypeScript-æ ¸å¿ƒåº“çš„å®šä¹‰æ–‡ä»¶" class="headerlink" title="2.10.3 TypeScript æ ¸å¿ƒåº“çš„å®šä¹‰æ–‡ä»¶"></a>2.10.3 TypeScript æ ¸å¿ƒåº“çš„å®šä¹‰æ–‡ä»¶</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/Microsoft/TypeScript/tree/master/src/lib">TypeScript æ ¸å¿ƒåº“</a>çš„å®šä¹‰æ–‡ä»¶ä¸­å®šä¹‰äº†æ‰€æœ‰æµè§ˆå™¨ç¯å¢ƒéœ€è¦ç”¨åˆ°çš„ç±»å‹ï¼Œå¹¶ä¸”æ˜¯é¢„ç½®åœ¨ TypeScript ä¸­çš„</p>
</blockquote>
<blockquote>
<p>å½“ä½ åœ¨ä½¿ç”¨ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•çš„æ—¶å€™ï¼Œ<code>TypeScript</code> å®é™…ä¸Šå·²ç»å¸®ä½ åšäº†å¾ˆå¤šç±»å‹åˆ¤æ–­çš„å·¥ä½œäº†ï¼Œæ¯”å¦‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Math.pow(10, &#x27;2&#x27;);</span><br><span class="line"></span><br><span class="line">// index.ts(1,14): error TS2345: Argument of type &#x27;string&#x27; is not assignable to parameter of type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>Math.pow</code> å¿…é¡»æ¥å—ä¸¤ä¸ª <code>number</code> ç±»å‹çš„å‚æ•°ã€‚äº‹å®ä¸Š <code>Math.pow</code>çš„ç±»å‹å®šä¹‰å¦‚ä¸‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Math &#123;</span><br><span class="line">    /**</span><br><span class="line">     * Returns the value of a base expression taken to a specified power.</span><br><span class="line">     * @param x The base value of the expression.</span><br><span class="line">     * @param y The exponent value of the expression.</span><br><span class="line">     */</span><br><span class="line">    pow(x: number, y: number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å†ä¸¾ä¸€ä¸ª <code>DOM</code> ä¸­çš„ä¾‹å­</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document.addEventListener(&#x27;click&#x27;, function(e) &#123;</span><br><span class="line">    console.log(e.targetCurrent);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// index.ts(2,17): error TS2339: Property &#x27;targetCurrent&#x27; does not exist on type &#x27;MouseEvent&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>addEventListener</code> æ–¹æ³•æ˜¯åœ¨ <code>TypeScript</code> æ ¸å¿ƒåº“ä¸­å®šä¹‰çš„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface Document extends Node, GlobalEventHandlers, NodeSelector, DocumentEvent &#123;</span><br><span class="line">    addEventListener(type: string, listener: (ev: MouseEvent) =&gt; any, useCapture?: boolean): void;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰€ä»¥ <code>e</code> è¢«æ¨æ–­æˆäº† <code>MouseEvent</code>ï¼Œè€Œ <code>MouseEvent</code> æ˜¯æ²¡æœ‰ <code>targetCurrent</code> å±æ€§çš„ï¼Œæ‰€ä»¥æŠ¥é”™äº†</p>
</blockquote>
<p><strong>æ³¨æ„ï¼ŒTypeScript æ ¸å¿ƒåº“çš„å®šä¹‰ä¸­ä¸åŒ…å« Node.js éƒ¨åˆ†</strong></p>
<h3 id="2-10-4-ç”¨-TypeScript-å†™-Node-js"><a href="#2-10-4-ç”¨-TypeScript-å†™-Node-js" class="headerlink" title="2.10.4 ç”¨ TypeScript å†™ Node.js"></a>2.10.4 ç”¨ TypeScript å†™ Node.js</h3><blockquote>
<p><code>Node.js</code> ä¸æ˜¯å†…ç½®å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœæƒ³ç”¨ <code>TypeScript</code> å†™ <code>Node.js</code>ï¼Œåˆ™éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @types/node --save-dev</span><br></pre></td></tr></table></figure>

<h1 id="ä¸‰ã€è¿›é˜¶"><a href="#ä¸‰ã€è¿›é˜¶" class="headerlink" title="ä¸‰ã€è¿›é˜¶"></a>ä¸‰ã€è¿›é˜¶</h1><h2 id="3-1-ç±»å‹åˆ«å"><a href="#3-1-ç±»å‹åˆ«å" class="headerlink" title="3.1 ç±»å‹åˆ«å"></a>3.1 ç±»å‹åˆ«å</h2><blockquote>
<p>ç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">type Name = string;</span><br><span class="line"></span><br><span class="line">type NameResolver = () =&gt; string;</span><br><span class="line"></span><br><span class="line">type NameOrResolver = Name | NameResolver; // è”åˆç±»å‹</span><br><span class="line"></span><br><span class="line">function getName(n: NameOrResolver): Name &#123;</span><br><span class="line">    if (typeof n === &#x27;string&#x27;) &#123;</span><br><span class="line">        return n;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return n();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>type</code> åˆ›å»ºç±»å‹åˆ«åã€‚</p>
<blockquote>
<p>ç±»å‹åˆ«åå¸¸ç”¨äºè”åˆç±»å‹</p>
</blockquote>
<h2 id="3-2-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹"><a href="#3-2-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹" class="headerlink" title="3.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹"></a>3.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹</h2><blockquote>
<p>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ç”¨æ¥çº¦æŸå–å€¼åªèƒ½æ˜¯æŸå‡ ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">type EventNames = &#x27;click&#x27; | &#x27;scroll&#x27; | &#x27;mousemove&#x27;;</span><br><span class="line">function handleEvent(ele: Element, event: EventNames) &#123;</span><br><span class="line">    // do something</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handleEvent(document.getElementById(&#x27;hello&#x27;), &#x27;scroll&#x27;);  // æ²¡é—®é¢˜</span><br><span class="line">handleEvent(document.getElementById(&#x27;world&#x27;), &#x27;dbclick&#x27;); // æŠ¥é”™ï¼Œevent ä¸èƒ½ä¸º &#x27;dbclick&#x27;</span><br><span class="line"></span><br><span class="line">// index.ts(7,47): error TS2345: Argument of type &#x27;&quot;dbclick&quot;&#x27; is not assignable to parameter of type &#x27;EventNames&#x27;.</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>type</code> å®šäº†ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ <code>EventNames</code>ï¼Œå®ƒåªèƒ½å–ä¸‰ç§å­—ç¬¦ä¸²ä¸­çš„ä¸€ç§ã€‚</li>
</ul>
<p><strong>æ³¨æ„ï¼Œç±»å‹åˆ«åä¸å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹éƒ½æ˜¯ä½¿ç”¨ type è¿›è¡Œå®š</strong></p>
<h2 id="3-3-å…ƒç»„"><a href="#3-3-å…ƒç»„" class="headerlink" title="3.3 å…ƒç»„"></a>3.3 å…ƒç»„</h2><ul>
<li>æ•°ç»„åˆå¹¶äº†ç›¸åŒç±»å‹çš„å¯¹è±¡ï¼Œè€Œå…ƒç»„ï¼ˆ<code>Tuple</code>ï¼‰åˆå¹¶äº†ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚</li>
<li>å…ƒç»„èµ·æºäºå‡½æ•°ç¼–ç¨‹è¯­è¨€,åœ¨è¿™äº›è¯­è¨€ä¸­é¢‘ç¹ä½¿ç”¨å…ƒç»„ã€‚</li>
</ul>
<h3 id="3-3-1-ç®€å•çš„ä¾‹å­"><a href="#3-3-1-ç®€å•çš„ä¾‹å­" class="headerlink" title="3.3.1 ç®€å•çš„ä¾‹å­"></a>3.3.1 ç®€å•çš„ä¾‹å­</h3><blockquote>
<p>å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º <code>string</code> å’Œ <code>number</code>çš„å…ƒç»„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let user: [string, number] = [&#x27;poetries&#x27;, 22];</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å½“èµ‹å€¼æˆ–è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ æ—¶ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let user: [string, number];</span><br><span class="line">user[0] = &#x27;poetries&#x27;;</span><br><span class="line">user[1] = 22;</span><br><span class="line"></span><br><span class="line">user[0].slice(1);</span><br><span class="line">user[1].toFixed(2);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¹Ÿå¯ä»¥åªèµ‹å€¼å…¶ä¸­ä¸€é¡¹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let user: [string, number];</span><br><span class="line">user[0] = &#x27;poetries&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-2-è¶Šç•Œçš„å…ƒç´ "><a href="#3-3-2-è¶Šç•Œçš„å…ƒç´ " class="headerlink" title="3.3.2 è¶Šç•Œçš„å…ƒç´ "></a>3.3.2 è¶Šç•Œçš„å…ƒç´ </h3><blockquote>
<p>å½“æ·»åŠ è¶Šç•Œçš„å…ƒç´ æ—¶ï¼Œå®ƒçš„ç±»å‹ä¼šè¢«é™åˆ¶ä¸ºå…ƒç»„ä¸­æ¯ä¸ªç±»å‹çš„è”åˆç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let user: [string, number];</span><br><span class="line">user = [&#x27;poetries&#x27;, 22];</span><br><span class="line">user.push(&#x27;http://blog.poetries.top&#x27;);</span><br><span class="line">user.push(true);</span><br><span class="line"></span><br><span class="line">// index.ts(4,14): error TS2345: Argument of type &#x27;boolean&#x27; is not assignable to parameter of type &#x27;string | number&#x27;.</span><br><span class="line">//   Type &#x27;boolean&#x27; is not assignable to type &#x27;number&#x27;.</span><br></pre></td></tr></table></figure>

<h2 id="3-4-æšä¸¾"><a href="#3-4-æšä¸¾" class="headerlink" title="3.4 æšä¸¾"></a>3.4 æšä¸¾</h2><blockquote>
<p>æšä¸¾ï¼ˆ<code>Enum</code>ï¼‰ç±»å‹ç”¨äºå–å€¼è¢«é™å®šåœ¨ä¸€å®šèŒƒå›´å†…çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å‘¨åªèƒ½æœ‰ä¸ƒå¤©ï¼Œé¢œè‰²é™å®šä¸ºçº¢ç»¿è“ç­‰</p>
</blockquote>
<h3 id="3-4-1-ç®€å•çš„ä¾‹å­"><a href="#3-4-1-ç®€å•çš„ä¾‹å­" class="headerlink" title="3.4.1 ç®€å•çš„ä¾‹å­"></a>3.4.1 ç®€å•çš„ä¾‹å­</h3><blockquote>
<p>æšä¸¾ä½¿ç”¨ <code>enum</code> å…³é”®å­—æ¥å®šä¹‰ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enum Days &#123;Sun, Mon, Tue, Wed, Thu, Fri, Sat&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æšä¸¾æˆå‘˜ä¼šè¢«èµ‹å€¼ä¸ºä» <code>0</code> å¼€å§‹é€’å¢çš„æ•°å­—ï¼ŒåŒæ—¶ä¹Ÿä¼šå¯¹æšä¸¾å€¼åˆ°æšä¸¾åè¿›è¡Œåå‘æ˜ å°„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">enum Days &#123;Sun, Mon, Tue, Wed, Thu, Fri, Sat&#125;;</span><br><span class="line"></span><br><span class="line">console.log(Days[&quot;Sun&quot;] === 0); // true</span><br><span class="line">console.log(Days[&quot;Mon&quot;] === 1); // true</span><br><span class="line">console.log(Days[&quot;Tue&quot;] === 2); // true</span><br><span class="line">console.log(Days[&quot;Sat&quot;] === 6); // true</span><br><span class="line"></span><br><span class="line">console.log(Days[0] === &quot;Sun&quot;); // true</span><br><span class="line">console.log(Days[1] === &quot;Mon&quot;); // true</span><br><span class="line">console.log(Days[2] === &quot;Tue&quot;); // true</span><br><span class="line">console.log(Days[6] === &quot;Sat&quot;); // true</span><br></pre></td></tr></table></figure>

<blockquote>
<p>äº‹å®ä¸Šï¼Œä¸Šé¢çš„ä¾‹å­ä¼šè¢«ç¼–è¯‘ä¸º</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var Days;</span><br><span class="line">(function (Days) &#123;</span><br><span class="line">    Days[Days[&quot;Sun&quot;] = 0] = &quot;Sun&quot;;</span><br><span class="line">    Days[Days[&quot;Mon&quot;] = 1] = &quot;Mon&quot;;</span><br><span class="line">    Days[Days[&quot;Tue&quot;] = 2] = &quot;Tue&quot;;</span><br><span class="line">    Days[Days[&quot;Wed&quot;] = 3] = &quot;Wed&quot;;</span><br><span class="line">    Days[Days[&quot;Thu&quot;] = 4] = &quot;Thu&quot;;</span><br><span class="line">    Days[Days[&quot;Fri&quot;] = 5] = &quot;Fri&quot;;</span><br><span class="line">    Days[Days[&quot;Sat&quot;] = 6] = &quot;Sat&quot;;</span><br><span class="line">&#125;)(Days || (Days = &#123;&#125;));</span><br></pre></td></tr></table></figure>

<h3 id="3-4-2-æ‰‹åŠ¨èµ‹å€¼"><a href="#3-4-2-æ‰‹åŠ¨èµ‹å€¼" class="headerlink" title="3.4.2 æ‰‹åŠ¨èµ‹å€¼"></a>3.4.2 æ‰‹åŠ¨èµ‹å€¼</h3><blockquote>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™æšä¸¾é¡¹æ‰‹åŠ¨èµ‹å€¼</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Days &#123;Sun = 7, Mon = 1, Tue, Wed, Thu, Fri, Sat&#125;;</span><br><span class="line"></span><br><span class="line">console.log(Days[&quot;Sun&quot;] === 7); // true</span><br><span class="line">console.log(Days[&quot;Mon&quot;] === 1); // true</span><br><span class="line">console.log(Days[&quot;Tue&quot;] === 2); // true</span><br><span class="line">console.log(Days[&quot;Sat&quot;] === 6); // true</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæœªæ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹ä¼šæ¥ç€ä¸Šä¸€ä¸ªæšä¸¾é¡¹é€’å¢</p>
</blockquote>
<p>å¦‚æœæœªæ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹ä¸æ‰‹åŠ¨èµ‹å€¼çš„é‡å¤äº†ï¼Œ<code>TypeScript</code> æ˜¯ä¸ä¼šå¯Ÿè§‰åˆ°è¿™ä¸€ç‚¹çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Days &#123;Sun = 3, Mon = 1, Tue, Wed, Thu, Fri, Sat&#125;;</span><br><span class="line"></span><br><span class="line">console.log(Days[&quot;Sun&quot;] === 3); // true</span><br><span class="line">console.log(Days[&quot;Wed&quot;] === 3); // true</span><br><span class="line">console.log(Days[3] === &quot;Sun&quot;); // false</span><br><span class="line">console.log(Days[3] === &quot;Wed&quot;); // true</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé€’å¢åˆ° <code>3</code> çš„æ—¶å€™ä¸å‰é¢çš„ <code>Sun</code> çš„å–å€¼é‡å¤äº†ï¼Œä½†æ˜¯ <code>TypeScript</code> å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œå¯¼è‡´ <code>Days[3]</code>çš„å€¼å…ˆæ˜¯ <code>&quot;Sun&quot;</code>ï¼Œè€Œååˆè¢« <code>&quot;Wed&quot;</code> è¦†ç›–äº†ã€‚ç¼–è¯‘çš„ç»“æœæ˜¯</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var Days;</span><br><span class="line">(function (Days) &#123;</span><br><span class="line">    Days[Days[&quot;Sun&quot;] = 3] = &quot;Sun&quot;;</span><br><span class="line">    Days[Days[&quot;Mon&quot;] = 1] = &quot;Mon&quot;;</span><br><span class="line">    Days[Days[&quot;Tue&quot;] = 2] = &quot;Tue&quot;;</span><br><span class="line">    Days[Days[&quot;Wed&quot;] = 3] = &quot;Wed&quot;;</span><br><span class="line">    Days[Days[&quot;Thu&quot;] = 4] = &quot;Thu&quot;;</span><br><span class="line">    Days[Days[&quot;Fri&quot;] = 5] = &quot;Fri&quot;;</span><br><span class="line">    Days[Days[&quot;Sat&quot;] = 6] = &quot;Sat&quot;;</span><br><span class="line">&#125;)(Days || (Days = &#123;&#125;));</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œæœ€å¥½ä¸è¦å‡ºç°è¿™ç§è¦†ç›–çš„æƒ…å†µã€‚</p>
<blockquote>
<p>æ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹å¯ä»¥ä¸æ˜¯æ•°å­—ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€æ¥è®© <code>tsc</code> æ— è§†ç±»å‹æ£€æŸ¥ (ç¼–è¯‘å‡ºçš„ <code>js</code> ä»ç„¶æ˜¯å¯ç”¨çš„)ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">enum Days &#123;Sun = 7, Mon, Tue, Wed, Thu, Fri, Sat = &lt;any&gt;&quot;S&quot;&#125;;</span><br><span class="line">var Days;</span><br><span class="line">(function (Days) &#123;</span><br><span class="line">    Days[Days[&quot;Sun&quot;] = 7] = &quot;Sun&quot;;</span><br><span class="line">    Days[Days[&quot;Mon&quot;] = 8] = &quot;Mon&quot;;</span><br><span class="line">    Days[Days[&quot;Tue&quot;] = 9] = &quot;Tue&quot;;</span><br><span class="line">    Days[Days[&quot;Wed&quot;] = 10] = &quot;Wed&quot;;</span><br><span class="line">    Days[Days[&quot;Thu&quot;] = 11] = &quot;Thu&quot;;</span><br><span class="line">    Days[Days[&quot;Fri&quot;] = 12] = &quot;Fri&quot;;</span><br><span class="line">    Days[Days[&quot;Sat&quot;] = &quot;S&quot;] = &quot;Sat&quot;;</span><br><span class="line">&#125;)(Days || (Days = &#123;&#125;));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å½“ç„¶ï¼Œæ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹ä¹Ÿå¯ä»¥ä¸ºå°æ•°æˆ–è´Ÿæ•°ï¼Œæ­¤æ—¶åç»­æœªæ‰‹åŠ¨èµ‹å€¼çš„é¡¹çš„é€’å¢æ­¥é•¿ä»ä¸º <code>1</code>ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Days &#123;Sun = 7, Mon = 1.5, Tue, Wed, Thu, Fri, Sat&#125;;</span><br><span class="line"></span><br><span class="line">console.log(Days[&quot;Sun&quot;] === 7); // true</span><br><span class="line">console.log(Days[&quot;Mon&quot;] === 1.5); // true</span><br><span class="line">console.log(Days[&quot;Tue&quot;] === 2.5); // true</span><br><span class="line">console.log(Days[&quot;Sat&quot;] === 6.5); // true</span><br></pre></td></tr></table></figure>

<h3 id="3-4-3-å¸¸æ•°é¡¹å’Œè®¡ç®—æ‰€å¾—é¡¹"><a href="#3-4-3-å¸¸æ•°é¡¹å’Œè®¡ç®—æ‰€å¾—é¡¹" class="headerlink" title="3.4.3 å¸¸æ•°é¡¹å’Œè®¡ç®—æ‰€å¾—é¡¹"></a>3.4.3 å¸¸æ•°é¡¹å’Œè®¡ç®—æ‰€å¾—é¡¹</h3><blockquote>
<p>æšä¸¾é¡¹æœ‰ä¸¤ç§ç±»å‹ï¼šå¸¸æ•°é¡¹ï¼ˆ<code>constant member</code>ï¼‰å’Œè®¡ç®—æ‰€å¾—é¡¹ï¼ˆ<code>computed member</code>ï¼‰</p>
</blockquote>
<p>å‰é¢æˆ‘ä»¬æ‰€ä¸¾çš„ä¾‹å­éƒ½æ˜¯å¸¸æ•°é¡¹ï¼Œä¸€ä¸ªå…¸å‹çš„è®¡ç®—æ‰€å¾—é¡¹çš„ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enum Color &#123;Red, Green, Blue = &quot;blue&quot;.length&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>&quot;blue&quot;.length</code> å°±æ˜¯ä¸€ä¸ªè®¡ç®—æ‰€å¾—é¡¹ã€‚</p>
</blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å¦‚æœç´§æ¥åœ¨è®¡ç®—æ‰€å¾—é¡¹åé¢çš„æ˜¯æœªæ‰‹åŠ¨èµ‹å€¼çš„é¡¹ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå› ä¸ºæ— æ³•è·å¾—åˆå§‹å€¼è€ŒæŠ¥é”™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">enum Color &#123;Red = &quot;red&quot;.length, Green, Blue&#125;;</span><br><span class="line"></span><br><span class="line">// index.ts(1,33): error TS1061: Enum member must have initializer.</span><br><span class="line">// index.ts(1,40): error TS1061: Enum member must have initializer.</span><br></pre></td></tr></table></figure>

<h3 id="3-4-4-å¸¸æ•°æšä¸¾"><a href="#3-4-4-å¸¸æ•°æšä¸¾" class="headerlink" title="3.4.4 å¸¸æ•°æšä¸¾"></a>3.4.4 å¸¸æ•°æšä¸¾</h3><blockquote>
<p>å¸¸æ•°æšä¸¾æ˜¯ä½¿ç”¨ <code>const enum</code> å®šä¹‰çš„æšä¸¾ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const enum Directions &#123;</span><br><span class="line">    Up,</span><br><span class="line">    Down,</span><br><span class="line">    Left,</span><br><span class="line">    Right</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¸¸æ•°æšä¸¾ä¸æ™®é€šæšä¸¾çš„åŒºåˆ«æ˜¯ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«åˆ é™¤ï¼Œå¹¶ä¸”ä¸èƒ½åŒ…å«è®¡ç®—æˆå‘˜</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//ä¸Šä¾‹çš„ç¼–è¯‘ç»“æœæ˜¯ï¼š</span><br><span class="line"></span><br><span class="line">var directions = [0 /* Up */, 1 /* Down */, 2 /* Left */, 3 /* Right */];</span><br><span class="line">// å‡å¦‚åŒ…å«äº†è®¡ç®—æˆå‘˜ï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ï¼š</span><br><span class="line"></span><br><span class="line">const enum Color &#123;Red, Green, Blue = &quot;blue&quot;.length&#125;;</span><br><span class="line"></span><br><span class="line">// index.ts(1,38): error TS2474: In &#x27;const&#x27; enum declarations member initializer must be constant expression.</span><br></pre></td></tr></table></figure>

<h3 id="3-4-5-å¤–éƒ¨æšä¸¾"><a href="#3-4-5-å¤–éƒ¨æšä¸¾" class="headerlink" title="3.4.5 å¤–éƒ¨æšä¸¾"></a>3.4.5 å¤–éƒ¨æšä¸¾</h3><blockquote>
<p>å¤–éƒ¨æšä¸¾ï¼ˆ<code>Ambient Enums</code>ï¼‰æ˜¯ä½¿ç”¨ <code>declare enum</code> å®šä¹‰çš„æšä¸¾ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">declare enum Directions &#123;</span><br><span class="line">    Up,</span><br><span class="line">    Down,</span><br><span class="line">    Left,</span><br><span class="line">    Right</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¹‹å‰æåˆ°è¿‡ï¼Œ<code>declare</code> å®šä¹‰çš„ç±»å‹åªä¼šç”¨äºç¼–è¯‘æ—¶çš„æ£€æŸ¥ï¼Œç¼–è¯‘ç»“æœä¸­ä¼šè¢«åˆ é™¤ã€‚</li>
</ul>
<p>ä¸Šä¾‹çš„ç¼–è¯‘ç»“æœæ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤–éƒ¨æšä¸¾ä¸å£°æ˜è¯­å¥ä¸€æ ·ï¼Œå¸¸å‡ºç°åœ¨å£°æ˜æ–‡ä»¶ä¸­ã€‚</li>
<li>åŒæ—¶ä½¿ç”¨ <code>declare</code> å’Œ <code>const</code> ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">declare const enum Directions &#123;</span><br><span class="line">    Up,</span><br><span class="line">    Down,</span><br><span class="line">    Left,</span><br><span class="line">    Right</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];</span><br><span class="line">// ç¼–è¯‘ç»“æœï¼š</span><br><span class="line"></span><br><span class="line">var directions = [0 /* Up */, 1 /* Down */, 2 /* Left */, 3 /* Right */];</span><br></pre></td></tr></table></figure>

<h2 id="3-5-ç±»"><a href="#3-5-ç±»" class="headerlink" title="3.5 ç±»"></a>3.5 ç±»</h2><h3 id="3-5-1-ç±»çš„æ¦‚å¿µ"><a href="#3-5-1-ç±»çš„æ¦‚å¿µ" class="headerlink" title="3.5.1 ç±»çš„æ¦‚å¿µ"></a>3.5.1 ç±»çš„æ¦‚å¿µ</h3><blockquote>
<p>ç±»ç›¸å…³çš„æ¦‚å¿µåšä¸€ä¸ªç®€å•çš„ä»‹ç»</p>
</blockquote>
<ul>
<li>ç±»(<code>Class</code>)ï¼šå®šä¹‰äº†ä¸€ä»¶äº‹ç‰©çš„æŠ½è±¡ç‰¹ç‚¹ï¼ŒåŒ…å«å®ƒçš„å±æ€§å’Œæ–¹æ³•</li>
<li>å¯¹è±¡ï¼ˆ<code>Object</code>ï¼‰ï¼šç±»çš„å®ä¾‹ï¼Œé€šè¿‡ <code>new</code> ç”Ÿæˆ</li>
<li>é¢å‘å¯¹è±¡ï¼ˆ<code>OOP</code>ï¼‰çš„ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€</li>
<li>å°è£…ï¼ˆ<code>Encapsulation</code>ï¼‰ï¼šå°†å¯¹æ•°æ®çš„æ“ä½œç»†èŠ‚éšè—èµ·æ¥ï¼Œåªæš´éœ²å¯¹å¤–çš„æ¥å£ã€‚å¤–ç•Œè°ƒç”¨ç«¯ä¸éœ€è¦ï¼ˆä¹Ÿä¸å¯èƒ½ï¼‰çŸ¥é“ç»†èŠ‚ï¼Œå°±èƒ½é€šè¿‡å¯¹å¤–æä¾›çš„æ¥å£æ¥è®¿é—®è¯¥å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†å¤–ç•Œæ— æ³•ä»»æ„æ›´æ”¹å¯¹è±¡å†…éƒ¨çš„æ•°æ®</li>
<li>ç»§æ‰¿ï¼ˆ<code>Inheritance</code>ï¼‰ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œå­ç±»é™¤äº†æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰ç‰¹æ€§å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ›´å…·ä½“çš„ç‰¹æ€§</li>
<li>å¤šæ€ï¼ˆ<code>Polymorphism</code>ï¼‰ï¼šç”±ç»§æ‰¿è€Œäº§ç”Ÿäº†ç›¸å…³çš„ä¸åŒçš„ç±»ï¼Œå¯¹åŒä¸€ä¸ªæ–¹æ³•å¯ä»¥æœ‰ä¸åŒçš„å“åº”ã€‚æ¯”å¦‚ <code>Cat</code> å’Œ <code>Dog</code> éƒ½ç»§æ‰¿è‡ª <code>Animal</code>ï¼Œä½†æ˜¯åˆ†åˆ«å®ç°äº†è‡ªå·±çš„ <code>eat</code> æ–¹æ³•ã€‚æ­¤æ—¶é’ˆå¯¹æŸä¸€ä¸ªå®ä¾‹ï¼Œæˆ‘ä»¬æ— éœ€äº†è§£å®ƒæ˜¯ <code>Cat</code>è¿˜æ˜¯ <code>Dog</code>ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨ <code>eat</code>æ–¹æ³•ï¼Œç¨‹åºä¼šè‡ªåŠ¨åˆ¤æ–­å‡ºæ¥åº”è¯¥å¦‚ä½•æ‰§è¡Œ <code>eat</code></li>
<li>å­˜å–å™¨ï¼ˆ<code>getter &amp; setter</code>ï¼‰ï¼šç”¨ä»¥æ”¹å˜å±æ€§çš„è¯»å–å’Œèµ‹å€¼è¡Œä¸º</li>
<li>ä¿®é¥°ç¬¦ï¼ˆ<code>Modifiers</code>ï¼‰ï¼šä¿®é¥°ç¬¦æ˜¯ä¸€äº›å…³é”®å­—ï¼Œç”¨äºé™å®šæˆå‘˜æˆ–ç±»å‹çš„æ€§è´¨ã€‚æ¯”å¦‚ <code>public</code> è¡¨ç¤ºå…¬æœ‰å±æ€§æˆ–æ–¹æ³•</li>
<li>æŠ½è±¡ç±»ï¼ˆ<code>Abstract Class</code>ï¼‰ï¼šæŠ½è±¡ç±»æ˜¯ä¾›å…¶ä»–ç±»ç»§æ‰¿çš„åŸºç±»ï¼ŒæŠ½è±¡ç±»ä¸å…è®¸è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨å­ç±»ä¸­è¢«å®ç°</li>
<li>æ¥å£ï¼ˆ<code>Interfaces</code>ï¼‰ï¼šä¸åŒç±»ä¹‹é—´å…¬æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¯ä»¥æŠ½è±¡æˆä¸€ä¸ªæ¥å£ã€‚æ¥å£å¯ä»¥è¢«ç±»å®ç°ï¼ˆ<code>implements</code>ï¼‰ã€‚ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£</li>
</ul>
<h3 id="3-5-2-public-private-å’Œ-protected"><a href="#3-5-2-public-private-å’Œ-protected" class="headerlink" title="3.5.2 public private å’Œ protected"></a>3.5.2 public private å’Œ protected</h3><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeScript` å¯ä»¥ä½¿ç”¨ä¸‰ç§è®¿é—®ä¿®é¥°ç¬¦ï¼ˆ`Access Modifiers`ï¼‰ï¼Œåˆ†åˆ«æ˜¯ `public`ã€`private` å’Œ `protected</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><code>public</code> ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯å…¬æœ‰çš„ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«è®¿é—®åˆ°ï¼Œé»˜è®¤æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯ <code>public</code> çš„</li>
<li><code>private</code> ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®</li>
<li><code>protected</code> ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯å—ä¿æŠ¤çš„ï¼Œå®ƒå’Œ <code>private</code> ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯å®ƒåœ¨å­ç±»ä¸­ä¹Ÿæ˜¯å…è®¸è¢«è®¿é—®çš„</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Animal &#123;</span><br><span class="line">    public name;</span><br><span class="line">    public constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a = new Animal(&#x27;Jack&#x27;);</span><br><span class="line">console.log(a.name); // Jack</span><br><span class="line">a.name = &#x27;Tom&#x27;;</span><br><span class="line">console.log(a.name); // Tom</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>name</code> è¢«è®¾ç½®ä¸ºäº† <code>public</code>ï¼Œæ‰€ä»¥ç›´æ¥è®¿é—®å®ä¾‹çš„ <code>name</code> å±æ€§æ˜¯å…è®¸çš„ã€‚</p>
</blockquote>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰çš„å±æ€§æ˜¯æ— æ³•ç›´æ¥å­˜å–çš„ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨ <code>private</code> äº†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">lass Animal &#123;</span><br><span class="line">    private name;</span><br><span class="line">    public constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a = new Animal(&#x27;Jack&#x27;);</span><br><span class="line">console.log(a.name); // Jack</span><br><span class="line">a.name = &#x27;Tom&#x27;;</span><br><span class="line"></span><br><span class="line">// index.ts(9,13): error TS2341: Property &#x27;name&#x27; is private and only accessible within class &#x27;Animal&#x27;.</span><br><span class="line">// index.ts(10,1): error TS2341: Property &#x27;name&#x27; is private and only accessible within class &#x27;Animal&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ç¼–è¯‘åçš„ä»£ç æ˜¯ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var Animal = (function () &#123;</span><br><span class="line">    function Animal(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    return Animal;</span><br><span class="line">&#125;());</span><br><span class="line">var a = new Animal(&#x27;Jack&#x27;);</span><br><span class="line">console.log(a.name);</span><br><span class="line">a.name = &#x27;Tom&#x27;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨ <code>private</code> ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­ä¹Ÿæ˜¯ä¸å…è®¸è®¿é—®çš„ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Animal &#123;</span><br><span class="line">    private name;</span><br><span class="line">    public constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Cat extends Animal &#123;</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        super(name);</span><br><span class="line">        console.log(this.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.ts(11,17): error TS2341: Property &#x27;name&#x27; is private and only accessible within class &#x27;Animal&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è€Œå¦‚æœæ˜¯ç”¨ <code>protected</code> ä¿®é¥°ï¼Œåˆ™å…è®¸åœ¨å­ç±»ä¸­è®¿é—®</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Animal &#123;</span><br><span class="line">    protected name;</span><br><span class="line">    public constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Cat extends Animal &#123;</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        super(name);</span><br><span class="line">        console.log(this.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-3-æŠ½è±¡ç±»"><a href="#3-5-3-æŠ½è±¡ç±»" class="headerlink" title="3.5.3 æŠ½è±¡ç±»"></a>3.5.3 æŠ½è±¡ç±»</h3><blockquote>
<p><code>abstract</code> ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œå…¶ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚</p>
</blockquote>
<p><strong>ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼Ÿ</strong></p>
<blockquote>
<p>é¦–å…ˆï¼ŒæŠ½è±¡ç±»æ˜¯ä¸å…è®¸è¢«å®ä¾‹åŒ–çš„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">abstract class Animal &#123;</span><br><span class="line">    public name;</span><br><span class="line">    public constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public abstract sayHi();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a = new Animal(&#x27;Jack&#x27;);</span><br><span class="line"></span><br><span class="line">// index.ts(9,11): error TS2511: Cannot create an instance of the abstract class &#x27;Animal&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡ç±» <code>Animal</code>ï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³• <code>sayHi</code>ã€‚åœ¨å®ä¾‹åŒ–æŠ½è±¡ç±»çš„æ—¶å€™æŠ¥é”™äº†ã€‚</p>
</blockquote>
<p>å…¶æ¬¡ï¼ŒæŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•å¿…é¡»è¢«å­ç±»å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">abstract class Animal &#123;</span><br><span class="line">    public name;</span><br><span class="line">    public constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public abstract sayHi();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Cat extends Animal &#123;</span><br><span class="line">    public eat() &#123;</span><br><span class="line">        console.log(`$&#123;this.name&#125; is eating.`);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let cat = new Cat(&#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line">// index.ts(9,7): error TS2515: Non-abstract class &#x27;Cat&#x27; does not implement inherited abstract member &#x27;sayHi&#x27; from class &#x27;Animal&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±» <code>Cat</code> ç»§æ‰¿äº†æŠ½è±¡ç±» <code>Animal</code>ï¼Œä½†æ˜¯æ²¡æœ‰å®ç°æŠ½è±¡æ–¹æ³• <code>sayHi</code>ï¼Œæ‰€ä»¥ç¼–è¯‘æŠ¥é”™äº†ã€‚</p>
</blockquote>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ­£ç¡®ä½¿ç”¨æŠ½è±¡ç±»çš„ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">abstract class Animal &#123;</span><br><span class="line">    public name;</span><br><span class="line">    public constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public abstract sayHi();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Cat extends Animal &#123;</span><br><span class="line">    public sayHi() &#123;</span><br><span class="line">        console.log(`Meow, My name is $&#123;this.name&#125;`);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let cat = new Cat(&#x27;Tom&#x27;);</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†æŠ½è±¡æ–¹æ³• <code>sayHi</code>ï¼Œç¼–è¯‘é€šè¿‡äº†ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œ<code>TypeScript</code> çš„ç¼–è¯‘ç»“æœä¸­ï¼Œä»ç„¶ä¼šå­˜åœ¨è¿™ä¸ªç±»ï¼Œä¸Šé¢çš„ä»£ç çš„ç¼–è¯‘ç»“æœæ˜¯ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">var __extends = (this &amp;&amp; this.__extends) || function (d, b) &#123;</span><br><span class="line">    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];</span><br><span class="line">    function __() &#123; this.constructor = d; &#125;</span><br><span class="line">    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());</span><br><span class="line">&#125;;</span><br><span class="line">var Animal = (function () &#123;</span><br><span class="line">    function Animal(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    return Animal;</span><br><span class="line">&#125;());</span><br><span class="line">var Cat = (function (_super) &#123;</span><br><span class="line">    __extends(Cat, _super);</span><br><span class="line">    function Cat() &#123;</span><br><span class="line">        _super.apply(this, arguments);</span><br><span class="line">    &#125;</span><br><span class="line">    Cat.prototype.sayHi = function () &#123;</span><br><span class="line">        console.log(&#x27;Meow, My name is &#x27; + this.name);</span><br><span class="line">    &#125;;</span><br><span class="line">    return Cat;</span><br><span class="line">&#125;(Animal));</span><br><span class="line">var cat = new Cat(&#x27;Tom&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="3-5-4-ç±»çš„ç±»å‹"><a href="#3-5-4-ç±»çš„ç±»å‹" class="headerlink" title="3.5.4 ç±»çš„ç±»å‹"></a>3.5.4 ç±»çš„ç±»å‹</h3><blockquote>
<p>ç»™ç±»åŠ ä¸Š <code>TypeScript</code> çš„ç±»å‹å¾ˆç®€å•ï¼Œä¸æ¥å£ç±»ä¼¼ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Animal &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    constructor(name: string) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    sayHi(): string &#123;</span><br><span class="line">      return `My name is $&#123;this.name&#125;`;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a: Animal = new Animal(&#x27;Jack&#x27;);</span><br><span class="line">console.log(a.sayHi()); // My name is Jack</span><br></pre></td></tr></table></figure>

<h2 id="3-6-ç±»ä¸æ¥å£"><a href="#3-6-ç±»ä¸æ¥å£" class="headerlink" title="3.6 ç±»ä¸æ¥å£"></a>3.6 ç±»ä¸æ¥å£</h2><h3 id="3-6-1-ç±»å®ç°æ¥å£"><a href="#3-6-1-ç±»å®ç°æ¥å£" class="headerlink" title="3.6.1 ç±»å®ç°æ¥å£"></a>3.6.1 ç±»å®ç°æ¥å£</h3><blockquote>
<p>å®ç°ï¼ˆ<code>implements</code>ï¼‰æ˜¯é¢å‘å¯¹è±¡ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚ä¸€èˆ¬æ¥è®²ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œæœ‰æ—¶å€™ä¸åŒç±»ä¹‹é—´å¯ä»¥æœ‰ä¸€äº›å…±æœ‰çš„ç‰¹æ€§ï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠç‰¹æ€§æå–æˆæ¥å£ï¼ˆ<code>interfaces</code>ï¼‰ï¼Œç”¨ <code>implements</code> å…³é”®å­—æ¥å®ç°ã€‚è¿™ä¸ªç‰¹æ€§å¤§å¤§æé«˜äº†é¢å‘å¯¹è±¡çš„çµæ´»æ€§</p>
</blockquote>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œé—¨æ˜¯ä¸€ä¸ªç±»ï¼Œé˜²ç›—é—¨æ˜¯é—¨çš„å­ç±»ã€‚å¦‚æœé˜²ç›—é—¨æœ‰ä¸€ä¸ªæŠ¥è­¦å™¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„ç»™é˜²ç›—é—¨æ·»åŠ ä¸€ä¸ªæŠ¥è­¦æ–¹æ³•ã€‚è¿™æ—¶å€™å¦‚æœæœ‰å¦ä¸€ä¸ªç±»ï¼Œè½¦ï¼Œä¹Ÿæœ‰æŠ¥è­¦å™¨çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥è€ƒè™‘æŠŠæŠ¥è­¦å™¨æå–å‡ºæ¥ï¼Œä½œä¸ºä¸€ä¸ªæ¥å£ï¼Œé˜²ç›—é—¨å’Œè½¦éƒ½å»å®ç°å®ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    alert();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Door &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SecurityDoor extends Door implements Alarm &#123;</span><br><span class="line">    alert() &#123;</span><br><span class="line">        console.log(&#x27;SecurityDoor alert&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Car implements Alarm &#123;</span><br><span class="line">    alert() &#123;</span><br><span class="line">        console.log(&#x27;Car alert&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    alert();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Light &#123;</span><br><span class="line">    lightOn();</span><br><span class="line">    lightOff();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Car implements Alarm, Light &#123;</span><br><span class="line">    alert() &#123;</span><br><span class="line">        console.log(&#x27;Car alert&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    lightOn() &#123;</span><br><span class="line">        console.log(&#x27;Car light on&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    lightOff() &#123;</span><br><span class="line">        console.log(&#x27;Car light off&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œ<code>Car</code> å®ç°äº† <code>Alarm</code> å’Œ <code>Light</code>æ¥å£ï¼Œæ—¢èƒ½æŠ¥è­¦ï¼Œä¹Ÿèƒ½å¼€å…³è½¦ç¯</p>
</blockquote>
<h3 id="3-6-2-æ¥å£ç»§æ‰¿æ¥å£"><a href="#3-6-2-æ¥å£ç»§æ‰¿æ¥å£" class="headerlink" title="3.6.2 æ¥å£ç»§æ‰¿æ¥å£"></a>3.6.2 æ¥å£ç»§æ‰¿æ¥å£</h3><blockquote>
<p>æ¥å£ä¸æ¥å£ä¹‹é—´å¯ä»¥æ˜¯ç»§æ‰¿å…³ç³»</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    alert();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface LightableAlarm extends Alarm &#123;</span><br><span class="line">    lightOn();</span><br><span class="line">    lightOff();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>extends</code> ä½¿ <code>LightableAlarm</code> ç»§æ‰¿ <code>Alarm</code></p>
</blockquote>
<h3 id="3-6-3-æ¥å£ç»§æ‰¿ç±»"><a href="#3-6-3-æ¥å£ç»§æ‰¿ç±»" class="headerlink" title="3.6.3 æ¥å£ç»§æ‰¿ç±»"></a>3.6.3 æ¥å£ç»§æ‰¿ç±»</h3><blockquote>
<p>æ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿ç±»ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Point &#123;</span><br><span class="line">    x: number;</span><br><span class="line">    y: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Point3d extends Point &#123;</span><br><span class="line">    z: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let point3d: Point3d = &#123;x: 1, y: 2, z: 3&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-6-4-æ··åˆç±»å‹"><a href="#3-6-4-æ··åˆç±»å‹" class="headerlink" title="3.6.4 æ··åˆç±»å‹"></a>3.6.4 æ··åˆç±»å‹</h3><blockquote>
<p>å¯ä»¥ä½¿ç”¨æ¥å£çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°éœ€è¦ç¬¦åˆçš„å½¢çŠ¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface SearchFunc &#123;</span><br><span class="line">    (source: string, subString: string): boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let mySearch: SearchFunc;</span><br><span class="line">mySearch = function(source: string, subString: string) &#123;</span><br><span class="line">    return source.search(subString) !== -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æœ‰æ—¶å€™ï¼Œä¸€ä¸ªå‡½æ•°è¿˜å¯ä»¥æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">interface Counter &#123;</span><br><span class="line">    (start: number): string;</span><br><span class="line">    interval: number;</span><br><span class="line">    reset(): void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getCounter(): Counter &#123;</span><br><span class="line">    let counter = &lt;Counter&gt;function (start: number) &#123; &#125;;</span><br><span class="line">    counter.interval = 123;</span><br><span class="line">    counter.reset = function () &#123; &#125;;</span><br><span class="line">    return counter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let c = getCounter();</span><br><span class="line">c(10);</span><br><span class="line">c.reset();</span><br><span class="line">c.interval = 5.0;</span><br></pre></td></tr></table></figure>

<h2 id="3-7-æ³›å‹"><a href="#3-7-æ³›å‹" class="headerlink" title="3.7 æ³›å‹"></a>3.7 æ³›å‹</h2><blockquote>
<p>æ³›å‹ï¼ˆ<code>Generics</code>ï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§</p>
</blockquote>
<h3 id="3-7-1-ç®€å•çš„ä¾‹å­"><a href="#3-7-1-ç®€å•çš„ä¾‹å­" class="headerlink" title="3.7.1 ç®€å•çš„ä¾‹å­"></a>3.7.1 ç®€å•çš„ä¾‹å­</h3><blockquote>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå‡½æ•° <code>createArray</code>ï¼Œå®ƒå¯ä»¥åˆ›å»ºä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„æ•°ç»„ï¼ŒåŒæ—¶å°†æ¯ä¸€é¡¹éƒ½å¡«å……ä¸€ä¸ªé»˜è®¤å€¼</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function createArray(length: number, value: any): Array&lt;any&gt; &#123;</span><br><span class="line">    let result = [];</span><br><span class="line">    for (let i = 0; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¹‹å‰æåˆ°è¿‡çš„æ•°ç»„æ³›å‹æ¥å®šä¹‰è¿”å›å€¼çš„ç±»å‹ã€‚</li>
<li>è¿™æ®µä»£ç ç¼–è¯‘ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„ç¼ºé™·æ˜¯ï¼Œå®ƒå¹¶æ²¡æœ‰å‡†ç¡®çš„å®šä¹‰è¿”å›å€¼çš„ç±»å‹ï¼š<code>Array</code> å…è®¸æ•°ç»„çš„æ¯ä¸€é¡¹éƒ½ä¸ºä»»æ„ç±»å‹ã€‚ä½†æ˜¯æˆ‘ä»¬é¢„æœŸçš„æ˜¯ï¼Œæ•°ç»„ä¸­æ¯ä¸€é¡¹éƒ½åº”è¯¥æ˜¯è¾“å…¥çš„<code>value</code> çš„ç±»å‹ã€‚</li>
</ul>
<blockquote>
<p>è¿™æ—¶å€™ï¼Œæ³›å‹å°±æ´¾ä¸Šç”¨åœºäº†ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function createArray&lt;T&gt;(length: number, value: T): Array&lt;T&gt; &#123;</span><br><span class="line">    let result: T[] = [];</span><br><span class="line">    for (let i = 0; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray&lt;string&gt;(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°ååæ·»åŠ äº† &#96;&#96;ï¼Œå…¶ä¸­ <code>T</code> ç”¨æ¥æŒ‡ä»£ä»»æ„è¾“å…¥çš„ç±»å‹ï¼Œåœ¨åé¢çš„è¾“å…¥ <code>value: T</code>å’Œè¾“å‡º <code>Array</code>ä¸­å³å¯ä½¿ç”¨äº†</p>
</blockquote>
<p>æ¥ç€åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šå®ƒå…·ä½“çš„ç±»å‹ä¸º <code>string</code>ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸æ‰‹åŠ¨æŒ‡å®šï¼Œè€Œè®©ç±»å‹æ¨è®ºè‡ªåŠ¨æ¨ç®—å‡ºæ¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function createArray&lt;T&gt;(length: number, value: T): Array&lt;T&gt; &#123;</span><br><span class="line">    let result: T[] = [];</span><br><span class="line">    for (let i = 0; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><br></pre></td></tr></table></figure>

<h3 id="3-7-2-å¤šä¸ªç±»å‹å‚æ•°"><a href="#3-7-2-å¤šä¸ªç±»å‹å‚æ•°" class="headerlink" title="3.7.2 å¤šä¸ªç±»å‹å‚æ•°"></a>3.7.2 å¤šä¸ªç±»å‹å‚æ•°</h3><blockquote>
<p>å®šä¹‰æ³›å‹çš„æ—¶å€™ï¼Œå¯ä»¥ä¸€æ¬¡å®šä¹‰å¤šä¸ªç±»å‹å‚æ•°ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function swap&lt;T, U&gt;(tuple: [T, U]): [U, T] &#123;</span><br><span class="line">    return [tuple[1], tuple[0]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">swap([7, &#x27;seven&#x27;]); // [&#x27;seven&#x27;, 7]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>swap</code> å‡½æ•°ï¼Œç”¨æ¥äº¤æ¢è¾“å…¥çš„å…ƒç»„</p>
</blockquote>
<h3 id="3-7-3-æ³›å‹çº¦æŸ"><a href="#3-7-3-æ³›å‹çº¦æŸ" class="headerlink" title="3.7.3 æ³›å‹çº¦æŸ"></a>3.7.3 æ³›å‹çº¦æŸ</h3><blockquote>
<p>åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨æ³›å‹å˜é‡çš„æ—¶å€™ï¼Œç”±äºäº‹å…ˆä¸çŸ¥é“å®ƒæ˜¯å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„çš„æ“ä½œå®ƒçš„å±æ€§æˆ–æ–¹æ³•</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function loggingIdentity&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">    console.log(arg.length);</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.ts(2,19): error TS2339: Property &#x27;length&#x27; does not exist on type &#x27;T&#x27;.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œæ³›å‹ <code>T</code> ä¸ä¸€å®šåŒ…å«å±æ€§ <code>length</code>ï¼Œæ‰€ä»¥ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™äº†ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ³›å‹è¿›è¡Œçº¦æŸï¼Œåªå…è®¸è¿™ä¸ªå‡½æ•°ä¼ å…¥é‚£äº›åŒ…å«<code>length</code> å±æ€§çš„å˜é‡ã€‚è¿™å°±æ˜¯æ³›å‹çº¦æŸ</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Lengthwise &#123;</span><br><span class="line">    length: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T &#123;</span><br><span class="line">    console.log(arg.length);</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>extends</code>çº¦æŸäº†æ³›å‹ <code>T</code> å¿…é¡»ç¬¦åˆæ¥å£ <code>Lengthwise</code> çš„å½¢çŠ¶ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»åŒ…å« <code>length</code> å±æ€§ã€‚</p>
</blockquote>
<blockquote>
<p>æ­¤æ—¶å¦‚æœè°ƒç”¨ <code>loggingIdentity</code> çš„æ—¶å€™ï¼Œä¼ å…¥çš„ <code>arg</code>ä¸åŒ…å« <code>length</code>ï¼Œé‚£ä¹ˆåœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šæŠ¥é”™äº†</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface Lengthwise &#123;</span><br><span class="line">    length: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T &#123;</span><br><span class="line">    console.log(arg.length);</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loggingIdentity(7);</span><br><span class="line"></span><br><span class="line">// index.ts(10,17): error TS2345: Argument of type &#x27;7&#x27; is not assignable to parameter of type &#x27;Lengthwise&#x27;.</span><br></pre></td></tr></table></figure>

<p><strong>å¤šä¸ªç±»å‹å‚æ•°ä¹‹é—´ä¹Ÿå¯ä»¥äº’ç›¸çº¦æŸï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function copyFields&lt;T extends U, U&gt;(target: T, source: U): T &#123;</span><br><span class="line">    for (let id in source) &#123;</span><br><span class="line">        target[id] = (&lt;T&gt;source)[id];</span><br><span class="line">    &#125;</span><br><span class="line">    return target;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let x = &#123; a: 1, b: 2, c: 3, d: 4 &#125;;</span><br><span class="line"></span><br><span class="line">copyFields(x, &#123; b: 10, d: 20 &#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªç±»å‹å‚æ•°ï¼Œå…¶ä¸­è¦æ±‚ <code>T</code> ç»§æ‰¿ <code>U</code>ï¼Œè¿™æ ·å°±ä¿è¯äº†<code>U</code> ä¸Šä¸ä¼šå‡ºç° <code>T</code> ä¸­ä¸å­˜åœ¨çš„å­—æ®µ</p>
</blockquote>
<h3 id="3-7-4-æ³›å‹æ¥å£"><a href="#3-7-4-æ³›å‹æ¥å£" class="headerlink" title="3.7.4 æ³›å‹æ¥å£"></a>3.7.4 æ³›å‹æ¥å£</h3><blockquote>
<p>å¯ä»¥ä½¿ç”¨æ¥å£çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°éœ€è¦ç¬¦åˆçš„å½¢çŠ¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface SearchFunc &#123;</span><br><span class="line">  (source: string, subString: string): boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let mySearch: SearchFunc;</span><br><span class="line">mySearch = function(source: string, subString: string) &#123;</span><br><span class="line">    return source.search(subString) !== -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å«æœ‰æ³›å‹çš„æ¥å£æ¥å®šä¹‰å‡½æ•°çš„å½¢çŠ¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">interface CreateArrayFunc &#123;</span><br><span class="line">    &lt;T&gt;(length: number, value: T): Array&lt;T&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let createArray: CreateArrayFunc;</span><br><span class="line">createArray = function&lt;T&gt;(length: number, value: T): Array&lt;T&gt; &#123;</span><br><span class="line">    let result: T[] = [];</span><br><span class="line">    for (let i = 0; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ³›å‹å‚æ•°æå‰åˆ°æ¥å£åä¸Š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">interface CreateArrayFunc&lt;T&gt; &#123;</span><br><span class="line">    (length: number, value: T): Array&lt;T&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let createArray: CreateArrayFunc&lt;any&gt;;</span><br><span class="line">createArray = function&lt;T&gt;(length: number, value: T): Array&lt;T&gt; &#123;</span><br><span class="line">    let result: T[] = [];</span><br><span class="line">    for (let i = 0; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼Œæ­¤æ—¶åœ¨ä½¿ç”¨æ³›å‹æ¥å£çš„æ—¶å€™ï¼Œéœ€è¦å®šä¹‰æ³›å‹çš„ç±»å‹</p>
</blockquote>
<h3 id="3-7-5-æ³›å‹ç±»"><a href="#3-7-5-æ³›å‹ç±»" class="headerlink" title="3.7.5 æ³›å‹ç±»"></a>3.7.5 æ³›å‹ç±»</h3><blockquote>
<p>ä¸æ³›å‹æ¥å£ç±»ä¼¼ï¼Œæ³›å‹ä¹Ÿå¯ä»¥ç”¨äºç±»çš„ç±»å‹å®šä¹‰ä¸­</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class GenericNumber&lt;T&gt; &#123;</span><br><span class="line">    zeroValue: T;</span><br><span class="line">    add: (x: T, y: T) =&gt; T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let myGenericNumber = new GenericNumber&lt;number&gt;();</span><br><span class="line"></span><br><span class="line">myGenericNumber.zeroValue = 0;</span><br><span class="line">myGenericNumber.add = function(x, y) &#123; return x + y; &#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-7-6-æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹"><a href="#3-7-6-æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹" class="headerlink" title="3.7.6 æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹"></a>3.7.6 æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹</h3><blockquote>
<p>åœ¨ <code>TypeScript 2.3</code>ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ³›å‹ä¸­çš„ç±»å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ã€‚å½“ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰åœ¨ä»£ç ä¸­ç›´æ¥æŒ‡å®šç±»å‹å‚æ•°ï¼Œä»å®é™…å€¼å‚æ•°ä¸­ä¹Ÿæ— æ³•æ¨æµ‹å‡ºæ—¶ï¼Œè¿™ä¸ªé»˜è®¤ç±»å‹å°±ä¼šèµ·ä½œç”¨</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function createArray&lt;T = string&gt;(length: number, value: T): Array&lt;T&gt; &#123;</span><br><span class="line">    let result: T[] = [];</span><br><span class="line">    for (let i = 0; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-8-å£°æ˜åˆå¹¶"><a href="#3-8-å£°æ˜åˆå¹¶" class="headerlink" title="3.8 å£°æ˜åˆå¹¶"></a>3.8 å£°æ˜åˆå¹¶</h2><blockquote>
<p>å¦‚æœå®šä¹‰äº†ä¸¤ä¸ªç›¸åŒåå­—çš„å‡½æ•°ã€æ¥å£æˆ–ç±»ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šåˆå¹¶æˆä¸€ä¸ªç±»å‹</p>
</blockquote>
<h3 id="3-8-1-å‡½æ•°çš„åˆå¹¶"><a href="#3-8-1-å‡½æ•°çš„åˆå¹¶" class="headerlink" title="3.8.1 å‡½æ•°çš„åˆå¹¶"></a>3.8.1 å‡½æ•°çš„åˆå¹¶</h3><blockquote>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é‡è½½å®šä¹‰å¤šä¸ªå‡½æ•°ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function reverse(x: number): number;</span><br><span class="line">function reverse(x: string): string;</span><br><span class="line"></span><br><span class="line">function reverse(x: number | string): number | string &#123;</span><br><span class="line">    if (typeof x === &#x27;number&#x27;) &#123;</span><br><span class="line">        return Number(x.toString().split(&#x27;&#x27;).reverse().join(&#x27;&#x27;));</span><br><span class="line">    &#125; else if (typeof x === &#x27;string&#x27;) &#123;</span><br><span class="line">        return x.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-8-2-æ¥å£çš„åˆå¹¶"><a href="#3-8-2-æ¥å£çš„åˆå¹¶" class="headerlink" title="3.8.2 æ¥å£çš„åˆå¹¶"></a>3.8.2 æ¥å£çš„åˆå¹¶</h3><blockquote>
<p>æ¥å£ä¸­çš„å±æ€§åœ¨åˆå¹¶æ—¶ä¼šç®€å•çš„åˆå¹¶åˆ°ä¸€ä¸ªæ¥å£ä¸­</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    price: number;</span><br><span class="line">&#125;</span><br><span class="line">interface Alarm &#123;</span><br><span class="line">    weight: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç›¸å½“äºï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    price: number;</span><br><span class="line">    weight: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼Œåˆå¹¶çš„å±æ€§çš„ç±»å‹å¿…é¡»æ˜¯å”¯ä¸€çš„</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    price: number;</span><br><span class="line">&#125;</span><br><span class="line">interface Alarm &#123;</span><br><span class="line">    price: number;  // è™½ç„¶é‡å¤äº†ï¼Œä½†æ˜¯ç±»å‹éƒ½æ˜¯ `number`ï¼Œæ‰€ä»¥ä¸ä¼šæŠ¥é”™</span><br><span class="line">    weight: number;</span><br><span class="line">&#125;</span><br><span class="line">interface Alarm &#123;</span><br><span class="line">    price: number;</span><br><span class="line">&#125;</span><br><span class="line">interface Alarm &#123;</span><br><span class="line">    price: string;  // ç±»å‹ä¸ä¸€è‡´ï¼Œä¼šæŠ¥é”™</span><br><span class="line">    weight: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.ts(5,3): error TS2403: Subsequent variable declarations must have the same type.  Variable &#x27;price&#x27; must be of type &#x27;number&#x27;, but here has type &#x27;string&#x27;.</span><br></pre></td></tr></table></figure>

<p><strong>æ¥å£ä¸­æ–¹æ³•çš„åˆå¹¶ï¼Œä¸å‡½æ•°çš„åˆå¹¶ä¸€æ ·</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    price: number;</span><br><span class="line">    alert(s: string): string;</span><br><span class="line">&#125;</span><br><span class="line">interface Alarm &#123;</span><br><span class="line">    weight: number;</span><br><span class="line">    alert(s: string, n: number): string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸å½“äºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    price: number;</span><br><span class="line">    weight: number;</span><br><span class="line">    alert(s: string): string;</span><br><span class="line">    alert(s: string, n: number): string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-8-3-ç±»çš„åˆå¹¶"><a href="#3-8-3-ç±»çš„åˆå¹¶" class="headerlink" title="3.8.3 ç±»çš„åˆå¹¶"></a>3.8.3 ç±»çš„åˆå¹¶</h3><blockquote>
<p>ç±»çš„åˆå¹¶ä¸æ¥å£çš„åˆå¹¶è§„åˆ™ä¸€è‡´</p>
</blockquote>
<h1 id="å››ã€å·¥ç¨‹"><a href="#å››ã€å·¥ç¨‹" class="headerlink" title="å››ã€å·¥ç¨‹"></a>å››ã€å·¥ç¨‹</h1><h2 id="4-1-tsconfig-json"><a href="#4-1-tsconfig-json" class="headerlink" title="4.1 tsconfig.json"></a>4.1 tsconfig.json</h2><p><strong>ç¼–è¯‘é€‰é¡¹</strong></p>
<blockquote>
<p>ä½ å¯ä»¥é€šè¿‡ <code>compilerOptions</code> æ¥å®šåˆ¶ä½ çš„ç¼–è¯‘é€‰é¡¹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line"></span><br><span class="line">    /* åŸºæœ¬é€‰é¡¹ */</span><br><span class="line">    &quot;target&quot;: &quot;es5&quot;,                       // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, or &#x27;ESNEXT&#x27;</span><br><span class="line">    &quot;module&quot;: &quot;commonjs&quot;,                  // æŒ‡å®šä½¿ç”¨æ¨¡å—: &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27; or &#x27;es2015&#x27;</span><br><span class="line">    &quot;lib&quot;: [],                             // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶</span><br><span class="line">    &quot;allowJs&quot;: true,                       // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶</span><br><span class="line">    &quot;checkJs&quot;: true,                       // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯</span><br><span class="line">    &quot;jsx&quot;: &quot;preserve&quot;,                     // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: &#x27;preserve&#x27;, &#x27;react-native&#x27;, or &#x27;react&#x27;</span><br><span class="line">    &quot;declaration&quot;: true,                   // ç”Ÿæˆç›¸åº”çš„ &#x27;.d.ts&#x27; æ–‡ä»¶</span><br><span class="line">    &quot;sourceMap&quot;: true,                     // ç”Ÿæˆç›¸åº”çš„ &#x27;.map&#x27; æ–‡ä»¶</span><br><span class="line">    &quot;outFile&quot;: &quot;./&quot;,                       // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶</span><br><span class="line">    &quot;outDir&quot;: &quot;./&quot;,                        // æŒ‡å®šè¾“å‡ºç›®å½•</span><br><span class="line">    &quot;rootDir&quot;: &quot;./&quot;,                       // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.</span><br><span class="line">    &quot;removeComments&quot;: true,                // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š</span><br><span class="line">    &quot;noEmit&quot;: true,                        // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶</span><br><span class="line">    &quot;importHelpers&quot;: true,                 // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°</span><br><span class="line">    &quot;isolatedModules&quot;: true,               // å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ &#x27;ts.transpileModule&#x27; ç±»ä¼¼ï¼‰.</span><br><span class="line"></span><br><span class="line">    /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */</span><br><span class="line">    &quot;strict&quot;: true,                        // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹</span><br><span class="line">    &quot;noImplicitAny&quot;: true,                 // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™</span><br><span class="line">    &quot;strictNullChecks&quot;: true,              // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥</span><br><span class="line">    &quot;noImplicitThis&quot;: true,                // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯</span><br><span class="line">    &quot;alwaysStrict&quot;: true,                  // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ &#x27;use strict&#x27;</span><br><span class="line"></span><br><span class="line">    /* é¢å¤–çš„æ£€æŸ¥ */</span><br><span class="line">    &quot;noUnusedLocals&quot;: true,                // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">    &quot;noUnusedParameters&quot;: true,            // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">    &quot;noImplicitReturns&quot;: true,             // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">    &quot;noFallthroughCasesInSwitch&quot;: true,    // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰</span><br><span class="line"></span><br><span class="line">    /* æ¨¡å—è§£æé€‰é¡¹ */</span><br><span class="line">    &quot;moduleResolution&quot;: &quot;node&quot;,            // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š &#x27;node&#x27; (Node.js) or &#x27;classic&#x27; (TypeScript pre-1.6)</span><br><span class="line">    &quot;baseUrl&quot;: &quot;./&quot;,                       // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•</span><br><span class="line">    &quot;paths&quot;: &#123;&#125;,                           // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨</span><br><span class="line">    &quot;rootDirs&quot;: [],                        // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹</span><br><span class="line">    &quot;typeRoots&quot;: [],                       // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨</span><br><span class="line">    &quot;types&quot;: [],                           // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨</span><br><span class="line">    &quot;allowSyntheticDefaultImports&quot;: true,  // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚</span><br><span class="line"></span><br><span class="line">    /* Source Map Options */</span><br><span class="line">    &quot;sourceRoot&quot;: &quot;./&quot;,                    // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®</span><br><span class="line">    &quot;mapRoot&quot;: &quot;./&quot;,                       // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®</span><br><span class="line">    &quot;inlineSourceMap&quot;: true,               // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶</span><br><span class="line">    &quot;inlineSources&quot;: true,                 // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§</span><br><span class="line"></span><br><span class="line">    /* å…¶ä»–é€‰é¡¹ */</span><br><span class="line">    &quot;experimentalDecorators&quot;: true,        // å¯ç”¨è£…é¥°å™¨</span><br><span class="line">    &quot;emitDecoratorMetadata&quot;: true          // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-2-TypeScript-ç¼–è¯‘"><a href="#4-2-TypeScript-ç¼–è¯‘" class="headerlink" title="4.2 TypeScript ç¼–è¯‘"></a>4.2 TypeScript ç¼–è¯‘</h2><blockquote>
<p>è¿è¡Œ <code>tsc -p ./path-to-project-directory</code> ã€‚<code>tsc -w</code>æ¥å¯ç”¨ <code>TypeScript</code>ç¼–è¯‘å™¨çš„è§‚æµ‹æ¨¡å¼ï¼Œåœ¨æ£€æµ‹åˆ°æ–‡ä»¶æ”¹åŠ¨ä¹‹åï¼Œå®ƒå°†é‡æ–°ç¼–è¯‘</p>
</blockquote>
<p><strong>æŒ‡å®šéœ€è¦ç¼–è¯‘çš„æ–‡ä»¶</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;files&quot;: [</span><br><span class="line">    &quot;./some/file.ts&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ include å’Œ exclude é€‰é¡¹æ¥æŒ‡å®šéœ€è¦åŒ…å«çš„æ–‡ä»¶ï¼Œå’Œæ’é™¤çš„æ–‡ä»¶</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;include&quot;: [</span><br><span class="line">    &quot;./folder&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;exclude&quot;: [</span><br><span class="line">    &quot;./folder/**/*.spec.ts&quot;,</span><br><span class="line">    &quot;./folder/someSubFolder&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="äº”ã€ä¸€äº›ä¾‹å­æ¼”ç¤º"><a href="#äº”ã€ä¸€äº›ä¾‹å­æ¼”ç¤º" class="headerlink" title="äº”ã€ä¸€äº›ä¾‹å­æ¼”ç¤º"></a>äº”ã€ä¸€äº›ä¾‹å­æ¼”ç¤º</h1><h2 id="5-1-å®šä¹‰ajaxè¯·æ±‚æ•°æ®æ¥å£"><a href="#5-1-å®šä¹‰ajaxè¯·æ±‚æ•°æ®æ¥å£" class="headerlink" title="5.1 å®šä¹‰ajaxè¯·æ±‚æ•°æ®æ¥å£"></a>5.1 å®šä¹‰ajaxè¯·æ±‚æ•°æ®æ¥å£</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">interface Config&#123;</span><br><span class="line">    type:string;</span><br><span class="line">    url:string;</span><br><span class="line">    data?:string;</span><br><span class="line">    dataType:string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åŸç”Ÿjså°è£…çš„ajax </span><br><span class="line">function ajax(config:Config)&#123;</span><br><span class="line"></span><br><span class="line">   var xhr=new XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">   xhr.open(config.type,config.url,true);</span><br><span class="line"></span><br><span class="line">   xhr.send(config.data);</span><br><span class="line"></span><br><span class="line">   xhr.onreadystatechange=function()&#123;</span><br><span class="line"></span><br><span class="line">        if(xhr.readyState==4 &amp;&amp; xhr.status==200)&#123;</span><br><span class="line">            console.log(&#x27;chengong&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            if(config.dataType==&#x27;json&#x27;)&#123;</span><br><span class="line"></span><br><span class="line">                console.log(JSON.parse(xhr.responseText));</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                console.log(xhr.responseText)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ajax(&#123;</span><br><span class="line">    type:&#x27;get&#x27;,</span><br><span class="line">    data:&#x27;name=zhangsan&#x27;,</span><br><span class="line">    url:&#x27;http://a.itying.com/api/productlist&#x27;, //api</span><br><span class="line">    dataType:&#x27;json&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="5-2-å‡½æ•°ç±»å‹æ¥å£-å¯¹æ–¹æ³•çº¦æŸ"><a href="#5-2-å‡½æ•°ç±»å‹æ¥å£-å¯¹æ–¹æ³•çº¦æŸ" class="headerlink" title="5.2 å‡½æ•°ç±»å‹æ¥å£-å¯¹æ–¹æ³•çº¦æŸ"></a>5.2 å‡½æ•°ç±»å‹æ¥å£-å¯¹æ–¹æ³•çº¦æŸ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// å‡½æ•°ç±»å‹æ¥å£:å¯¹æ–¹æ³•ä¼ å…¥çš„å‚æ•° ä»¥åŠè¿”å›å€¼è¿›è¡Œçº¦æŸ   æ‰¹é‡çº¦æŸ</span><br><span class="line"></span><br><span class="line">// åŠ å¯†çš„å‡½æ•°ç±»å‹æ¥å£</span><br><span class="line"></span><br><span class="line">interface encrypt&#123;</span><br><span class="line">    (key:string,value:string):string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var md5:encrypt=function(key:string,value:string):string&#123;</span><br><span class="line">        //æ¨¡æ‹Ÿæ“ä½œ</span><br><span class="line">        return key+value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(md5(&#x27;name&#x27;,&#x27;zhangsan&#x27;));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var sha1:encrypt=function(key:string,value:string):string&#123;</span><br><span class="line"></span><br><span class="line">    //æ¨¡æ‹Ÿæ“ä½œ</span><br><span class="line">    return key+&#x27;----&#x27;+value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(sha1(&#x27;name&#x27;,&#x27;lisi&#x27;));</span><br></pre></td></tr></table></figure>

<h2 id="5-3-å¯ç´¢å¼•æ¥å£ï¼šæ•°ç»„ã€å¯¹è±¡çš„çº¦æŸï¼ˆä¸å¸¸ç”¨ï¼‰"><a href="#5-3-å¯ç´¢å¼•æ¥å£ï¼šæ•°ç»„ã€å¯¹è±¡çš„çº¦æŸï¼ˆä¸å¸¸ç”¨ï¼‰" class="headerlink" title="5.3 å¯ç´¢å¼•æ¥å£ï¼šæ•°ç»„ã€å¯¹è±¡çš„çº¦æŸï¼ˆä¸å¸¸ç”¨ï¼‰"></a>5.3 å¯ç´¢å¼•æ¥å£ï¼šæ•°ç»„ã€å¯¹è±¡çš„çº¦æŸï¼ˆä¸å¸¸ç”¨ï¼‰</h2><h3 id="5-3-1-å¯ç´¢å¼•æ¥å£-å¯¹æ•°ç»„çš„çº¦æŸ"><a href="#5-3-1-å¯ç´¢å¼•æ¥å£-å¯¹æ•°ç»„çš„çº¦æŸ" class="headerlink" title="5.3.1 å¯ç´¢å¼•æ¥å£-å¯¹æ•°ç»„çš„çº¦æŸ"></a>5.3.1 å¯ç´¢å¼•æ¥å£-å¯¹æ•°ç»„çš„çº¦æŸ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface UserArr&#123;</span><br><span class="line">    [index:number]:string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var arr:UserArr=[&#x27;aaa&#x27;,&#x27;bbb&#x27;];</span><br><span class="line"></span><br><span class="line">console.log(arr[0]);</span><br></pre></td></tr></table></figure>

<h3 id="5-3-2-å¯ç´¢å¼•æ¥å£-å¯¹å¯¹è±¡çš„çº¦æŸ"><a href="#5-3-2-å¯ç´¢å¼•æ¥å£-å¯¹å¯¹è±¡çš„çº¦æŸ" class="headerlink" title="5.3.2 å¯ç´¢å¼•æ¥å£-å¯¹å¯¹è±¡çš„çº¦æŸ"></a>5.3.2 å¯ç´¢å¼•æ¥å£-å¯¹å¯¹è±¡çš„çº¦æŸ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface UserObj&#123;</span><br><span class="line">    [index:string]:string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var arr:UserObj=&#123;name:&#x27;å¼ ä¸‰&#x27;&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-3-ç±»ç±»å‹æ¥å£-å¯¹ç±»çš„çº¦æŸ"><a href="#5-3-3-ç±»ç±»å‹æ¥å£-å¯¹ç±»çš„çº¦æŸ" class="headerlink" title="5.3.3 ç±»ç±»å‹æ¥å£:å¯¹ç±»çš„çº¦æŸ"></a>5.3.3 ç±»ç±»å‹æ¥å£:å¯¹ç±»çš„çº¦æŸ</h3><ul>
<li>æŠ½è±¡ç±»æŠ½è±¡æœ‰ç‚¹ç›¸ä¼¼</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">interface Animal&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    eat(str:string):void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Dog implements Animal&#123;</span><br><span class="line"></span><br><span class="line">    name:string;</span><br><span class="line">    constructor(name:string)&#123;</span><br><span class="line"></span><br><span class="line">        this.name=name;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    eat()&#123;</span><br><span class="line"></span><br><span class="line">        console.log(this.name+&#x27;åƒç²®é£Ÿ&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var d=new Dog(&#x27;å°é»‘&#x27;);</span><br><span class="line">d.eat();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Cat implements Animal&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    constructor(name:string)&#123;</span><br><span class="line"></span><br><span class="line">        this.name=name;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    eat(food:string)&#123;</span><br><span class="line"></span><br><span class="line">        console.log(this.name+&#x27;åƒ&#x27;+food);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var c=new Cat(&#x27;å°èŠ±&#x27;);</span><br><span class="line">c.eat(&#x27;è€é¼ &#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="5-4-æ¥å£çš„æ‰©å±•"><a href="#5-4-æ¥å£çš„æ‰©å±•" class="headerlink" title="5.4 æ¥å£çš„æ‰©å±•"></a>5.4 æ¥å£çš„æ‰©å±•</h2><blockquote>
<p>æ¥å£ç»§æ‰¿æ¥å£ ç±»å®ç°æ¥å£</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">interface Animal&#123;</span><br><span class="line">    eat():void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Person extends Animal&#123;</span><br><span class="line"></span><br><span class="line">    work():void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Programmer&#123;</span><br><span class="line"></span><br><span class="line">    public name:string;</span><br><span class="line">    constructor(name:string)&#123;</span><br><span class="line">        this.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    coding(code:string)&#123;</span><br><span class="line"></span><br><span class="line">        console.log(this.name+code)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Web extends Programmer implements Person&#123;</span><br><span class="line">    </span><br><span class="line">    constructor(name:string)&#123;</span><br><span class="line">       super(name)</span><br><span class="line">    &#125;</span><br><span class="line">    eat()&#123;</span><br><span class="line"></span><br><span class="line">        console.log(this.name+&#x27;å–œæ¬¢åƒé¦’å¤´&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    work()&#123;</span><br><span class="line"></span><br><span class="line">        console.log(this.name+&#x27;å†™ä»£ç &#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var w=new Web(&#x27;å°æ&#x27;);</span><br><span class="line"></span><br><span class="line">// w.eat();</span><br><span class="line"></span><br><span class="line">w.coding(&#x27;å†™tsä»£ç &#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="5-5-æ³›å‹ç±»æ¥å£"><a href="#5-5-æ³›å‹ç±»æ¥å£" class="headerlink" title="5.5 æ³›å‹ç±»æ¥å£"></a>5.5 æ³›å‹ç±»æ¥å£</h2><h3 id="5-5-1-æ³›å‹ç±»-æ³›å‹æ–¹æ³•"><a href="#5-5-1-æ³›å‹ç±»-æ³›å‹æ–¹æ³•" class="headerlink" title="5.5.1 æ³›å‹ç±» æ³›å‹æ–¹æ³•"></a>5.5.1 æ³›å‹ç±» æ³›å‹æ–¹æ³•</h3><ul>
<li>æ³›å‹ï¼šè½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„<code>API</code>ï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚</li>
<li>åœ¨åƒ<code>C#</code>å’Œ<code>Java</code>è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚</li>
<li>é€šä¿—ç†è§£ï¼šæ³›å‹å°±æ˜¯è§£å†³ç±»æ¥å£æ–¹æ³•çš„å¤ç”¨æ€§ã€ä»¥åŠå¯¹ä¸ç‰¹å®šæ•°æ®ç±»å‹çš„æ”¯æŒ(ç±»å‹æ ¡éªŒ)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// åªèƒ½è¿”å›stringç±»å‹çš„æ•°æ®</span><br><span class="line">function getData(value:string):string&#123;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åŒæ—¶è¿”å› stringç±»å‹ å’Œnumberç±»å‹  ï¼ˆä»£ç å†—ä½™ï¼‰</span><br><span class="line">function getData1(value:string):string&#123;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line">function getData2(value:number):number&#123;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line">//åŒæ—¶è¿”å› stringç±»å‹ å’Œnumberç±»å‹  anyå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> function getData(value:any):any&#123;</span><br><span class="line">    return &#x27;å“ˆå“ˆå“ˆ&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">getData(123);</span><br><span class="line">getData(&#x27;str&#x27;);</span><br><span class="line">//anyæ”¾å¼ƒäº†ç±»å‹æ£€æŸ¥,ä¼ å…¥ä»€ä¹ˆ è¿”å›ä»€ä¹ˆã€‚æ¯”å¦‚:ä¼ å…¥number ç±»å‹å¿…é¡»è¿”å›numberç±»å‹  ä¼ å…¥ stringç±»å‹å¿…é¡»è¿”å›stringç±»å‹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//ä¼ å…¥çš„å‚æ•°ç±»å‹å’Œè¿”å›çš„å‚æ•°ç±»å‹å¯ä»¥ä¸ä¸€è‡´</span><br><span class="line">function getData(value:any):any&#123;</span><br><span class="line">  return &#x27;å“ˆå“ˆå“ˆ&#x27;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>T</code>è¡¨ç¤ºæ³›å‹ï¼Œå…·ä½“ä»€ä¹ˆç±»å‹æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å†³å®šçš„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// Tè¡¨ç¤ºæ³›å‹ï¼Œå…·ä½“ä»€ä¹ˆç±»å‹æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å†³å®šçš„</span><br><span class="line"></span><br><span class="line">function getData&lt;T&gt;(value:T):T&#123;</span><br><span class="line">   return value;</span><br><span class="line">&#125;</span><br><span class="line">getData&lt;number&gt;(123);</span><br><span class="line"></span><br><span class="line">getData&lt;string&gt;(&#x27;1214231&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">getData&lt;number&gt;(&#x27;2112&#x27;);       /*é”™è¯¯çš„å†™æ³•*/</span><br><span class="line">function getData&lt;T&gt;(value:T):any&#123;</span><br><span class="line">   return &#x27;2145214214&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getData&lt;number&gt;(123);  //å‚æ•°å¿…é¡»æ˜¯number</span><br><span class="line"></span><br><span class="line">getData&lt;string&gt;(&#x27;è¿™æ˜¯ä¸€ä¸ªæ³›å‹&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>æ³›å‹ç±»</strong></p>
<blockquote>
<p>æ³›å‹ç±»ï¼šæ¯”å¦‚æœ‰ä¸ªæœ€å°å †ç®—æ³•ï¼Œéœ€è¦åŒæ—¶æ”¯æŒè¿”å›æ•°å­—å’Œå­—ç¬¦ä¸² <code>a - z</code>ä¸¤ç§ç±»å‹ã€‚ é€šè¿‡ç±»çš„æ³›å‹æ¥å®ç°</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// åŸºæœ¬å†™æ³• ä½†æ˜¯ä¸èƒ½ä¼ å…¥å­—ç¬¦ä¸²</span><br><span class="line">class MinClass&#123;</span><br><span class="line">    public list:number[]=[];</span><br><span class="line">    add(num:number)&#123;</span><br><span class="line">        this.list.push(num)</span><br><span class="line">    &#125;</span><br><span class="line">    min():number&#123;</span><br><span class="line">        var minNum=this.list[0];</span><br><span class="line">        for(var i=0;i&lt;this.list.length;i++)&#123;</span><br><span class="line">            if(minNum&gt;this.list[i])&#123;</span><br><span class="line">                minNum=this.list[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return minNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var m=new MinClass();</span><br><span class="line"></span><br><span class="line">m.add(3);</span><br><span class="line">m.add(22);</span><br><span class="line">m.add(23);</span><br><span class="line">m.add(6);</span><br><span class="line"></span><br><span class="line">m.add(7);</span><br><span class="line">alert(m.min());</span><br></pre></td></tr></table></figure>

<p><strong>ç±»çš„æ³›å‹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// é€šè¿‡æ³›å‹æ”¹å†™ å¯ä»¥åŒæ—¶ä¼ å…¥number å­—ç¬¦ä¸²ç­‰</span><br><span class="line">//ç±»çš„æ³›å‹</span><br><span class="line">class MinClas&lt;T&gt;&#123;</span><br><span class="line"></span><br><span class="line">    public list:T[]=[];</span><br><span class="line"></span><br><span class="line">    add(value:T):void&#123;</span><br><span class="line"></span><br><span class="line">        this.list.push(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    min():T&#123;        </span><br><span class="line">        var minNum=this.list[0];</span><br><span class="line">        for(var i=0;i&lt;this.list.length;i++)&#123;</span><br><span class="line">            if(minNum&gt;this.list[i])&#123;</span><br><span class="line">                minNum=this.list[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return minNum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var m1=new MinClas&lt;number&gt;();   /*å®ä¾‹åŒ–ç±» å¹¶ä¸”åˆ¶å®šäº†ç±»çš„Tä»£è¡¨çš„ç±»å‹æ˜¯number*/</span><br><span class="line">m1.add(11);</span><br><span class="line">m1.add(3);</span><br><span class="line">m1.add(2);</span><br><span class="line">alert(m1.min())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var m2=new MinClas&lt;string&gt;();   /*å®ä¾‹åŒ–ç±» å¹¶ä¸”åˆ¶å®šäº†ç±»çš„Tä»£è¡¨çš„ç±»å‹æ˜¯string*/</span><br><span class="line"></span><br><span class="line">m2.add(&#x27;c&#x27;);</span><br><span class="line">m2.add(&#x27;a&#x27;);</span><br><span class="line">m2.add(&#x27;v&#x27;);</span><br><span class="line">alert(m2.min())</span><br></pre></td></tr></table></figure>

<h3 id="5-5-2-æ³›å‹æ¥å£"><a href="#5-5-2-æ³›å‹æ¥å£" class="headerlink" title="5.5.2 æ³›å‹æ¥å£"></a>5.5.2 æ³›å‹æ¥å£</h3><p><strong>1. æ–¹å¼1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface ConfigFn&#123;</span><br><span class="line"></span><br><span class="line">    &lt;T&gt;(value:T):T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var getData:ConfigFn=function&lt;T&gt;(value:T):T&#123;</span><br><span class="line"></span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">getData&lt;string&gt;(&#x27;å¼ ä¸‰&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// getData&lt;string&gt;(1243);  //é”™è¯¯</span><br></pre></td></tr></table></figure>

<p><strong>2. æ–¹å¼2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">interface ConfigFn&lt;T&gt;&#123;</span><br><span class="line">    (value:T):T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function getData&lt;T&gt;(value:T):T&#123;</span><br><span class="line"></span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var myGetData:ConfigFn&lt;string&gt;=getData;     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myGetData(&#x27;20&#x27;);  /*æ­£ç¡®*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// myGetData(20)  //é”™è¯¯</span><br></pre></td></tr></table></figure>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/08/23/html+css+js+ts/5-Typescript%E6%80%BB%E7%BB%93/">Read More</a>
    </footer>
</div>



<ul class="cube-pagination cube-pagination-9">
    
    <li class="cube-pagination-prev">
        <a href="/">Â« Prev</a>
    </li>
    
    
        
            
                
                <li class="cube-pagination-index">
                    <a href="/">1</a>
                </li>
                
            
                
                <li class="cube-pagination-index disabled">
                    <span>2</span>
                </li>
                
            
                
                <li class="cube-pagination-index">
                    <a href="/page/3">3</a>
                </li>
                
            
                
                <li class="cube-pagination-index">
                    <a href="/page/4">4</a>
                </li>
                
            
                <li class="cube-pagination-ellipses">
                    <span>...</span>
                </li>
                <li class="cube-pagination-index">
                    <a href="/page/19">19</a>
                </li>
        
    

    
    <li class="cube-pagination-next">
        <a href="/page/3/">Next Â»</a>
    </li>
    
</ul>

<!--å…¶ä»–ç»„ä»¶åç»­æ·»åŠ -->
        </div>
        <div class="cube-right">
            

<div class="cube-search cube-sidebar" id="cube-search">
    <div class="search-container">
        <input type="text" placeholder="Search" class="cube-search-input" id="cube-search-input">
        <i class="cube-icon cube-icon-search cube-search-submit" aria-hidden="true"></i>
    </div>
    <!-- TODO é€šè¿‡ç»™windowèµ‹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé€šè¿‡è„šæœ¬èµ‹å€¼ -->
</div>
<script>
    (function (window) {
        'use strict';
        window.searchModule = {}
        window.searchModule.JSONUrl = '/content.json'
        window.searchModule.rootUrl = '/'
    })(window)
</script>
<div class="cube-search-form">
    <div class="cube-search-control">
        <input type="text" placeholder="Search" class="search-input">
        <a class="close-button">
            <i class="cube-icon cube-close" aria-hidden="true"></i>
        </a>
    </div>
    <div class="cube-search-result"></div>
</div>


<div class="cube-author cube-sidebar" id="cube-author">
    
    
    <span>John Doe</span>
    
    
    <div class="count">
        <a class="count articles"><span>186</span>Article</a>
        <a class="count tags"><span>35</span>Tags</a>
        <a class="count categories"><span>23</span>Categories</a>
    </div>
</div>



<div class="cube-music cube-sidebar" id="cube-music">
    <div class="cube-player aplayer" id="cube-player"></div>
</div>
<script>
    (function (window) {
        window.musicModule = {}
        window.musicModule.musicConfig = '{"narrow":false,"autoplay":false,"showlrc":3,"theme":"#b7daff","mutex":true,"mode":"circulation","preload":"auto","listmaxheight":"513px","music":[{"title":"Dear friends","author":"TRIPLANE","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/TRIPLANE - Dear friends.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Dear friends - TRIPLANE.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/TRIPLANE - Dear friends.jpg"},{"title":"Butter-Fly","author":"å’Œç”°å…‰å¸","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³) - å’Œç”°å…‰å¸.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).jpg"},{"title":"å®µé—‡èŠ±ç«","author":"è‘‰æœˆã‚†ã‚‰","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/å®µé—‡èŠ±ç« - è‘‰æœˆã‚†ã‚‰.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.jpg"}]}'
        window.musicModule.lrcConfig = {
            open: 'Open Lyrics',
            close: 'Close Lyrics'
        }
    })(window)
</script>



<div class="cube-recent-posts cube-sidebar" id="cube-recent-posts">
    <div class="title">
        <a>Recent Posts</a>
    </div>
    <ul class="list">
        
        
        <li>
            <!-- TODO å¦‚æœæ–‡ç« è¦æ˜¾ç¤ºå›¾ç‰‡ï¼Œé‚£ä¹ˆåœ¨front-matterä¸Šæ·»åŠ previewå±æ€§(url or path) -->
            
            <div class="normal">
                <p class="index first">
                    <span>1</span>
                </p>
                <p class="title">
                    <a href="/2022/08/25/Js%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="å˜é‡ç±»å‹">å˜é‡ç±»å‹</a>
                </p>
            </div>
            
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>2</span>
                </p>
                <p class="title">
                    <a href="/2022/06/09/html+css+js+ts/3-js%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C%E5%AE%9E%E4%BE%8B/" title="js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹">js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>3</span>
                </p>
                <p class="title">
                    <a href="/2022/05/28/html+css+js+ts/1-%E9%9F%B3%E8%A7%86%E9%A2%91/" title="html-åŸç”ŸéŸ³è§†é¢‘">html-åŸç”ŸéŸ³è§†é¢‘</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>4</span>
                </p>
                <p class="title">
                    <a href="/2022/04/25/http/DNS%E5%8D%8F%E8%AE%AE/" title="DNSåè®®">DNSåè®®</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>5</span>
                </p>
                <p class="title">
                    <a href="/2022/04/17/html+css+js+ts/4-%E8%A3%85%E9%A5%B0%E5%99%A8/" title="ES6 è£…é¥°å™¨">ES6 è£…é¥°å™¨</a>
                </p>
            </div>
        </li>
        
        
    </ul>
</div>



<div class="cube-categories cube-sidebar" id="cube-categories">
    <div class="title">
        <a href="/categories">Categories</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box-bg ">
            <a href="/categories/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/React/">#React</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">#æ•°æ®å¯è§†åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">#æ¶æ„æ¨¡å¼</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%9F%B3%E8%A7%86%E9%A2%91/">#éŸ³è§†é¢‘</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%97%AE%E9%A2%98/">#é—®é¢˜</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/">#åç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">#å‰ç«¯å·¥ç¨‹åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B7%A5%E5%85%B7/">#å·¥å…·</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">#å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">#æ•°æ®åº“</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/liunx/">#liunx</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-tagcloud cube-sidebar" id="cube-tagcloud">
    <div class="title">
        <a href="/tags">Tagcloud</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/tags/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vue/">#vue</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/React/">#React</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/Redux/">#Redux</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/echart/">#echart</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/vue3/">#vue3</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/react/">#react</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/html/">#html</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/xml/">#xml</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/css/">#css</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Promise/">#Promise</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/es6/">#es6</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/typescript/">#typescript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/async-await/">#async/await</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nodejs/">#nodejs</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/python/">#python</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/glup/">#glup</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/webpack/">#webpack</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/git/">#git</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Mock/">#Mock</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/eslint/">#eslint</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/RESTful/">#RESTful</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/hexo/">#hexo</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vs-code/">#vs code</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E4%BC%98%E5%8C%96/">#ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mongodb/">#mongodb</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/mysql/">#mysql</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nginx/">#nginx</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-links cube-sidebar" id="cube-links">
    <div class="title">
        <a>Links</a>
    </div>
    <ul class="list">
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/GitHub.png">
            
            <a href="https://github.com/ZEROKISEKI" target="_blank">GitHub</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/Coding.png">
            
            <a href="https://coding.net/u/SORA1" target="_blank">Coding</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/SF.png">
            
            <a href="https://segmentfault.com/u/aonosora" target="_blank">SFç¤¾åŒº</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/å¼€å‘è€…å¤´æ¡.png">
            
            <a href="https://toutiao.io/u/148070" target="_blank">å¼€å‘è€…å¤´æ¡</a>
        </li>
        
    </ul>
</div>



<div class="cube-friend-links cube-sidebar" id="cube-friend-links">
    <div class="title">
        <a>Friend Links</a>
    </div>
    <ul class="list">
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/micblo.png">
            <a href="https://blog.micblo.com/" target="_blank">ç½—å¤§ä½¬</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/DIYgod.jpg">
            <a href="https://www.anotherhome.net/" target="_blank">DIYgod</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="/images/friend_links.jpg ">
            <a href="https://aonosora.com/" target="_blank">å’ªè¥¿è¥¿ã®éƒ¨è½æ ¼</a>
        </li>
        
    </ul>
</div>


        </div>
    </div>
</div>
<footer class="cube-footer">
    
Â© 2017 John Doe

<br>
Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
</footer>
<!-- inject:script -->
<script src="/js/script.js"></script>
<!-- endinject -->
<div class="cube-loading out"></div>
</body>
</html>