<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="John Doe">
    
    
    
    
    
    
    <title>Hexo</title>
    <!-- inject:style -->
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <!-- endinject -->
    <style>
        .cube-loading {
            top: 0;
            position: fixed;
            width: 100%;
            height: 100%;
            background: url('/images/lg/loading.gif') no-repeat center center;
            background-color: rgba(0,0,0,.7);
        }

        .cube-loading.out {
            display: none;
        }

        .cube-loading:before {
            display: block;
            content: 'Loading';
            position: relative;
            width: 100%;
            top: 50%;
            right: -50%;
            color: #fff;
        }

        @media(max-width: 768px) {
            .cube-loading:before {
                font-size: 1.2em;
                transform: translate(-24px,20px);
                -webkit-transform: translate(-24px,20px);
                -o-transform: translate(-24px,20px);
                -ms-transform: translate(-24px,20px);
            }
        }

        @media(min-width: 768px) {
            .cube-loading:before {

            }
        }
    </style>
    
<meta name="generator" content="Hexo 6.2.0"></head>
<body>
<div class="cube-body">
    <nav id="cube-top-memu" class="cube-menu">
    <ul class="cube-menu-collapse">
        
        <li>
            <i class="cube-icon cube-icon-home" aria-hidden="true"></i>
            <a href="/">é¦–é¡µ</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-archive" aria-hidden="true"></i>
            <a href="/archives">å½’æ¡£</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-categories" aria-hidden="true"></i>
            <a href="/categories">åˆ†ç±»</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-tags" aria-hidden="true"></i>
            <a href="/tags">æ ‡ç­¾</a>
        </li>
        
        <li>
            <i class="cube-icon cube-icon-about" aria-hidden="true"></i>
            <a href="/about-me">å…³äºæˆ‘</a>
        </li>
        
    </ul>
</nav>
<nav class="cube-side-menu" id="cube-side-menu">
    <ul class="cube-menu-list">
        
        <li>
            <a class="lrc-control">Open Lyrics</a>
        </li>
        
        <li>
            <a class="scroll-to-top">Top</a>
        </li>
    </ul>
</nav>
    <header class="cube-header" id="cube-header">
    <img src=" https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2 " alt="å¤´éƒ¨èƒŒæ™¯å›¾ç‰‡">
    
    <div class="cube-type">
        <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
        <span class="cube-typed-cursor">|</span>
    </div>
    
</header>

    <style>
        nav.cube-menu:before {
            content: '';
            visibility: hidden;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 44px;
        
            filter: blur(5px);
            -webkit-filter: blur(5px);
        
            z-index: -1;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-repeat: no-repeat;
            background-position: center -356px;
            background-size: cover;
            background-color: transparent;
        }

        header.cube-background.cube-header-background {
            visibility: hidden;
            background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201502%2F28%2F20150228220759_zaP3N.png&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664943562&amp;t=f546331d7d5aee27ceb7af09c60899f2');
            background-position: center -400px;
        }
    </style>
    <header class="cube-background cube-header-background">
        
        <div class="cube-type">
            <span class="cube-typed-title">ğŸçš„ä¸ªäººåšå®¢ ^_^</span>
            <span class="cube-typed-cursor">|</span>
        </div>
        
    </header>
    <div class="load-header-background"></div>
    <script>
        (function (window) {

            window.headerModule = {}
            window.headerModule.image = {
                width: '2000',
                height: '1414'
            }

        })(window)
    </script>
    
    <div class="cube-content">
        <div class="cube-left">
            
<div class="cube-excerpt" id="cube-excerpt-ç§»åŠ¨ç«¯é€‚é…">
    <header class="cube-excerpt-header">
        <h1><a href="/2022/02/15/html+css+js+ts/1-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%83%E5%B1%80%E9%80%82%E9%85%8D/">ç§»åŠ¨ç«¯é€‚é…</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2022-02-15
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/html/" class="cube-excerpt-tag-link">#html</a>
                
                <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" class="cube-excerpt-tag-link">#ç§»åŠ¨ç«¯</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€ä¸ºä»€ä¹ˆè¦åšé€‚é…"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆè¦åšé€‚é…" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆè¦åšé€‚é…"></a>ä¸€ã€ä¸ºä»€ä¹ˆè¦åšé€‚é…</h2><ul>
<li>ä¸ºäº†é€‚åº”å„ç§ç§»åŠ¨ç«¯è®¾å¤‡ï¼Œå®Œç¾å‘ˆç°åº”æœ‰çš„å¸ƒå±€æ•ˆæœ</li>
<li>å„ä¸ªç§»åŠ¨ç«¯è®¾å¤‡ï¼Œåˆ†è¾¨ç‡å¤§å°ä¸ä¸€è‡´ï¼Œç½‘é¡µæƒ³é“ºæ»¡æ•´ä¸ªå±å¹•ï¼Œå¹¶åœ¨å„ç§åˆ†è¾¨ä¸‹ç­‰æ¯”ç¼©æ”¾</li>
</ul>
<h2 id="äºŒã€é€‚é…æ–¹æ¡ˆ"><a href="#äºŒã€é€‚é…æ–¹æ¡ˆ" class="headerlink" title="äºŒã€é€‚é…æ–¹æ¡ˆ"></a>äºŒã€é€‚é…æ–¹æ¡ˆ</h2><ul>
<li>å›ºå®šé«˜åº¦ï¼Œå®½åº¦ç™¾åˆ†æ¯”é€‚é…-å¸ƒå±€éå¸¸å‡åŒ€ï¼Œé€‚åˆç™¾åˆ†æ¯”å¸ƒå±€</li>
<li>å›ºå®šå®½åº¦ï¼Œæ”¹å˜ç¼©æ”¾æ¯”ä¾‹é€‚é…-ä»€ä¹ˆæƒ…å†µéƒ½å¯ä»¥</li>
<li><code>Rem</code>é€‚é…</li>
<li>åƒç´ æ¯”é€‚é…</li>
</ul>
<h2 id="ä¸‰ã€å•ä½"><a href="#ä¸‰ã€å•ä½" class="headerlink" title="ä¸‰ã€å•ä½"></a>ä¸‰ã€å•ä½</h2><ul>
<li><code>em</code>æ ¹æ®å…ƒç´ è‡ªèº«çš„å­—ä½“å¤§å°è®¡ç®—,å…ƒç´ è‡ªèº« <code>16px</code> <code>1em=16px</code></li>
<li><code>Rem</code> <code>R -&gt; root</code> æ ¹èŠ‚ç‚¹( <code>html</code> ) æ ¹æ®<code>html</code>çš„å­—ä½“å¤§å°è®¡ç®—å…¶ä»–å…ƒç´ å°ºå¯¸</li>
</ul>
<h2 id="å››ã€ç™¾åˆ†æ¯”é€‚é…-å¸¸ç”¨"><a href="#å››ã€ç™¾åˆ†æ¯”é€‚é…-å¸¸ç”¨" class="headerlink" title="å››ã€ç™¾åˆ†æ¯”é€‚é…(å¸¸ç”¨)"></a>å››ã€ç™¾åˆ†æ¯”é€‚é…(å¸¸ç”¨)</h2><blockquote>
<p>å›ºå®šé«˜åº¦ï¼Œå®½åº¦ç™¾åˆ†æ¯”é€‚é…</p>
</blockquote>
<ul>
<li>æ ¹æ®è®¾ç½®çš„å¤§å°å»è®¾ç½®é«˜åº¦ï¼Œå•ä½å¯ä»¥ç”¨<code>px</code> ç™¾åˆ†æ¯” <code>auto</code></li>
<li>å¸¸ç”¨<code>Flex</code>å¸ƒå±€</li>
<li>ç™¾åˆ†æ¯”å®½åº¦</li>
</ul>
<blockquote>
<p>ä»¥<code>640</code>è®¾è®¡ç¨¿ä¸ºä¾‹ï¼Œåœ¨å¤–å±‚å®¹å™¨ä¸Šè®¾ç½®æœ€å¤§ä»¥åŠæœ€å°çš„å®½</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#wrapper &#123;</span><br><span class="line">    max-width: 640px; /*è®¾ç½®è®¾è®¡ç¨¿çš„å®½åº¦*/</span><br><span class="line">    min-width: 300px;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åé¢çš„åŒºå—å¸ƒå±€éƒ½ç”¨ç™¾åˆ†æ¯”ï¼Œå…·ä½“å…ƒç´ å¤§å°ç”¨<code>px</code>è®¡ç®—</p>
</blockquote>
<ul>
<li>ä¹Ÿå°±æ˜¯å®½åº¦ç”¨ç™¾åˆ†æ¯”ï¼Œé«˜åº¦ç”¨<code>px</code></li>
<li>é«˜åº¦ä»¥åŠå›¾ç‰‡ä¸è¦å®šæ­»ï¼Œè®©å®ƒè‡ªåŠ¨æ’‘å¼€</li>
</ul>
<h2 id="äº”ã€Remé€‚é…-å¸¸ç”¨"><a href="#äº”ã€Remé€‚é…-å¸¸ç”¨" class="headerlink" title="äº”ã€Remé€‚é…(å¸¸ç”¨)"></a>äº”ã€Remé€‚é…(å¸¸ç”¨)</h2><ul>
<li>æ ¹æ®å±å¹•çš„åˆ†è¾¨ç‡åŠ¨æ€è®¾ç½®<code>html</code>çš„æ–‡å­—å¤§å°ï¼Œè¾¾åˆ°ç­‰æ¯”ç¼©æ”¾çš„åŠŸèƒ½</li>
<li>ä¿è¯<code>html</code>æœ€ç»ˆç®—å‡ºæ¥çš„å­—ä½“å¤§å°ï¼Œä¸èƒ½å°äº<code>12px</code></li>
<li>åœ¨ä¸åŒçš„ç§»åŠ¨ç«¯æ˜¾ç¤ºä¸åŒçš„å…ƒç´ æ¯”ä¾‹æ•ˆæœ</li>
<li>å¦‚æœ<code>html</code>çš„<code>font-size:20px</code>çš„æ—¶å€™ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„<code>1rem = 20px</code></li>
<li>æŠŠè®¾è®¡å›¾çš„å®½åº¦åˆ†æˆå¤šå°‘åˆ†ä¹‹ä¸€ï¼Œæ ¹æ®å®é™…æƒ…å†µ</li>
<li><code>rem</code>åšç›’å­çš„å®½åº¦ï¼Œ<code>viewport</code>ç¼©æ”¾</li>
</ul>
<blockquote>
<p><code>head</code>åŠ å…¥å¸¸è§çš„<code>meta</code>å±æ€§</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot;&gt;</span><br><span class="line">&lt;!--è¿™ä¸ªæ˜¯å…³é”®--&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0ï¼Œminimum-scale=1.0&quot;&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æŠŠè¿™æ®µä»£ç åŠ å…¥<code>head</code>ä¸­çš„<code>script</code>é¢„å…ˆåŠ è½½</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// remé€‚é…ç”¨è¿™æ®µä»£ç åŠ¨æ€è®¡ç®—htmlçš„font-sizeå¤§å°</span><br><span class="line">(function(win) &#123;</span><br><span class="line">    var docEl = win.document.documentElement;</span><br><span class="line">    var timer = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">    function changeRem() &#123;</span><br><span class="line">        var width = docEl.getBoundingClientRect().width;</span><br><span class="line">        if (width &gt; 750) &#123; // 750æ˜¯è®¾è®¡ç¨¿å¤§å°</span><br><span class="line">            width = 750;</span><br><span class="line">        &#125;</span><br><span class="line">        var fontS = width / 10; // æŠŠè®¾å¤‡å®½åº¦åç­‰åˆ† 1rem=10px</span><br><span class="line">        docEl.style.fontSize = fontS + &quot;px&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    win.addEventListener(&quot;resize&quot;, function() &#123;</span><br><span class="line">        clearTimeout(timer);</span><br><span class="line">        timer = setTimeout(changeRem, 30);</span><br><span class="line">    &#125;, false);</span><br><span class="line">    win.addEventListener(&quot;pageshow&quot;, function(e) &#123;</span><br><span class="line">        if (e.persisted) &#123; //æ¸…é™¤ç¼“å­˜</span><br><span class="line">            clearTimeout(timer);</span><br><span class="line">            timer = setTimeout(changeRem, 30);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, false);</span><br><span class="line">    changeRem();</span><br><span class="line">&#125;)(window)</span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ–è€…ä½¿ç”¨æ·˜å®æä¾›çš„åº“ <a target="_blank" rel="noopener" href="https://github.com/amfe/lib-flexible">https://github.com/amfe/lib-flexible</a></li>
</ul>
<p><strong>å¸ƒå±€ç»†èŠ‚</strong></p>
<ul>
<li>ç»“æ„ç”¨<code>section</code>åŒºå—åˆ’åˆ†æ›´è¯­ä¹‰åŒ–</li>
<li>ç„¶ååœ¨<code>body</code>è®¾ç½®å®½åº¦</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">    width: 10rem;</span><br><span class="line">    margin: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åé¢çš„åŒºå—éƒ½ä»¥ç™¾åˆ†æ¯”å¸ƒå±€</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">   &lt;header&gt;&lt;header&gt;</span><br><span class="line">   &lt;section&gt;&lt;section&gt;</span><br><span class="line">   &lt;section&gt;&lt;section&gt;</span><br><span class="line">   &lt;section&gt;&lt;section&gt;</span><br><span class="line">   &lt;section&gt;&lt;section&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">section,</span><br><span class="line">header &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æŠŠè§†è§‰ç¨¿ä¸­çš„ px è½¬æ¢æˆ rem</strong></p>
<blockquote>
<p>é¦–å…ˆï¼Œç›®å‰æ—¥å¸¸å·¥ä½œå½“ä¸­ï¼Œè§†è§‰è®¾è®¡å¸ˆç»™åˆ°å‰ç«¯å¼€å‘äººå‘˜æ‰‹ä¸­çš„è§†è§‰ç¨¿å°ºå¯¸ä¸€èˆ¬æ˜¯åŸºäº <code>640px</code> ã€ <code>750px</code> ä»¥åŠ <code>1125px</code> å®½åº¦ä¸ºå‡†ã€‚ç”šè‡³ä¸ºä»€ä¹ˆï¼Ÿå¤§å®¶åº”è¯¥æ‡‚çš„ï¼ˆè€ƒè™‘<code>Retina</code>å±ï¼‰</p>
</blockquote>
<blockquote>
<p>å‡å®šè®¾è®¡ç¨¿çš„å¤§å°ä¸º<code>750</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆ™å°†æ•´ä¸ªå›¾åˆ†æˆ<code>10</code>ç­‰ä»½æ¥çœ‹ã€‚&#96;&#96; å¯¹åº”çš„ <code>font-size</code>ä¸º<code>75px</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html&#123;</span><br><span class="line">	font-size: 75px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>è¿™æ ·ä¸€æ¥ï¼Œå¯¹äºè§†è§‰ç¨¿ä¸Šçš„å…ƒç´ å°ºå¯¸æ¢ç®—ï¼Œåªéœ€è¦åŸå§‹çš„ <code>px</code>å€¼ é™¤ä»¥ <code>rem</code>åŸºå‡†å€¼ å³å¯</li>
</ul>
<blockquote>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬ç°åœ¨å°±å¯ä»¥æ¯”å¯¹è®¾è®¡ç¨¿ï¼Œæ¯”å¦‚è®¾è®¡ç¨¿ä¸­ï¼Œæœ‰ä¸€ä¸ª<code>div</code>å…ƒç´ ï¼Œå®½åº¦ï¼Œé«˜åº¦éƒ½ä¸º<code>20px</code>,é‚£ä¹ˆæˆ‘ä»¬è¿™æ ·å†™å³å¯ï¼ˆå¯ä»¥ç”¨ <code>markman</code>æ ‡å‡†è®¾è®¡ç¨¿çš„å…ƒç´ å¤§å°ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">	height: 0.27rem; /*20/75*/</span><br><span class="line">	width: 0.27rem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åŠ¨æ€è®¡ç®—çš„<code>rem</code>æœ€åä¼šå¸®æˆ‘ä»¬åŠ¨æ€è®¡ç®—å…ƒç´ åœ¨ä¸åŒå±å¹•ä¸‹çš„å®½é«˜</li>
<li>å¯¹äºè®¾è®¡ç¨¿ä¸Šçš„æ¯ä¸ªå…ƒç´ çš„å°ºå¯¸åœ¨è®¾è®¡ç¨¿å¤§å°å·²çŸ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æµ‹é‡å‡ºï¼Œç„¶ååœ¨ç”¨æµ‹é‡çš„å®½é«˜é™¤ä»¥è®¾è®¡ç¨¿<code>750</code>çš„ååˆ†ä¹‹ä¸€ä¹Ÿå°±æ˜¯<code>75</code>,å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„<code>rem</code>ã€‚è€Œ<code>rem</code>æ˜¯æ ¹æ®å±å¹•åŠ¨æ€å˜åŒ–çš„ï¼Œä¹Ÿå°±è¾¾åˆ°äº†é€‚é…çš„æ•ˆæœã€‚ä¹Ÿå°±æ˜¯åŒä¸€å¥—è®¾è®¡ç¨¿è¿ç”¨åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šã€‚</li>
</ul>
<blockquote>
<p>æ¯”å¦‚å½“æˆ‘ä»¬åˆ‡æ¢åˆ°<code>320</code>è®¾å¤‡å¤§å°çš„æ—¶å€™ï¼Œè¿™æ—¶å€™<code>1rem=32px;</code> <code>div</code>çš„åƒç´ å®é™…æ˜¯<code>0.27*32=8.64px``0.27</code>æ˜¯æˆ‘ä»¬åœ¨å·²çŸ¥è®¾è®¡ç¨¿æ˜¯<code>750</code>çš„æƒ…å†µä¸‹è®¡ç®—å‡ºæ¥çš„ï¼Œ<code>rem</code>ç”¨æ¥åŠ¨æ€è®¡ç®—è€Œå·²</p>
</blockquote>
<ul>
<li>å¯¹äº<code>margin</code> <code>padding</code> <code>line-height</code> <code>width</code> <code>height</code>ä½¿ç”¨<code>rem</code>è®¡ç®—</li>
</ul>
<p><strong>å¦‚ä½•å¿«é€Ÿè®¡ç®—</strong></p>
<blockquote>
<p>åœ¨å®é™…ç”Ÿäº§å½“ä¸­ï¼Œå¦‚æœæ¯ä¸€æ¬¡è®¡ç®— <code>px</code> è½¬æ¢ <code>rem</code> ï¼Œæˆ–è®¸ä¼šè§‰å¾—éå¸¸éº»çƒ¦</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/flashlizi/cssrem"><code>CSSREM</code></a> æ˜¯ä¸€ä¸ª<code>CSS</code>çš„ <code>px</code> å€¼è½¬ <code>rem</code> å€¼çš„<code>Sublime Text3</code>è‡ªåŠ¨å®Œæˆæ’ä»¶</li>
<li>æ’ä»¶æ•ˆæœ</li>
</ul>
<p><img src="https://github.com/poetries/cssrem/raw/master/cssrem.gif" alt="img"></p>
<blockquote>
<p>æ’ä»¶ä½¿ç”¨æ–¹æ³•</p>
</blockquote>
<ul>
<li><p>å®‰è£…</p>
<ul>
<li>ä¸‹è½½æœ¬é¡¹ç›®ï¼Œæ¯”å¦‚ï¼šgit clone <a target="_blank" rel="noopener" href="https://github.com/flashlizi/cssrem">https://github.com/flashlizi/cssrem</a></li>
<li>è¿›å…¥<code>packages</code>ç›®å½•ï¼š<code>Sublime Text</code> -&gt; <code>Preferences</code> -&gt; <code>Browse Packages</code>â€¦</li>
<li>å¤åˆ¶ä¸‹è½½çš„<code>cssrem</code>ç›®å½•åˆ°åˆšæ‰çš„packgesç›®å½•é‡Œã€‚</li>
<li>é‡å¯<code>Sublime Text</code></li>
</ul>
</li>
<li><p>é…ç½®å‚æ•°</p>
<ul>
<li><p>å‚æ•°é…ç½®æ–‡ä»¶ï¼š<code>Sublime Text -&gt; Preferences -&gt; Package Settings -&gt; cssrem</code></p>
</li>
<li><p><code>px_to_rem</code> - <code>px</code>è½¬<code>rem</code>çš„å•ä½æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º<code>40</code>ã€æ ¹æ®è®¾è®¡ç¨¿æ¥è®¾ç½®ï¼Œå¦‚è®¾è®¡ç¨¿<code>750</code>ï¼Œæˆ‘ä»¬å–ååˆ†ä¹‹ä¸€å³<code>75</code>ã€‘ã€‚</p>
</li>
<li><p><code>max_rem_fraction_length</code> - <code>px</code>è½¬<code>rem</code>çš„å°æ•°éƒ¨åˆ†çš„æœ€å¤§é•¿åº¦ã€‚é»˜è®¤ä¸º<code>6</code>ã€‚</p>
</li>
<li><p><code>available_file_types</code> - å¯ç”¨æ­¤æ’ä»¶çš„æ–‡ä»¶ç±»å‹ã€‚é»˜è®¤ä¸ºï¼š[â€œ<code>.css</code>â€œ, â€œ<code>.less</code>â€œ, â€œ<code>.sass</code>â€œ]ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>æ–‡å­—é€‚é…çš„è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>å¯¹äºä¸€äº›æ ‡é¢˜æ€§çš„æ–‡å­—ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ç”¨<code>rem</code>ã€‚è®©ä»–éšç€å±å¹•æ¥è¿›è¡Œç¼©æ”¾ï¼Œå› ä¸ºæ ‡é¢˜æ€§æ–‡å­—ä¸€èˆ¬è¾ƒå¤§ï¼Œè€Œè¾ƒå¤§çš„æ–‡å­—ï¼Œç‚¹é˜µå¯¹å…¶å½±å“å°±è¶Šå°ã€‚è¿™æ ·ï¼Œå³ä½¿å‡ºç°å¥‡æ€ªçš„å°ºå¯¸ï¼Œä¹Ÿèƒ½å¤Ÿè®©å­—ä½“å¾—åˆ°å¾ˆå¥½çš„æ¸²æŸ“ã€‚</li>
<li>å¯¹äºä¸€äº›æ­£æ–‡å†…å®¹çš„æ–‡å­—ï¼ˆå³ç«™åœ¨ä½¿ç”¨è€…çš„è§’åº¦ï¼Œä½ ä¸å¸Œæœ›ä»–è¿›è¡Œç¼©æ”¾çš„æ–‡å­—ï¼‰ã€‚æˆ‘ä»¬é‡‡ç”¨<code>px</code>æ¥è¿›è¡Œå¤„ç†</li>
</ul>
<h2 id="å…­ã€ç¼©æ”¾æ¯”é€‚é…"><a href="#å…­ã€ç¼©æ”¾æ¯”é€‚é…" class="headerlink" title="å…­ã€ç¼©æ”¾æ¯”é€‚é…"></a>å…­ã€ç¼©æ”¾æ¯”é€‚é…</h2><blockquote>
<p>å›ºå®šå®½åº¦ï¼Œæ”¹å˜ç¼©æ”¾æ¯”ä¾‹é€‚é…</p>
</blockquote>
<ul>
<li>è®¾è®¡å›¾çš„å®½åº¦å°±æ˜¯ç½‘é¡µæ˜¾ç¤ºçš„å®½åº¦</li>
<li>æ”¹å˜è§†å£çš„ç¼©æ”¾æ¯”ä¾‹</li>
<li>é¡µé¢å®½åº¦å›ºå®šæ­»</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// ç¼©æ”¾æ¯”ä¾‹é€‚é…æ–¹æ¡ˆ--ç”¨è¿™ä¸ªä»£ç  </span><br><span class="line">var width = window.screen.width,</span><br><span class="line">    fixedW = 320, //è®¾è®¡ç¨¿å®½åº¦çš„ä¸€åŠ</span><br><span class="line">    scale = width / fixedW, // ç¼©æ”¾æ¯”ä¾‹</span><br><span class="line">    meta = document.createElement(&#x27;meta&#x27;),</span><br><span class="line">    metaAttr = &#123;</span><br><span class="line">        name : &#x27;viewport&#x27;,</span><br><span class="line">        content : &#x27;width=&#x27;+fixedW+&#x27;, initial-scale=&#x27;+scale+&#x27;, maximum-scale=&#x27;+scale+&#x27;, user-scalable=0&#x27;</span><br><span class="line">    &#125;;</span><br><span class="line">    for (var key in metaAttr) &#123;</span><br><span class="line">        meta[key] = metaAttr[key];</span><br><span class="line">    &#125;</span><br><span class="line">    document.head.appendChild(meta);</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€åƒç´ æ¯”é€‚é…"><a href="#ä¸ƒã€åƒç´ æ¯”é€‚é…" class="headerlink" title="ä¸ƒã€åƒç´ æ¯”é€‚é…"></a>ä¸ƒã€åƒç´ æ¯”é€‚é…</h2><ul>
<li><code>window.devicePixelRatio</code></li>
<li>ç‰©ç†åƒç´ æ˜¯æ‰‹æœºå±å¹•åˆ†è¾¨ç‡</li>
<li>ç‹¬ç«‹åƒç´  æŒ‡<code>css</code>åƒç´  å±å¹•å®½åº¦</li>
<li>åƒç´ æ¯” &#x3D; ç‰©ç†åƒç´  &#x2F; <code>csså®½åº¦</code></li>
<li>è·å–è®¾å¤‡çš„åƒç´ æ¯” <code>window.devicePixelRatio</code></li>
</ul>
<h2 id="å…«ã€å°ç»“"><a href="#å…«ã€å°ç»“" class="headerlink" title="å…«ã€å°ç»“"></a>å…«ã€å°ç»“</h2><blockquote>
<p>å…³äºç§»åŠ¨ç«¯å¸ƒå±€æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œ<code>rem</code>å’Œç™¾åˆ†æ¯”è¿ç”¨æœ€å¤šçš„</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="http://ymblog.net/2015/07/01/%E7%A7%BB%E5%8A%A8%E5%89%8D%E7%AB%AFmeta%E6%A0%87%E7%AD%BE%E8%BD%AC/">http://ymblog.net/2015/07/01/ç§»åŠ¨å‰ç«¯metaæ ‡ç­¾è½¬/</a>)</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2022/02/15/html+css+js+ts/1-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%83%E5%B1%80%E9%80%82%E9%85%8D/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-React-æé«˜ç»„ä»¶æ•ˆç‡  é¿å…ä¸å¿…è¦çš„render">
    <header class="cube-excerpt-header">
        <h1><a href="/2022/01/18/React/React-%E6%8F%90%E9%AB%98%E7%BB%84%E4%BB%B6%E6%95%88%E7%8E%87%20%20%E9%81%BF%E5%85%8D%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84render/">React-æé«˜ç»„ä»¶æ•ˆç‡  é¿å…ä¸å¿…è¦çš„render</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2022-01-18
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/React/" class="cube-excerpt-tag-link">#React</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><p><code>react</code> åŸºäºè™šæ‹Ÿ <code>DOM</code> å’Œé«˜æ•ˆ <code>Diff</code>ç®—æ³•çš„å®Œç¾é…åˆï¼Œå®ç°äº†å¯¹ <code>DOM</code>æœ€å°ç²’åº¦çš„æ›´æ–°ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>React</code>å¯¹ <code>DOM</code>çš„æ¸²æŸ“æ•ˆç‡è¶³ä»¥æˆ‘ä»¬çš„ä¸šåŠ¡æ—¥å¸¸</p>
<p>å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæ€§èƒ½é—®é¢˜ä¾ç„¶ä¼šå›°æ‰°æˆ‘ä»¬ã€‚æ­¤æ—¶éœ€è¦é‡‡å–ä¸€äº›æªæ–½æ¥æå‡è¿è¡Œæ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“åˆ™æ˜¯ä¸šåŠ¡ä¸­å¸¸è§çš„ä¼˜åŒ–æ‰‹æ®µä¹‹ä¸€</p>
<h2 id="äºŒã€å¦‚ä½•åš"><a href="#äºŒã€å¦‚ä½•åš" class="headerlink" title="äºŒã€å¦‚ä½•åš"></a>äºŒã€å¦‚ä½•åš</h2><p>åœ¨ä¹‹å‰æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°<code>render</code>çš„è§¦å‘æ—¶æœºï¼Œç®€å•æ¥è®²å°±æ˜¯ç±»ç»„ä»¶é€šè¿‡è°ƒç”¨<code>setState</code>æ–¹æ³•ï¼Œ å°±ä¼šå¯¼è‡´<code>render</code>ï¼Œçˆ¶ç»„ä»¶ä¸€æ—¦å‘ç”Ÿ<code>render</code>æ¸²æŸ“ï¼Œå­ç»„ä»¶ä¸€å®šä¹Ÿä¼šæ‰§è¡Œ<code>render</code>æ¸²æŸ“</p>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œçˆ¶ç»„ä»¶æ¸²æŸ“å¯¼è‡´å­ç»„ä»¶æ¸²æŸ“ï¼Œå­ç»„ä»¶å¹¶æ²¡æœ‰å‘ç”Ÿä»»ä½•æ”¹å˜ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä»é¿å…æ— è°“çš„æ¸²æŸ“ï¼Œå…·ä½“å®ç°çš„æ–¹å¼æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>shouldComponentUpdate</li>
<li>PureComponent</li>
<li>React.memo</li>
</ul>
<h3 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate"></a>shouldComponentUpdate</h3><p>é€šè¿‡<code>shouldComponentUpdate</code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ¥æ¯”å¯¹ <code>state</code>å’Œ <code>props</code>ï¼Œç¡®å®šæ˜¯å¦è¦é‡æ–°æ¸²æŸ“</p>
<p>é»˜è®¤æƒ…å†µä¸‹è¿”å›<code>true</code>è¡¨ç¤ºé‡æ–°æ¸²æŸ“ï¼Œå¦‚æœä¸å¸Œæœ›ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè¿”å› <code>false</code> å³å¯</p>
<h3 id="PureComponent"><a href="#PureComponent" class="headerlink" title="PureComponent"></a>PureComponent</h3><p>è·Ÿ<code>shouldComponentUpdate</code>åŸç†åŸºæœ¬ä¸€è‡´ï¼Œé€šè¿‡å¯¹ <code>props</code> å’Œ <code>state</code>çš„æµ…æ¯”è¾ƒç»“æœæ¥å®ç° <code>shouldComponentUpdate</code>ï¼Œæºç å¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_compositeType</span> === <span class="title class_">CompositeTypes</span>.<span class="property">PureClass</span>) &#123;</span><br><span class="line">    shouldUpdate = !<span class="title function_">shallowEqual</span>(prevProps, nextProps) || ! <span class="title function_">shallowEqual</span>(inst.<span class="property">state</span>, nextState);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>shallowEqual</code>å¯¹åº”æ–¹æ³•å¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hasOwnProperty = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * is æ–¹æ³•æ¥åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦æ˜¯ç›¸ç­‰çš„å€¼ï¼Œä¸ºä½•è¿™ä¹ˆå†™å¯ä»¥ç§»æ­¥ MDN çš„æ–‡æ¡£</span></span><br><span class="line"><span class="comment"> * https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">is</span>(<span class="params">x: mixed, y: mixed</span>): boolean &#123;</span><br><span class="line">  <span class="keyword">if</span> (x === y) &#123;</span><br><span class="line">    <span class="keyword">return</span> x !== <span class="number">0</span> || y !== <span class="number">0</span> || <span class="number">1</span> / x === <span class="number">1</span> / y;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x !== x &amp;&amp; y !== y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">shallowEqual</span>(<span class="params">objA: mixed, objB: mixed</span>): boolean &#123;</span><br><span class="line">  <span class="comment">// é¦–å…ˆå¯¹åŸºæœ¬ç±»å‹è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">is</span>(objA, objB)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> objA !== <span class="string">&#x27;object&#x27;</span> || objA === <span class="literal">null</span> ||</span><br><span class="line">      <span class="keyword">typeof</span> objB !== <span class="string">&#x27;object&#x27;</span> || objB === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> keysA = <span class="title class_">Object</span>.<span class="title function_">keys</span>(objA);</span><br><span class="line">  <span class="keyword">const</span> keysB = <span class="title class_">Object</span>.<span class="title function_">keys</span>(objB);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é•¿åº¦ä¸ç›¸ç­‰ç›´æ¥è¿”å›false</span></span><br><span class="line">  <span class="keyword">if</span> (keysA.<span class="property">length</span> !== keysB.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// keyç›¸ç­‰çš„æƒ…å†µä¸‹ï¼Œå†å»å¾ªç¯æ¯”è¾ƒ</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keysA.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      !hasOwnProperty.<span class="title function_">call</span>(objB, keysA[i]) ||</span><br><span class="line">      !<span class="title function_">is</span>(objA[keysA[i]], objB[keysA[i]])</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“å¯¹è±¡åŒ…å«å¤æ‚çš„æ•°æ®ç»“æ„æ—¶ï¼Œå¯¹è±¡æ·±å±‚çš„æ•°æ®å·²æ”¹å˜å´æ²¡æœ‰è§¦å‘ <code>render</code></p>
<p>æ³¨æ„ï¼šåœ¨<code>react</code>ä¸­ï¼Œæ˜¯ä¸å»ºè®®ä½¿ç”¨æ·±å±‚æ¬¡ç»“æ„çš„æ•°æ®</p>
<h3 id="React-memo"><a href="#React-memo" class="headerlink" title="React.memo"></a>React.memo</h3><p><code>React.memo</code>ç”¨æ¥ç¼“å­˜ç»„ä»¶çš„æ¸²æŸ“ï¼Œé¿å…ä¸å¿…è¦çš„æ›´æ–°ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œä¸ <code>PureComponent</code> ååˆ†ç±»ä¼¼ã€‚ä½†ä¸åŒçš„æ˜¯ï¼Œ <code>React.memo</code> åªèƒ½ç”¨äºå‡½æ•°ç»„ä»¶</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; memo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="comment">// Component code</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">Button</span>);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœéœ€è¦æ·±å±‚æ¬¡æ¯”è¾ƒï¼Œè¿™æ—¶å€™å¯ä»¥ç»™<code>memo</code>ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’æ¯”è¾ƒå‡½æ•°</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arePropsEqual</span>(<span class="params">prevProps, nextProps</span>) &#123;</span><br><span class="line">  <span class="comment">// your code</span></span><br><span class="line">  <span class="keyword">return</span> prevProps === nextProps;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">Button</span>, arePropsEqual);</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p>åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‰ç«¯æ€§èƒ½é—®é¢˜æ˜¯ä¸€ä¸ªå¿…é¡»è€ƒè™‘çš„é—®é¢˜ï¼Œéšç€ä¸šåŠ¡çš„å¤æ‚ï¼Œé‡åˆ°æ€§èƒ½é—®é¢˜çš„æ¦‚ç‡ä¹Ÿåœ¨å¢é«˜</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå»ºè®®å°†é¡µé¢è¿›è¡Œæ›´å°çš„é¢—ç²’åŒ–ï¼Œå¦‚æœä¸€ä¸ªè¿‡å¤§ï¼Œå½“çŠ¶æ€å‘ç”Ÿä¿®æ”¹çš„æ—¶å€™ï¼Œå°±ä¼šå¯¼è‡´æ•´ä¸ªå¤§ç»„ä»¶çš„æ¸²æŸ“ï¼Œè€Œå¯¹ç»„ä»¶è¿›è¡Œæ‹†åˆ†åï¼Œç²’åº¦å˜å°äº†ï¼Œä¹Ÿèƒ½å¤Ÿå‡å°‘å­ç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2022/01/18/React/React-%E6%8F%90%E9%AB%98%E7%BB%84%E4%BB%B6%E6%95%88%E7%8E%87%20%20%E9%81%BF%E5%85%8D%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84render/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-js-moment.js">
    <header class="cube-excerpt-header">
        <h1><a href="/2022/01/16/html+css+js+ts/3-js%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85moment/">js-moment.js</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2022-01-16
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/javascript/" class="cube-excerpt-tag-link">#javascript</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€åŸºç¡€ç”¨æ³•"><a href="#ä¸€ã€åŸºç¡€ç”¨æ³•" class="headerlink" title="ä¸€ã€åŸºç¡€ç”¨æ³•"></a>ä¸€ã€åŸºç¡€ç”¨æ³•</h2><p><strong>å–å½“å¤©æ—¶é—´ï¼Œä»¥YYYYå¹´MMæœˆDDæ—¥å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var now=moment().format(&quot;YYYYå¹´MMæœˆDDæ—¥&quot;);</span><br></pre></td></tr></table></figure>

<p><strong>ä»»æ„æ—¶é—´æˆ³æ ¼å¼åŒ–ï¼Œä»¥<code>YYYY-MM-DD HH:mm:ss</code>å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t1=moment(1411641720000).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–å‰ä¸€å¤©æ—¥æœŸï¼Œæ ¼å¼ä»¥<code>YYYY-MM-DD</code>å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t11=moment().day(0).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–æœ¬å‘¨äº”æ—¥æœŸï¼Œæ ¼å¼ä»¥<code>YYYY-MM-DD</code>å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t12=moment().weekday(5).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–ä¸Šå‘¨äº”æ—¥æœŸï¼Œæ ¼å¼ä»¥<code>YYYY-MM-DD</code>å½¢å¼æ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t13=moment().weekday(-3).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–å½“å‰å¹´ä»½ã€æœˆä»½ã€æ—¥æœŸ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var t14=moment().year()</span><br><span class="line">var t15=moment().month()//æ­¤å¤„æœˆä»½ä»0å¼€å§‹ï¼Œå½“å‰æœˆè¦+1</span><br><span class="line">var t16=moment().date();</span><br></pre></td></tr></table></figure>

<p><strong>è·å–ä¸Šä¸ªæœˆä»Šå¤©çš„æ—¥æœŸï¼Œæ ¼å¼ä»¥YYYY-MM-DDæ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t18=moment().subtract(1, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–ä¸Šä¸ªæœˆæ—¥æœŸï¼Œæ ¼å¼ä»¥YYYY-MMæ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t19=moment().subtract(1, &#x27;months&#x27;).format(&#x27;YYYY-MM&#x27;)</span><br></pre></td></tr></table></figure>

<p><strong>è·å–å‰ä¸€å¤©æ—¥æœŸï¼Œæ ¼å¼ä»¥YYYY-MM-DDæ˜¾ç¤º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t20 = moment().subtract(1, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–ä¸¤ä¸ªå°æ—¶ä¹‹åçš„æ—¶é—´</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t22=moment().add(2,&#x27;hours&#x27;).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>è·å–äº”å¤©å‰çš„æ—¥æœŸ</strong></p>
<ul>
<li>ä¾‹å¦‚:ä»Šå¤©<code>2018-7-23</code>ï¼Œè·å–åˆ°çš„æ—¶é—´æ˜¯<code>2018-7-18</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var t23=moment().subtract(5, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€æ›´å¤šç¤ºä¾‹"><a href="#äºŒã€æ›´å¤šç¤ºä¾‹" class="headerlink" title="äºŒã€æ›´å¤šç¤ºä¾‹"></a>äºŒã€æ›´å¤šç¤ºä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&#x27;use strict&#x27;</span><br><span class="line">let moment = require(&#x27;moment&#x27;);</span><br><span class="line">//è·å–å½“å‰æ—¶é—´</span><br><span class="line">var now = moment().toDate();</span><br><span class="line">console.log(now)</span><br><span class="line"> </span><br><span class="line">//æ ¼å¼åŒ–å½“å‰æ—¶é—´</span><br><span class="line">now = moment().format(&#x27;YYYY-MM-DD&#x27;);</span><br><span class="line">console.log(now);</span><br><span class="line"> </span><br><span class="line">//å…¶å®ƒå‡ ç§æ ¼å¼åŒ–æ–¹æ³•</span><br><span class="line">now = moment().format(&#x27;L&#x27;) // 10/22/2016 </span><br><span class="line">console.log(now);</span><br><span class="line"> </span><br><span class="line">now = moment().format(&#x27;LL&#x27;) // October 22, 2016</span><br><span class="line">console.log(now);</span><br><span class="line"> </span><br><span class="line">//æ ¼å¼åŒ–å½“å‰æ—¶é—´</span><br><span class="line">now = moment().format(&#x27;YYYY-MM-DD:HH:MM:SS&#x27;);</span><br><span class="line">console.log(now);</span><br><span class="line"> </span><br><span class="line">//è·å–è¿™ä¸ªæœˆåˆæ—¶é—´</span><br><span class="line">let startMonth = moment().startOf(&#x27;month&#x27;).toDate();</span><br><span class="line">console.log(startMonth);</span><br><span class="line"> </span><br><span class="line">//è·å–ä»Šå¤©å¼€å§‹çš„æ—¶é—´</span><br><span class="line">let dayOfStart = moment().startOf(&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(dayOfStart);</span><br><span class="line"> </span><br><span class="line">//è·å–ä»Šå¤©ç»“æŸçš„æ—¶é—´</span><br><span class="line">let dayOfEnd = moment().endOf(&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(dayOfEnd);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//è·å–ï¼‹nå°æ—¶</span><br><span class="line">let lateHour = moment().add(2,&#x27;hour&#x27;).toDate();</span><br><span class="line">console.log(lateHour);</span><br><span class="line"> </span><br><span class="line">//è·å–ï¼‹nå°æ—¶</span><br><span class="line">console.log(&#x27;//è·å–-nå°æ—¶&#x27;)</span><br><span class="line">let beforeHour = moment().subtract(2,&#x27;hour&#x27;).toDate();</span><br><span class="line">console.log(beforeHour);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//è·å–ï¼‹nå¤©</span><br><span class="line">let lateDay = moment().add(+5,&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(lateDay);</span><br><span class="line"> </span><br><span class="line">//è·å–-nå¤©</span><br><span class="line">let beforeDay = moment().add(-5,&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(beforeDay);</span><br><span class="line">//ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸º</span><br><span class="line">beforeDay = moment().subtract(5,&#x27;day&#x27;).toDate();</span><br><span class="line">console.log(beforeDay);</span><br><span class="line"> </span><br><span class="line">console.log(&#x27;//è·å–ï¼‹næœˆ&#x27;)</span><br><span class="line">let lateMonth = moment().add(2,&#x27;month&#x27;).toDate();</span><br><span class="line">console.log(lateHour);</span><br><span class="line"> </span><br><span class="line">//è·å–ï¼‹næœˆ</span><br><span class="line">let beforeMonth = moment().subtract(2,&#x27;month&#x27;).toDate();</span><br><span class="line">console.log(lateHour);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//è·å–æ˜ŸæœŸ</span><br><span class="line">let week = moment().format(&#x27;dddd&#x27;);</span><br><span class="line">console.log(week);</span><br><span class="line"> </span><br><span class="line">//è·å–åˆ°ç°åœ¨çš„å¹´é™ å¦‚æœä¸æ»¡ä¸€å¹´æ˜¾ç¤ºå‡ºå…·ä½“å‡ ä¸ªæœˆ</span><br><span class="line">let years = moment(&#x27;2020-12-31&#x27;).fromNow();</span><br><span class="line">console.log(years);</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ç»¼åˆ"><a href="#ä¸‰ã€ç»¼åˆ" class="headerlink" title="ä¸‰ã€ç»¼åˆ"></a>ä¸‰ã€ç»¼åˆ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import moment from &#x27;moment&#x27;</span><br><span class="line"></span><br><span class="line">DATE_TODAY: moment().format(&#x27;YYYY-MM-DD&#x27;),//ä»Šå¤©</span><br><span class="line">DATE_YESTERDAY: moment().subtract(1, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;), // æ˜¨å¤©</span><br><span class="line">DATE_1_WEEK_BEFORE: moment().subtract(1, &#x27;weeks&#x27;).format(&#x27;YYYY-MM-DD&#x27;),// ä¸€å‘¨å‰</span><br><span class="line">DATE_2_WEEKS_BEFORE: moment().subtract(2, &#x27;weeks&#x27;).format(&#x27;YYYY-MM-DD&#x27;),// ä¸¤å‘¨å‰</span><br><span class="line">DATE_3_WEEKS_BEFORE: moment().subtract(3, &#x27;weeks&#x27;).format(&#x27;YYYY-MM-DD&#x27;),// </span><br><span class="line">DATE_1_MONTH_BEFORE: moment().subtract(1, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_2_MONTH_BEFORE: moment().subtract(2, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_3_MONTHS_BEFORE: moment().subtract(3, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_1_YEAR_BEFORE: moment().subtract(1, &#x27;years&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line"></span><br><span class="line">DATE_3_MONTHS_AFTER: moment().add(3, &#x27;months&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_1_YEAR_AFTER: moment().add(1, &#x27;year&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line"></span><br><span class="line">DATE_FIRST_DAY_OF_MONTH: moment().startOf(&#x27;month&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_LAST_DAY_OF_MONTH: moment().endOf(&#x27;month&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line"></span><br><span class="line">DATE_7_DAYS_BEFORE: moment().subtract(7, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_30_DAYS_BEFORE: moment().subtract(30, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_90_DAYS_BEFORE: moment().subtract(90, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">DATE_100_DAYS_BEFORE: moment().subtract(100, &#x27;days&#x27;).format(&#x27;YYYY-MM-DD&#x27;),</span><br><span class="line">// æœ€è¿‘ä¸€ä¸ªå°æ—¶æ—¶é—´æˆ³</span><br><span class="line">new Date(moment().add(1, &#x27;h&#x27;).format(&#x27;YYYY-MM-DD hh:mm:ss&#x27;)).getTime()</span><br><span class="line"></span><br><span class="line">// æ ¼å¼åŒ–æ—¶é—´æˆ³ä¸ºæ—¥æœŸ 2018-12-06:12:21</span><br><span class="line">moment(æ—¶é—´æˆ³ * 1000).format(&#x27;YY-MM-DD:HH:mm:ss&#x27;)</span><br><span class="line"></span><br><span class="line">// è®¡ç®—æ—¶é—´å½“å‰æ—¶é—´å’Œæœ€è¿‘ä¸€å°æ—¶æ—¶é—´å·® å·®åˆ†é’Ÿ</span><br><span class="line">const oneHourBefore = new Date(moment().add(1, &#x27;h&#x27;).format(&#x27;YYYY-MM-DD hh:mm:ss&#x27;)).getTime()</span><br><span class="line">const currTime = Date.now()</span><br><span class="line">const minute = moment(currTime).diff(oneHourBefore), &#x27;minute&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€å…¶ä»–"><a href="#å››ã€å…¶ä»–" class="headerlink" title="å››ã€å…¶ä»–"></a>å››ã€å…¶ä»–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/** </span><br><span class="line"> * [getTimeList description] ç”Ÿæˆæ—¶é—´åˆ—è¡¨ </span><br><span class="line"> * @param  &#123;[type]&#125; hours [description] å°æ—¶ </span><br><span class="line"> * @param  &#123;[type]&#125; step  [description] åˆ†æ®µ </span><br><span class="line"> * @return &#123;[type]&#125;       [description] æ—¶é—´æ®µåˆ—è¡¨ </span><br><span class="line"> */  </span><br><span class="line">function getTimeList(hours, step)&#123;  </span><br><span class="line">    var minutes = 60  </span><br><span class="line">    var timeArr = []  </span><br><span class="line">    hours = hours  </span><br><span class="line">    step = step   </span><br><span class="line">  </span><br><span class="line">    for(var i = 0; i &lt; hours; i++)&#123;  </span><br><span class="line">        var str = &#x27;&#x27;  </span><br><span class="line">        if(i &lt; 10) &#123;  </span><br><span class="line">            str = 0 + &#x27;&#x27; + i  </span><br><span class="line">        &#125; else &#123;  </span><br><span class="line">            str = &#x27;&#x27; + i  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        for(var j = 0; j &lt; minutes; j++) &#123;  </span><br><span class="line">            if(j % step == 0)&#123;  </span><br><span class="line">                var s = j &lt; 10 ? &#x27;:&#x27; + 0 + &#x27;&#x27; + j : &#x27;:&#x27; +  j;  </span><br><span class="line">                s = str + s  </span><br><span class="line">                timeArr.push(s)  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    return timeArr;  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br><span class="line">getTimeList(12, 15)</span><br></pre></td></tr></table></figure>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2022/01/16/html+css+js+ts/3-js%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85moment/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-js-lodash.js">
    <header class="cube-excerpt-header">
        <h1><a href="/2022/01/13/html+css+js+ts/3-js%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85lodash/">js-lodash.js</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2022-01-13
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/javascript/" class="cube-excerpt-tag-link">#javascript</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <blockquote>
<p>ä¸­æ–‡æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://www.lodashjs.com/docs/4.17.5.html">https://www.lodashjs.com/docs/4.17.5.html</a></p>
</blockquote>
<h3 id="chunk"><a href="#chunk" class="headerlink" title="_.chunk"></a>_.chunk</h3><blockquote>
<p>å°†æ•°ç»„è¿›è¡Œåˆ‡åˆ†</p>
</blockquote>
<ul>
<li>è¿™ä¸ªå‡½æ•°æŠŠæ•°ç»„æŒ‰ç…§ä¸€å®šçš„é•¿åº¦åˆ†å¼€ï¼Œè¿”å›æ–°çš„æ•°ç»„ã€‚ï¼ˆç‰‡æ®µåŒ–æ•°ç»„ï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const arr = [1,2,3,4,5,6,7,8,9];</span><br><span class="line">_.chunk(arr,2);</span><br><span class="line">// =&gt;[[1,2],[3,4],[5,6],[7,8],[9]]</span><br></pre></td></tr></table></figure>

<h3 id="compact"><a href="#compact" class="headerlink" title="compact"></a>compact</h3><blockquote>
<p>å»é™¤å‡å€¼ã€‚ï¼ˆå°†æ‰€æœ‰çš„ç©ºå€¼ï¼Œ0ï¼ŒNaNè¿‡æ»¤æ‰ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_.compact([&#x27;1&#x27;,&#x27;2&#x27;,&#x27; &#x27;,0])</span><br><span class="line">// =&gt; [&#x27;1&#x27;,&#x27;2&#x27;]</span><br></pre></td></tr></table></figure>

<h3 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h3><blockquote>
<p>æ•°ç»„å»é‡ã€‚ï¼ˆå°†æ•°ç»„ä¸­çš„å¯¹è±¡å»é‡ï¼Œåªèƒ½æ˜¯æ•°ç»„å»é‡ï¼Œä¸èƒ½æ˜¯å¯¹è±¡å»é‡ã€‚ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_.uniq([1,1,3])</span><br><span class="line">// =&gt; [1,3]</span><br></pre></td></tr></table></figure>

<h3 id="reject"><a href="#reject" class="headerlink" title="_.reject"></a>_.reject</h3><blockquote>
<p>æ ¹æ®æ¡ä»¶å»é™¤æŸä¸ªå…ƒç´ </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.reject(foo, [&#x27;id&#x27;, 0])</span><br><span class="line"></span><br><span class="line">//bar = [&#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;]</span><br></pre></td></tr></table></figure>

<h3 id="shuffle"><a href="#shuffle" class="headerlink" title="shuffle"></a>shuffle</h3><blockquote>
<p>æ— åºåŒ–</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_.shuffle([1,2,3,4]);// æ— åºåŒ–</span><br></pre></td></tr></table></figure>

<h3 id="pick"><a href="#pick" class="headerlink" title="_.pick"></a>_.pick</h3><blockquote>
<p>æ ¹æ®keyæ¥ç­›é€‰æ•°ç»„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var foo = &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;</span><br><span class="line">var bar = _.pick(foo, [&#x27;name&#x27;, &#x27;age&#x27;])</span><br><span class="line">//bar = &#123;name: &quot;aaa&quot;, age: 33&#125;</span><br></pre></td></tr></table></figure>

<h3 id="keys"><a href="#keys" class="headerlink" title="_.keys"></a>_.keys</h3><blockquote>
<p>è¿”å›objectä¸­çš„æ‰€æœ‰key</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var foo = &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;</span><br><span class="line">var bar = _.keys(foo)</span><br><span class="line">//bar = [&#x27;id&#x27;, &#x27;name&#x27;, &#x27;age&#x27;]</span><br></pre></td></tr></table></figure>

<h3 id="cloneDeep"><a href="#cloneDeep" class="headerlink" title="_.cloneDeep"></a>_.cloneDeep</h3><blockquote>
<p>æ·±åº¦æ‹·è´</p>
</blockquote>
<h3 id="forEach"><a href="#forEach" class="headerlink" title="_.forEach"></a>_.forEach</h3><p><strong>å¸¸è§„æ•°ç»„éå†</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">agent.forEach(function (n,key) &#123;</span><br><span class="line">    agent[key].agent_id = agent[key].agent_name;</span><br><span class="line">    return agent;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨lodashæ¥éå†</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_.forEach(agent,function(n,key) &#123;</span><br><span class="line"></span><br><span class="line">    agent[key].agent_id= agent[key].agent_name</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„<code>forEach</code>çš„æ•°ç»„éå†ï¼Œä½¿ç”¨äº†<code>lodash</code>è¿‡åï¼Œ<code>_.forEach()</code>è¿™æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å°±å¯ä»¥ç›´æ¥</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const arr = _.forEach();</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™<code>arr</code>å°±æ˜¯æ–°çš„æ•°ç»„<code>agent</code></p>
<h3 id="merge-å‚æ•°åˆå¹¶"><a href="#merge-å‚æ•°åˆå¹¶" class="headerlink" title="_.merge å‚æ•°åˆå¹¶"></a>_.merge å‚æ•°åˆå¹¶</h3><blockquote>
<p>é€’å½’çš„å°†æºå¯¹è±¡å’Œç»§æ‰¿çš„å¯æšä¸¾å­—ç¬¦ä¸²ç›‘æ§å±æ€§åˆå¹¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚æºå¯¹è±¡ä»å·¦åˆ°å³å¼•ç”¨ï¼Œåç»­æ¥æºå°†è¦†ç›–ä»¥å‰æ¥æºçš„å±æ€§åˆ†é…ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var object = &#123;</span><br><span class="line">  &#x27;a&#x27;: [&#123; &#x27;b&#x27;: 2 &#125;, &#123; &#x27;d&#x27;: 4 &#125;]</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">var other = &#123;</span><br><span class="line">  &#x27;a&#x27;: [&#123; &#x27;c&#x27;: 3 &#125;, &#123; &#x27;e&#x27;: 5 &#125;]</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">_.merge(object, other);</span><br><span class="line">// =&gt; &#123; &#x27;a&#x27;: [&#123; &#x27;b&#x27;: 2, &#x27;c&#x27;: 3 &#125;, &#123; &#x27;d&#x27;: 4, &#x27;e&#x27;: 5 &#125;] &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‰ç«¯åœ¨æ¥å£çš„è¯·æ±‚å¯ä»¥<code>merge</code>ä¸€ä¸‹ä¹‹å‰çš„<code>query</code>å’Œç°åœ¨æ”¹å˜çš„æŸ¥è¯¢çš„å€¼ï¼Œå†å»è¯·æ±‚åç«¯æ¥å£çš„æ•°æ®</p>
</blockquote>
<h3 id="random"><a href="#random" class="headerlink" title="_.random"></a>_.random</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(_.random(10, 20)); // è·å–éšæœºæ•°</span><br><span class="line">_.random(15, 20, true); // éšæœºæµ®ç‚¹</span><br><span class="line">_.sample([&quot;lisong&quot;, &quot;heyan&quot;], 1);// éšæœºè·å–æ•°ç»„ä¸­çš„æŸä¸€é¡¹,attr2:éšæœºè·å–çš„ä¸ªæ•°</span><br></pre></td></tr></table></figure>

<h3 id="findæŸ¥æ‰¾æ•°ç»„"><a href="#findæŸ¥æ‰¾æ•°ç»„" class="headerlink" title="_.findæŸ¥æ‰¾æ•°ç»„"></a>_.findæŸ¥æ‰¾æ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.find(foo, [&#x27;id&#x27;, 0])</span><br><span class="line">//bar = &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ä¸€ä¸‹å¦‚æœæ²¡æ‰¾åˆ°çš„è¯ï¼Œä¼šè¿”å›<code>undefined</code>ï¼Œè¦å¤„ç†ä¸€ä¸‹</p>
</blockquote>
<h3 id="keyBy"><a href="#keyBy" class="headerlink" title="_.keyBy"></a>_.keyBy</h3><blockquote>
<p>ä»¥æŸä¸ªå±æ€§ä¸ºé”®ï¼Œå°†æ•°ç»„è½¬ä¸ºå¯¹è±¡</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var foo = var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.keyBy(foo, &#x27;name&#x27;)</span><br><span class="line">//bar = &#123;</span><br><span class="line">//    aaa: &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">//    bbb: &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">//&#125;</span><br></pre></td></tr></table></figure>

<h3 id="filter"><a href="#filter" class="headerlink" title="_.filter"></a>_.filter</h3><blockquote>
<p>æ ¹æ®æ¡ä»¶è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›æ–°æ•°ç»„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var foo = var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.filter(foo, [&#x27;name&#x27;, &quot;aaa&quot;])</span><br><span class="line">//bar = &#123;</span><br><span class="line">//    aaa: &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;</span><br><span class="line">//&#125;</span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="_.map"></a>_.map</h3><blockquote>
<p>ä»é›†åˆä¸­æŒ‘å‡ºä¸€ä¸ª<code>key</code>ï¼Œå°†å…¶å€¼ä½œä¸ºæ•°ç»„è¿”å›</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var foo = var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.map(foo, &#x27;name&#x27;)</span><br><span class="line">//bar = [&quot;aaa&quot;, &quot;bbb&quot;]</span><br></pre></td></tr></table></figure>

<h3 id="max-x2F-min-x2F-sum"><a href="#max-x2F-min-x2F-sum" class="headerlink" title=".max&#x2F;.min&#x2F;_.sum"></a><em>.max&#x2F;</em>.min&#x2F;_.sum</h3><blockquote>
<p>æ•°ç»„ä¸­æœ€å¤§å€¼ã€æœ€å°å€¼ã€æ•°ç»„æ±‚å’Œ</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var foo = [1, 2, 3, 4]</span><br><span class="line">var bar = _.max(foo)</span><br><span class="line">//bar = 4</span><br><span class="line">bar = _.min(foo)</span><br><span class="line">//bar = 1</span><br><span class="line">bar = _.sum(foo)</span><br><span class="line">//bar = 10</span><br></pre></td></tr></table></figure>

<h3 id="pad-x2F-padStart-x2F-padEnd"><a href="#pad-x2F-padStart-x2F-padEnd" class="headerlink" title=".pad&#x2F;.padStart&#x2F;_.padEnd"></a><em>.pad&#x2F;</em>.padStart&#x2F;_.padEnd</h3><blockquote>
<p>åœ¨ä¸¤ç«¯ã€å¼€å¤´ã€æœ«å°¾è¡¥é½å­—ç¬¦</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var foo = &quot;helloworld&quot;</span><br><span class="line">var bar = _.pad(foo, 14, &#x27;-&#x27;)</span><br><span class="line">//bar = --helloworld--</span><br><span class="line">bar = _.padStart(foo, 14, &#x27;-&#x27;)</span><br><span class="line">//bar = ----helloworld</span><br><span class="line">bar = _.padEnd(foo, 14, &#x27;-&#x27;)</span><br><span class="line">//bar = helloworld----</span><br></pre></td></tr></table></figure>

<h3 id="é€‰å‡ºjsonæ•°ç»„ä¸­idæœ€å¤§çš„ä¸€é¡¹"><a href="#é€‰å‡ºjsonæ•°ç»„ä¸­idæœ€å¤§çš„ä¸€é¡¹" class="headerlink" title="é€‰å‡ºjsonæ•°ç»„ä¸­idæœ€å¤§çš„ä¸€é¡¹"></a>é€‰å‡ºjsonæ•°ç»„ä¸­idæœ€å¤§çš„ä¸€é¡¹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">var bar = _.find(foo, [&#x27;id&#x27;, _.max(_.map(foo, &#x27;id&#x27;))])</span><br><span class="line">// bar = &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">// ps:ä¹Ÿå¯ä»¥ç”¨maxByæŸä¸ªkeyæ¥ä»£æ›¿</span><br></pre></td></tr></table></figure>

<h3 id="æ›´æ–°jsonæ•°ç»„ä¸­æŸä¸€é¡¹çš„å€¼"><a href="#æ›´æ–°jsonæ•°ç»„ä¸­æŸä¸€é¡¹çš„å€¼" class="headerlink" title="æ›´æ–°jsonæ•°ç»„ä¸­æŸä¸€é¡¹çš„å€¼"></a>æ›´æ–°jsonæ•°ç»„ä¸­æŸä¸€é¡¹çš„å€¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var foo = [</span><br><span class="line">    &#123;id: 0, name: &quot;aaa&quot;, age: 33&#125;,</span><br><span class="line">    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">]</span><br><span class="line">let list = _.keyBy(foo, &#x27;id&#x27;)</span><br><span class="line">list[0].name = &quot;ccc&quot;</span><br><span class="line">var bar = _.map(list)</span><br><span class="line">// bar = [</span><br><span class="line">//    &#123;id: 0, name: &quot;ccc&quot;, age: 33&#125;,</span><br><span class="line">//    &#123;id: 1, name: &quot;bbb&quot;, age: 25&#125;</span><br><span class="line">//]</span><br></pre></td></tr></table></figure>

<h3 id="æ‰å¹³åŒ–æ•°ç»„-flatten"><a href="#æ‰å¹³åŒ–æ•°ç»„-flatten" class="headerlink" title="æ‰å¹³åŒ–æ•°ç»„ _.flatten"></a>æ‰å¹³åŒ–æ•°ç»„ _.flatten</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1,2,[3,4,[5],6]]</span><br><span class="line">var a8 = _.flatten(arr)  //[ 1, 2, 3, 4, [ 5 ], 6 ]</span><br><span class="line">var a9 = _.flattenDeep(arr)  //[ 1, 2, 3, 4, 5, 6 ]</span><br><span class="line">var a10 = _.flattenDepth(arr,2)  //[ 1, 2, 3, 4, 5, 6 ]</span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr2 = [12,14,11,12,12,1,14,16,17,22,2,11,12]</span><br><span class="line">var a11 = Array.from(new Set(arr2))</span><br><span class="line">var a12 = [...new Set(arr2)]</span><br><span class="line">var a13 = _.uniq(arr2)  //[ 12, 14, 11, 1, 16, 17, 22, 2 ]</span><br><span class="line">var arrObj = [&#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 2 &#125;, &#123; &#x27;x&#x27;: 2, &#x27;y&#x27;: 1 &#125;,&#123; &#x27;x&#x27;: 2, &#x27;y&#x27;: 1 &#125;, &#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 2 &#125;];</span><br><span class="line">var a14 = _.uniqWith(arrObj, _.isEqual)  //[ &#123; x: 1, y: 2 &#125;, &#123; x: 2, y: 1 &#125; ]</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2022/01/13/html+css+js+ts/3-js%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85lodash/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-git-stach">
    <header class="cube-excerpt-header">
        <h1><a href="/2022/01/12/%E5%B7%A5%E5%85%B7/git-stach/">git-stach</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2022-01-12
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/git/" class="cube-excerpt-tag-link">#git</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><p>stashï¼Œè¯‘ä¸ºå­˜æ”¾ï¼Œåœ¨ git ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºä¿å­˜å½“å‰å·¥ä½œè¿›åº¦ï¼Œä¼šæŠŠæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ”¹åŠ¨è¿›è¡Œä¿å­˜ï¼Œè¿™äº›ä¿®æ”¹ä¼šä¿å­˜åœ¨ä¸€ä¸ªæ ˆä¸Š</p>
<p>åç»­ä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™ä»»ä½•åˆ†æ”¯é‡æ–°å°†æŸæ¬¡çš„ä¿®æ”¹æ¨å‡ºæ¥ï¼Œé‡æ–°åº”ç”¨è¿™äº›æ›´æ”¹çš„ä»£ç </p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git stash</code>ä¼šç¼“å­˜ä¸‹åˆ—çŠ¶æ€çš„æ–‡ä»¶ï¼š</p>
<ul>
<li>æ·»åŠ åˆ°æš‚å­˜åŒºçš„ä¿®æ”¹ï¼ˆstaged changesï¼‰</li>
<li>Gitè·Ÿè¸ªçš„ä½†å¹¶æœªæ·»åŠ åˆ°æš‚å­˜åŒºçš„ä¿®æ”¹ï¼ˆunstaged changesï¼‰</li>
</ul>
<p>ä½†ä»¥ä¸‹çŠ¶æ€çš„æ–‡ä»¶ä¸ä¼šç¼“å­˜ï¼š</p>
<ul>
<li>åœ¨å·¥ä½œç›®å½•ä¸­æ–°çš„æ–‡ä»¶ï¼ˆuntracked filesï¼‰</li>
<li>è¢«å¿½ç•¥çš„æ–‡ä»¶ï¼ˆignored filesï¼‰</li>
</ul>
<p>å¦‚æœæƒ³è¦ä¸Šè¿°çš„æ–‡ä»¶éƒ½è¢«ç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨<code>-u</code>æˆ–è€…<code>--include-untracked</code>å¯ä»¥å·¥ä½œç›®å½•æ–°çš„æ–‡ä»¶ï¼Œä½¿ç”¨<code>-a</code>æˆ–è€…<code>--all</code>å‘½ä»¤å¯ä»¥å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ä¿®æ”¹</p>
<h2 id="äºŒã€å¦‚ä½•ä½¿ç”¨"><a href="#äºŒã€å¦‚ä½•ä½¿ç”¨" class="headerlink" title="äºŒã€å¦‚ä½•ä½¿ç”¨"></a>äºŒã€å¦‚ä½•ä½¿ç”¨</h2><p>å…³äº<code>git stash</code>å¸¸è§çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>git stash</li>
<li>git stash save</li>
<li>git stash list</li>
<li>git stash pop</li>
<li>git stash apply</li>
<li>git stash show</li>
<li>git stash drop</li>
<li>git stash clear</li>
</ul>
<h3 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h3><p>ä¿å­˜å½“å‰å·¥ä½œè¿›åº¦ï¼Œä¼šæŠŠæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ”¹åŠ¨ä¿å­˜èµ·æ¥</p>
<h3 id="git-stash-save"><a href="#git-stash-save" class="headerlink" title="git stash save"></a>git stash save</h3><p><code>git stash save</code>å¯ä»¥ç”¨äºå­˜å‚¨ä¿®æ”¹.å¹¶ä¸”å°†<code>git</code>çš„å·¥ä½œçŠ¶æ€åˆ‡å›åˆ°<code>HEAD</code>ä¹Ÿå°±æ˜¯ä¸Šä¸€æ¬¡åˆæ³•æäº¤ä¸Š</p>
<p>å¦‚æœç»™å®šå…·ä½“çš„æ–‡ä»¶è·¯å¾„,<code>git stash</code>åªä¼šå¤„ç†è·¯å¾„ä¸‹çš„æ–‡ä»¶.å…¶ä»–çš„æ–‡ä»¶ä¸ä¼šè¢«å­˜å‚¨ï¼Œå…¶å­˜åœ¨ä¸€äº›å‚æ•°ï¼š</p>
<ul>
<li>â€“keep-index æˆ–è€… -k åªä¼šå­˜å‚¨ä¸ºåŠ å…¥ git ç®¡ç†çš„æ–‡ä»¶</li>
<li>â€“include-untracked ä¸ºè¿½è¸ªçš„æ–‡ä»¶ä¹Ÿä¼šè¢«ç¼“å­˜,å½“å‰çš„å·¥ä½œç©ºé—´ä¼šè¢«æ¢å¤ä¸ºå®Œå…¨æ¸…ç©ºçš„çŠ¶æ€</li>
<li>-a æˆ–è€… â€“all å‘½ä»¤å¯ä»¥å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ä¿®æ”¹ï¼ŒåŒ…æ‹¬è¢« git å¿½ç•¥çš„æ–‡ä»¶</li>
</ul>
<h3 id="git-stash-list"><a href="#git-stash-list" class="headerlink" title="git stash list"></a>git stash list</h3><p>æ˜¾ç¤ºä¿å­˜è¿›åº¦çš„åˆ—è¡¨ã€‚ä¹Ÿå°±æ„å‘³ç€ï¼Œ<code>git stash</code>å‘½ä»¤å¯ä»¥å¤šæ¬¡æ‰§è¡Œï¼Œå½“å¤šæ¬¡ä½¿ç”¨<code>git stash</code>å‘½ä»¤åï¼Œæ ˆé‡Œä¼šå……æ»¡æœªæäº¤çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://static.vue-js.com/50216dd0-fccf-11eb-bc6f-3f06e1491664.png" alt="img"></p>
<p>å…¶ä¸­ï¼Œ<code>stash@&#123;0&#125;</code>ã€<code>stash@&#123;1&#125;</code>å°±æ˜¯å½“å‰<code>stash</code>çš„åç§°</p>
<h3 id="git-stash-pop"><a href="#git-stash-pop" class="headerlink" title="git stash pop"></a>git stash pop</h3><p><code>git stash pop</code> ä»æ ˆä¸­è¯»å–æœ€è¿‘ä¸€æ¬¡ä¿å­˜çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯æ ˆé¡¶çš„<code>stash</code>ä¼šæ¢å¤åˆ°å·¥ä½œåŒº</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ <code>git stash pop</code> + <code>stash</code>åå­—æ‰§è¡Œæ¢å¤å“ªä¸ª<code>stash</code>æ¢å¤åˆ°å½“å‰ç›®å½•</p>
<p>å¦‚æœä»<code>stash</code>ä¸­æ¢å¤çš„å†…å®¹å’Œå½“å‰ç›®å½•ä¸­çš„å†…å®¹å‘ç”Ÿäº†å†²çªï¼Œåˆ™éœ€è¦æ‰‹åŠ¨ä¿®å¤å†²çªæˆ–è€…åˆ›å»ºæ–°çš„åˆ†æ”¯æ¥è§£å†³å†²çª</p>
<h3 id="git-stash-apply"><a href="#git-stash-apply" class="headerlink" title="git stash apply"></a>git stash apply</h3><p>å°†å †æ ˆä¸­çš„å†…å®¹åº”ç”¨åˆ°å½“å‰ç›®å½•ï¼Œä¸åŒäº<code>git stash pop</code>ï¼Œè¯¥å‘½ä»¤ä¸ä¼šå°†å†…å®¹ä»å †æ ˆä¸­åˆ é™¤</p>
<p>ä¹Ÿå°±è¯´è¯¥å‘½ä»¤èƒ½å¤Ÿå°†å †æ ˆçš„å†…å®¹å¤šæ¬¡åº”ç”¨åˆ°å·¥ä½œç›®å½•ä¸­ï¼Œé€‚åº”äºå¤šä¸ªåˆ†æ”¯çš„æƒ…å†µ</p>
<p>åŒæ ·ï¼Œå¯ä»¥é€šè¿‡<code>git stash apply</code> + <code>stash</code>åå­—æ‰§è¡Œæ¢å¤å“ªä¸ª<code>stash</code>æ¢å¤åˆ°å½“å‰ç›®å½•</p>
<h3 id="git-stash-show"><a href="#git-stash-show" class="headerlink" title="git stash show"></a>git stash show</h3><p>æŸ¥çœ‹å †æ ˆä¸­æœ€æ–°ä¿å­˜çš„<code>stash</code>å’Œå½“å‰ç›®å½•çš„å·®å¼‚</p>
<p>é€šè¿‡ä½¿ç”¨<code>git stash show -p</code>æŸ¥çœ‹è¯¦ç»†çš„ä¸åŒ</p>
<p>é€šè¿‡ä½¿ç”¨<code>git stash show stash@&#123;1&#125;</code>æŸ¥çœ‹æŒ‡å®šçš„<code>stash</code>å’Œå½“å‰ç›®å½•å·®å¼‚</p>
<p><img src="https://static.vue-js.com/458620a0-fccf-11eb-bc6f-3f06e1491664.png" alt="img"></p>
<h3 id="git-stash-drop"><a href="#git-stash-drop" class="headerlink" title="git stash drop"></a>git stash drop</h3><p><code>git stash drop</code> + <code>stash</code>åç§°è¡¨ç¤ºä»å †æ ˆä¸­ç§»é™¤æŸä¸ªæŒ‡å®šçš„stash</p>
<h3 id="git-stash-clear"><a href="#git-stash-clear" class="headerlink" title="git stash clear"></a>git stash clear</h3><p>åˆ é™¤æ‰€æœ‰å­˜å‚¨çš„è¿›åº¦</p>
<h2 id="ä¸‰ã€åº”ç”¨åœºæ™¯"><a href="#ä¸‰ã€åº”ç”¨åœºæ™¯" class="headerlink" title="ä¸‰ã€åº”ç”¨åœºæ™¯"></a>ä¸‰ã€åº”ç”¨åœºæ™¯</h2><p>å½“ä½ åœ¨é¡¹ç›®çš„ä¸€éƒ¨åˆ†ä¸Šå·²ç»å·¥ä½œä¸€æ®µæ—¶é—´åï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½è¿›å…¥äº†æ··ä¹±çš„çŠ¶æ€ï¼Œ è€Œè¿™æ—¶ä½ æƒ³è¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯æˆ–è€…æ‹‰ä¸‹è¿œç«¯çš„ä»£ç å»åšä¸€ç‚¹åˆ«çš„äº‹æƒ…</p>
<p>ä½†æ˜¯ä½ åˆ›å»ºä¸€æ¬¡æœªå®Œæˆçš„ä»£ç çš„<code>commit</code>æäº¤ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨<code>git stash</code></p>
<p>ä¾‹å¦‚ä»¥ä¸‹åœºæ™¯ï¼š</p>
<p>å½“ä½ çš„å¼€å‘è¿›è¡Œåˆ°ä¸€åŠ,ä½†æ˜¯ä»£ç è¿˜ä¸æƒ³è¿›è¡Œæäº¤ ,ç„¶åéœ€è¦åŒæ­¥å»å…³è”è¿œç«¯ä»£ç æ—¶.å¦‚æœä½ æœ¬åœ°çš„ä»£ç å’Œè¿œç«¯ä»£ç æ²¡æœ‰å†²çªæ—¶,å¯ä»¥ç›´æ¥é€šè¿‡<code>git pull</code>è§£å†³</p>
<p>ä½†æ˜¯å¦‚æœå¯èƒ½å‘ç”Ÿå†²çªæ€ä¹ˆåŠ.ç›´æ¥<code>git pull</code>ä¼šæ‹’ç»è¦†ç›–å½“å‰çš„ä¿®æ”¹ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä¾æ¬¡ä½¿ç”¨ä¸‹è¿°çš„å‘½ä»¤ï¼š</p>
<ul>
<li>git stash</li>
<li>git pull</li>
<li>git stash pop</li>
</ul>
<p>æˆ–è€…å½“ä½ å¼€å‘åˆ°ä¸€åŠï¼Œç°åœ¨è¦ä¿®æ”¹åˆ«çš„åˆ†æ”¯é—®é¢˜çš„æ—¶å€™ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>git stash</code>ç¼“å­˜å½“å‰åŒºåŸŸçš„ä»£ç </p>
<ul>
<li>git stashï¼šä¿å­˜å¼€å‘åˆ°ä¸€åŠçš„ä»£ç </li>
<li>git commit -m â€˜ä¿®æ”¹é—®é¢˜â€™</li>
<li>git stash popï¼šå°†ä»£ç è¿½åŠ åˆ°æœ€æ–°çš„æäº¤ä¹‹å</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2022/01/12/%E5%B7%A5%E5%85%B7/git-stach/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3ä¼˜åŒ–">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/10/16/Vue/vue3%E4%BC%98%E5%8C%96/">vue3ä¼˜åŒ–</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-10-16
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€ç¼–è¯‘é˜¶æ®µ"><a href="#ä¸€ã€ç¼–è¯‘é˜¶æ®µ" class="headerlink" title="ä¸€ã€ç¼–è¯‘é˜¶æ®µ"></a>ä¸€ã€ç¼–è¯‘é˜¶æ®µ</h2><p>å›é¡¾<code>Vue2</code>ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª <code>watcher</code> å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠç”¨åˆ°çš„æ•°æ®<code>property</code>è®°å½•ä¸ºä¾èµ–ï¼Œå½“ä¾èµ–å‘ç”Ÿæ”¹å˜ï¼Œè§¦å‘<code>setter</code>ï¼Œåˆ™ä¼šé€šçŸ¥<code>watcher</code>ï¼Œä»è€Œä½¿å…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“</p>
<p><img src="https://static.vue-js.com/39066120-5ed0-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªç»„ä»¶ç»“æ„å¦‚ä¸‹å›¾</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œç»„ä»¶å†…éƒ¨åªæœ‰ä¸€ä¸ªåŠ¨æ€èŠ‚ç‚¹ï¼Œå‰©ä½™ä¸€å †éƒ½æ˜¯é™æ€èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œå¾ˆå¤š <code>diff</code> å’Œéå†å…¶å®éƒ½æ˜¯ä¸éœ€è¦çš„ï¼Œé€ æˆæ€§èƒ½æµªè´¹</p>
<p>å› æ­¤ï¼Œ<code>Vue3</code>åœ¨ç¼–è¯‘é˜¶æ®µï¼Œåšäº†è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚ä¸»è¦æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>diffç®—æ³•ä¼˜åŒ–</li>
<li>é™æ€æå‡</li>
<li>äº‹ä»¶ç›‘å¬ç¼“å­˜</li>
<li>SSRä¼˜åŒ–</li>
</ul>
<h4 id="diffç®—æ³•ä¼˜åŒ–"><a href="#diffç®—æ³•ä¼˜åŒ–" class="headerlink" title="diffç®—æ³•ä¼˜åŒ–"></a>diffç®—æ³•ä¼˜åŒ–</h4><p><code>vue3</code>åœ¨<code>diff</code>ç®—æ³•ä¸­ç›¸æ¯”<code>vue2</code>å¢åŠ äº†é™æ€æ ‡è®°</p>
<p>å…³äºè¿™ä¸ªé™æ€æ ‡è®°ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºäº†ä¼šå‘ç”Ÿå˜åŒ–çš„åœ°æ–¹æ·»åŠ ä¸€ä¸ª<code>flag</code>æ ‡è®°ï¼Œä¸‹æ¬¡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ç›´æ¥æ‰¾è¯¥åœ°æ–¹è¿›è¡Œæ¯”è¾ƒ</p>
<p>ä¸‹å›¾è¿™é‡Œï¼Œå·²ç»æ ‡è®°é™æ€èŠ‚ç‚¹çš„<code>p</code>æ ‡ç­¾åœ¨<code>diff</code>è¿‡ç¨‹ä¸­åˆ™ä¸ä¼šæ¯”è¾ƒï¼ŒæŠŠæ€§èƒ½è¿›ä¸€æ­¥æé«˜</p>
<p><img src="https://static.vue-js.com/c732e150-5c58-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>å…³äºé™æ€ç±»å‹æšä¸¾å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> enum <span class="title class_">PatchFlags</span> &#123;</span><br><span class="line">  <span class="variable constant_">TEXT</span> = <span class="number">1</span>,<span class="comment">// åŠ¨æ€çš„æ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line">  <span class="variable constant_">CLASS</span> = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,  <span class="comment">// 2 åŠ¨æ€çš„ class</span></span><br><span class="line">  <span class="variable constant_">STYLE</span> = <span class="number">1</span> &lt;&lt; <span class="number">2</span>,  <span class="comment">// 4 åŠ¨æ€çš„ style</span></span><br><span class="line">  <span class="variable constant_">PROPS</span> = <span class="number">1</span> &lt;&lt; <span class="number">3</span>,  <span class="comment">// 8 åŠ¨æ€å±æ€§ï¼Œä¸åŒ…æ‹¬ç±»åå’Œæ ·å¼</span></span><br><span class="line">  <span class="variable constant_">FULL_PROPS</span> = <span class="number">1</span> &lt;&lt; <span class="number">4</span>,  <span class="comment">// 16 åŠ¨æ€ keyï¼Œå½“ key å˜åŒ–æ—¶éœ€è¦å®Œæ•´çš„ diff ç®—æ³•åšæ¯”è¾ƒ</span></span><br><span class="line">  <span class="variable constant_">HYDRATE_EVENTS</span> = <span class="number">1</span> &lt;&lt; <span class="number">5</span>,  <span class="comment">// 32 è¡¨ç¤ºå¸¦æœ‰äº‹ä»¶ç›‘å¬å™¨çš„èŠ‚ç‚¹</span></span><br><span class="line">  <span class="variable constant_">STABLE_FRAGMENT</span> = <span class="number">1</span> &lt;&lt; <span class="number">6</span>,   <span class="comment">// 64 ä¸€ä¸ªä¸ä¼šæ”¹å˜å­èŠ‚ç‚¹é¡ºåºçš„ Fragment</span></span><br><span class="line">  <span class="variable constant_">KEYED_FRAGMENT</span> = <span class="number">1</span> &lt;&lt; <span class="number">7</span>, <span class="comment">// 128 å¸¦æœ‰ key å±æ€§çš„ Fragment</span></span><br><span class="line">  <span class="variable constant_">UNKEYED_FRAGMENT</span> = <span class="number">1</span> &lt;&lt; <span class="number">8</span>, <span class="comment">// 256 å­èŠ‚ç‚¹æ²¡æœ‰ key çš„ Fragment</span></span><br><span class="line">  <span class="variable constant_">NEED_PATCH</span> = <span class="number">1</span> &lt;&lt; <span class="number">9</span>,   <span class="comment">// 512</span></span><br><span class="line">  <span class="variable constant_">DYNAMIC_SLOTS</span> = <span class="number">1</span> &lt;&lt; <span class="number">10</span>,  <span class="comment">// åŠ¨æ€ solt</span></span><br><span class="line">  <span class="variable constant_">HOISTED</span> = -<span class="number">1</span>,  <span class="comment">// ç‰¹æ®Šæ ‡å¿—æ˜¯è´Ÿæ•´æ•°è¡¨ç¤ºæ°¸è¿œä¸ä¼šç”¨ä½œ diff</span></span><br><span class="line">  <span class="variable constant_">BAIL</span> = -<span class="number">2</span> <span class="comment">// ä¸€ä¸ªç‰¹æ®Šçš„æ ‡å¿—ï¼ŒæŒ‡ä»£å·®å¼‚ç®—æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é™æ€æå‡"><a href="#é™æ€æå‡" class="headerlink" title="é™æ€æå‡"></a>é™æ€æå‡</h4><p><code>Vue3</code>ä¸­å¯¹ä¸å‚ä¸æ›´æ–°çš„å…ƒç´ ï¼Œä¼šåšé™æ€æå‡ï¼Œåªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œåœ¨æ¸²æŸ“æ—¶ç›´æ¥å¤ç”¨</p>
<p>è¿™æ ·å°±å…å»äº†é‡å¤çš„åˆ›å»ºèŠ‚ç‚¹ï¼Œå¤§å‹åº”ç”¨ä¼šå—ç›Šäºè¿™ä¸ªæ”¹åŠ¨ï¼Œå…å»äº†é‡å¤çš„åˆ›å»ºæ“ä½œï¼Œä¼˜åŒ–äº†è¿è¡Œæ—¶å€™çš„å†…å­˜å ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;ä½ å¥½&lt;/span&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰åšé™æ€æå‡ä¹‹å‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createBlock</span>(_Fragment, <span class="literal">null</span>, [</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;span&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;ä½ å¥½&quot;</span>),</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="title function_">_toDisplayString</span>(_ctx.<span class="property">message</span>), <span class="number">1</span> <span class="comment">/* TEXT */</span>)</span><br><span class="line">  ], <span class="number">64</span> <span class="comment">/* STABLE_FRAGMENT */</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åšäº†é™æ€æå‡ä¹‹å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _hoisted_1 = <span class="comment">/*#__PURE__*/</span><span class="title function_">_createVNode</span>(<span class="string">&quot;span&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;ä½ å¥½&quot;</span>, -<span class="number">1</span> <span class="comment">/* HOISTED */</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createBlock</span>(_Fragment, <span class="literal">null</span>, [</span><br><span class="line">    _hoisted_1,</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="title function_">_toDisplayString</span>(_ctx.<span class="property">message</span>), <span class="number">1</span> <span class="comment">/* TEXT */</span>)</span><br><span class="line">  ], <span class="number">64</span> <span class="comment">/* STABLE_FRAGMENT */</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Check the console for the AST</span></span><br></pre></td></tr></table></figure>

<p>é™æ€å†…å®¹<code>_hoisted_1</code>è¢«æ”¾ç½®åœ¨<code>render</code> å‡½æ•°å¤–ï¼Œæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™åªè¦å– <code>_hoisted_1</code> å³å¯</p>
<p>åŒæ—¶ <code>_hoisted_1</code> è¢«æ‰“ä¸Šäº† <code>PatchFlag</code> ï¼Œé™æ€æ ‡è®°å€¼ä¸º -1 ï¼Œç‰¹æ®Šæ ‡å¿—æ˜¯è´Ÿæ•´æ•°è¡¨ç¤ºæ°¸è¿œä¸ä¼šç”¨äº Diff</p>
<h4 id="äº‹ä»¶ç›‘å¬ç¼“å­˜"><a href="#äº‹ä»¶ç›‘å¬ç¼“å­˜" class="headerlink" title="äº‹ä»¶ç›‘å¬ç¼“å­˜"></a>äº‹ä»¶ç›‘å¬ç¼“å­˜</h4><p>é»˜è®¤æƒ…å†µä¸‹ç»‘å®šäº‹ä»¶è¡Œä¸ºä¼šè¢«è§†ä¸ºåŠ¨æ€ç»‘å®šï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½ä¼šå»è¿½è¸ªå®ƒçš„å˜åŒ–</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;button @click = &#x27;onClick&#x27;&gt;ç‚¹æˆ‘&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>æ²¡å¼€å¯äº‹ä»¶ç›‘å¬å™¨ç¼“å­˜</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> render = <span class="comment">/*#__PURE__*/</span><span class="title function_">_withId</span>(<span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createBlock</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, [</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;button&quot;</span>, &#123; <span class="attr">onClick</span>: _ctx.<span class="property">onClick</span> &#125;, <span class="string">&quot;ç‚¹æˆ‘&quot;</span>, <span class="number">8</span> <span class="comment">/* PROPS */</span>, [<span class="string">&quot;onClick&quot;</span>])</span><br><span class="line">                                             <span class="comment">// PROPS=1&lt;&lt;3,// 8 //åŠ¨æ€å±æ€§ï¼Œä½†ä¸åŒ…å«ç±»åå’Œæ ·å¼</span></span><br><span class="line">  ]))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å¼€å¯äº‹ä»¶ä¾¦å¬å™¨ç¼“å­˜å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createBlock</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, [</span><br><span class="line">    <span class="title function_">_createVNode</span>(<span class="string">&quot;button&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">onClick</span>: _cache[<span class="number">1</span>] || (_cache[<span class="number">1</span>] = <span class="function">(<span class="params">...args</span>) =&gt;</span> (_ctx.<span class="title function_">onClick</span>(...args)))</span><br><span class="line">    &#125;, <span class="string">&quot;ç‚¹æˆ‘&quot;</span>)</span><br><span class="line">  ]))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°å‘ç°å¼€å¯äº†ç¼“å­˜åï¼Œæ²¡æœ‰äº†é™æ€æ ‡è®°ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸‹æ¬¡<code>diff</code>ç®—æ³•çš„æ—¶å€™ç›´æ¥ä½¿ç”¨</p>
<h4 id="SSRä¼˜åŒ–"><a href="#SSRä¼˜åŒ–" class="headerlink" title="SSRä¼˜åŒ–"></a>SSRä¼˜åŒ–</h4><p>å½“é™æ€å†…å®¹å¤§åˆ°ä¸€å®šé‡çº§æ—¶å€™ï¼Œä¼šç”¨<code>createStaticVNode</code>æ–¹æ³•åœ¨å®¢æˆ·ç«¯å»ç”Ÿæˆä¸€ä¸ªstatic nodeï¼Œè¿™äº›é™æ€<code>node</code>ï¼Œä¼šè¢«ç›´æ¥<code>innerHtml</code>ï¼Œå°±ä¸éœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œç„¶åæ ¹æ®å¯¹è±¡æ¸²æŸ“</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">div&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">span</span>&gt;</span>ä½ å¥½<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	...  <span class="comment">// å¾ˆå¤šä¸ªé™æ€å±æ€§</span></span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘å</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mergeProps <span class="keyword">as</span> _mergeProps &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ssrRenderAttrs <span class="keyword">as</span> _ssrRenderAttrs, ssrInterpolate <span class="keyword">as</span> _ssrInterpolate &#125; <span class="keyword">from</span> <span class="string">&quot;@vue/server-renderer&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">ssrRender</span>(<span class="params">_ctx, _push, _parent, _attrs, $props, $setup, $data, $options</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> _cssVars = &#123; <span class="attr">style</span>: &#123; <span class="attr">color</span>: _ctx.<span class="property">color</span> &#125;&#125;</span><br><span class="line">  <span class="title function_">_push</span>(<span class="string">`&lt;div<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">    _ssrRenderAttrs(_mergeProps(_attrs, _cssVars))</span></span></span><br><span class="line"><span class="subst"><span class="string">  &#125;</span>&gt;&lt;div&gt;&lt;span&gt;ä½ å¥½&lt;/span&gt;...&lt;div&gt;&lt;span&gt;ä½ å¥½&lt;/span&gt;&lt;div&gt;&lt;span&gt;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">    _ssrInterpolate(_ctx.message)</span></span></span><br><span class="line"><span class="subst"><span class="string">  &#125;</span>&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€æºç ä½“ç§¯"><a href="#äºŒã€æºç ä½“ç§¯" class="headerlink" title="äºŒã€æºç ä½“ç§¯"></a>äºŒã€æºç ä½“ç§¯</h2><p>ç›¸æ¯”<code>Vue2</code>ï¼Œ<code>Vue3</code>æ•´ä½“ä½“ç§¯å˜å°äº†ï¼Œé™¤äº†ç§»å‡ºä¸€äº›ä¸å¸¸ç”¨çš„APIï¼Œå†é‡è¦çš„æ˜¯<code>Tree shanking</code></p>
<p>ä»»ä½•ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚<code>ref</code>ã€<code>reavtived</code>ã€<code>computed</code>ç­‰ï¼Œä»…ä»…åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰æ‰“åŒ…ï¼Œæ²¡ç”¨åˆ°çš„æ¨¡å—éƒ½è¢«æ‘‡æ‰ï¼Œæ‰“åŒ…çš„æ•´ä½“ä½“ç§¯å˜å°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed, defineComponent, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params">props, context</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> readOnlyAge = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> age.<span class="property">value</span>++) <span class="comment">// 19</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            age,</span><br><span class="line">            state,</span><br><span class="line">            readOnlyAge</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€å“åº”å¼ç³»ç»Ÿ"><a href="#ä¸‰ã€å“åº”å¼ç³»ç»Ÿ" class="headerlink" title="ä¸‰ã€å“åº”å¼ç³»ç»Ÿ"></a>ä¸‰ã€å“åº”å¼ç³»ç»Ÿ</h2><p><code>vue2</code>ä¸­é‡‡ç”¨ <code>defineProperty</code>æ¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œç„¶åè¿›è¡Œæ·±åº¦éå†æ‰€æœ‰å±æ€§ï¼Œç»™æ¯ä¸ªå±æ€§æ·»åŠ <code>getter</code>å’Œ<code>setter</code>ï¼Œå®ç°å“åº”å¼</p>
<p><code>vue3</code>é‡‡ç”¨<code>proxy</code>é‡å†™äº†å“åº”å¼ç³»ç»Ÿï¼Œå› ä¸º<code>proxy</code>å¯ä»¥å¯¹æ•´ä¸ªå¯¹è±¡è¿›è¡Œç›‘å¬ï¼Œæ‰€ä»¥ä¸éœ€è¦æ·±åº¦éå†</p>
<ul>
<li>å¯ä»¥ç›‘å¬åŠ¨æ€å±æ€§çš„æ·»åŠ </li>
<li>å¯ä»¥ç›‘å¬åˆ°æ•°ç»„çš„ç´¢å¼•å’Œæ•°ç»„<code>length</code>å±æ€§</li>
<li>å¯ä»¥ç›‘å¬åˆ é™¤å±æ€§</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/10/16/Vue/vue3%E4%BC%98%E5%8C%96/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-Vue3-è®¾è®¡ç›®æ ‡ã€åšäº†å“ªäº›ä¼˜åŒ–">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/10/11/Vue/Vue3-%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E3%80%81%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/">Vue3-è®¾è®¡ç›®æ ‡ã€åšäº†å“ªäº›ä¼˜åŒ–</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-10-11
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€è®¾è®¡ç›®æ ‡"><a href="#ä¸€ã€è®¾è®¡ç›®æ ‡" class="headerlink" title="ä¸€ã€è®¾è®¡ç›®æ ‡"></a>ä¸€ã€è®¾è®¡ç›®æ ‡</h2><p>ä¸ä»¥è§£å†³å®é™…ä¸šåŠ¡ç—›ç‚¹çš„æ›´æ–°éƒ½æ˜¯è€æµæ°“ï¼Œä¸‹é¢æˆ‘ä»¬æ¥åˆ—ä¸¾ä¸€ä¸‹<code>Vue3</code>ä¹‹å‰æˆ‘ä»¬æˆ–è®¸ä¼šé¢ä¸´çš„é—®é¢˜</p>
<ul>
<li>éšç€åŠŸèƒ½çš„å¢é•¿ï¼Œå¤æ‚ç»„ä»¶çš„ä»£ç å˜å¾—è¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤</li>
<li>ç¼ºå°‘ä¸€ç§æ¯”è¾ƒã€Œå¹²å‡€ã€çš„åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´æå–å’Œå¤ç”¨é€»è¾‘çš„æœºåˆ¶</li>
<li>ç±»å‹æ¨æ–­ä¸å¤Ÿå‹å¥½</li>
<li><code>bundle</code>çš„æ—¶é—´å¤ªä¹…äº†</li>
</ul>
<p>è€Œ <code>Vue3</code> ç»è¿‡é•¿è¾¾ä¸¤ä¸‰å¹´æ—¶é—´çš„ç­¹å¤‡ï¼Œåšäº†å“ªäº›äº‹æƒ…ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»ç»“æœåæ¨</p>
<ul>
<li>æ›´å°</li>
<li>æ›´å¿«</li>
<li>TypeScriptæ”¯æŒ</li>
<li>APIè®¾è®¡ä¸€è‡´æ€§</li>
<li>æé«˜è‡ªèº«å¯ç»´æŠ¤æ€§</li>
<li>å¼€æ”¾æ›´å¤šåº•å±‚åŠŸèƒ½</li>
</ul>
<p>ä¸€å¥è¯æ¦‚è¿°ï¼Œå°±æ˜¯æ›´å°æ›´å¿«æ›´å‹å¥½äº†</p>
<h3 id="æ›´å°"><a href="#æ›´å°" class="headerlink" title="æ›´å°"></a>æ›´å°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue3`ç§»é™¤ä¸€äº›ä¸å¸¸ç”¨çš„ `API</span><br></pre></td></tr></table></figure>

<p>å¼•å…¥<code>tree-shaking</code>ï¼Œå¯ä»¥å°†æ— ç”¨æ¨¡å—â€œå‰ªè¾‘â€ï¼Œä»…æ‰“åŒ…éœ€è¦çš„ï¼Œä½¿æ‰“åŒ…çš„æ•´ä½“ä½“ç§¯å˜å°äº†</p>
<h3 id="æ›´å¿«"><a href="#æ›´å¿«" class="headerlink" title="æ›´å¿«"></a>æ›´å¿«</h3><p>ä¸»è¦ä½“ç°åœ¨ç¼–è¯‘æ–¹é¢ï¼š</p>
<ul>
<li>diffç®—æ³•ä¼˜åŒ–</li>
<li>é™æ€æå‡</li>
<li>äº‹ä»¶ç›‘å¬ç¼“å­˜</li>
<li>SSRä¼˜åŒ–</li>
</ul>
<p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬ä¼šè¿›ä¸€æ­¥ä»‹ç»</p>
<h3 id="æ›´å‹å¥½"><a href="#æ›´å‹å¥½" class="headerlink" title="æ›´å‹å¥½"></a>æ›´å‹å¥½</h3><p><code>vue3</code>åœ¨å…¼é¡¾<code>vue2</code>çš„<code>options API</code>çš„åŒæ—¶è¿˜æ¨å‡ºäº†<code>composition API</code>ï¼Œå¤§å¤§å¢åŠ äº†ä»£ç çš„é€»è¾‘ç»„ç»‡å’Œä»£ç å¤ç”¨èƒ½åŠ›</p>
<p>è¿™é‡Œä»£ç ç®€å•æ¼”ç¤ºä¸‹ï¼š</p>
<p>å­˜åœ¨ä¸€ä¸ªè·å–é¼ æ ‡ä½ç½®çš„å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toRefs, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useMouse</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;<span class="attr">x</span>:<span class="number">0</span>,<span class="attr">y</span>:<span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">update</span> = e=&gt;&#123;</span><br><span class="line">        state.<span class="property">x</span> = e.<span class="property">pageX</span>;</span><br><span class="line">        state.<span class="property">y</span> = e.<span class="property">pageY</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>,update);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>,update);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">toRefs</span>(state);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åªéœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå³å¯è·å–<code>x</code>ã€<code>y</code>çš„åæ ‡ï¼Œå®Œå…¨ä¸ç”¨å…³æ³¨å®ç°è¿‡ç¨‹</p>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå¾ˆå¤šç±»ä¼¼çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨å³å¯ï¼Œä¸å¿…å…³æ³¨å®ç°è¿‡ç¨‹ï¼Œå¼€å‘æ•ˆç‡å¤§å¤§æé«˜</p>
<p>åŒæ—¶ï¼Œ<code>VUE3</code>æ˜¯åŸºäº<code>typescipt</code>ç¼–å†™çš„ï¼Œå¯ä»¥äº«å—åˆ°è‡ªåŠ¨çš„ç±»å‹å®šä¹‰æç¤º</p>
<h2 id="ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ"></a>ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ</h2><p><code>vue3</code>ä»å¾ˆå¤šå±‚é¢éƒ½åšäº†ä¼˜åŒ–ï¼Œå¯ä»¥åˆ†æˆä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>æºç </li>
<li>æ€§èƒ½</li>
<li>è¯­æ³• API</li>
</ul>
<h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p>æºç å¯ä»¥ä»ä¸¤ä¸ªå±‚é¢å±•å¼€ï¼š</p>
<ul>
<li>æºç ç®¡ç†</li>
<li>TypeScript</li>
</ul>
<h4 id="æºç ç®¡ç†"><a href="#æºç ç®¡ç†" class="headerlink" title="æºç ç®¡ç†"></a>æºç ç®¡ç†</h4><p><code>vue3</code>æ•´ä¸ªæºç æ˜¯é€šè¿‡ <code>monorepo</code>çš„æ–¹å¼ç»´æŠ¤çš„ï¼Œæ ¹æ®åŠŸèƒ½å°†ä¸åŒçš„æ¨¡å—æ‹†åˆ†åˆ°<code>packages</code>ç›®å½•ä¸‹é¢ä¸åŒçš„å­ç›®å½•ä¸­</p>
<p><img src="https://static.vue-js.com/d7c32520-5c58-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<p>è¿™æ ·ä½¿å¾—æ¨¡å—æ‹†åˆ†æ›´ç»†åŒ–ï¼ŒèŒè´£åˆ’åˆ†æ›´æ˜ç¡®ï¼Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¹Ÿæ›´åŠ æ˜ç¡®ï¼Œå¼€å‘äººå‘˜ä¹Ÿæ›´å®¹æ˜“é˜…è¯»ã€ç†è§£å’Œæ›´æ”¹æ‰€æœ‰æ¨¡å—æºç ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§</p>
<p>å¦å¤–ä¸€äº› <code>package</code>ï¼ˆæ¯”å¦‚ <code>reactivity</code> å“åº”å¼åº“ï¼‰æ˜¯å¯ä»¥ç‹¬ç«‹äº <code>Vue</code> ä½¿ç”¨çš„ï¼Œè¿™æ ·ç”¨æˆ·å¦‚æœåªæƒ³ä½¿ç”¨ <code>Vue3</code>çš„å“åº”å¼èƒ½åŠ›ï¼Œå¯ä»¥å•ç‹¬ä¾èµ–è¿™ä¸ªå“åº”å¼åº“è€Œä¸ç”¨å»ä¾èµ–æ•´ä¸ª <code>Vue</code></p>
<h4 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h4><p><code>Vue3</code>æ˜¯åŸºäº<code>typeScript</code>ç¼–å†™çš„ï¼Œæä¾›äº†æ›´å¥½çš„ç±»å‹æ£€æŸ¥ï¼Œèƒ½æ”¯æŒå¤æ‚çš„ç±»å‹æ¨å¯¼</p>
<h3 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h3><p><code>vue3</code>æ˜¯ä»ä»€ä¹ˆå“ªäº›æ–¹é¢å¯¹æ€§èƒ½è¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–å‘¢ï¼Ÿ</p>
<ul>
<li>ä½“ç§¯ä¼˜åŒ–</li>
<li>ç¼–è¯‘ä¼˜åŒ–</li>
<li>æ•°æ®åŠ«æŒä¼˜åŒ–</li>
</ul>
<p>è¿™é‡Œè®²è¿°æ•°æ®åŠ«æŒï¼š</p>
<p>åœ¨<code>vue2</code>ä¸­ï¼Œæ•°æ®åŠ«æŒæ˜¯é€šè¿‡<code>Object.defineProperty</code>ï¼Œè¿™ä¸ª API æœ‰ä¸€äº›ç¼ºé™·ï¼Œå¹¶ä¸èƒ½æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;a&#x27;</span>,&#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// track</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// trigger</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å°½ç®¡<code>Vue</code>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æä¾›äº† <code>set</code>å’Œ<code>delete</code>å®ä¾‹æ–¹æ³•ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œè¿˜æ˜¯å¢åŠ äº†ä¸€å®šçš„å¿ƒæ™ºè´Ÿæ‹…</p>
<p>åŒæ—¶åœ¨é¢å¯¹åµŒå¥—å±‚çº§æ¯”è¾ƒæ·±çš„æƒ…å†µä¸‹ï¼Œå°±å­˜åœ¨æ€§èƒ½é—®é¢˜</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123;</span><br><span class="line">      <span class="attr">b</span>: &#123;</span><br><span class="line">          <span class="attr">c</span>: &#123;</span><br><span class="line">          <span class="attr">d</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>vue3</code>æ˜¯é€šè¿‡<code>proxy</code>ç›‘å¬æ•´ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹äºåˆ é™¤è¿˜æ˜¯ç›‘å¬å½“ç„¶ä¹Ÿèƒ½ç›‘å¬åˆ°</p>
<p>åŒæ—¶<code>Proxy</code> å¹¶ä¸èƒ½ç›‘å¬åˆ°å†…éƒ¨æ·±å±‚æ¬¡çš„å¯¹è±¡å˜åŒ–ï¼Œè€Œ <code>Vue3</code> çš„å¤„ç†æ–¹å¼æ˜¯åœ¨<code>getter</code> ä¸­å»é€’å½’å“åº”å¼ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯çœŸæ­£è®¿é—®åˆ°çš„å†…éƒ¨å¯¹è±¡æ‰ä¼šå˜æˆå“åº”å¼ï¼Œè€Œä¸æ˜¯æ— è„‘é€’å½’</p>
<h3 id="è¯­æ³•-API"><a href="#è¯­æ³•-API" class="headerlink" title="è¯­æ³• API"></a>è¯­æ³• API</h3><p>è¿™é‡Œå½“ç„¶è¯´çš„å°±æ˜¯<code>composition API</code>ï¼Œå…¶ä¸¤å¤§æ˜¾è‘—çš„ä¼˜åŒ–ï¼š</p>
<ul>
<li>ä¼˜åŒ–é€»è¾‘ç»„ç»‡</li>
<li>ä¼˜åŒ–é€»è¾‘å¤ç”¨</li>
</ul>
<h4 id="é€»è¾‘ç»„ç»‡"><a href="#é€»è¾‘ç»„ç»‡" class="headerlink" title="é€»è¾‘ç»„ç»‡"></a>é€»è¾‘ç»„ç»‡</h4><p>ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚åœ°æ„Ÿå—åˆ° <code>Composition API</code>åœ¨é€»è¾‘ç»„ç»‡æ–¹é¢çš„ä¼˜åŠ¿</p>
<p><img src="https://static.vue-js.com/e5804bc0-5c58-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>ç›¸åŒåŠŸèƒ½çš„ä»£ç ç¼–å†™åœ¨ä¸€å—ï¼Œè€Œä¸åƒ<code>options API</code>é‚£æ ·ï¼Œå„ä¸ªåŠŸèƒ½çš„ä»£ç æ··æˆä¸€å—</p>
<h4 id="é€»è¾‘å¤ç”¨"><a href="#é€»è¾‘å¤ç”¨" class="headerlink" title="é€»è¾‘å¤ç”¨"></a>é€»è¾‘å¤ç”¨</h4><p>åœ¨<code>vue2</code>ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡<code>mixin</code>å®ç°åŠŸèƒ½æ··åˆï¼Œå¦‚æœå¤šä¸ª<code>mixin</code>æ··åˆï¼Œä¼šå­˜åœ¨ä¸¤ä¸ªéå¸¸æ˜æ˜¾çš„é—®é¢˜ï¼šå‘½åå†²çªå’Œæ•°æ®æ¥æºä¸æ¸…æ™°</p>
<p>è€Œé€šè¿‡<code>composition</code>è¿™ç§å½¢å¼ï¼Œå¯ä»¥å°†ä¸€äº›å¤ç”¨çš„ä»£ç æŠ½ç¦»å‡ºæ¥ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œåªè¦çš„ä½¿ç”¨çš„åœ°æ–¹ç›´æ¥è¿›è¡Œè°ƒç”¨å³å¯</p>
<p>åŒæ ·æ˜¯ä¸Šæ–‡çš„è·å–é¼ æ ‡ä½ç½®çš„ä¾‹å­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toRefs, reactive, onUnmounted, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useMouse</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;<span class="attr">x</span>:<span class="number">0</span>,<span class="attr">y</span>:<span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">update</span> = e=&gt;&#123;</span><br><span class="line">        state.<span class="property">x</span> = e.<span class="property">pageX</span>;</span><br><span class="line">        state.<span class="property">y</span> = e.<span class="property">pageY</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>,update);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>,update);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">toRefs</span>(state);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useMousePosition <span class="keyword">from</span> <span class="string">&#x27;./mouse&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; x, y &#125; = <span class="title function_">useMousePosition</span>()</span><br><span class="line">        <span class="keyword">return</span> &#123; x, y &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªæ•°æ®æ¥æºæ¸…æ™°äº†ï¼Œå³ä½¿å»ç¼–å†™æ›´å¤šçš„<code>hook</code>å‡½æ•°ï¼Œä¹Ÿä¸ä¼šå‡ºç°å‘½åå†²çªçš„é—®é¢˜</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/10/11/Vue/Vue3-%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E3%80%81%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3-Treeshaking">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/09/29/Vue/vue3-Treeshaking/">vue3-Treeshaking</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-09-29
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€æ˜¯ä»€ä¹ˆ"></a>ä¸€ã€æ˜¯ä»€ä¹ˆ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tree shaking` æ˜¯ä¸€ç§é€šè¿‡æ¸…é™¤å¤šä½™ä»£ç æ–¹å¼æ¥ä¼˜åŒ–é¡¹ç›®æ‰“åŒ…ä½“ç§¯çš„æŠ€æœ¯ï¼Œä¸“ä¸šæœ¯è¯­å« `Dead code elimination</span><br></pre></td></tr></table></figure>

<p>ç®€å•æ¥è®²ï¼Œå°±æ˜¯åœ¨ä¿æŒä»£ç è¿è¡Œç»“æœä¸å˜çš„å‰æä¸‹ï¼Œå»é™¤æ— ç”¨çš„ä»£ç </p>
<p>å¦‚æœæŠŠä»£ç æ‰“åŒ…æ¯”ä½œåˆ¶ä½œè›‹ç³•ï¼Œä¼ ç»Ÿçš„æ–¹å¼æ˜¯æŠŠé¸¡è›‹ï¼ˆå¸¦å£³ï¼‰å…¨éƒ¨ä¸¢è¿›å»æ…æ‹Œï¼Œç„¶åæ”¾å…¥çƒ¤ç®±ï¼Œæœ€åæŠŠï¼ˆæ²¡æœ‰ç”¨çš„ï¼‰è›‹å£³å…¨éƒ¨æŒ‘é€‰å¹¶å‰”é™¤å‡ºå»</p>
<p>è€Œ<code>treeshaking</code>åˆ™æ˜¯ä¸€å¼€å§‹å°±æŠŠæœ‰ç”¨çš„è›‹ç™½è›‹é»„ï¼ˆimportï¼‰æ”¾å…¥æ…æ‹Œï¼Œæœ€åç›´æ¥ä½œå‡ºè›‹ç³•</p>
<p>ä¹Ÿå°±æ˜¯è¯´ ï¼Œ<code>tree shaking</code> å…¶å®æ˜¯æ‰¾å‡ºä½¿ç”¨çš„ä»£ç </p>
<p>åœ¨<code>Vue2</code>ä¸­ï¼Œæ— è®ºæˆ‘ä»¬ä½¿ç”¨ä»€ä¹ˆåŠŸèƒ½ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šå‡ºç°åœ¨ç”Ÿäº§ä»£ç ä¸­ã€‚ä¸»è¦åŸå› æ˜¯<code>Vue</code>å®ä¾‹åœ¨é¡¹ç›®ä¸­æ˜¯å•ä¾‹çš„ï¼Œæ†ç»‘ç¨‹åºæ— æ³•æ£€æµ‹åˆ°è¯¥å¯¹è±¡çš„å“ªäº›å±æ€§åœ¨ä»£ç ä¸­è¢«ä½¿ç”¨åˆ°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>è€Œ<code>Vue3</code>æºç å¼•å…¥<code>tree shaking</code>ç‰¹æ€§ï¼Œå°†å…¨å±€ API è¿›è¡Œåˆ†å—ã€‚å¦‚æœæ‚¨ä¸ä½¿ç”¨å…¶æŸäº›åŠŸèƒ½ï¼Œå®ƒä»¬å°†ä¸ä¼šåŒ…å«åœ¨æ‚¨çš„åŸºç¡€åŒ…ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; nextTick, observable &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å¦‚ä½•åš"><a href="#äºŒã€å¦‚ä½•åš" class="headerlink" title="äºŒã€å¦‚ä½•åš"></a>äºŒã€å¦‚ä½•åš</h2><p><code>Tree shaking</code>æ˜¯åŸºäº<code>ES6</code>æ¨¡æ¿è¯­æ³•ï¼ˆ<code>import</code>ä¸<code>exports</code>ï¼‰ï¼Œä¸»è¦æ˜¯å€ŸåŠ©<code>ES6</code>æ¨¡å—çš„é™æ€ç¼–è¯‘æ€æƒ³ï¼Œåœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡</p>
<p><code>Tree shaking</code>æ— éå°±æ˜¯åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>ç¼–è¯‘é˜¶æ®µåˆ©ç”¨<code>ES6 Module</code>åˆ¤æ–­å“ªäº›æ¨¡å—å·²ç»åŠ è½½</li>
<li>åˆ¤æ–­é‚£äº›æ¨¡å—å’Œå˜é‡æœªè¢«ä½¿ç”¨æˆ–è€…å¼•ç”¨ï¼Œè¿›è€Œåˆ é™¤å¯¹åº”ä»£ç </li>
</ul>
<p>ä¸‹é¢å°±æ¥ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>é€šè¿‡è„šæ‰‹æ¶<code>vue-cli</code>å®‰è£…<code>Vue2</code>ä¸<code>Vue3</code>é¡¹ç›®</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create vue-demo</span><br></pre></td></tr></table></figure>

<h3 id="Vue2-é¡¹ç›®"><a href="#Vue2-é¡¹ç›®" class="headerlink" title="Vue2 é¡¹ç›®"></a>Vue2 é¡¹ç›®</h3><p>ç»„ä»¶ä¸­ä½¿ç”¨<code>data</code>å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        data: () =&gt; (&#123;</span><br><span class="line">            count: 1,</span><br><span class="line">        &#125;),</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>å¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œä½“ç§¯å¦‚ä¸‹å›¾</p>
<p><img src="https://static.vue-js.com/6bd2aff0-6097-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>ä¸ºç»„ä»¶è®¾ç½®å…¶ä»–å±æ€§ï¼ˆ<code>compted</code>ã€<code>watch</code>ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">question</span>:<span class="string">&quot;&quot;</span>, </span><br><span class="line">        <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="attr">double</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">count</span> * <span class="number">2</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="attr">question</span>: <span class="keyword">function</span> (<span class="params">newQuestion, oldQuestion</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">answer</span> = <span class="string">&#x27;xxxx&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å†ä¸€æ¬¡æ‰“åŒ…ï¼Œå‘ç°æ‰“åŒ…å‡ºæ¥çš„ä½“ç§¯å¹¶æ²¡æœ‰å˜åŒ–</p>
<p><img src="https://static.vue-js.com/7c29e260-6097-11eb-ab90-d9ae814b240d.png" alt="img"></p>
<h3 id="Vue3-é¡¹ç›®"><a href="#Vue3-é¡¹ç›®" class="headerlink" title="Vue3 é¡¹ç›®"></a>Vue3 é¡¹ç›®</h3><p>ç»„ä»¶ä¸­ç®€å•ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, defineComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      state,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å°†é¡¹ç›®è¿›è¡Œæ‰“åŒ…</p>
<p><img src="https://static.vue-js.com/95df0000-6097-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>åœ¨ç»„ä»¶ä¸­å¼•å…¥<code>computed</code>å’Œ<code>watch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, defineComponent, computed, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> double = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">count</span> * <span class="number">2</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">watch</span>(</span><br><span class="line">      <span class="function">() =&gt;</span> state.<span class="property">count</span>,</span><br><span class="line">      <span class="function">(<span class="params">count, preCount</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(preCount);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      state,</span><br><span class="line">      double,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡å¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°åœ¨å¼•å…¥<code>computer</code>å’Œ<code>watch</code>ä¹‹åï¼Œé¡¹ç›®æ•´ä½“ä½“ç§¯å˜å¤§äº†</p>
<p><img src="https://static.vue-js.com/b36a7a00-6097-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<h2 id="ä¸‰ã€ä½œç”¨"><a href="#ä¸‰ã€ä½œç”¨" class="headerlink" title="ä¸‰ã€ä½œç”¨"></a>ä¸‰ã€ä½œç”¨</h2><p>é€šè¿‡<code>Tree shaking</code>ï¼Œ<code>Vue3</code>ç»™æˆ‘ä»¬å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>å‡å°‘ç¨‹åºä½“ç§¯ï¼ˆæ›´å°ï¼‰</li>
<li>å‡å°‘ç¨‹åºæ‰§è¡Œæ—¶é—´ï¼ˆæ›´å¿«ï¼‰</li>
<li>ä¾¿äºå°†æ¥å¯¹ç¨‹åºæ¶æ„è¿›è¡Œä¼˜åŒ–ï¼ˆæ›´å‹å¥½ï¼‰</li>
</ul>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/09/29/Vue/vue3-Treeshaking/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3-Proxy API æ›¿ä»£ defineProperty API">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/09/26/Vue/vue3-Proxy%20API%20%E6%9B%BF%E4%BB%A3%20defineProperty%20API%20/">vue3-Proxy API æ›¿ä»£ defineProperty API</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-09-26
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <h2 id="ä¸€ã€Object-defineProperty"><a href="#ä¸€ã€Object-defineProperty" class="headerlink" title="ä¸€ã€Object.defineProperty"></a>ä¸€ã€Object.defineProperty</h2><p>å®šä¹‰ï¼š<code>Object.defineProperty()</code> æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡</p>
<h5 id="ä¸ºä»€ä¹ˆèƒ½å®ç°å“åº”å¼"><a href="#ä¸ºä»€ä¹ˆèƒ½å®ç°å“åº”å¼" class="headerlink" title="#ä¸ºä»€ä¹ˆèƒ½å®ç°å“åº”å¼"></a><a target="_blank" rel="noopener" href="https://vue3js.cn/interview/vue3/proxy.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%83%BD%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F">#</a>ä¸ºä»€ä¹ˆèƒ½å®ç°å“åº”å¼</h5><p>é€šè¿‡<code>defineProperty</code> ä¸¤ä¸ªå±æ€§ï¼Œ<code>get</code>åŠ<code>set</code></p>
<ul>
<li>get</li>
</ul>
<p>å±æ€§çš„ getter å‡½æ•°ï¼Œå½“è®¿é—®è¯¥å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚æ‰§è¡Œæ—¶ä¸ä¼ å…¥ä»»ä½•å‚æ•°ï¼Œä½†æ˜¯ä¼šä¼ å…¥ this å¯¹è±¡ï¼ˆç”±äºç»§æ‰¿å…³ç³»ï¼Œè¿™é‡Œçš„thiså¹¶ä¸ä¸€å®šæ˜¯å®šä¹‰è¯¥å±æ€§çš„å¯¹è±¡ï¼‰ã€‚è¯¥å‡½æ•°çš„è¿”å›å€¼ä¼šè¢«ç”¨ä½œå±æ€§çš„å€¼</p>
<ul>
<li>set</li>
</ul>
<p>å±æ€§çš„ setter å‡½æ•°ï¼Œå½“å±æ€§å€¼è¢«ä¿®æ”¹æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆä¹Ÿå°±æ˜¯è¢«èµ‹äºˆçš„æ–°å€¼ï¼‰ï¼Œä¼šä¼ å…¥èµ‹å€¼æ—¶çš„ this å¯¹è±¡ã€‚é»˜è®¤ä¸º undefined</p>
<p>ä¸‹é¢é€šè¿‡ä»£ç å±•ç¤ºï¼š</p>
<p>å®šä¹‰ä¸€ä¸ªå“åº”å¼å‡½æ•°<code>defineReactive</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line">    app.<span class="property">innerText</span> = obj.<span class="property">foo</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">defineReactive</span>(<span class="params">obj, key, val</span>) &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`get <span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;val&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">return</span> val</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (newVal !== val) &#123;</span><br><span class="line">                val = newVal</span><br><span class="line">                <span class="title function_">update</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨<code>defineReactive</code>ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–è§¦å‘<code>update</code>æ–¹æ³•ï¼Œå®ç°æ•°æ®å“åº”å¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="title function_">defineReactive</span>(obj, <span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    obj.<span class="property">foo</span> = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleTimeString</span>()</span><br><span class="line">&#125;,<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p>åœ¨å¯¹è±¡å­˜åœ¨å¤šä¸ª<code>key</code>æƒ…å†µä¸‹ï¼Œéœ€è¦è¿›è¡Œéå†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">observe</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">defineReactive</span>(obj, key, obj[key])</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå­˜åœ¨åµŒå¥—å¯¹è±¡çš„æƒ…å†µï¼Œè¿˜éœ€è¦åœ¨<code>defineReactive</code>ä¸­è¿›è¡Œé€’å½’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">defineReactive</span>(<span class="params">obj, key, val</span>) &#123;</span><br><span class="line">    <span class="title function_">observe</span>(val)</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`get <span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;val&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">return</span> val</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (newVal !== val) &#123;</span><br><span class="line">                val = newVal</span><br><span class="line">                <span class="title function_">update</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç»™<code>key</code>èµ‹å€¼ä¸ºå¯¹è±¡çš„æ—¶å€™ï¼Œè¿˜éœ€è¦åœ¨<code>set</code>å±æ€§ä¸­è¿›è¡Œé€’å½’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (newVal !== val) &#123;</span><br><span class="line">        <span class="title function_">observe</span>(newVal) <span class="comment">// æ–°å€¼æ˜¯å¯¹è±¡çš„æƒ…å†µ</span></span><br><span class="line">        <span class="title function_">notifyUpdate</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä¾‹å­èƒ½å¤Ÿå®ç°å¯¹ä¸€ä¸ªå¯¹è±¡çš„åŸºæœ¬å“åº”å¼ï¼Œä½†ä»ç„¶å­˜åœ¨è¯¸å¤šé—®é¢˜</p>
<p>ç°åœ¨å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆ é™¤ä¸æ·»åŠ å±æ€§æ“ä½œï¼Œæ— æ³•åŠ«æŒåˆ°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="string">&quot;bar&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">observe</span>(obj)</span><br><span class="line"><span class="keyword">delete</span> obj.<span class="property">foo</span> <span class="comment">// no ok</span></span><br><span class="line">obj.<span class="property">jar</span> = <span class="string">&#x27;xxx&#x27;</span> <span class="comment">// no ok</span></span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œç›‘å¬çš„æ—¶å€™ï¼Œå¹¶ä¸é‚£ä¹ˆå¥½ä½¿äº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrData = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line">arrData.<span class="title function_">forEach</span>(<span class="function">(<span class="params">val,index</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">defineProperty</span>(arrData,index,val)</span><br><span class="line">&#125;)</span><br><span class="line">arrData.<span class="title function_">push</span>() <span class="comment">// no ok</span></span><br><span class="line">arrData.<span class="title function_">pop</span>()  <span class="comment">// no ok</span></span><br><span class="line">arrDate[<span class="number">0</span>] = <span class="number">99</span> <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æ•°æ®çš„<code>api</code>æ— æ³•åŠ«æŒåˆ°ï¼Œä»è€Œæ— æ³•å®ç°æ•°æ®å“åº”å¼ï¼Œ</p>
<p>æ‰€ä»¥åœ¨<code>Vue2</code>ä¸­ï¼Œå¢åŠ äº†<code>set</code>ã€<code>delete</code> APIï¼Œå¹¶ä¸”å¯¹æ•°ç»„<code>api</code>æ–¹æ³•è¿›è¡Œä¸€ä¸ªé‡å†™</p>
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜åˆ™æ˜¯ï¼Œå¦‚æœå­˜åœ¨æ·±å±‚çš„åµŒå¥—å¯¹è±¡å…³ç³»ï¼Œéœ€è¦æ·±å±‚çš„è¿›è¡Œç›‘å¬ï¼Œé€ æˆäº†æ€§èƒ½çš„æå¤§é—®é¢˜</p>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul>
<li>æ£€æµ‹ä¸åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤</li>
<li>æ•°ç»„<code>API</code>æ–¹æ³•æ— æ³•ç›‘å¬åˆ°</li>
<li>éœ€è¦å¯¹æ¯ä¸ªå±æ€§è¿›è¡Œéå†ç›‘å¬ï¼Œå¦‚æœåµŒå¥—å¯¹è±¡ï¼Œéœ€è¦æ·±å±‚ç›‘å¬ï¼Œé€ æˆæ€§èƒ½é—®é¢˜</li>
</ul>
<h2 id="äºŒã€proxy"><a href="#äºŒã€proxy" class="headerlink" title="äºŒã€proxy"></a>äºŒã€proxy</h2><p><code>Proxy</code>çš„ç›‘å¬æ˜¯é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡çš„ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰æ“ä½œä¼šè¿›å…¥ç›‘å¬æ“ä½œï¼Œè¿™å°±å®Œå…¨å¯ä»¥ä»£ç†æ‰€æœ‰å±æ€§äº†</p>
<p>åœ¨<code>ES6</code>ç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†è®²è§£è¿‡<code>Proxy</code>çš„ä½¿ç”¨ï¼Œå°±ä¸å†è¿°è¯´äº†</p>
<p>ä¸‹é¢é€šè¿‡ä»£ç è¿›è¡Œå±•ç¤ºï¼š</p>
<p>å®šä¹‰ä¸€ä¸ªå“åº”å¼æ–¹æ³•<code>reactive</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Proxyç›¸å½“äºåœ¨å¯¹è±¡å¤–å±‚åŠ æ‹¦æˆª</span></span><br><span class="line">    <span class="keyword">const</span> observed = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">target, key, value, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¾ç½®<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">deleteProperty</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, key)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åˆ é™¤<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> observed</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹ç®€å•æ•°æ®çš„æ“ä½œï¼Œå‘ç°éƒ½èƒ½åŠ«æŒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 1.è·å–</span></span><br><span class="line">state.<span class="property">foo</span> <span class="comment">// ok</span></span><br><span class="line"><span class="comment">// 2.è®¾ç½®å·²å­˜åœ¨å±æ€§</span></span><br><span class="line">state.<span class="property">foo</span> = <span class="string">&#x27;fooooooo&#x27;</span> <span class="comment">// ok</span></span><br><span class="line"><span class="comment">// 3.è®¾ç½®ä¸å­˜åœ¨å±æ€§</span></span><br><span class="line">state.<span class="property">dong</span> = <span class="string">&#x27;dong&#x27;</span> <span class="comment">// ok</span></span><br><span class="line"><span class="comment">// 4.åˆ é™¤å±æ€§</span></span><br><span class="line"><span class="keyword">delete</span> state.<span class="property">dong</span> <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<p>å†æµ‹è¯•åµŒå¥—å¯¹è±¡æƒ…å†µï¼Œè¿™æ—¶å€™å‘ç°å°±ä¸é‚£ä¹ˆ OK äº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">bar</span>: &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®åµŒå¥—å¯¹è±¡å±æ€§</span></span><br><span class="line">state.<span class="property">bar</span>.<span class="property">a</span> = <span class="number">10</span> <span class="comment">// no ok</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦è§£å†³ï¼Œéœ€è¦åœ¨<code>get</code>ä¹‹ä¸Šå†è¿›è¡Œä¸€å±‚ä»£ç†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Proxyç›¸å½“äºåœ¨å¯¹è±¡å¤–å±‚åŠ æ‹¦æˆª</span></span><br><span class="line">    <span class="keyword">const</span> observed = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">isObject</span>(res) ? <span class="title function_">reactive</span>(res) : res</span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="keyword">return</span> observed</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p><code>Object.defineProperty</code>åªèƒ½éå†å¯¹è±¡å±æ€§è¿›è¡ŒåŠ«æŒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">observe</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">defineReactive</span>(obj, key, obj[key])</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Proxy</code>ç›´æ¥å¯ä»¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åªæ“ä½œæ–°çš„å¯¹è±¡è¾¾åˆ°å“åº”å¼ç›®çš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Proxyç›¸å½“äºåœ¨å¯¹è±¡å¤–å±‚åŠ æ‹¦æˆª</span></span><br><span class="line">    <span class="keyword">const</span> observed = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">target, key, value, receiver</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¾ç½®<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">deleteProperty</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, key)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åˆ é™¤<span class="subst">$&#123;key&#125;</span>:<span class="subst">$&#123;res&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> observed</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Proxy</code>å¯ä»¥ç›´æ¥ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼ˆ<code>push</code>ã€<code>shift</code>ã€<code>splice</code>ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> proxtObj = <span class="title function_">reactive</span>(obj)</span><br><span class="line">obj.<span class="title function_">psuh</span>(<span class="number">4</span>) <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<p><code>Proxy</code>æœ‰å¤šè¾¾13ç§æ‹¦æˆªæ–¹æ³•,ä¸é™äº<code>apply</code>ã€<code>ownKeys</code>ã€<code>deleteProperty</code>ã€<code>has</code>ç­‰ç­‰ï¼Œè¿™æ˜¯<code>Object.defineProperty</code>ä¸å…·å¤‡çš„</p>
<p>æ­£å› ä¸º<code>defineProperty</code>è‡ªèº«çš„ç¼ºé™·ï¼Œå¯¼è‡´<code>Vue2</code>åœ¨å®ç°å“åº”å¼è¿‡ç¨‹éœ€è¦å®ç°å…¶ä»–çš„æ–¹æ³•è¾…åŠ©ï¼ˆå¦‚é‡å†™æ•°ç»„æ–¹æ³•ã€å¢åŠ é¢å¤–<code>set</code>ã€<code>delete</code>æ–¹æ³•ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„é‡å†™</span></span><br><span class="line"><span class="keyword">const</span> originalProto = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line"><span class="keyword">const</span> arrayProto = <span class="title class_">Object</span>.<span class="title function_">create</span>(originalProto)</span><br><span class="line">[<span class="string">&#x27;push&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;shift&#x27;</span>, <span class="string">&#x27;unshift&#x27;</span>, <span class="string">&#x27;splice&#x27;</span>, <span class="string">&#x27;reverse&#x27;</span>, <span class="string">&#x27;sort&#x27;</span>].<span class="title function_">forEach</span>(<span class="function"><span class="params">method</span> =&gt;</span> &#123;</span><br><span class="line">  arrayProto[method] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    originalProto[method].<span class="title function_">apply</span>(<span class="variable language_">this</span>.<span class="property">arguments</span>)</span><br><span class="line">    dep.<span class="title function_">notice</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// setã€delete</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(obj,<span class="string">&#x27;bar&#x27;</span>,<span class="string">&#x27;newbar&#x27;</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">delete</span>(obj),<span class="string">&#x27;bar&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><code>Proxy</code> ä¸å…¼å®¹IEï¼Œä¹Ÿæ²¡æœ‰ <code>polyfill</code>, <code>defineProperty</code> èƒ½æ”¯æŒåˆ°IE9</p>

        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/09/26/Vue/vue3-Proxy%20API%20%E6%9B%BF%E4%BB%A3%20defineProperty%20API%20/">Read More</a>
    </footer>
</div>

<div class="cube-excerpt" id="cube-excerpt-vue3-Composition APIè¯¦è§£">
    <header class="cube-excerpt-header">
        <h1><a href="/2021/09/14/Vue/vue3-Composition%20API%E8%AF%A6%E8%A7%A3/">vue3-Composition APIè¯¦è§£</a></h1>
        <div class="cube-excerpt-header-msg">
            <div class="cube-excerpt-date">
                <i class="cube-icon cube-icon-date" aria-hidden="true"></i>
                2021-09-14
            </div>
            <div class="cube-excerpt-tags">
                <i class="cube-icon cube-icon-tag" aria-hidden="true"></i>
                
                <a href="/tags/vue/" class="cube-excerpt-tag-link">#vue</a>
                
            </div>
        </div>
    </header>
    <article class="cube-excerpt-entry cube-markdown">
        
        
           <p><code>Composition API</code>ä¹Ÿå«ç»„åˆå¼APIï¼Œæ˜¯Vue3.xçš„æ–°ç‰¹æ€§ã€‚</p>
<blockquote>
<p>é€šè¿‡åˆ›å»º Vue ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¥å£çš„å¯é‡å¤éƒ¨åˆ†åŠå…¶åŠŸèƒ½æå–åˆ°å¯é‡ç”¨çš„ä»£ç æ®µä¸­ã€‚ä»…æ­¤ä¸€é¡¹å°±å¯ä»¥ä½¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåœ¨å¯ç»´æŠ¤æ€§å’Œçµæ´»æ€§æ–¹é¢èµ°å¾—æ›´è¿œã€‚ç„¶è€Œï¼Œæˆ‘ä»¬çš„ç»éªŒå·²ç»è¯æ˜ï¼Œå…‰é è¿™ä¸€ç‚¹å¯èƒ½æ˜¯ä¸å¤Ÿçš„ï¼Œå°¤å…¶æ˜¯å½“ä½ çš„åº”ç”¨ç¨‹åºå˜å¾—éå¸¸å¤§çš„æ—¶å€™â€”â€”æƒ³æƒ³å‡ ç™¾ä¸ªç»„ä»¶ã€‚åœ¨å¤„ç†å¦‚æ­¤å¤§çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œå…±äº«å’Œé‡ç”¨ä»£ç å˜å¾—å°¤ä¸ºé‡è¦</p>
</blockquote>
<p><strong>é€šä¿—çš„è®²ï¼š</strong></p>
<p>æ²¡æœ‰<code>Composition API</code>ä¹‹å‰vueç›¸å…³ä¸šåŠ¡çš„ä»£ç éœ€è¦é…ç½®åˆ°optionçš„ç‰¹å®šçš„åŒºåŸŸï¼Œä¸­å°å‹é¡¹ç›®æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ä¼šå¯¼è‡´åæœŸçš„ç»´æŠ¤æ€§æ¯”è¾ƒå¤æ‚ï¼ŒåŒæ—¶ä»£ç å¯å¤ç”¨æ€§ä¸é«˜ã€‚Vue3.xä¸­çš„composition-apiå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„</p>
<p><strong>compositon apiæä¾›äº†ä»¥ä¸‹å‡ ä¸ªå‡½æ•°ï¼š</strong></p>
<ul>
<li><code>setup</code></li>
<li><code>ref</code></li>
<li><code>reactive</code></li>
<li><code>watchEffect</code></li>
<li><code>watch</code></li>
<li><code>computed</code></li>
<li><code>toRefs</code></li>
<li>ç”Ÿå‘½å‘¨æœŸçš„<code>hooks</code></li>
</ul>
<h2 id="ä¸€ã€setupç»„ä»¶é€‰é¡¹"><a href="#ä¸€ã€setupç»„ä»¶é€‰é¡¹" class="headerlink" title="ä¸€ã€setupç»„ä»¶é€‰é¡¹"></a>ä¸€ã€setupç»„ä»¶é€‰é¡¹</h2><blockquote>
<p>æ–°çš„ <code>setup</code> ç»„ä»¶é€‰é¡¹åœ¨<strong>åˆ›å»ºç»„ä»¶ä¹‹å‰</strong>æ‰§è¡Œï¼Œä¸€æ—¦ <code>props</code> è¢«è§£æï¼Œå¹¶å……å½“åˆæˆ <code>API</code> çš„å…¥å£ç‚¹</p>
</blockquote>
<p><strong>æç¤ºï¼š</strong></p>
<blockquote>
<p>ç”±äºåœ¨æ‰§è¡Œ <code>setup</code> æ—¶å°šæœªåˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œå› æ­¤åœ¨ <code>setup</code> é€‰é¡¹ä¸­æ²¡æœ‰ <code>this</code>ã€‚è¿™æ„å‘³ç€ï¼Œé™¤äº†<code>props</code>ä¹‹å¤–ï¼Œä½ å°†æ— æ³•è®¿é—®ç»„ä»¶ä¸­å£°æ˜çš„ä»»ä½•å±æ€§â€”â€”æœ¬åœ°çŠ¶æ€ã€è®¡ç®—å±æ€§æˆ–æ–¹æ³•ã€‚</p>
</blockquote>
<p>ä½¿ç”¨ <code>setup</code> å‡½æ•°æ—¶ï¼Œå®ƒå°†æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ol>
<li><code>props</code></li>
<li><code>context</code></li>
</ol>
<p>è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°ç ”ç©¶å¦‚ä½•ä½¿ç”¨æ¯ä¸ªå‚æ•°</p>
<h3 id="1-Props"><a href="#1-Props" class="headerlink" title="1. Props"></a>1. Props</h3><blockquote>
<p><code>setup</code> å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>props</code>ã€‚æ­£å¦‚åœ¨ä¸€ä¸ªæ ‡å‡†ç»„ä»¶ä¸­æ‰€æœŸæœ›çš„é‚£æ ·ï¼Œ<code>setup</code> å‡½æ•°ä¸­çš„ <code>props</code> æ˜¯å“åº”å¼çš„ï¼Œå½“ä¼ å…¥æ–°çš„ <code>prop</code> æ—¶ï¼Œå®ƒå°†è¢«æ›´æ–°</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// MyBook.vue</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    title: String</span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    console.log(props.title)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<blockquote>
<p>ä½†æ˜¯ï¼Œå› ä¸º <code>props</code> æ˜¯å“åº”å¼çš„ï¼Œä½ ä¸èƒ½ä½¿ç”¨ <code>ES6</code> è§£æ„ï¼Œå› ä¸ºå®ƒä¼šæ¶ˆé™¤ <code>prop</code> çš„å“åº”æ€§ã€‚</p>
</blockquote>
<p>å¦‚æœéœ€è¦è§£æ„ propï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ <code>setup</code> å‡½æ•°ä¸­çš„ <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/reactivity-fundamentals.html#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%8A%B6%E6%80%81%E8%A7%A3%E6%9E%84"><code>toRefs</code></a> æ¥å®‰å…¨åœ°å®Œæˆæ­¤æ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// MyBook.vue</span><br><span class="line"></span><br><span class="line">import &#123; toRefs &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">setup(props) &#123;</span><br><span class="line">	const &#123; title &#125; = toRefs(props)</span><br><span class="line"></span><br><span class="line">	console.log(title.value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-ä¸Šä¸‹æ–‡"><a href="#2-ä¸Šä¸‹æ–‡" class="headerlink" title="2. ä¸Šä¸‹æ–‡"></a>2. ä¸Šä¸‹æ–‡</h3><blockquote>
<p>ä¼ é€’ç»™ <code>setup</code> å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>context</code>ã€‚<code>context</code> æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œå®ƒæš´éœ²ä¸‰ä¸ªç»„ä»¶çš„ property</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// MyBook.vue</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup(props, context) &#123;</span><br><span class="line">    // Attribute (éå“åº”å¼å¯¹è±¡)</span><br><span class="line">    console.log(context.attrs)</span><br><span class="line"></span><br><span class="line">    // æ’æ§½ (éå“åº”å¼å¯¹è±¡)</span><br><span class="line">    console.log(context.slots)</span><br><span class="line"></span><br><span class="line">    // è§¦å‘äº‹ä»¶ (æ–¹æ³•)</span><br><span class="line">    console.log(context.emit)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>context</code> æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸æ˜¯å“åº”å¼çš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å®‰å…¨åœ°å¯¹ <code>context</code> ä½¿ç”¨ ES6 è§£æ„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// MyBook.vue</span><br><span class="line">export default &#123;</span><br><span class="line">  setup(props, &#123; attrs, slots, emit &#125;) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>attrs</code> å’Œ <code>slots</code> æ˜¯æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œå®ƒä»¬æ€»æ˜¯ä¼šéšç»„ä»¶æœ¬èº«çš„æ›´æ–°è€Œæ›´æ–°ã€‚è¿™æ„å‘³ç€ä½ åº”è¯¥é¿å…å¯¹å®ƒä»¬è¿›è¡Œè§£æ„ï¼Œå¹¶å§‹ç»ˆä»¥ <code>attrs.x</code> æˆ– <code>slots.x</code> çš„æ–¹å¼å¼•ç”¨ propertyã€‚è¯·æ³¨æ„ï¼Œä¸ <code>props</code> ä¸åŒï¼Œ<code>attrs</code> å’Œ <code>slots</code> æ˜¯<strong>é</strong>å“åº”å¼çš„ã€‚å¦‚æœä½ æ‰“ç®—æ ¹æ® <code>attrs</code> æˆ– <code>slots</code> æ›´æ”¹åº”ç”¨å‰¯ä½œç”¨ï¼Œé‚£ä¹ˆåº”è¯¥åœ¨ <code>onUpdated</code>ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚</p>
</blockquote>
<h3 id="3-setupç»„ä»¶çš„-property"><a href="#3-setupç»„ä»¶çš„-property" class="headerlink" title="3. setupç»„ä»¶çš„ property"></a>3. setupç»„ä»¶çš„ property</h3><blockquote>
<p>æ‰§è¡Œ <code>setup</code> æ—¶ï¼Œç»„ä»¶å®ä¾‹å°šæœªè¢«åˆ›å»ºã€‚å› æ­¤ï¼Œä½ åªèƒ½è®¿é—®ä»¥ä¸‹ propertyï¼š</p>
</blockquote>
<ul>
<li><code>props</code></li>
<li><code>attrs</code></li>
<li><code>slots</code></li>
<li><code>emit</code></li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œä½ <strong>å°†æ— æ³•è®¿é—®</strong>ä»¥ä¸‹ç»„ä»¶é€‰é¡¹ï¼š</p>
<ul>
<li><code>data</code></li>
<li><code>computed</code></li>
<li><code>methods</code></li>
</ul>
<h3 id="4-ref-reactive-ä»¥åŠsetupç»“åˆæ¨¡æ¿ä½¿ç”¨"><a href="#4-ref-reactive-ä»¥åŠsetupç»“åˆæ¨¡æ¿ä½¿ç”¨" class="headerlink" title="4. ref reactive ä»¥åŠsetupç»“åˆæ¨¡æ¿ä½¿ç”¨"></a>4. ref reactive ä»¥åŠsetupç»“åˆæ¨¡æ¿ä½¿ç”¨</h3><p>åœ¨çœ‹<code>setup</code>ç»“åˆæ¨¡æ¿ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—çŸ¥é“<code>ref</code> å’Œ <code>reactive</code> æ–¹æ³•ã€‚</p>
<p>å¦‚æœ <code>setup</code> è¿”å›ä¸€ä¸ªå¯¹è±¡åˆ™å¯ä»¥åœ¨æ¨¡æ¿ä¸­ç»‘å®šå¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯è¦å®šä¹‰å“åº”å¼æ•°æ®çš„æ—¶å€™å¯ä»¥ä½¿ç”¨<code>ref</code>, <code>reactive</code>æ–¹æ³•å®šä¹‰å“åº”å¼çš„æ•°æ®</p>
<h5 id="é”™è¯¯å†™æ³•ï¼š"><a href="#é”™è¯¯å†™æ³•ï¼š" class="headerlink" title="é”™è¯¯å†™æ³•ï¼š"></a><strong>é”™è¯¯å†™æ³•ï¼š</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&#123;&#123;msg&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;button @click=&quot;updateMsg&quot;&gt;æ”¹å˜etupä¸­çš„msg&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let msg = &quot;è¿™æ˜¯setupä¸­çš„msg&quot;;</span><br><span class="line">        let updateMsg = () =&gt; &#123;</span><br><span class="line">            alert(&quot;è§¦å‘æ–¹æ³•&quot;)</span><br><span class="line">            msg = &quot;æ”¹å˜åçš„å€¼&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg,</span><br><span class="line">            updateMsg</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.home &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="æ­£ç¡®å†™æ³•ä¸€ï¼š"><a href="#æ­£ç¡®å†™æ³•ä¸€ï¼š" class="headerlink" title="æ­£ç¡®å†™æ³•ä¸€ï¼š"></a><strong>æ­£ç¡®å†™æ³•ä¸€ï¼š</strong></h5><blockquote>
<p><strong>ref</strong>ç”¨æ¥å®šä¹‰å“åº”å¼çš„ å­—ç¬¦ä¸²ã€ æ•°å€¼ã€ æ•°ç»„ã€<code>Bool</code>ç±»å‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import &#123;  </span><br><span class="line">    ref</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&#123;&#123;msg&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;button @click=&quot;updateMsg&quot;&gt;æ”¹å˜etupä¸­çš„msg&lt;/button&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">        &#123;&#123;item&#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line"></span><br><span class="line">    ref</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let msg = ref(&quot;è¿™æ˜¯setupä¸­çš„msg&quot;);</span><br><span class="line"></span><br><span class="line">        let list = ref([&quot;é©¬æ€»&quot;, &quot;ææ€»&quot;, &quot;åˆ˜æ€»&quot;])</span><br><span class="line"></span><br><span class="line">        let updateMsg = () =&gt; &#123;</span><br><span class="line">            alert(&quot;è§¦å‘æ–¹æ³•&quot;);</span><br><span class="line">            msg.value = &quot;æ”¹å˜åçš„å€¼&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg,</span><br><span class="line">            list,</span><br><span class="line">            updateMsg</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.home &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="æ­£ç¡®å†™æ³•äºŒï¼š"><a href="#æ­£ç¡®å†™æ³•äºŒï¼š" class="headerlink" title="æ­£ç¡®å†™æ³•äºŒï¼š"></a><strong>æ­£ç¡®å†™æ³•äºŒï¼š</strong></h5><p><strong>reactive</strong> ç”¨æ¥å®šä¹‰å“åº”å¼çš„å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">    reactive   </span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&#123;&#123;msg&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;button @click=&quot;updateMsg&quot;&gt;æ”¹å˜setupä¸­çš„msg&lt;/button&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">        &#123;&#123;item&#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&#123;&#123;setupData.title&#125;&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;button @click=&quot;updateTitle&quot;&gt;æ›´æ–°setupä¸­çš„title&lt;/button&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    ref</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let msg = ref(&quot;è¿™æ˜¯setupä¸­çš„msg&quot;);</span><br><span class="line"></span><br><span class="line">        let setupData = reactive(&#123;</span><br><span class="line">            title: &quot;reactiveå®šä¹‰å“åº”å¼æ•°æ®çš„title&quot;,</span><br><span class="line">            userinfo: &#123;</span><br><span class="line">                username: &quot;å¼ ä¸‰&quot;,</span><br><span class="line">                age: 20</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        let updateMsg = () =&gt; &#123;</span><br><span class="line">            alert(&quot;è§¦å‘æ–¹æ³•&quot;);</span><br><span class="line">            msg.value = &quot;æ”¹å˜åçš„å€¼&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        let updateTitle = () =&gt; &#123;</span><br><span class="line">            alert(&quot;è§¦å‘æ–¹æ³•&quot;);</span><br><span class="line">            setupData.title = &quot;æˆ‘æ˜¯æ”¹å˜åçš„title&quot;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg,</span><br><span class="line">            setupData,</span><br><span class="line">            updateMsg,</span><br><span class="line">            updateTitle</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.home &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>**è¯´æ˜:**è¦æ”¹å˜refå®šä¹‰çš„å±æ€§åç§°éœ€è¦é€šè¿‡ <code>å±æ€§åç§°.value</code>æ¥ä¿®æ”¹ï¼Œè¦æ”¹å˜<code>reactive</code>ä¸­å®šä¹‰çš„å¯¹è±¡åç§°å¯ä»¥ç›´æ¥</p>
<h3 id="5-ä½¿ç”¨-this"><a href="#5-ä½¿ç”¨-this" class="headerlink" title="5. ä½¿ç”¨ this"></a>5. ä½¿ç”¨ <code>this</code></h3><blockquote>
<p><strong>åœ¨ <code>setup()</code> å†…éƒ¨ï¼Œ<code>this</code> ä¸ä¼šæ˜¯è¯¥æ´»è·ƒå®ä¾‹çš„å¼•ç”¨</strong>ï¼Œå› ä¸º <code>setup()</code> æ˜¯åœ¨è§£æå…¶å®ƒç»„ä»¶é€‰é¡¹ä¹‹å‰è¢«è°ƒç”¨çš„ï¼Œæ‰€ä»¥ <code>setup()</code> å†…éƒ¨çš„ <code>this</code> çš„è¡Œä¸ºä¸å…¶å®ƒé€‰é¡¹ä¸­çš„ <code>this</code> å®Œå…¨ä¸åŒã€‚è¿™åœ¨å’Œå…¶å®ƒé€‰é¡¹å¼ API ä¸€èµ·ä½¿ç”¨ <code>setup()</code> æ—¶å¯èƒ½ä¼šå¯¼è‡´æ··æ·†</p>
</blockquote>
<h2 id="äºŒã€toRefs-è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®"><a href="#äºŒã€toRefs-è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®" class="headerlink" title="äºŒã€toRefs - è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®"></a>äºŒã€toRefs - è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®</h2><blockquote>
<p>æŠŠä¸€ä¸ªå“åº”å¼å¯¹è±¡è½¬æ¢æˆæ™®é€šå¯¹è±¡ï¼Œè¯¥æ™®é€šå¯¹è±¡çš„æ¯ä¸ª <code>property</code> éƒ½æ˜¯ä¸€ä¸ª <code>ref</code> ï¼Œå’Œå“åº”å¼å¯¹è±¡ <code>property</code> ä¸€ä¸€å¯¹åº”</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Username: &#123;&#123;username&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Age: &#123;&#123;age&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    toRefs</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const user = reactive(&#123;</span><br><span class="line">            username: &quot;å¼ ä¸‰&quot;,</span><br><span class="line">            age: 10000,</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            ...toRefs(user)</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å½“æƒ³è¦ä»ä¸€ä¸ªç»„åˆé€»è¾‘å‡½æ•°ä¸­è¿”å›å“åº”å¼å¯¹è±¡æ—¶ï¼Œç”¨ toRefs æ˜¯å¾ˆæœ‰æ•ˆçš„ï¼Œè¯¥ API è®©æ¶ˆè´¹ç»„ä»¶å¯ä»¥ è§£æ„ &#x2F; æ‰©å±•ï¼ˆä½¿ç”¨ <code>â€¦</code>æ“ä½œç¬¦ï¼‰è¿”å›çš„å¯¹è±¡ï¼Œå¹¶ä¸ä¼šä¸¢å¤±å“åº”æ€§ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">function useFeatureX() &#123;</span><br><span class="line">  const state = reactive(&#123;</span><br><span class="line">    foo: 1,</span><br><span class="line">    bar: 2,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // å¯¹ state çš„é€»è¾‘æ“ä½œ</span><br><span class="line">  // ....</span><br><span class="line"></span><br><span class="line">  // è¿”å›æ—¶å°†å±æ€§éƒ½è½¬ä¸º ref</span><br><span class="line">  return toRefs(state)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // å¯ä»¥è§£æ„ï¼Œä¸ä¼šä¸¢å¤±å“åº”æ€§</span><br><span class="line">    const &#123; foo, bar &#125; = useFeatureX()</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      foo,</span><br><span class="line">      bar,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€computed-è®¡ç®—å±æ€§"><a href="#ä¸‰ã€computed-è®¡ç®—å±æ€§" class="headerlink" title="ä¸‰ã€computed - è®¡ç®—å±æ€§"></a>ä¸‰ã€computed - è®¡ç®—å±æ€§</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®+computed&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;firstName&quot; placeholder=&quot;firstName&quot; /&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;lastName&quot; placeholder=&quot;lastName&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &#123;&#123;fullName&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    toRefs,</span><br><span class="line">    computed</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;è§£æ„å“åº”å¼å¯¹è±¡æ•°æ®&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const user = reactive(&#123;</span><br><span class="line">            firstName: &quot;&quot;,</span><br><span class="line">            lastName: &quot;&quot;,</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        const fullName = computed(() =&gt; &#123;</span><br><span class="line">            return user.firstName + &quot; &quot; + user.lastName</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            ...toRefs(user),</span><br><span class="line">            fullName</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€readonly-â€œæ·±å±‚â€çš„åªè¯»ä»£ç†"><a href="#å››ã€readonly-â€œæ·±å±‚â€çš„åªè¯»ä»£ç†" class="headerlink" title="å››ã€readonly â€œæ·±å±‚â€çš„åªè¯»ä»£ç†"></a>å››ã€readonly â€œæ·±å±‚â€çš„åªè¯»ä»£ç†</h2><blockquote>
<p>ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ˆå“åº”å¼æˆ–æ™®é€šï¼‰æˆ– refï¼Œè¿”å›ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„åªè¯»ä»£ç†ã€‚ä¸€ä¸ªåªè¯»çš„ä»£ç†æ˜¯â€œæ·±å±‚çš„â€ï¼Œå¯¹è±¡å†…éƒ¨ä»»ä½•åµŒå¥—çš„å±æ€§ä¹Ÿéƒ½æ˜¯åªè¯»çš„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;readonly - â€œæ·±å±‚â€çš„åªè¯»ä»£ç†&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;original.count: &#123;&#123;original.count&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;copy.count: &#123;&#123;copy.count&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, readonly &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Readonly&quot;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const original = reactive(&#123; count: 0 &#125;);</span><br><span class="line">    const copy = readonly(original);</span><br><span class="line"></span><br><span class="line">    setInterval(() =&gt; &#123;</span><br><span class="line">      original.count++;</span><br><span class="line">      copy.count++; // æŠ¥è­¦å‘Šï¼ŒSet operation on key &quot;count&quot; failed: target is readonly. Proxy &#123;count: 1&#125;</span><br><span class="line">    &#125;, 1000);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return &#123; original, copy &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€watchEffect"><a href="#äº”ã€watchEffect" class="headerlink" title="äº”ã€watchEffect"></a>äº”ã€watchEffect</h2><blockquote>
<p>åœ¨å“åº”å¼åœ°è·Ÿè¸ªå…¶ä¾èµ–é¡¹æ—¶ç«‹å³è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨æ›´æ”¹ä¾èµ–é¡¹æ—¶é‡æ–°è¿è¡Œå®ƒã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;watchEffect - ä¾¦å¬å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123;data.count&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;stop&quot;&gt;æ‰‹åŠ¨å…³é—­ä¾¦å¬å™¨&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    watchEffect</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;WatchEffect&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const data = reactive(&#123;</span><br><span class="line">            count: 1,</span><br><span class="line">            num: 1</span><br><span class="line">        &#125;);</span><br><span class="line">        const stop = watchEffect(() =&gt; console.log(`ä¾¦å¬å™¨ï¼š$&#123;data.count&#125;`));</span><br><span class="line">        setInterval(() =&gt; &#123;</span><br><span class="line">            data.count++;</span><br><span class="line">        &#125;, 1000);</span><br><span class="line">        return &#123;</span><br><span class="line">            data,</span><br><span class="line">            stop</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€watch-ã€watch-ä¸watchEffectåŒºåˆ«"><a href="#å…­ã€watch-ã€watch-ä¸watchEffectåŒºåˆ«" class="headerlink" title="å…­ã€watch ã€watch ä¸watchEffectåŒºåˆ«"></a>å…­ã€watch ã€watch ä¸watchEffectåŒºåˆ«</h2><p>å¯¹æ¯”<code>watchEffect</code>ï¼Œ**<code>watch</code>å…è®¸æˆ‘ä»¬**ï¼š</p>
<ul>
<li>æ‡’æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ä»…åœ¨ä¾¦å¬çš„æºå˜æ›´æ—¶æ‰æ‰§è¡Œå›è°ƒï¼›</li>
<li>æ›´æ˜ç¡®å“ªäº›çŠ¶æ€çš„æ”¹å˜ä¼šè§¦å‘ä¾¦å¬å™¨é‡æ–°è¿è¡Œï¼›</li>
<li>è®¿é—®ä¾¦å¬çŠ¶æ€å˜åŒ–å‰åçš„å€¼</li>
</ul>
<p><strong>æ›´æ˜ç¡®å“ªäº›çŠ¶æ€çš„æ”¹å˜ä¼šè§¦å‘ä¾¦å¬å™¨é‡æ–°è¿è¡Œ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;watch - ä¾¦å¬å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;count1: &#123;&#123;data.count1&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;count2: &#123;&#123;data.count2&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;stopAll&quot;&gt;Stop All&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    reactive,</span><br><span class="line">    watch</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;Watch&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const data = reactive(&#123;</span><br><span class="line">            count1: 0,</span><br><span class="line">            count2: 0</span><br><span class="line">        &#125;);</span><br><span class="line">        // ä¾¦å¬å•ä¸ªæ•°æ®æº</span><br><span class="line">        const stop1 = watch(data, () =&gt;</span><br><span class="line">            console.log(&quot;watch1&quot;, data.count1, data.count2)</span><br><span class="line">        );</span><br><span class="line">        // ä¾¦å¬å¤šä¸ªæ•°æ®æº</span><br><span class="line">        const stop2 = watch([data], () =&gt; &#123;</span><br><span class="line">            console.log(&quot;watch2&quot;, data.count1, data.count2);</span><br><span class="line">        &#125;);</span><br><span class="line">        setInterval(() =&gt; &#123;</span><br><span class="line">            data.count1++;</span><br><span class="line">        &#125;, 1000);</span><br><span class="line">        return &#123;</span><br><span class="line">            data,</span><br><span class="line">            stopAll: () =&gt; &#123;</span><br><span class="line">                stop1();</span><br><span class="line">                stop2();</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>è®¿é—®ä¾¦å¬çŠ¶æ€å˜åŒ–å‰åçš„å€¼</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;watch - ä¾¦å¬å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;keywords&quot; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    ref,</span><br><span class="line">    watch</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;Watch&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let keywords = ref(&quot;111&quot;);</span><br><span class="line">        // ä¾¦å¬å•ä¸ªæ•°æ®æº</span><br><span class="line">        watch(keywords, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">            console.log(newValue, oldValue)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            keywords</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>æ‡’æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ä»…åœ¨ä¾¦å¬çš„æºå˜æ›´æ—¶æ‰æ‰§è¡Œå›è°ƒ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;watch - ä¾¦å¬å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;num1=&#123;&#123;num1&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;num2=&#123;&#123;num2&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">    ref,</span><br><span class="line">    watch,</span><br><span class="line">    watchEffect</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;Watch&quot;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let num1 = ref(10);</span><br><span class="line">        let num2 = ref(10);</span><br><span class="line">        // ä¾¦å¬å•ä¸ªæ•°æ®æº</span><br><span class="line">        watch(num1, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">            console.log(newValue, oldValue)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        watchEffect(() =&gt; console.log(`watchEffectä¾¦å¬å™¨ï¼š$&#123;num2.value&#125;`));</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            num1,</span><br><span class="line">            num2</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€ç»„åˆå¼apiç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#ä¸ƒã€ç»„åˆå¼apiç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="ä¸ƒã€ç»„åˆå¼apiç”Ÿå‘½å‘¨æœŸé’©å­"></a>ä¸ƒã€ç»„åˆå¼apiç”Ÿå‘½å‘¨æœŸé’©å­</h2><p>ä½ å¯ä»¥é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­å‰é¢åŠ ä¸Š â€œonâ€ æ¥è®¿é—®ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</p>
<p>ä¸‹è¡¨åŒ…å«å¦‚ä½•åœ¨ <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-setup.html">setup ()</a> å†…éƒ¨è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š</p>
<table>
<thead>
<tr>
<th align="left">é€‰é¡¹å¼ API</th>
<th align="left">Hook inside <code>setup</code></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>beforeCreate</code></td>
<td align="left">ä¸éœ€è¦*</td>
</tr>
<tr>
<td align="left"><code>created</code></td>
<td align="left">ä¸éœ€è¦*</td>
</tr>
<tr>
<td align="left"><code>beforeMount</code></td>
<td align="left"><code>onBeforeMount</code></td>
</tr>
<tr>
<td align="left"><code>mounted</code></td>
<td align="left"><code>onMounted</code></td>
</tr>
<tr>
<td align="left"><code>beforeUpdate</code></td>
<td align="left"><code>onBeforeUpdate</code></td>
</tr>
<tr>
<td align="left"><code>updated</code></td>
<td align="left"><code>onUpdated</code></td>
</tr>
<tr>
<td align="left"><code>beforeUnmount</code></td>
<td align="left"><code>onBeforeUnmount</code></td>
</tr>
<tr>
<td align="left"><code>unmounted</code></td>
<td align="left"><code>onUnmounted</code></td>
</tr>
<tr>
<td align="left"><code>errorCaptured</code></td>
<td align="left"><code>onErrorCaptured</code></td>
</tr>
<tr>
<td align="left"><code>renderTracked</code></td>
<td align="left"><code>onRenderTracked</code></td>
</tr>
<tr>
<td align="left"><code>renderTriggered</code></td>
<td align="left"><code>onRenderTriggered</code></td>
</tr>
</tbody></table>
<blockquote>
<p>å› ä¸º <code>setup</code> æ˜¯å›´ç»• <code>beforeCreate</code> å’Œ <code>created</code> ç”Ÿå‘½å‘¨æœŸé’©å­è¿è¡Œçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼åœ°å®šä¹‰å®ƒä»¬ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨è¿™äº›é’©å­ä¸­ç¼–å†™çš„ä»»ä½•ä»£ç éƒ½åº”è¯¥ç›´æ¥åœ¨ <code>setup</code> å‡½æ•°ä¸­ç¼–å†™</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // mounted</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;Component is mounted!&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€Provider-Inject"><a href="#å…«ã€Provider-Inject" class="headerlink" title="å…«ã€Provider Inject"></a>å…«ã€Provider Inject</h2><p>é€šå¸¸ï¼Œå½“æˆ‘ä»¬éœ€è¦å°†æ•°æ®ä»çˆ¶ç»„ä»¶ä¼ é€’åˆ°å­ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/component-props.html">props</a>ã€‚æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„ç»“æ„ï¼šä½ æœ‰ä¸€äº›æ·±åµŒå¥—çš„ç»„ä»¶ï¼Œè€Œä½ åªéœ€è¦æ¥è‡ªæ·±åµŒå¥—å­ç»„ä»¶ä¸­çˆ¶ç»„ä»¶çš„æŸäº›å†…å®¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å°† prop ä¼ é€’åˆ°æ•´ä¸ªç»„ä»¶é“¾ä¸­ï¼Œè¿™å¯èƒ½ä¼šå¾ˆçƒ¦äºº</p>
<blockquote>
<p>å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>provide</code> å’Œ <code>inject</code> å¯¹çˆ¶ç»„ä»¶å¯ä»¥ä½œä¸ºå…¶æ‰€æœ‰å­ç»„ä»¶çš„ä¾èµ–é¡¹æä¾›ç¨‹åºï¼Œè€Œä¸ç®¡ç»„ä»¶å±‚æ¬¡ç»“æ„æœ‰å¤šæ·±ã€‚è¿™ä¸ªç‰¹æ€§æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª <code>provide</code> é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œå­ç»„ä»¶æœ‰ä¸€ä¸ª <code>inject</code> é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™ä¸ªæ•°æ®</p>
</blockquote>
<h3 id="1-éç»„åˆå¼apiä¸­çš„å†™æ³•"><a href="#1-éç»„åˆå¼apiä¸­çš„å†™æ³•" class="headerlink" title="1. éç»„åˆå¼apiä¸­çš„å†™æ³•"></a>1. <strong>éç»„åˆå¼apiä¸­çš„å†™æ³•</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- src/components/MyMap.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;MyMarker /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyMarker from &#x27;./MyMarker.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyMarker</span><br><span class="line">  &#125;,</span><br><span class="line">  provide: &#123;</span><br><span class="line">    location: &#x27;North Pole&#x27;,</span><br><span class="line">    geolocation: &#123;</span><br><span class="line">      longitude: 90,</span><br><span class="line">      latitude: 135</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- src/components/MyMarker.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  inject: [&#x27;location&#x27;, &#x27;geolocation&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-ç»„åˆå¼apiä¸­çš„å†™æ³•"><a href="#2-ç»„åˆå¼apiä¸­çš„å†™æ³•" class="headerlink" title="2. ç»„åˆå¼apiä¸­çš„å†™æ³•"></a>2. <strong>ç»„åˆå¼apiä¸­çš„å†™æ³•</strong></h3><h5 id="Providerï¼š"><a href="#Providerï¼š" class="headerlink" title="Providerï¼š"></a>Providerï¼š</h5><blockquote>
<p>åœ¨ <code>setup()</code> ä¸­ä½¿ç”¨ <code>provide</code> æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆä» <code>vue</code> æ˜¾å¼å¯¼å…¥ <code>provide</code> æ–¹æ³•ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿè°ƒç”¨ <code>provide</code> æ—¶æ¥å®šä¹‰æ¯ä¸ª <code>property</code></p>
</blockquote>
<p><code>provide</code> å‡½æ•°å…è®¸ä½ é€šè¿‡ä¸¤ä¸ªå‚æ•°å®šä¹‰ <code>property</code>ï¼š</p>
<ol>
<li><code>property</code> çš„ <code>name</code> (&#96;&#96; ç±»å‹)</li>
<li><code>property</code> çš„ <code>value</code></li>
</ol>
<p>ä½¿ç”¨ <code>MyMap</code> ç»„ä»¶ï¼Œæˆ‘ä»¬æä¾›çš„å€¼å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼é‡æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- src/components/MyMap.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;MyMarker /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; provide &#125; from &#x27;vue&#x27;</span><br><span class="line">import MyMarker from &#x27;./MyMarker.vue</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyMarker</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    provide(&#x27;location&#x27;, &#x27;North Pole&#x27;)</span><br><span class="line">    provide(&#x27;geolocation&#x27;, &#123;</span><br><span class="line">      longitude: 90,</span><br><span class="line">      latitude: 135</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="Inject"><a href="#Inject" class="headerlink" title="Inject:"></a>Inject:</h5><blockquote>
<p>åœ¨ <code>setup()</code> ä¸­ä½¿ç”¨ <code>inject</code> æ—¶ï¼Œè¿˜éœ€è¦ä» <code>vue</code> æ˜¾å¼å¯¼å…¥å®ƒã€‚ä¸€æ—¦æˆ‘ä»¬è¿™æ ·åšäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨å®ƒæ¥å®šä¹‰å¦‚ä½•å°†å®ƒæš´éœ²ç»™æˆ‘ä»¬çš„ç»„ä»¶ã€‚</p>
</blockquote>
<p><code>inject</code> å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>è¦æ³¨å…¥çš„ <code>property</code> çš„åç§°</li>
<li>ä¸€ä¸ªé»˜è®¤çš„å€¼ (<strong>å¯é€‰</strong>)</li>
</ol>
<p>ä½¿ç”¨ <code>MyMarker</code> ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç å¯¹å…¶è¿›è¡Œé‡æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- src/components/MyMarker.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const userLocation = inject(&#x27;location&#x27;, &#x27;The Universe&#x27;)</span><br><span class="line">    const userGeolocation = inject(&#x27;geolocation&#x27;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      userLocation,</span><br><span class="line">      userGeolocation</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>Provider Inject å“åº”æ€§</strong></p>
<p><strong>çˆ¶ç»„ä»¶ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">    provide,</span><br><span class="line">    ref,</span><br><span class="line">    reactive</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">setup() &#123;</span><br><span class="line">        const location = ref(&#x27;åŒ—äº¬&#x27;)</span><br><span class="line">        const geolocation = reactive(&#123;</span><br><span class="line">            longitude: 90,</span><br><span class="line">            latitude: 135</span><br><span class="line">        &#125;)</span><br><span class="line">        const updateLocation = () =&gt; &#123;</span><br><span class="line">            location.value = &#x27;ä¸Šæµ·&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">        provide(&#x27;location&#x27;, location);</span><br><span class="line">        provide(&#x27;geolocation&#x27;, geolocation);</span><br><span class="line">        return &#123;</span><br><span class="line">            updateLocation</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;button @click=&quot;updateLocation&quot;&gt;æ”¹å˜location&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p><strong>å­ç»„ä»¶ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const userLocation = inject(&#x27;location&#x27;, &#x27;The Universe&#x27;)</span><br><span class="line">    const userGeolocation = inject(&#x27;geolocation&#x27;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      userLocation,</span><br><span class="line">      userGeolocation</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
        
    </article>
    <footer class="cube-excerpt-footer">
        <a class="cube-excerpt-more" href="/2021/09/14/Vue/vue3-Composition%20API%E8%AF%A6%E8%A7%A3/">Read More</a>
    </footer>
</div>



<ul class="cube-pagination cube-pagination-9">
    
    <li class="cube-pagination-prev">
        <a href="/">Â« Prev</a>
    </li>
    
    
        
            
                
                <li class="cube-pagination-index">
                    <a href="/">1</a>
                </li>
                
            
                
                <li class="cube-pagination-index disabled">
                    <span>2</span>
                </li>
                
            
                
                <li class="cube-pagination-index">
                    <a href="/page/3">3</a>
                </li>
                
            
                
                <li class="cube-pagination-index">
                    <a href="/page/4">4</a>
                </li>
                
            
                <li class="cube-pagination-ellipses">
                    <span>...</span>
                </li>
                <li class="cube-pagination-index">
                    <a href="/page/19">19</a>
                </li>
        
    

    
    <li class="cube-pagination-next">
        <a href="/page/3/">Next Â»</a>
    </li>
    
</ul>

<!--å…¶ä»–ç»„ä»¶åç»­æ·»åŠ -->
        </div>
        <div class="cube-right">
            

<div class="cube-search cube-sidebar" id="cube-search">
    <div class="search-container">
        <input type="text" placeholder="Search" class="cube-search-input" id="cube-search-input">
        <i class="cube-icon cube-icon-search cube-search-submit" aria-hidden="true"></i>
    </div>
    <!-- TODO é€šè¿‡ç»™windowèµ‹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé€šè¿‡è„šæœ¬èµ‹å€¼ -->
</div>
<script>
    (function (window) {
        'use strict';
        window.searchModule = {}
        window.searchModule.JSONUrl = '/content.json'
        window.searchModule.rootUrl = '/'
    })(window)
</script>
<div class="cube-search-form">
    <div class="cube-search-control">
        <input type="text" placeholder="Search" class="search-input">
        <a class="close-button">
            <i class="cube-icon cube-close" aria-hidden="true"></i>
        </a>
    </div>
    <div class="cube-search-result"></div>
</div>


<div class="cube-author cube-sidebar" id="cube-author">
    
    
    <span>John Doe</span>
    
    
    <div class="count">
        <a class="count articles"><span>186</span>Article</a>
        <a class="count tags"><span>35</span>Tags</a>
        <a class="count categories"><span>23</span>Categories</a>
    </div>
</div>



<div class="cube-music cube-sidebar" id="cube-music">
    <div class="cube-player aplayer" id="cube-player"></div>
</div>
<script>
    (function (window) {
        window.musicModule = {}
        window.musicModule.musicConfig = '{"narrow":false,"autoplay":false,"showlrc":3,"theme":"#b7daff","mutex":true,"mode":"circulation","preload":"auto","listmaxheight":"513px","music":[{"title":"Dear friends","author":"TRIPLANE","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/TRIPLANE - Dear friends.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Dear friends - TRIPLANE.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/TRIPLANE - Dear friends.jpg"},{"title":"Butter-Fly","author":"å’Œç”°å…‰å¸","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³) - å’Œç”°å…‰å¸.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/å’Œç”°å…‰å¸ - Butter-Fly (ãƒ”ã‚¢ãƒãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³).jpg"},{"title":"å®µé—‡èŠ±ç«","author":"è‘‰æœˆã‚†ã‚‰","url":"http://cube-1252774894.cosgz.myqcloud.com/music/source/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.mp3","lrc":"http://cube-1252774894.cosgz.myqcloud.com/music/lrc/å®µé—‡èŠ±ç« - è‘‰æœˆã‚†ã‚‰.lrc","pic":"http://cube-1252774894.cosgz.myqcloud.com/music/image/è‘‰æœˆã‚†ã‚‰ - å®µé—‡èŠ±ç«.jpg"}]}'
        window.musicModule.lrcConfig = {
            open: 'Open Lyrics',
            close: 'Close Lyrics'
        }
    })(window)
</script>



<div class="cube-recent-posts cube-sidebar" id="cube-recent-posts">
    <div class="title">
        <a>Recent Posts</a>
    </div>
    <ul class="list">
        
        
        <li>
            <!-- TODO å¦‚æœæ–‡ç« è¦æ˜¾ç¤ºå›¾ç‰‡ï¼Œé‚£ä¹ˆåœ¨front-matterä¸Šæ·»åŠ previewå±æ€§(url or path) -->
            
            <div class="normal">
                <p class="index first">
                    <span>1</span>
                </p>
                <p class="title">
                    <a href="/2022/08/25/Js%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="å˜é‡ç±»å‹">å˜é‡ç±»å‹</a>
                </p>
            </div>
            
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>2</span>
                </p>
                <p class="title">
                    <a href="/2022/07/15/bug/echarts%E5%9B%BE%E6%A0%87%E8%87%AA%E9%80%82%E5%BA%94%E6%96%B9%E6%B3%95/" title="echartså›¾æ ‡è‡ªé€‚åº”æ–¹æ³•">echartså›¾æ ‡è‡ªé€‚åº”æ–¹æ³•</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>3</span>
                </p>
                <p class="title">
                    <a href="/2022/07/15/bug/a01/" title="æµè§ˆå™¨å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹">æµè§ˆå™¨å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>4</span>
                </p>
                <p class="title">
                    <a href="/2022/06/09/html+css+js+ts/3-js%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C%E5%AE%9E%E4%BE%8B/" title="js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹">js-å¸¸ç”¨ä»£ç æ“ä½œå®ä¾‹</a>
                </p>
            </div>
        </li>
        
        
        
        <li>
            <div class="normal">
                <p class="index">
                    <span>5</span>
                </p>
                <p class="title">
                    <a href="/2022/05/28/html+css+js+ts/1-%E9%9F%B3%E8%A7%86%E9%A2%91/" title="html-åŸç”ŸéŸ³è§†é¢‘">html-åŸç”ŸéŸ³è§†é¢‘</a>
                </p>
            </div>
        </li>
        
        
    </ul>
</div>



<div class="cube-categories cube-sidebar" id="cube-categories">
    <div class="title">
        <a href="/categories">Categories</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/categories/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/React/">#React</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">#æ•°æ®å¯è§†åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">#æ¶æ„æ¨¡å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%9F%B3%E8%A7%86%E9%A2%91/">#éŸ³è§†é¢‘</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%89%8D%E7%AB%AF/%E9%97%AE%E9%A2%98/">#é—®é¢˜</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/">#åç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E6%A1%86%E6%9E%B6/">#æ¡†æ¶</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%90%8E%E7%AB%AF/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">#å‰ç«¯å·¥ç¨‹åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%B7%A5%E5%85%B7/">#å·¥å…·</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">#å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">#æ•°æ®åº“</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/categories/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/liunx/">#liunx</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-tagcloud cube-sidebar" id="cube-tagcloud">
    <div class="title">
        <a href="/tags">Tagcloud</a>
    </div>
    <div class="cube-boxs">
        
        
        <div class="cube-box ">
            <a href="/tags/http/">#http</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vue/">#vue</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/React/">#React</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Redux/">#Redux</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/echart/">#echart</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/vue3/">#vue3</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/react/">#react</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/html/">#html</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/xml/">#xml</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">#ç§»åŠ¨ç«¯</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/css/">#css</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/javascript/">#javascript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Promise/">#Promise</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/es6/">#es6</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/typescript/">#typescript</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/async-await/">#async/await</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nodejs/">#nodejs</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">#å°ç¨‹åº</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/python/">#python</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/glup/">#glup</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/webpack/">#webpack</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E5%89%8D%E7%AB%AF/">#å‰ç«¯</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/git/">#git</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/Mock/">#Mock</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/eslint/">#eslint</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/RESTful/">#RESTful</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/hexo/">#hexo</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/vs-code/">#vs code</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">#æ­£åˆ™è¡¨è¾¾å¼</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/%E4%BC%98%E5%8C%96/">#ä¼˜åŒ–</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mongodb/">#mongodb</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/mysql/">#mysql</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/%E7%AE%97%E6%B3%95/">#ç®—æ³•</a>
        </div>
        
        
        <div class="cube-box ">
            <a href="/tags/nginx/">#nginx</a>
        </div>
        
        
        <div class="cube-box-bg ">
            <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
        </div>
        
    </div>
</div>



<div class="cube-links cube-sidebar" id="cube-links">
    <div class="title">
        <a>Links</a>
    </div>
    <ul class="list">
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/GitHub.png">
            
            <a href="https://github.com/ZEROKISEKI" target="_blank">GitHub</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/Coding.png">
            
            <a href="https://coding.net/u/SORA1" target="_blank">Coding</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/SF.png">
            
            <a href="https://segmentfault.com/u/aonosora" target="_blank">SFç¤¾åŒº</a>
        </li>
        
        <li>
            
            
            <img src="http://cube-1252774894.cosgz.myqcloud.com/links/å¼€å‘è€…å¤´æ¡.png">
            
            <a href="https://toutiao.io/u/148070" target="_blank">å¼€å‘è€…å¤´æ¡</a>
        </li>
        
    </ul>
</div>



<div class="cube-friend-links cube-sidebar" id="cube-friend-links">
    <div class="title">
        <a>Friend Links</a>
    </div>
    <ul class="list">
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/micblo.png">
            <a href="https://blog.micblo.com/" target="_blank">ç½—å¤§ä½¬</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="http://cube-1252774894.cosgz.myqcloud.com/friend_links/DIYgod.jpg">
            <a href="https://www.anotherhome.net/" target="_blank">DIYgod</a>
        </li>
        
        <li>
            <!-- TODO change avatar.png to friend.png-->
            <img src="/images/friend_links.jpg ">
            <a href="https://aonosora.com/" target="_blank">å’ªè¥¿è¥¿ã®éƒ¨è½æ ¼</a>
        </li>
        
    </ul>
</div>


        </div>
    </div>
</div>
<footer class="cube-footer">
    
Â© 2017 John Doe

<br>
Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
</footer>
<!-- inject:script -->
<script src="/js/script.js"></script>
<!-- endinject -->
<div class="cube-loading out"></div>
</body>
</html>